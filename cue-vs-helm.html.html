<!DOCTYPE html><html lang="zh-CN"><head><meta name="viewport" content="width=device-width"/><title>再见 Helm，你好 CUE</title><meta name="robots" content="follow, index"/><meta charSet="UTF-8"/><meta name="keywords" content="Blog, Notion, Tech, Python, Django"/><meta name="description" content="长江后浪推前浪"/><meta property="og:locale" content="zh-CN"/><meta property="og:title" content="再见 Helm，你好 CUE"/><meta property="og:description" content="长江后浪推前浪"/><meta property="og:url" content="https://next.emergencyexit.xyz/"/><meta property="og:image" content="https://og-image-craigary.vercel.app/%E5%86%8D%E8%A7%81%20Helm%EF%BC%8C%E4%BD%A0%E5%A5%BD%20CUE.png?theme=dark&amp;md=1&amp;fontSize=125px&amp;images=https%3A%2F%2Fnobelium.vercel.app%2Flogo-for-dark-bg.svg"/><meta property="og:type" content="article"/><meta name="twitter:card" content="summary_large_image"/><meta name="twitter:description" content="长江后浪推前浪"/><meta name="twitter:title" content="再见 Helm，你好 CUE"/><meta name="twitter:image" content="https://og-image-craigary.vercel.app/%E5%86%8D%E8%A7%81%20Helm%EF%BC%8C%E4%BD%A0%E5%A5%BD%20CUE.png?theme=dark&amp;md=1&amp;fontSize=125px&amp;images=https%3A%2F%2Fnobelium.vercel.app%2Flogo-for-dark-bg.svg"/><meta property="article:published_time"/><meta property="article:author" content="bluesyu"/><meta name="next-head-count" content="18"/><link rel="preload" href="/fonts/IBMPlexSansVar-Roman.woff2" as="font" type="font/woff2" crossorigin="anonymous"/><link rel="preload" href="/fonts/IBMPlexSansVar-Italic.woff2" as="font" type="font/woff2" crossorigin="anonymous"/><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="anonymous"/><link rel="preload" as="style" data-href="https://fonts.googleapis.com/css2?family=Noto+Sans+SC:wght@400;500;700&amp;display=swap"/><link rel="stylesheet" data-href="https://fonts.googleapis.com/css2?family=Noto+Sans+SC:wght@400;500;700&amp;display=swap"/><noscript><link rel="stylesheet" data-href="https://fonts.googleapis.com/css2?family=Noto+Sans+SC:wght@400;500;700&amp;display=swap"/></noscript><link rel="icon" href="/favicon.svg" type="image/svg+xml"/><link rel="icon" href="/favicon.ico"/><link rel="apple-touch-icon" sizes="192x192" href="/apple-touch-icon.png"/><link rel="alternate" type="application/rss+xml" title="RSS 2.0" href="/feed"/><meta name="theme-color" content="#ffffff" media="(prefers-color-scheme: light)"/><meta name="theme-color" content="#18181B" media="(prefers-color-scheme: dark)"/><link rel="preload" href="/_next/static/css/8e8bd7c50b2739f5.css" as="style"/><link rel="stylesheet" href="/_next/static/css/8e8bd7c50b2739f5.css" data-n-g=""/><link rel="preload" href="/_next/static/css/6a5815369e10547f.css" as="style"/><link rel="stylesheet" href="/_next/static/css/6a5815369e10547f.css" data-n-p=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-5cd94c89d3acac5f.js"></script><script src="/_next/static/chunks/webpack-c0a56147c8fcef8f.js" defer=""></script><script src="/_next/static/chunks/main-e557dee8cfeafd6c.js" defer=""></script><script src="/_next/static/chunks/pages/_app-6b8bcc68cb80bb32.js" defer=""></script><script src="/_next/static/chunks/b5f2ed29-08db60af0c3043ba.js" defer=""></script><script src="/_next/static/chunks/684-63c1a25e215d8bed.js" defer=""></script><script src="/_next/static/chunks/580-c0214944b9e37cce.js" defer=""></script><script src="/_next/static/chunks/pages/%5Bslug%5D-03011df04807c853.js" defer=""></script><script src="/_next/static/8EjONj3sZ9pYeoX4INcSV/_buildManifest.js" defer=""></script><script src="/_next/static/8EjONj3sZ9pYeoX4INcSV/_ssgManifest.js" defer=""></script><script src="/_next/static/8EjONj3sZ9pYeoX4INcSV/_middlewareManifest.js" defer=""></script><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Noto+Sans+SC:wght@400;500;700&display=swap"/></head><body class="bg-day dark:bg-night"><div id="__next" data-reactroot=""><div><div class="wrapper font-sans"><div class="observer-element h-4 md:h-12"></div><div class="sticky-nav m-auto w-full h-6 flex flex-row justify-between items-center mb-2 md:mb-12 py-8 bg-opacity-60 max-w-3xl px-4" id="sticky-nav"><div class="flex items-center"><a aria-label="布鲁斯鱼的妙想天开" href="/"><div class="h-6"><svg width="28" height="28" viewBox="0 0 28 28" fill="none" xmlns="http://www.w3.org/2000/svg"><circle cx="14" cy="14" r="14" class="fill-current text-black dark:text-white"></circle><circle cx="14" cy="14" r="14" fill="url(#paint0_radial)"></circle><circle cx="8" cy="8" r="1.5" fill="white"></circle><defs><radialGradient id="paint0_radial" cx="0" cy="0" r="1" gradientUnits="userSpaceOnUse" gradientTransform="rotate(45) scale(39.598)"><stop stop-color="#3399FF" stop-opacity="0.9"></stop><stop offset="1" stop-color="#FF3399" stop-opacity="0.6"></stop></radialGradient></defs></svg></div></a><p class="ml-2 font-medium text-day dark:text-night header-name">再见 Helm，你好 CUE</p></div><div class="flex-shrink-0"><ul class="flex flex-row"><li class="block ml-4 text-black dark:text-gray-50 nav"><a href="/about">关于</a></li><li class="block ml-4 text-black dark:text-gray-50 nav"><a href="/search">搜索</a></li></ul></div></div><main class="m-auto flex-grow w-full transition-all max-w-3xl px-4"><article><h1 class="font-bold text-3xl text-black dark:text-white">👋<!-- --> <!-- -->再见 Helm，你好 CUE</h1><nav class="flex mt-7 items-start text-gray-500 dark:text-gray-400"><div class="flex mb-4"><a href="https://twitter.com/bluesedenyu" class="flex"><span style="box-sizing:border-box;display:inline-block;overflow:hidden;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;position:relative;max-width:100%"><span style="box-sizing:border-box;display:block;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;max-width:100%"><img style="display:block;max-width:100%;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0" alt="" aria-hidden="true" src="data:image/svg+xml,%3csvg%20xmlns=%27http://www.w3.org/2000/svg%27%20version=%271.1%27%20width=%2724%27%20height=%2724%27/%3e"/></span><img alt="bluesyu" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" decoding="async" data-nimg="intrinsic" class="rounded-full" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%"/><noscript><img alt="bluesyu" srcSet="https://gravatar.com/avatar/d54f099771ff5f17709b76693f693e2e?imwidth=32 1x, https://gravatar.com/avatar/d54f099771ff5f17709b76693f693e2e?imwidth=48 2x" src="https://gravatar.com/avatar/d54f099771ff5f17709b76693f693e2e?imwidth=48" decoding="async" data-nimg="intrinsic" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%" class="rounded-full" loading="lazy"/></noscript></span><p class="ml-2 md:block">bluesyu</p></a><span class="block"> / </span></div><div class="mr-2 mb-4 md:ml-0">2021 年 6 月 22 日</div><div class="flex flex-nowrap max-w-full overflow-x-auto article-tags"><a href="/tag/tech"><p class="mr-1 rounded-full px-2 py-1 border leading-none text-sm dark:border-gray-600">tech</p></a><a href="/tag/k8s"><p class="mr-1 rounded-full px-2 py-1 border leading-none text-sm dark:border-gray-600">k8s</p></a><a href="/tag/back-pressure"><p class="mr-1 rounded-full px-2 py-1 border leading-none text-sm dark:border-gray-600">back-pressure</p></a><a href="/tag/helm"><p class="mr-1 rounded-full px-2 py-1 border leading-none text-sm dark:border-gray-600">helm</p></a></div><div> <img src="https://images.unsplash.com/photo-1558234336-b5379131bf43?ixlib=rb-1.2.1&amp;q=85&amp;fm=jpg&amp;crop=entropy&amp;cs=srgb"/> </div></nav><div class="-mt-4"><main class="notion light-mode notion-page notion-block-29fc49e0b5974f2e9d53b7dd247adf4b"><div class="notion-viewport"></div><div class="notion-collection-row"><div class="notion-collection-row-body"><div class="notion-collection-row-property"><div class="notion-collection-column-title"><svg viewBox="0 0 14 14" class="notion-collection-column-title-icon"><path d="M10.889 5.5H3.11v1.556h7.778V5.5zm1.555-4.444h-.777V0H10.11v1.056H3.89V0H2.333v1.056h-.777c-.864 0-1.548.7-1.548 1.555L0 12.5c0 .856.692 1.5 1.556 1.5h10.888C13.3 14 14 13.356 14 12.5V2.611c0-.855-.7-1.555-1.556-1.555zm0 11.444H1.556V3.944h10.888V12.5zM8.556 8.611H3.11v1.556h5.445V8.61z"></path></svg><div class="notion-collection-column-title-body">date</div></div><div class="notion-collection-row-value"><span class="notion-property notion-property-date">Jun 22, 2021</span></div></div><div class="notion-collection-row-property"><div class="notion-collection-column-title"><svg viewBox="0 0 14 14" class="notion-collection-column-title-icon"><path d="M7 4.568a.5.5 0 00-.5-.5h-6a.5.5 0 00-.5.5v1.046a.5.5 0 00.5.5h6a.5.5 0 00.5-.5V4.568zM.5 1a.5.5 0 00-.5.5v1.045a.5.5 0 00.5.5h12a.5.5 0 00.5-.5V1.5a.5.5 0 00-.5-.5H.5zM0 8.682a.5.5 0 00.5.5h11a.5.5 0 00.5-.5V7.636a.5.5 0 00-.5-.5H.5a.5.5 0 00-.5.5v1.046zm0 3.068a.5.5 0 00.5.5h9a.5.5 0 00.5-.5v-1.045a.5.5 0 00-.5-.5h-9a.5.5 0 00-.5.5v1.045z"></path></svg><div class="notion-collection-column-title-body">slug</div></div><div class="notion-collection-row-value"><span class="notion-property notion-property-text">cue-vs-helm.html</span></div></div><div class="notion-collection-row-property"><div class="notion-collection-column-title"><svg viewBox="0 0 14 14" class="notion-collection-column-title-icon"><path d="M7 13A6 6 0 107 1a6 6 0 000 12zM3.751 5.323A.2.2 0 013.909 5h6.182a.2.2 0 01.158.323L7.158 9.297a.2.2 0 01-.316 0L3.751 5.323z"></path></svg><div class="notion-collection-column-title-body">status</div></div><div class="notion-collection-row-value"><span class="notion-property notion-property-select"><div class="notion-property-select-item notion-item-red">Published</div></span></div></div><div class="notion-collection-row-property"><div class="notion-collection-column-title"><svg viewBox="0 0 14 14" class="notion-collection-column-title-icon"><path d="M4 3a1 1 0 011-1h7a1 1 0 110 2H5a1 1 0 01-1-1zm0 4a1 1 0 011-1h7a1 1 0 110 2H5a1 1 0 01-1-1zm0 4a1 1 0 011-1h7a1 1 0 110 2H5a1 1 0 01-1-1zM2 4a1 1 0 110-2 1 1 0 010 2zm0 4a1 1 0 110-2 1 1 0 010 2zm0 4a1 1 0 110-2 1 1 0 010 2z"></path></svg><div class="notion-collection-column-title-body">tags</div></div><div class="notion-collection-row-value"><span class="notion-property notion-property-multi_select"><div class="notion-property-multi_select-item notion-item-orange">tech</div><div class="notion-property-multi_select-item notion-item-brown">k8s</div><div class="notion-property-multi_select-item notion-item-blue">back-pressure</div><div class="notion-property-multi_select-item notion-item-brown">helm</div></span></div></div><div class="notion-collection-row-property"><div class="notion-collection-column-title"><svg viewBox="0 0 14 14" class="notion-collection-column-title-icon"><path d="M7 4.568a.5.5 0 00-.5-.5h-6a.5.5 0 00-.5.5v1.046a.5.5 0 00.5.5h6a.5.5 0 00.5-.5V4.568zM.5 1a.5.5 0 00-.5.5v1.045a.5.5 0 00.5.5h12a.5.5 0 00.5-.5V1.5a.5.5 0 00-.5-.5H.5zM0 8.682a.5.5 0 00.5.5h11a.5.5 0 00.5-.5V7.636a.5.5 0 00-.5-.5H.5a.5.5 0 00-.5.5v1.046zm0 3.068a.5.5 0 00.5.5h9a.5.5 0 00.5-.5v-1.045a.5.5 0 00-.5-.5h-9a.5.5 0 00-.5.5v1.045z"></path></svg><div class="notion-collection-column-title-body">summary</div></div><div class="notion-collection-row-value"><span class="notion-property notion-property-text">长江后浪推前浪</span></div></div><div class="notion-collection-row-property"><div class="notion-collection-column-title"><svg viewBox="0 0 14 14" class="notion-collection-column-title-icon"><path d="M7 13A6 6 0 107 1a6 6 0 000 12zM3.751 5.323A.2.2 0 013.909 5h6.182a.2.2 0 01.158.323L7.158 9.297a.2.2 0 01-.316 0L3.751 5.323z"></path></svg><div class="notion-collection-column-title-body">type</div></div><div class="notion-collection-row-value"><span class="notion-property notion-property-select"><div class="notion-property-select-item notion-item-purple">Post</div></span></div></div></div></div><h3 class="notion-h notion-h2 notion-h-indent-0 notion-block-cee3d36736784353b735b94e70aae135" data-id="cee3d36736784353b735b94e70aae135"><span><div id="cee3d36736784353b735b94e70aae135" class="notion-header-anchor"></div><a class="notion-hash-link" href="#cee3d36736784353b735b94e70aae135" title="什么是 CUE "><svg viewBox="0 0 16 16" width="16" height="16"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><span class="notion-h-title">什么是 CUE </span></span></h3><blockquote class="notion-quote notion-block-93713b54067e4d4d8fd5545ceafef31d">CUE 是一种开源数据验证语言和推理引擎，其根源在于逻辑编程</blockquote><div class="notion-text notion-block-23670d28c3264f668879dc43957ecc39">说实话，我一开始也没看懂这句描述。我们先来看个小例子：</div><div class="notion-row notion-block-cae7abf2157a4a958f807af5d39f5d74"><div class="notion-column notion-block-bdc687866d83412db46e4f4e1e2bf19d" style="width:calc((100% - (2 * min(32px, 4vw))) * 0.33333333333333337)"><div class="notion-text notion-block-5d0d8b148df94f75afc8a87c406f1fd1">Data</div></div><div class="notion-spacer"></div><div class="notion-column notion-block-9590d8c1563e4e47b47a3f5c28213eac" style="width:calc((100% - (2 * min(32px, 4vw))) * 0.33333333333333337)"><div class="notion-text notion-block-5aa9bb2472764b88b56fe7e5e6dc669a">Schema</div></div><div class="notion-spacer"></div><div class="notion-column notion-block-9cd9597644984f859723306e3c59a763" style="width:calc((100% - (2 * min(32px, 4vw))) * 0.3333333333333333)"><div class="notion-text notion-block-03ee002f73a548968ed4c1145a85dda7">CUE</div></div><div class="notion-spacer"></div></div><div class="notion-row notion-block-8c6214435c474c919da623ccf2f0ad43"><div class="notion-column notion-block-36219f7a636c46db92ad53105e6e7e82" style="width:calc((100% - (2 * min(32px, 4vw))) * 0.33333333333333337)"><pre class="notion-code language-json"><code class="language-json"><span class="token literal-property property">moscow</span><span class="token operator">:</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span>    <span class="token string">"Moscow"</span>
  <span class="token literal-property property">pop</span><span class="token operator">:</span>     <span class="token number">11</span><span class="token punctuation">.</span>92M
  <span class="token literal-property property">capital</span><span class="token operator">:</span> <span class="token boolean">true</span>
<span class="token punctuation">}</span></code></pre></div><div class="notion-spacer"></div><div class="notion-column notion-block-a107bd2b6297400194e47487a70a43cd" style="width:calc((100% - (2 * min(32px, 4vw))) * 0.33333333333333337)"><pre class="notion-code language-json"><code class="language-json"><span class="token literal-property property">municipality</span><span class="token operator">:</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span>    string
  <span class="token literal-property property">pop</span><span class="token operator">:</span>     int
  <span class="token literal-property property">capital</span><span class="token operator">:</span> bool
<span class="token punctuation">}</span></code></pre></div><div class="notion-spacer"></div><div class="notion-column notion-block-1cc796762de7497a964b3a198fc0e0c8" style="width:calc((100% - (2 * min(32px, 4vw))) * 0.3333333333333333)"><pre class="notion-code language-json"><code class="language-json"><span class="token literal-property property">largeCapital</span><span class="token operator">:</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span>    string
  <span class="token literal-property property">pop</span><span class="token operator">:</span>     <span class="token operator">></span>5M
  <span class="token literal-property property">capital</span><span class="token operator">:</span> <span class="token boolean">true</span>
<span class="token punctuation">}</span></code></pre></div><div class="notion-spacer"></div></div><div class="notion-text notion-block-b27f8ba6b225468d86d2df217ce99943">在定义 JSON 数据时，我们通常会将 Data 和 Schema 分开处理。而 CUE 则将二者结合在一起，既可以指定数据字段类型，也可以直接填写具体值，也就是 CUE 并不会特意地区分 “类型” 和 “值”， <code class="notion-inline-code">string</code> 和 <code class="notion-inline-code">&quot;Moscow&quot;</code> 都会被当作值 ，但是二者之间有包含的先后顺序，在这里 <code class="notion-inline-code">&quot;Moscow&quot;</code> 可以背归纳于 <code class="notion-inline-code">string</code> 的一种，那么 <code class="notion-inline-code">string</code> 在格(lattice)中会优先于 <code class="notion-inline-code">&quot;Moscow&quot;</code> 。</div><div class="notion-text notion-block-ce8295f9201c4044901fde22c24da2e4">更多关于 CUE 的介绍，可以通过 <a target="_blank" rel="noopener noreferrer" class="notion-link" href="https://cuelang.org/docs/">官方文档</a> 和 <a target="_blank" rel="noopener noreferrer" class="notion-link" href="https://github.com/cuelang/cue/blob/master/doc/ref/spec.md">定义</a> 了解过多，这里就不展开了。</div><h3 class="notion-h notion-h2 notion-h-indent-0 notion-block-23c5e5877a1b40cfbb5565ceec5d59fd" data-id="23c5e5877a1b40cfbb5565ceec5d59fd"><span><div id="23c5e5877a1b40cfbb5565ceec5d59fd" class="notion-header-anchor"></div><a class="notion-hash-link" href="#23c5e5877a1b40cfbb5565ceec5d59fd" title="使用 CUE 做模版渲染"><svg viewBox="0 0 16 16" width="16" height="16"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><span class="notion-h-title">使用 CUE 做模版渲染</span></span></h3><div class="notion-text notion-block-5701749373fe49fc90bd4bbddfdad9b9">CUE 有<a target="_blank" rel="noopener noreferrer" class="notion-link" href="https://cuelang.org/docs/usecases/">很多很酷的使用场景</a>，而先让我们关注其中的配置文件渲染能力。</div><div class="notion-blank notion-block-813bf42ff6b14b3fa56e2cbd0132e95c"> </div><div class="notion-text notion-block-99d6d1fd68744bb2a4d815f7faab754c">我们在这里借用 <code class="notion-inline-code">KubeVela</code> <a target="_blank" rel="noopener noreferrer" class="notion-link" href="https://kubevela.io/docs/platform-engineers/cue/trait#using-cue-as-trait-schematic">文档中的例子</a></div><pre class="notion-code language-yaml"><code class="language-yaml"><span class="token literal-property property">template</span><span class="token operator">:</span> <span class="token operator">|</span>
  <span class="token literal-property property">parameter</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">domain</span><span class="token operator">:</span> string
      <span class="token literal-property property">http</span><span class="token operator">:</span> <span class="token punctuation">[</span>string<span class="token punctuation">]</span><span class="token operator">:</span> int
  <span class="token punctuation">}</span>

  <span class="token comment">// trait template can have multiple outputs in one trait</span>
  <span class="token literal-property property">outputs</span><span class="token operator">:</span> service<span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">apiVersion</span><span class="token operator">:</span> <span class="token string">"v1"</span>
      <span class="token literal-property property">kind</span><span class="token operator">:</span>       <span class="token string">"Service"</span>
      <span class="token literal-property property">spec</span><span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token literal-property property">selector</span><span class="token operator">:</span>
              <span class="token literal-property property">app</span><span class="token operator">:</span> context<span class="token punctuation">.</span>name
          <span class="token literal-property property">ports</span><span class="token operator">:</span> <span class="token punctuation">[</span>
              <span class="token keyword">for</span> k<span class="token punctuation">,</span> v <span class="token keyword">in</span> parameter<span class="token punctuation">.</span>http <span class="token punctuation">{</span>
                  <span class="token literal-property property">port</span><span class="token operator">:</span>       v
                  <span class="token literal-property property">targetPort</span><span class="token operator">:</span> v
              <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">]</span>
      <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token literal-property property">outputs</span><span class="token operator">:</span> ingress<span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">apiVersion</span><span class="token operator">:</span> <span class="token string">"networking.k8s.io/v1beta1"</span>
      <span class="token literal-property property">kind</span><span class="token operator">:</span>       <span class="token string">"Ingress"</span>
      <span class="token literal-property property">metadata</span><span class="token operator">:</span>
          <span class="token literal-property property">name</span><span class="token operator">:</span> context<span class="token punctuation">.</span>name
      <span class="token literal-property property">spec</span><span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token literal-property property">rules</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>
              <span class="token literal-property property">host</span><span class="token operator">:</span> parameter<span class="token punctuation">.</span>domain
              <span class="token literal-property property">http</span><span class="token operator">:</span> <span class="token punctuation">{</span>
                  <span class="token literal-property property">paths</span><span class="token operator">:</span> <span class="token punctuation">[</span>
                      <span class="token keyword">for</span> k<span class="token punctuation">,</span> v <span class="token keyword">in</span> parameter<span class="token punctuation">.</span>http <span class="token punctuation">{</span>
                          <span class="token literal-property property">path</span><span class="token operator">:</span> k
                          <span class="token literal-property property">backend</span><span class="token operator">:</span> <span class="token punctuation">{</span>
                              <span class="token literal-property property">serviceName</span><span class="token operator">:</span> context<span class="token punctuation">.</span>name
                              <span class="token literal-property property">servicePort</span><span class="token operator">:</span> v
                          <span class="token punctuation">}</span>
                      <span class="token punctuation">}</span><span class="token punctuation">,</span>
                  <span class="token punctuation">]</span>
              <span class="token punctuation">}</span>
          <span class="token punctuation">}</span><span class="token punctuation">]</span>
      <span class="token punctuation">}</span>
  <span class="token punctuation">}</span></code></pre><div class="notion-text notion-block-f8746dd32b484b7bb77bcd730761af68">可以看到，只需要传入 <code class="notion-inline-code">parameter</code> ，就可以得到包含 <code class="notion-inline-code">Service</code> 和 <code class="notion-inline-code">Ingress</code> 的 <code class="notion-inline-code">output</code> 。</div><div class="notion-text notion-block-71a44bc81b3b4c4ebf936a1e1c58159d">这样的写法立刻让我们想到了一个类似的工具—— <a target="_blank" rel="noopener noreferrer" class="notion-link" href="https://github.com/helm/helm">Helm</a>，作为较早的 CNCF 毕业项目，Helm 已经慢慢演进成在 k8s 配置定义领域的事实意义上的工业标准。那么相较于 Helm，用 CUE 来写配置文件渲染，又有什么异同呢？</div><h3 class="notion-h notion-h2 notion-h-indent-0 notion-block-5d00daa945db42608448bda03b815c2b" data-id="5d00daa945db42608448bda03b815c2b"><span><div id="5d00daa945db42608448bda03b815c2b" class="notion-header-anchor"></div><a class="notion-hash-link" href="#5d00daa945db42608448bda03b815c2b" title="CUE vs Helm"><svg viewBox="0 0 16 16" width="16" height="16"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><span class="notion-h-title">CUE vs Helm</span></span></h3><div class="notion-text notion-block-989008d01b664635b96d2dc42f9e7a9a">最直观的感受就是，在模版编写上 CUE 比 Helm 流畅太多了。主要的原因二者在最初的设计思路差异，Helm <a target="_blank" rel="noopener noreferrer" class="notion-link" href="https://helm.sh/docs/chart_template_guide/functions_and_pipelines/">借助的是 Go 和 Spring 的</a><a target="_blank" rel="noopener noreferrer" class="notion-link" href="https://helm.sh/docs/chart_template_guide/functions_and_pipelines/"><b>纯文本渲染能力</b></a>，而对于 CUE，JSON 才是一等公民。所以在 K8S 这类 yaml（JSON 超集） 文件渲染上，CUE（也是 JSON 超集） 拥有天然的优势。</div><blockquote class="notion-quote notion-block-e9405b964f2c42f286fe9f7a0d6b8e2c">Talk is cheap， show me the code.</blockquote><div class="notion-text notion-block-88029b498f7c4e97bbe5214631cfeafc">我们一起来看几个常用的场景。</div><h4 class="notion-h notion-h3 notion-h-indent-1 notion-block-031ba65fcac24aa2b36de15636aa056f" data-id="031ba65fcac24aa2b36de15636aa056f"><span><div id="031ba65fcac24aa2b36de15636aa056f" class="notion-header-anchor"></div><a class="notion-hash-link" href="#031ba65fcac24aa2b36de15636aa056f" title="Named Templates"><svg viewBox="0 0 16 16" width="16" height="16"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><span class="notion-h-title">Named Templates</span></span></h4><div class="notion-row notion-block-9cf427e0baa84f1c8dddb87577625c37"><div class="notion-column notion-block-b241cd7038c34a49875649595afad489" style="width:calc((100% - (1 * min(32px, 4vw))) * 0.5)"><div class="notion-text notion-block-21b01c95bc74473a874a93c14502279c"><b>Helm</b></div></div><div class="notion-spacer"></div><div class="notion-column notion-block-491c44b34b474bfcb09fc70afdfa8cea" style="width:calc((100% - (1 * min(32px, 4vw))) * 0.5)"><div class="notion-text notion-block-ce820d37b02e46079668dece7d0c3be6"><b>CUE</b></div></div><div class="notion-spacer"></div></div><div class="notion-row notion-block-f3a383cdf740401b9bea7ff394a41113"><div class="notion-column notion-block-d2f540afac254402a8ce7ad3444e4d6f" style="width:calc((100% - (1 * min(32px, 4vw))) * 0.5)"><pre class="notion-code language-yaml"><code class="language-yaml"># values<span class="token punctuation">.</span>yaml
<span class="token literal-property property">app_name</span><span class="token operator">:</span> <span class="token string">"example_code"</span>
<span class="token literal-property property">other_attr1</span><span class="token operator">:</span> <span class="token string">"foo"</span>
<span class="token literal-property property">other_attr2</span><span class="token operator">:</span> <span class="token string">"bar"</span>

# labels<span class="token punctuation">.</span>tpl
<span class="token punctuation">{</span><span class="token punctuation">{</span><span class="token operator">-</span> define <span class="token string">"foo.labels"</span> <span class="token operator">-</span><span class="token punctuation">}</span><span class="token punctuation">}</span>
<span class="token literal-property property">label1</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">{</span> <span class="token punctuation">.</span>Values<span class="token punctuation">.</span>app_name <span class="token operator">|</span> required <span class="token string">"app_name is required"</span> <span class="token punctuation">}</span><span class="token punctuation">}</span> 
<span class="token literal-property property">label2</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">{</span> <span class="token punctuation">.</span>Values<span class="token punctuation">.</span>other_attr2 <span class="token punctuation">}</span><span class="token punctuation">}</span>
<span class="token punctuation">{</span><span class="token punctuation">{</span> include <span class="token string">"foo.selectorLabels"</span> <span class="token punctuation">.</span> <span class="token punctuation">}</span><span class="token punctuation">}</span>
<span class="token punctuation">{</span><span class="token punctuation">{</span><span class="token operator">-</span> end <span class="token punctuation">}</span><span class="token punctuation">}</span>

<span class="token punctuation">{</span><span class="token punctuation">{</span><span class="token operator">-</span> define <span class="token string">"foo.selectorLabels"</span> <span class="token operator">-</span><span class="token punctuation">}</span><span class="token punctuation">}</span>
<span class="token literal-property property">label3</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">{</span> printf <span class="token string">"%s-%s"</span> <span class="token punctuation">.</span>Values<span class="token punctuation">.</span>app_name <span class="token punctuation">.</span>Values<span class="token punctuation">.</span>other_attr1 <span class="token punctuation">}</span><span class="token punctuation">}</span>
<span class="token punctuation">{</span><span class="token punctuation">{</span><span class="token operator">-</span> end <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre></div><div class="notion-spacer"></div><div class="notion-column notion-block-c64eb6ff84e147e0bf6a8631cff370e4" style="width:calc((100% - (1 * min(32px, 4vw))) * 0.49999999999999994)"><pre class="notion-code language-yaml"><code class="language-yaml"># labels<span class="token punctuation">.</span>cue
<span class="token literal-property property">app_name</span><span class="token operator">:</span> <span class="token operator">*</span><span class="token string">"example_code"</span> ｜ string
<span class="token literal-property property">other_attr1</span><span class="token operator">:</span> <span class="token string">"foo"</span>
<span class="token literal-property property">other_attr2</span><span class="token operator">:</span> <span class="token string">"bar"</span>

<span class="token literal-property property">selector_labels</span><span class="token operator">:</span> <span class="token punctuation">{</span>
	<span class="token literal-property property">label3</span><span class="token operator">:</span> <span class="token string">"\( app_name )-\( other_attr2 )"</span>
<span class="token punctuation">}</span>

<span class="token literal-property property">labels</span><span class="token operator">:</span> <span class="token punctuation">{</span>
	<span class="token literal-property property">label1</span><span class="token operator">:</span> app_name
  <span class="token literal-property property">label2</span><span class="token operator">:</span> other_attr2
	selector_labels
<span class="token punctuation">}</span></code></pre></div><div class="notion-spacer"></div></div><ul class="notion-list notion-list-disc notion-block-8ffe96551d2348138a1fe110c1eef1ed"><li>Helm 可以在 <code class="notion-inline-code">.tpl</code> 文件中定义可复用的模版，并支持其他模版引用它，同时，也只有定义了的模版才能被复用，在复杂的 Chart 项目里你<a target="_blank" rel="noopener noreferrer" class="notion-link" href="https://github.com/bitnami/charts/tree/master/bitnami/common/templates">需要额外定义非常多的基础模版</a>。</li></ul><ul class="notion-list notion-list-disc notion-block-9b9466c6f7da4fc8a16106adb6406054"><li>相对于 Helm 繁琐的写法， 在 CUE 中所有内容均为 JSON 对象，不需要额外的语法去指定模版，任意 JSON 对象都可以互相引用。</li></ul><h4 class="notion-h notion-h3 notion-h-indent-1 notion-block-9040cb44603649f1ae931d70b56f2db7" data-id="9040cb44603649f1ae931d70b56f2db7"><span><div id="9040cb44603649f1ae931d70b56f2db7" class="notion-header-anchor"></div><a class="notion-hash-link" href="#9040cb44603649f1ae931d70b56f2db7" title="空行和缩进"><svg viewBox="0 0 16 16" width="16" height="16"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><span class="notion-h-title">空行和缩进</span></span></h4><div class="notion-text notion-block-c5a1284edb90411baed1881cd6a1be60"><b>Helm</b></div><pre class="notion-code language-yaml"><code class="language-yaml"><span class="token literal-property property">apiVersion</span><span class="token operator">:</span> apps<span class="token operator">/</span>v1
<span class="token literal-property property">kind</span><span class="token operator">:</span> Deployment
<span class="token literal-property property">metadata</span><span class="token operator">:</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">{</span> include <span class="token string">"foo.deploymentName"</span> <span class="token punctuation">.</span> <span class="token punctuation">}</span><span class="token punctuation">}</span>
  <span class="token literal-property property">labels</span><span class="token operator">:</span>
    <span class="token punctuation">{</span><span class="token punctuation">{</span><span class="token operator">-</span> include <span class="token string">"foo.labels"</span> <span class="token punctuation">.</span> <span class="token operator">|</span> nindent <span class="token number">4</span> <span class="token punctuation">}</span><span class="token punctuation">}</span>
<span class="token literal-property property">spec</span><span class="token operator">:</span>
  <span class="token literal-property property">replicas</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">{</span> <span class="token punctuation">.</span>Values<span class="token punctuation">.</span>replicaCount <span class="token punctuation">}</span><span class="token punctuation">}</span>
  <span class="token literal-property property">selector</span><span class="token operator">:</span>
    <span class="token literal-property property">matchLabels</span><span class="token operator">:</span>
      <span class="token punctuation">{</span><span class="token punctuation">{</span><span class="token operator">-</span> include <span class="token string">"foo.selectorLabels"</span> <span class="token punctuation">.</span> <span class="token operator">|</span> nindent <span class="token number">6</span> <span class="token punctuation">}</span><span class="token punctuation">}</span>
  <span class="token literal-property property">strategy</span><span class="token operator">:</span>
    <span class="token punctuation">{</span><span class="token punctuation">{</span><span class="token operator">-</span> include <span class="token string">"foo.updateStrategy"</span> <span class="token punctuation">.</span> <span class="token operator">|</span> nindent <span class="token number">4</span> <span class="token punctuation">}</span><span class="token punctuation">}</span>
  <span class="token literal-property property">revisionHistoryLimit</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">{</span> <span class="token punctuation">.</span>Values<span class="token punctuation">.</span>revisionHistoryLimit <span class="token punctuation">}</span><span class="token punctuation">}</span>
  <span class="token literal-property property">template</span><span class="token operator">:</span>
    <span class="token literal-property property">metadata</span><span class="token operator">:</span>
    <span class="token punctuation">{</span><span class="token punctuation">{</span><span class="token operator">-</span> <span class="token keyword">with</span> <span class="token punctuation">.</span>Values<span class="token punctuation">.</span>podAnnotations <span class="token punctuation">}</span><span class="token punctuation">}</span>
      <span class="token literal-property property">annotations</span><span class="token operator">:</span>
        <span class="token punctuation">{</span><span class="token punctuation">{</span><span class="token operator">-</span> toYaml <span class="token punctuation">.</span> <span class="token operator">|</span> nindent <span class="token number">8</span> <span class="token punctuation">}</span><span class="token punctuation">}</span>
    <span class="token punctuation">{</span><span class="token punctuation">{</span><span class="token operator">-</span> end <span class="token punctuation">}</span><span class="token punctuation">}</span>
      <span class="token literal-property property">labels</span><span class="token operator">:</span>
        <span class="token punctuation">{</span><span class="token punctuation">{</span><span class="token operator">-</span> include <span class="token string">"foo.labels"</span> <span class="token punctuation">.</span> <span class="token operator">|</span> nindent <span class="token number">8</span> <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><div class="notion-text notion-block-2c08e8f37d03498694d0e06547f46453"><b>CUE</b></div><pre class="notion-code language-yaml"><code class="language-yaml"><span class="token literal-property property">deployment</span><span class="token operator">:</span> <span class="token punctuation">{</span>
	<span class="token literal-property property">apiVersion</span><span class="token operator">:</span> <span class="token string">"apps/v1"</span>
	<span class="token literal-property property">kind</span><span class="token operator">:</span>       <span class="token string">"Deployment"</span>
	<span class="token literal-property property">metadata</span><span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token literal-property property">name</span><span class="token operator">:</span>   deployment_name
		<span class="token literal-property property">labels</span><span class="token operator">:</span> labels
	<span class="token punctuation">}</span>
	<span class="token literal-property property">spec</span><span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token literal-property property">replicas</span><span class="token operator">:</span> runtime<span class="token punctuation">.</span>replicas
		<span class="token literal-property property">selector</span><span class="token operator">:</span> matchLabels<span class="token operator">:</span> selector_labels
		<span class="token literal-property property">strategy</span><span class="token operator">:</span>             update_strategy
		<span class="token literal-property property">revisionHistoryLimit</span><span class="token operator">:</span> revision_history_limit</code></pre><ul class="notion-list notion-list-disc notion-block-b5fcb07810f8485e99a38e65c1b42d39"><li> Helm 中有大量的 <code class="notion-inline-code">{{- include }}</code> 和 <code class="notion-inline-code">nindent</code> 等和实际逻辑无关的标记字符，需要在每一次引用的地方计算空格和缩进。</li></ul><ul class="notion-list notion-list-disc notion-block-38b9565048334fb692f4fb38e1eccd09"><li>而在 CUE 中无用编码更少，不需要过多的 <code class="notion-inline-code">{{ * }}</code> 来标记代码块，信息密度更高，而且在缩进和空格方面得到了完全的解放。</li></ul><h4 class="notion-h notion-h3 notion-h-indent-1 notion-block-23d0196aa8e4404abb2cfa6af7e01572" data-id="23d0196aa8e4404abb2cfa6af7e01572"><span><div id="23d0196aa8e4404abb2cfa6af7e01572" class="notion-header-anchor"></div><a class="notion-hash-link" href="#23d0196aa8e4404abb2cfa6af7e01572" title="values.yaml 自引用"><svg viewBox="0 0 16 16" width="16" height="16"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><span class="notion-h-title">values.yaml 自引用</span></span></h4><div class="notion-text notion-block-e0ebfa7c177e450c92f3fc6c9a54835c">在 Helm 中，一个长久以来的头疼问题就是，无法优雅地实现 <code class="notion-inline-code">values.yaml</code> 引用问题。</div><div class="notion-text notion-block-7984173a56cb4bddbbd8efb7f62c2e0f">我们看下面的例子：</div><pre class="notion-code language-yaml"><code class="language-yaml"><span class="token literal-property property">rootDomain</span><span class="token operator">:</span> <span class="token string">""</span>

# 我们期待的是通过引用 rootDomain 拼接，例如：<span class="token string">"foo.{{ .Values.rootDomain }}"</span>
<span class="token literal-property property">productDomain</span><span class="token operator">:</span> <span class="token string">""</span></code></pre><div class="notion-text notion-block-f5e89f66c62b4209b64afdb7a67e7970">通常的情况下，Chart 的使用者需要针对这两个变量分别填写内容，增加了出错的可能。</div><div class="notion-text notion-block-81310d6b8e99401bacf09b9c7fe2da52">虽然我们可以通过定义模版来实现：</div><pre class="notion-code language-yaml"><code class="language-yaml"># values<span class="token punctuation">.</span>yaml
<span class="token literal-property property">rootDomain</span><span class="token operator">:</span> <span class="token string">""</span>
<span class="token literal-property property">productDomain</span><span class="token operator">:</span> <span class="token string">"foo.{{ .Values.rootDomain }}"</span>

# helpers<span class="token punctuation">.</span>tpl
<span class="token punctuation">{</span><span class="token punctuation">{</span><span class="token operator">-</span> define <span class="token string">"foo.productDomain"</span> <span class="token operator">-</span><span class="token punctuation">}</span><span class="token punctuation">}</span>
<span class="token punctuation">{</span><span class="token punctuation">{</span> tpl <span class="token punctuation">.</span>Values<span class="token punctuation">.</span>productDomain $ <span class="token punctuation">}</span><span class="token punctuation">}</span>
<span class="token punctuation">{</span><span class="token punctuation">{</span><span class="token operator">-</span> end <span class="token punctuation">}</span><span class="token punctuation">}</span>

# ingress<span class="token punctuation">.</span>yaml
<span class="token operator">...</span>
<span class="token literal-property property">spec</span><span class="token operator">:</span>
  <span class="token literal-property property">rules</span><span class="token operator">:</span>
    <span class="token operator">-</span> host<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">{</span> include <span class="token string">"foo.productDomain"</span> <span class="token punctuation">.</span> <span class="token operator">|</span> quote <span class="token punctuation">}</span><span class="token punctuation">}</span>
<span class="token operator">...</span></code></pre><div class="notion-text notion-block-c207daf5e6d04e42aa28ca6867a86049">但在实际使用中，所有引用的地方都需要额外 <code class="notion-inline-code">include</code> ，同时定义的维护也非常耗费心力（要时刻保证空行、缩进不出错）。</div><div class="notion-text notion-block-dba38137957a4468a22a83273ff5a207">而在 CUE 中，相互引用显得自然而舒服。</div><pre class="notion-code language-json"><code class="language-json"><span class="token literal-property property">rootDomain</span><span class="token operator">:</span> string
<span class="token literal-property property">productDomain</span><span class="token operator">:</span> <span class="token operator">*</span><span class="token string">"foo.\( rootDomain )"</span> <span class="token operator">|</span> string</code></pre><h4 class="notion-h notion-h3 notion-h-indent-1 notion-block-2d212d1d74ca4f558165434d9a67aa5d" data-id="2d212d1d74ca4f558165434d9a67aa5d"><span><div id="2d212d1d74ca4f558165434d9a67aa5d" class="notion-header-anchor"></div><a class="notion-hash-link" href="#2d212d1d74ca4f558165434d9a67aa5d" title="导入 Kubernetes 包"><svg viewBox="0 0 16 16" width="16" height="16"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><span class="notion-h-title">导入 Kubernetes 包</span></span></h4><div class="notion-text notion-block-f56cc7da728d41d1a2a8b1d24e94e30a">CUE 的另一大杀器，可以针对原生 Kubernetes 源码生成描述 cue 文件，所有 k8s 资源相关的配置文件，都可以天然地拥有 schema 校验。具体教程可以查看 <a target="_blank" rel="noopener noreferrer" class="notion-link" href="https://cue.googlesource.com/cue/+/HEAD/doc/tutorial/kubernetes/README.md">Kubernetes tutorial</a>。</div><pre class="notion-code language-yaml"><code class="language-yaml"><span class="token keyword">package</span> templates

<span class="token keyword">import</span> <span class="token punctuation">(</span>
	apps <span class="token string">"k8s.io/api/apps/v1"</span>
<span class="token punctuation">)</span>

<span class="token literal-property property">deployment</span><span class="token operator">:</span> apps<span class="token punctuation">.</span>#Deployment

<span class="token literal-property property">deployment</span><span class="token operator">:</span> <span class="token punctuation">{</span>
	<span class="token literal-property property">apiVersion</span><span class="token operator">:</span> <span class="token string">"apps/v1"</span>
	<span class="token literal-property property">kind</span><span class="token operator">:</span>       <span class="token string">"Deployment"</span>
	<span class="token literal-property property">metadata</span><span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token literal-property property">name</span><span class="token operator">:</span>   deployment_name
		<span class="token literal-property property">labels</span><span class="token operator">:</span> _labels
	<span class="token punctuation">}</span>
<span class="token operator">...</span></code></pre><div class="notion-text notion-block-1011b4ce77c143f7972cc817a33b4dc5">类似这个例子中，我们定义的 <code class="notion-inline-code">deployment</code> 将会通过 <code class="notion-inline-code">apps.#Deployment</code> 校验，轻松检测出不合法的字段。理论上，你可以针对多个不同版本的 k8s 资源都生成 cue 文件，并且都作为 <code class="notion-inline-code">deployment</code> 的模型定义，这样可以实现资源定义的多版本兼容能力。</div><div class="notion-blank notion-block-858fcc7fe3e04cc588a79ab7fefd25fc"> </div><h3 class="notion-h notion-h2 notion-h-indent-0 notion-block-c355ab655f264eb08bbb13cd6597b2d3" data-id="c355ab655f264eb08bbb13cd6597b2d3"><span><div id="c355ab655f264eb08bbb13cd6597b2d3" class="notion-header-anchor"></div><a class="notion-hash-link" href="#c355ab655f264eb08bbb13cd6597b2d3" title="说了这么多好处，现在就把所有 Helm Chart 都替换成 CUE？"><svg viewBox="0 0 16 16" width="16" height="16"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><span class="notion-h-title">说了这么多好处，现在就把所有 Helm Chart 都替换成 CUE？</span></span></h3><div class="notion-text notion-block-76ee41cf0b014ab58342d9dadfa0dc96">且慢，还没到时候。</div><div class="notion-text notion-block-66385d718ce5497e80a494732f243c56">因为 Helm 作为 <code class="notion-inline-code">Package Manager</code> ，除了 Chart 渲染，本身还具备一定的应用管理功能，例如 <code class="notion-inline-code">Helm install</code> 、 <code class="notion-inline-code">Helm rollback</code> 等，而 CUE 仅仅是模版。所以在某些我们只使用了 Helm 的模版功能的情况下，可以考虑迁移到 CUE，其他情况，还是用 Helm 吧。</div><h4 class="notion-h notion-h3 notion-h-indent-1 notion-block-212420499e7c482a85115d93d0ea1e20" data-id="212420499e7c482a85115d93d0ea1e20"><span><div id="212420499e7c482a85115d93d0ea1e20" class="notion-header-anchor"></div><a class="notion-hash-link" href="#212420499e7c482a85115d93d0ea1e20" title="脑洞"><svg viewBox="0 0 16 16" width="16" height="16"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><span class="notion-h-title">脑洞</span></span></h4><div class="notion-text notion-block-5b0d52293b8a424fab06cdfdd4e39da1">做一个开源的 CLI，支持将多个文件聚合为一个应用统一管理：</div><ul class="notion-list notion-list-disc notion-block-56634d78612a4897aee018a9de4fd74a"><li>类似 Helm 的能力，支持安装、更新、回滚</li></ul><ul class="notion-list notion-list-disc notion-block-f8a5efbf33194fe1a7b8fbb887ab358e"><li>针对配置，支持裸配置和 CUE 文件</li></ul><div class="notion-text notion-block-b29766be75ec4f8b92d692f6e90ff696">好了，先说这么多，我去尝试写一写，下篇文章见 👋 ～</div><div class="notion-blank notion-block-5731d426beec4b59aae40ca01dd3b6e5"> </div></main></div></article><div class="flex justify-between font-medium text-gray-500 dark:text-gray-400"><a><button class="mt-2 cursor-pointer hover:text-black dark:hover:text-gray-100">← <!-- -->返回</button></a><a><button class="mt-2 cursor-pointer hover:text-black dark:hover:text-gray-100">↑ <!-- -->回到顶部</button></a></div><div></div></main><div class="mt-6 flex-shrink-0 m-auto w-full text-gray-500 dark:text-gray-400 transition-all max-w-3xl px-4"><hr class="border-gray-200 dark:border-gray-600"/><div class="my-4 text-sm leading-6"><div class="flex align-baseline justify-between flex-wrap"><p>© <!-- -->bluesyu<!-- --> <!-- -->2019 - 2022</p><p>powered by <a href="https://github.com/craigary/nobelium"><u>nobelium</u></a></p></div></div></div></div></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"post":{"id":"29fc49e0-b597-4f2e-9d53-b7dd247adf4b","date":{"start_date":"2021-06-22"},"type":["Post"],"slug":"cue-vs-helm.html","tags":["tech","k8s","back-pressure","helm"],"summary":"长江后浪推前浪","title":"再见 Helm，你好 CUE","status":["Published"],"createdTime":"Tue Oct 18 2022 02:10:17 GMT+0000 (Coordinated Universal Time)","fullWidth":false,"pageIcon":"👋","pageCover":"https://images.unsplash.com/photo-1558234336-b5379131bf43?ixlib=rb-1.2.1\u0026q=85\u0026fm=jpg\u0026crop=entropy\u0026cs=srgb"},"blockMap":{"block":{"29fc49e0-b597-4f2e-9d53-b7dd247adf4b":{"role":"reader","value":{"id":"29fc49e0-b597-4f2e-9d53-b7dd247adf4b","version":21,"type":"page","properties":{"NX\\Q":[["‣",[["d",{"type":"date","start_date":"2021-06-22"}]]]],"`gQ~":[["Post"]],"d]hq":[["cue-vs-helm.html"]],"sD^m":[["tech,k8s,back-pressure,helm"]],"wz|S":[["长江后浪推前浪"]],"title":[["再见 Helm，你好 CUE"]],"26ff3130-393a-45ac-92b5-7490d9b87515":[["post"]],"29e679ed-47a3-46c2-9eb4-9070171591b8":[["Yes"]],"b6d830ff-ce1d-4e76-a484-f0fc3f148c52":[["Yes"]],"f211bdc0-ee00-4186-9a7d-f68c055ec2ee":[["Published"]]},"content":["cee3d367-3678-4353-b735-b94e70aae135","93713b54-067e-4d4d-8fd5-545ceafef31d","23670d28-c326-4f66-8879-dc43957ecc39","cae7abf2-157a-4a95-8f80-7af5d39f5d74","8c621443-5c47-4c91-9da6-23ccf2f0ad43","b27f8ba6-b225-468d-86d2-df217ce99943","ce8295f9-201c-4044-901f-de22c24da2e4","23c5e587-7a1b-40cf-bb55-65ceec5d59fd","57017493-73fe-49fc-90bd-4bbddfdad9b9","813bf42f-f6b1-4b3f-a56e-2cbd0132e95c","99d6d1fd-6874-4bb2-a4d8-15f7faab754c","1e3ea433-ea62-479c-98bc-e20aca63da8f","f8746dd3-2b48-4b7b-b77b-cd730761af68","71a44bc8-1b3b-4c4e-bf93-6a1e1c58159d","5d00daa9-45db-4260-8448-bda03b815c2b","989008d0-1b66-4635-b96d-2dc42f9e7a9a","e9405b96-4f2c-42f2-86fe-9f7a0d6b8e2c","88029b49-8f7c-4e97-bbe5-214631cfeafc","031ba65f-cac2-4aa2-b36d-e15636aa056f","9cf427e0-baa8-4f1c-8ddd-b87577625c37","f3a383cd-f740-401b-9bea-7ff394a41113","8ffe9655-1d23-4813-8a1f-e110c1eef1ed","9b9466c6-f7da-4fc8-a161-06adb6406054","9040cb44-6036-49f1-ae93-1d70b56f2db7","c5a1284e-db90-411b-aed1-881cd6a1be60","54bb4ea7-e012-4912-af45-001b7ae3fe3c","2c08e8f3-7d03-4986-94d0-e06547f46453","ca829be0-f99d-4edd-8419-92ea8e5cb964","b5fcb078-10f8-485e-99a3-8e65c1b42d39","38b95650-4833-4fb6-92f4-fb38e1eccd09","23d0196a-a8e4-404a-bb2c-fa6af7e01572","e0ebfa7c-177e-450c-92f3-fc6c9a54835c","7984173a-56cb-4bdd-bbd8-efb7f62c2e0f","963d3409-5a7e-4433-8953-8374f0a3407e","f5e89f66-c62b-4209-b64a-fdb7a67e7970","81310d6b-8e99-401b-acf0-9b9c7fe2da52","94da15df-2f80-4180-8e51-77f8bd7d5bf1","c207daf5-e6d0-4e42-aa28-ca6867a86049","dba38137-957a-4468-a22a-83273ff5a207","4c5d10e1-08e2-4402-9165-0f1221532faa","2d212d1d-74ca-4f55-8165-434d9a67aa5d","f56cc7da-728d-41d1-a2a8-b1d24e94e30a","9a129a87-c198-4d3a-82b1-f45683255a64","1011b4ce-77c1-43f7-972c-c817a33b4dc5","858fcc7f-e3e0-4cc5-88a7-9ab7fefd25fc","c355ab65-5f26-4eb0-8bbb-13cd6597b2d3","76ee41cf-0b01-4ab5-8342-d9dadfa0dc96","66385d71-8ce5-497e-80a4-94732f243c56","21242049-9e7c-482a-8511-5d93d0ea1e20","5b0d5229-3b8a-424f-ab06-cdfdd4e39da1","56634d78-612a-4897-aee0-18a9de4fd74a","f8a5efbf-3319-4fe1-a7b8-fbb887ab358e","b29766be-75ec-4f8b-92d6-92f6e90ff696","5731d426-beec-4b59-aae4-0ca01dd3b6e5"],"format":{"page_icon":"👋","page_cover":"https://images.unsplash.com/photo-1558234336-b5379131bf43?ixlib=rb-1.2.1\u0026q=85\u0026fm=jpg\u0026crop=entropy\u0026cs=srgb","copied_from_pointer":{"id":"aaa3fed9-31f3-4bc4-a883-8d8b536a5eb6","table":"block","spaceId":"b0a64676-90b9-4734-9c63-2d704ee573b6"},"page_cover_position":0.4814},"created_time":1666059017458,"last_edited_time":1666200480000,"parent_id":"e34bec60-9b02-4ad8-aaf8-83369409cc9f","parent_table":"collection","alive":true,"copied_from":"aaa3fed9-31f3-4bc4-a883-8d8b536a5eb6","created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"a6089909-2d0d-43ef-af93-5e041712e826":{"role":"reader","value":{"id":"a6089909-2d0d-43ef-af93-5e041712e826","version":111,"type":"collection_view_page","view_ids":["065b98d2-d3b4-4dab-8b96-4eb118a3f311"],"collection_id":"e34bec60-9b02-4ad8-aaf8-83369409cc9f","format":{"block_locked":false,"block_locked_by":"2c0e0b01-f59e-4e03-b7b6-7d706eecada3","collection_pointer":{"id":"e34bec60-9b02-4ad8-aaf8-83369409cc9f","table":"collection","spaceId":"b0a64676-90b9-4734-9c63-2d704ee573b6"},"copied_from_pointer":{"id":"adc3552c-fc73-442a-b504-8d4b1eb0079a","table":"block","spaceId":"ac4cb96d-c8f8-4040-9bb2-868d9fc7f526"}},"permissions":[{"role":"editor","type":"user_permission","user_id":"f594524b-0941-4aea-99a2-9b9304033287"},{"role":"reader","type":"public_permission","added_timestamp":1666006306008}],"created_time":1665993658476,"last_edited_time":1666200600000,"parent_id":"b0a64676-90b9-4734-9c63-2d704ee573b6","parent_table":"space","alive":true,"copied_from":"adc3552c-fc73-442a-b504-8d4b1eb0079a","created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"cee3d367-3678-4353-b735-b94e70aae135":{"role":"reader","value":{"id":"cee3d367-3678-4353-b735-b94e70aae135","version":1,"type":"sub_header","properties":{"title":[["什么是 CUE "]]},"format":{"copied_from_pointer":{"id":"530d4744-fd47-455f-bc9d-46b39cd540c9","table":"block","spaceId":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"created_time":1666059017456,"last_edited_time":1666059017456,"parent_id":"29fc49e0-b597-4f2e-9d53-b7dd247adf4b","parent_table":"block","alive":true,"copied_from":"530d4744-fd47-455f-bc9d-46b39cd540c9","created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"93713b54-067e-4d4d-8fd5-545ceafef31d":{"role":"reader","value":{"id":"93713b54-067e-4d4d-8fd5-545ceafef31d","version":1,"type":"quote","properties":{"title":[["CUE 是一种开源数据验证语言和推理引擎，其根源在于逻辑编程"]]},"format":{"copied_from_pointer":{"id":"d56d76bf-75df-4f22-a1a4-e804ce22a7d5","table":"block","spaceId":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"created_time":1666059017457,"last_edited_time":1666059017457,"parent_id":"29fc49e0-b597-4f2e-9d53-b7dd247adf4b","parent_table":"block","alive":true,"copied_from":"d56d76bf-75df-4f22-a1a4-e804ce22a7d5","created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"23670d28-c326-4f66-8879-dc43957ecc39":{"role":"reader","value":{"id":"23670d28-c326-4f66-8879-dc43957ecc39","version":1,"type":"text","properties":{"title":[["说实话，我一开始也没看懂这句描述。我们先来看个小例子："]]},"format":{"copied_from_pointer":{"id":"9c12f9fe-1cdd-4b93-98cc-e8eb0eaabd1e","table":"block","spaceId":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"created_time":1666059017456,"last_edited_time":1666059017456,"parent_id":"29fc49e0-b597-4f2e-9d53-b7dd247adf4b","parent_table":"block","alive":true,"copied_from":"9c12f9fe-1cdd-4b93-98cc-e8eb0eaabd1e","created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"cae7abf2-157a-4a95-8f80-7af5d39f5d74":{"role":"reader","value":{"id":"cae7abf2-157a-4a95-8f80-7af5d39f5d74","version":1,"type":"column_list","content":["bdc68786-6d83-412d-b46e-4f4e1e2bf19d","9590d8c1-563e-4e47-b47a-3f5c28213eac","9cd95976-4498-4f85-9723-306e3c59a763"],"format":{"copied_from_pointer":{"id":"8ce28c23-533e-444f-acaf-4ba144c485be","table":"block","spaceId":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"created_time":1666059017456,"last_edited_time":1666059017456,"parent_id":"29fc49e0-b597-4f2e-9d53-b7dd247adf4b","parent_table":"block","alive":true,"copied_from":"8ce28c23-533e-444f-acaf-4ba144c485be","created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"bdc68786-6d83-412d-b46e-4f4e1e2bf19d":{"role":"reader","value":{"id":"bdc68786-6d83-412d-b46e-4f4e1e2bf19d","version":1,"type":"column","content":["5d0d8b14-8df9-4f75-afc8-a87c406f1fd1"],"format":{"column_ratio":0.33333333333333337,"copied_from_pointer":{"id":"b2383f00-ec07-4735-9719-a9856096a94d","table":"block","spaceId":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"created_time":1666059017457,"last_edited_time":1666059017457,"parent_id":"cae7abf2-157a-4a95-8f80-7af5d39f5d74","parent_table":"block","alive":true,"copied_from":"b2383f00-ec07-4735-9719-a9856096a94d","created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"9590d8c1-563e-4e47-b47a-3f5c28213eac":{"role":"reader","value":{"id":"9590d8c1-563e-4e47-b47a-3f5c28213eac","version":1,"type":"column","content":["5aa9bb24-7276-4b88-b56f-e7e5e6dc669a"],"format":{"column_ratio":0.33333333333333337,"copied_from_pointer":{"id":"e22194d5-96d1-4f32-812b-df0734c40a94","table":"block","spaceId":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"created_time":1666059017457,"last_edited_time":1666059017457,"parent_id":"cae7abf2-157a-4a95-8f80-7af5d39f5d74","parent_table":"block","alive":true,"copied_from":"e22194d5-96d1-4f32-812b-df0734c40a94","created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"9cd95976-4498-4f85-9723-306e3c59a763":{"role":"reader","value":{"id":"9cd95976-4498-4f85-9723-306e3c59a763","version":1,"type":"column","content":["03ee002f-73a5-4896-8ed4-c1145a85dda7"],"format":{"column_ratio":0.3333333333333333,"copied_from_pointer":{"id":"bef9fdeb-9124-4236-a8e4-f087b9525f71","table":"block","spaceId":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"created_time":1666059017457,"last_edited_time":1666059017457,"parent_id":"cae7abf2-157a-4a95-8f80-7af5d39f5d74","parent_table":"block","alive":true,"copied_from":"bef9fdeb-9124-4236-a8e4-f087b9525f71","created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"5d0d8b14-8df9-4f75-afc8-a87c406f1fd1":{"role":"reader","value":{"id":"5d0d8b14-8df9-4f75-afc8-a87c406f1fd1","version":1,"type":"text","properties":{"title":[["Data"]]},"format":{"copied_from_pointer":{"id":"85e072f5-ae8e-4b08-b8b2-41761d4e4b84","table":"block","spaceId":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"created_time":1666059017457,"last_edited_time":1666059017457,"parent_id":"bdc68786-6d83-412d-b46e-4f4e1e2bf19d","parent_table":"block","alive":true,"copied_from":"85e072f5-ae8e-4b08-b8b2-41761d4e4b84","created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"5aa9bb24-7276-4b88-b56f-e7e5e6dc669a":{"role":"reader","value":{"id":"5aa9bb24-7276-4b88-b56f-e7e5e6dc669a","version":1,"type":"text","properties":{"title":[["Schema"]]},"format":{"copied_from_pointer":{"id":"13c353f7-718b-4838-b312-8c628dcc6405","table":"block","spaceId":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"created_time":1666059017458,"last_edited_time":1666059017458,"parent_id":"9590d8c1-563e-4e47-b47a-3f5c28213eac","parent_table":"block","alive":true,"copied_from":"13c353f7-718b-4838-b312-8c628dcc6405","created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"03ee002f-73a5-4896-8ed4-c1145a85dda7":{"role":"reader","value":{"id":"03ee002f-73a5-4896-8ed4-c1145a85dda7","version":1,"type":"text","properties":{"title":[["CUE"]]},"format":{"copied_from_pointer":{"id":"09668f90-0a37-4d45-9be5-2f1b01400447","table":"block","spaceId":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"created_time":1666059017458,"last_edited_time":1666059017458,"parent_id":"9cd95976-4498-4f85-9723-306e3c59a763","parent_table":"block","alive":true,"copied_from":"09668f90-0a37-4d45-9be5-2f1b01400447","created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"8c621443-5c47-4c91-9da6-23ccf2f0ad43":{"role":"reader","value":{"id":"8c621443-5c47-4c91-9da6-23ccf2f0ad43","version":1,"type":"column_list","content":["36219f7a-636c-46db-92ad-53105e6e7e82","a107bd2b-6297-4001-94e4-7487a70a43cd","1cc79676-2de7-497a-964b-3a198fc0e0c8"],"format":{"copied_from_pointer":{"id":"23713900-d172-48ee-bfc8-d054bcb6e2bb","table":"block","spaceId":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"created_time":1666059017455,"last_edited_time":1666059017455,"parent_id":"29fc49e0-b597-4f2e-9d53-b7dd247adf4b","parent_table":"block","alive":true,"copied_from":"23713900-d172-48ee-bfc8-d054bcb6e2bb","created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"36219f7a-636c-46db-92ad-53105e6e7e82":{"role":"reader","value":{"id":"36219f7a-636c-46db-92ad-53105e6e7e82","version":1,"type":"column","content":["6286e61b-07f7-4589-b100-2caa85d05c03"],"format":{"column_ratio":0.33333333333333337,"copied_from_pointer":{"id":"dea739f5-bbe1-4774-9193-fa5e90ab021a","table":"block","spaceId":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"created_time":1666059017457,"last_edited_time":1666059017457,"parent_id":"8c621443-5c47-4c91-9da6-23ccf2f0ad43","parent_table":"block","alive":true,"copied_from":"dea739f5-bbe1-4774-9193-fa5e90ab021a","created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"a107bd2b-6297-4001-94e4-7487a70a43cd":{"role":"reader","value":{"id":"a107bd2b-6297-4001-94e4-7487a70a43cd","version":1,"type":"column","content":["e5ece43c-11bc-4193-aa32-b5f9bec88e36"],"format":{"column_ratio":0.33333333333333337,"copied_from_pointer":{"id":"fa475a43-a1be-4873-8627-6697b9b65922","table":"block","spaceId":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"created_time":1666059017457,"last_edited_time":1666059017457,"parent_id":"8c621443-5c47-4c91-9da6-23ccf2f0ad43","parent_table":"block","alive":true,"copied_from":"fa475a43-a1be-4873-8627-6697b9b65922","created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"1cc79676-2de7-497a-964b-3a198fc0e0c8":{"role":"reader","value":{"id":"1cc79676-2de7-497a-964b-3a198fc0e0c8","version":1,"type":"column","content":["2f951692-91a2-45f3-82d6-b416177f89cc"],"format":{"column_ratio":0.3333333333333333,"copied_from_pointer":{"id":"91620258-6773-419c-911a-b4c4748ef6da","table":"block","spaceId":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"created_time":1666059017457,"last_edited_time":1666059017457,"parent_id":"8c621443-5c47-4c91-9da6-23ccf2f0ad43","parent_table":"block","alive":true,"copied_from":"91620258-6773-419c-911a-b4c4748ef6da","created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"6286e61b-07f7-4589-b100-2caa85d05c03":{"role":"reader","value":{"id":"6286e61b-07f7-4589-b100-2caa85d05c03","version":1,"type":"code","properties":{"title":[["moscow: {\n  name:    \"Moscow\"\n  pop:     11.92M\n  capital: true\n}"]],"language":[["JSON"]]},"format":{"code_wrap":true,"copied_from_pointer":{"id":"2ba55c0c-c215-4d0f-9f02-363cd0c36da1","table":"block","spaceId":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"created_time":1666059017458,"last_edited_time":1666059017458,"parent_id":"36219f7a-636c-46db-92ad-53105e6e7e82","parent_table":"block","alive":true,"copied_from":"2ba55c0c-c215-4d0f-9f02-363cd0c36da1","created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"e5ece43c-11bc-4193-aa32-b5f9bec88e36":{"role":"reader","value":{"id":"e5ece43c-11bc-4193-aa32-b5f9bec88e36","version":1,"type":"code","properties":{"title":[["municipality: {\n  name:    string\n  pop:     int\n  capital: bool\n}"]],"language":[["JSON"]]},"format":{"code_wrap":true,"copied_from_pointer":{"id":"bc3cf328-c48f-4e36-b013-08c3cd7e1012","table":"block","spaceId":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"created_time":1666059017458,"last_edited_time":1666059017458,"parent_id":"a107bd2b-6297-4001-94e4-7487a70a43cd","parent_table":"block","alive":true,"copied_from":"bc3cf328-c48f-4e36-b013-08c3cd7e1012","created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"2f951692-91a2-45f3-82d6-b416177f89cc":{"role":"reader","value":{"id":"2f951692-91a2-45f3-82d6-b416177f89cc","version":1,"type":"code","properties":{"title":[["largeCapital: {\n  name:    string\n  pop:     \u003e5M\n  capital: true\n}"]],"language":[["JSON"]]},"format":{"code_wrap":true,"copied_from_pointer":{"id":"52eb1cb3-0601-4050-b51d-69397e081bd4","table":"block","spaceId":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"created_time":1666059017457,"last_edited_time":1666059017457,"parent_id":"1cc79676-2de7-497a-964b-3a198fc0e0c8","parent_table":"block","alive":true,"copied_from":"52eb1cb3-0601-4050-b51d-69397e081bd4","created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"b27f8ba6-b225-468d-86d2-df217ce99943":{"role":"reader","value":{"id":"b27f8ba6-b225-468d-86d2-df217ce99943","version":1,"type":"text","properties":{"title":[["在定义 JSON 数据时，我们通常会将 Data 和 Schema 分开处理。而 CUE 则将二者结合在一起，既可以指定数据字段类型，也可以直接填写具体值，也就是 CUE 并不会特意地区分 “类型” 和 “值”， "],["string",[["c"]]],[" 和 "],["\"Moscow\"",[["c"]]],[" 都会被当作值 ，但是二者之间有包含的先后顺序，在这里 "],["\"Moscow\"",[["c"]]],[" 可以背归纳于 "],["string",[["c"]]],[" 的一种，那么 "],["string",[["c"]]],[" 在格(lattice)中会优先于 "],["\"Moscow\"",[["c"]]],[" 。"]]},"format":{"copied_from_pointer":{"id":"be16b9c3-b08e-44b6-bc16-b217befd2e98","table":"block","spaceId":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"created_time":1666059017457,"last_edited_time":1666059017457,"parent_id":"29fc49e0-b597-4f2e-9d53-b7dd247adf4b","parent_table":"block","alive":true,"copied_from":"be16b9c3-b08e-44b6-bc16-b217befd2e98","created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"ce8295f9-201c-4044-901f-de22c24da2e4":{"role":"reader","value":{"id":"ce8295f9-201c-4044-901f-de22c24da2e4","version":1,"type":"text","properties":{"title":[["更多关于 CUE 的介绍，可以通过 "],["官方文档",[["a","https://cuelang.org/docs/"]]],[" 和 "],["定义",[["a","https://github.com/cuelang/cue/blob/master/doc/ref/spec.md"]]],[" 了解过多，这里就不展开了。"]]},"format":{"copied_from_pointer":{"id":"6e04e008-bd32-4a78-907f-5eb751a9ffd3","table":"block","spaceId":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"created_time":1666059017456,"last_edited_time":1666059017456,"parent_id":"29fc49e0-b597-4f2e-9d53-b7dd247adf4b","parent_table":"block","alive":true,"copied_from":"6e04e008-bd32-4a78-907f-5eb751a9ffd3","created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"23c5e587-7a1b-40cf-bb55-65ceec5d59fd":{"role":"reader","value":{"id":"23c5e587-7a1b-40cf-bb55-65ceec5d59fd","version":1,"type":"sub_header","properties":{"title":[["使用 CUE 做模版渲染"]]},"format":{"copied_from_pointer":{"id":"31283b87-6901-434b-92f5-f402045fb758","table":"block","spaceId":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"created_time":1666059017455,"last_edited_time":1666059017455,"parent_id":"29fc49e0-b597-4f2e-9d53-b7dd247adf4b","parent_table":"block","alive":true,"copied_from":"31283b87-6901-434b-92f5-f402045fb758","created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"57017493-73fe-49fc-90bd-4bbddfdad9b9":{"role":"reader","value":{"id":"57017493-73fe-49fc-90bd-4bbddfdad9b9","version":1,"type":"text","properties":{"title":[["CUE 有"],["很多很酷的使用场景",[["a","https://cuelang.org/docs/usecases/"]]],["，而先让我们关注其中的配置文件渲染能力。"]]},"format":{"copied_from_pointer":{"id":"dd05f428-2e86-400a-8386-f7894b5b7fe5","table":"block","spaceId":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"created_time":1666059017457,"last_edited_time":1666059017457,"parent_id":"29fc49e0-b597-4f2e-9d53-b7dd247adf4b","parent_table":"block","alive":true,"copied_from":"dd05f428-2e86-400a-8386-f7894b5b7fe5","created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"813bf42f-f6b1-4b3f-a56e-2cbd0132e95c":{"role":"reader","value":{"id":"813bf42f-f6b1-4b3f-a56e-2cbd0132e95c","version":1,"type":"text","format":{"copied_from_pointer":{"id":"0a53e472-61a5-4b12-85ad-18a8da7b1d5e","table":"block","spaceId":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"created_time":1666059017455,"last_edited_time":1666059017455,"parent_id":"29fc49e0-b597-4f2e-9d53-b7dd247adf4b","parent_table":"block","alive":true,"copied_from":"0a53e472-61a5-4b12-85ad-18a8da7b1d5e","created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"99d6d1fd-6874-4bb2-a4d8-15f7faab754c":{"role":"reader","value":{"id":"99d6d1fd-6874-4bb2-a4d8-15f7faab754c","version":1,"type":"text","properties":{"title":[["我们在这里借用 "],["KubeVela",[["c"]]],[" "],["文档中的例子",[["a","https://kubevela.io/docs/platform-engineers/cue/trait#using-cue-as-trait-schematic"]]]]},"format":{"copied_from_pointer":{"id":"15d22290-93d3-4297-b9f5-e206fb8b8a82","table":"block","spaceId":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"created_time":1666059017455,"last_edited_time":1666059017455,"parent_id":"29fc49e0-b597-4f2e-9d53-b7dd247adf4b","parent_table":"block","alive":true,"copied_from":"15d22290-93d3-4297-b9f5-e206fb8b8a82","created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"1e3ea433-ea62-479c-98bc-e20aca63da8f":{"role":"reader","value":{"id":"1e3ea433-ea62-479c-98bc-e20aca63da8f","version":1,"type":"code","properties":{"title":[["template: |\n  parameter: {\n      domain: string\n      http: [string]: int\n  }\n\n  // trait template can have multiple outputs in one trait\n  outputs: service: {\n      apiVersion: \"v1\"\n      kind:       \"Service\"\n      spec: {\n          selector:\n              app: context.name\n          ports: [\n              for k, v in parameter.http {\n                  port:       v\n                  targetPort: v\n              },\n          ]\n      }\n  }\n\n  outputs: ingress: {\n      apiVersion: \"networking.k8s.io/v1beta1\"\n      kind:       \"Ingress\"\n      metadata:\n          name: context.name\n      spec: {\n          rules: [{\n              host: parameter.domain\n              http: {\n                  paths: [\n                      for k, v in parameter.http {\n                          path: k\n                          backend: {\n                              serviceName: context.name\n                              servicePort: v\n                          }\n                      },\n                  ]\n              }\n          }]\n      }\n  }"]],"language":[["YAML"]]},"format":{"code_wrap":true,"copied_from_pointer":{"id":"b06368a1-e716-4d34-9462-74a0d8337f6c","table":"block","spaceId":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"created_time":1666059017456,"last_edited_time":1666059017456,"parent_id":"29fc49e0-b597-4f2e-9d53-b7dd247adf4b","parent_table":"block","alive":true,"copied_from":"b06368a1-e716-4d34-9462-74a0d8337f6c","created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"f8746dd3-2b48-4b7b-b77b-cd730761af68":{"role":"reader","value":{"id":"f8746dd3-2b48-4b7b-b77b-cd730761af68","version":1,"type":"text","properties":{"title":[["可以看到，只需要传入 "],["parameter",[["c"]]],[" ，就可以得到包含 "],["Service",[["c"]]],[" 和 "],["Ingress",[["c"]]],[" 的 "],["output",[["c"]]],[" 。"]]},"format":{"copied_from_pointer":{"id":"b15acb98-f8c4-470e-8e06-d6b660c6bd8e","table":"block","spaceId":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"created_time":1666059017456,"last_edited_time":1666059017456,"parent_id":"29fc49e0-b597-4f2e-9d53-b7dd247adf4b","parent_table":"block","alive":true,"copied_from":"b15acb98-f8c4-470e-8e06-d6b660c6bd8e","created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"71a44bc8-1b3b-4c4e-bf93-6a1e1c58159d":{"role":"reader","value":{"id":"71a44bc8-1b3b-4c4e-bf93-6a1e1c58159d","version":1,"type":"text","properties":{"title":[["这样的写法立刻让我们想到了一个类似的工具—— "],["Helm",[["a","https://github.com/helm/helm"]]],["，作为较早的 CNCF 毕业项目，Helm 已经慢慢演进成在 k8s 配置定义领域的事实意义上的工业标准。那么相较于 Helm，用 CUE 来写配置文件渲染，又有什么异同呢？"]]},"format":{"copied_from_pointer":{"id":"0b1ec4c7-a960-4214-8719-887d5af0ce16","table":"block","spaceId":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"created_time":1666059017455,"last_edited_time":1666059017455,"parent_id":"29fc49e0-b597-4f2e-9d53-b7dd247adf4b","parent_table":"block","alive":true,"copied_from":"0b1ec4c7-a960-4214-8719-887d5af0ce16","created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"5d00daa9-45db-4260-8448-bda03b815c2b":{"role":"reader","value":{"id":"5d00daa9-45db-4260-8448-bda03b815c2b","version":1,"type":"sub_header","properties":{"title":[["CUE vs Helm"]]},"format":{"copied_from_pointer":{"id":"1eaadb28-943d-4860-8932-f17b38513071","table":"block","spaceId":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"created_time":1666059017455,"last_edited_time":1666059017455,"parent_id":"29fc49e0-b597-4f2e-9d53-b7dd247adf4b","parent_table":"block","alive":true,"copied_from":"1eaadb28-943d-4860-8932-f17b38513071","created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"989008d0-1b66-4635-b96d-2dc42f9e7a9a":{"role":"reader","value":{"id":"989008d0-1b66-4635-b96d-2dc42f9e7a9a","version":1,"type":"text","properties":{"title":[["最直观的感受就是，在模版编写上 CUE 比 Helm 流畅太多了。主要的原因二者在最初的设计思路差异，Helm "],["借助的是 Go 和 Spring 的",[["a","https://helm.sh/docs/chart_template_guide/functions_and_pipelines/"]]],["纯文本渲染能力",[["b"],["a","https://helm.sh/docs/chart_template_guide/functions_and_pipelines/"]]],["，而对于 CUE，JSON 才是一等公民。所以在 K8S 这类 yaml（JSON 超集） 文件渲染上，CUE（也是 JSON 超集） 拥有天然的优势。"]]},"format":{"copied_from_pointer":{"id":"91390c7e-c90f-4de1-bfc4-95bddda1f66f","table":"block","spaceId":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"created_time":1666059017456,"last_edited_time":1666059017456,"parent_id":"29fc49e0-b597-4f2e-9d53-b7dd247adf4b","parent_table":"block","alive":true,"copied_from":"91390c7e-c90f-4de1-bfc4-95bddda1f66f","created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"e9405b96-4f2c-42f2-86fe-9f7a0d6b8e2c":{"role":"reader","value":{"id":"e9405b96-4f2c-42f2-86fe-9f7a0d6b8e2c","version":1,"type":"quote","properties":{"title":[["Talk is cheap， show me the code."]]},"format":{"copied_from_pointer":{"id":"ae275090-3d42-47bc-bf7b-77879db39e16","table":"block","spaceId":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"created_time":1666059017456,"last_edited_time":1666059017456,"parent_id":"29fc49e0-b597-4f2e-9d53-b7dd247adf4b","parent_table":"block","alive":true,"copied_from":"ae275090-3d42-47bc-bf7b-77879db39e16","created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"88029b49-8f7c-4e97-bbe5-214631cfeafc":{"role":"reader","value":{"id":"88029b49-8f7c-4e97-bbe5-214631cfeafc","version":1,"type":"text","properties":{"title":[["我们一起来看几个常用的场景。"]]},"format":{"copied_from_pointer":{"id":"12e76b7d-db90-4339-b008-fe1a4670a9aa","table":"block","spaceId":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"created_time":1666059017455,"last_edited_time":1666059017455,"parent_id":"29fc49e0-b597-4f2e-9d53-b7dd247adf4b","parent_table":"block","alive":true,"copied_from":"12e76b7d-db90-4339-b008-fe1a4670a9aa","created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"031ba65f-cac2-4aa2-b36d-e15636aa056f":{"role":"reader","value":{"id":"031ba65f-cac2-4aa2-b36d-e15636aa056f","version":1,"type":"sub_sub_header","properties":{"title":[["Named Templates"]]},"format":{"copied_from_pointer":{"id":"5c4fcb16-9256-43d7-99ad-4a5661557837","table":"block","spaceId":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"created_time":1666059017456,"last_edited_time":1666059017456,"parent_id":"29fc49e0-b597-4f2e-9d53-b7dd247adf4b","parent_table":"block","alive":true,"copied_from":"5c4fcb16-9256-43d7-99ad-4a5661557837","created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"9cf427e0-baa8-4f1c-8ddd-b87577625c37":{"role":"reader","value":{"id":"9cf427e0-baa8-4f1c-8ddd-b87577625c37","version":1,"type":"column_list","content":["b241cd70-38c3-4a49-8756-49595afad489","491c44b3-4b47-4bfc-b09f-c70afdfa8cea"],"format":{"copied_from_pointer":{"id":"e945e8b7-4f06-4555-ba44-d7c73f2d92bb","table":"block","spaceId":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"created_time":1666059017457,"last_edited_time":1666059017457,"parent_id":"29fc49e0-b597-4f2e-9d53-b7dd247adf4b","parent_table":"block","alive":true,"copied_from":"e945e8b7-4f06-4555-ba44-d7c73f2d92bb","created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"b241cd70-38c3-4a49-8756-49595afad489":{"role":"reader","value":{"id":"b241cd70-38c3-4a49-8756-49595afad489","version":1,"type":"column","content":["21b01c95-bc74-473a-874a-93c14502279c"],"format":{"column_ratio":0.5,"copied_from_pointer":{"id":"c311d74d-3abe-4f52-819c-edc42b996294","table":"block","spaceId":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"created_time":1666059017457,"last_edited_time":1666059017457,"parent_id":"9cf427e0-baa8-4f1c-8ddd-b87577625c37","parent_table":"block","alive":true,"copied_from":"c311d74d-3abe-4f52-819c-edc42b996294","created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"491c44b3-4b47-4bfc-b09f-c70afdfa8cea":{"role":"reader","value":{"id":"491c44b3-4b47-4bfc-b09f-c70afdfa8cea","version":1,"type":"column","content":["ce820d37-b02e-4607-9668-dece7d0c3be6"],"format":{"column_ratio":0.5,"copied_from_pointer":{"id":"a6892062-652a-400c-9841-818caef76417","table":"block","spaceId":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"created_time":1666059017457,"last_edited_time":1666059017457,"parent_id":"9cf427e0-baa8-4f1c-8ddd-b87577625c37","parent_table":"block","alive":true,"copied_from":"a6892062-652a-400c-9841-818caef76417","created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"21b01c95-bc74-473a-874a-93c14502279c":{"role":"reader","value":{"id":"21b01c95-bc74-473a-874a-93c14502279c","version":1,"type":"text","properties":{"title":[["Helm",[["b"]]]]},"format":{"copied_from_pointer":{"id":"a9ec36fd-d91a-4206-b4e6-8dfa70edc4ea","table":"block","spaceId":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"created_time":1666059017458,"last_edited_time":1666059017458,"parent_id":"b241cd70-38c3-4a49-8756-49595afad489","parent_table":"block","alive":true,"copied_from":"a9ec36fd-d91a-4206-b4e6-8dfa70edc4ea","created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"ce820d37-b02e-4607-9668-dece7d0c3be6":{"role":"reader","value":{"id":"ce820d37-b02e-4607-9668-dece7d0c3be6","version":1,"type":"text","properties":{"title":[["CUE",[["b"]]]]},"format":{"copied_from_pointer":{"id":"f1872966-222b-4408-97b0-d4ef9f2a4dee","table":"block","spaceId":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"created_time":1666059017457,"last_edited_time":1666059017457,"parent_id":"491c44b3-4b47-4bfc-b09f-c70afdfa8cea","parent_table":"block","alive":true,"copied_from":"f1872966-222b-4408-97b0-d4ef9f2a4dee","created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"f3a383cd-f740-401b-9bea-7ff394a41113":{"role":"reader","value":{"id":"f3a383cd-f740-401b-9bea-7ff394a41113","version":1,"type":"column_list","content":["d2f540af-ac25-4402-a8ce-7ad3444e4d6f","c64eb6ff-84e1-47e0-bf6a-8631cff370e4"],"format":{"copied_from_pointer":{"id":"67a42f70-18b8-46fd-a60a-62acedc5a497","table":"block","spaceId":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"created_time":1666059017456,"last_edited_time":1666059017456,"parent_id":"29fc49e0-b597-4f2e-9d53-b7dd247adf4b","parent_table":"block","alive":true,"copied_from":"67a42f70-18b8-46fd-a60a-62acedc5a497","created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"d2f540af-ac25-4402-a8ce-7ad3444e4d6f":{"role":"reader","value":{"id":"d2f540af-ac25-4402-a8ce-7ad3444e4d6f","version":1,"type":"column","content":["228b3f0a-f556-41e1-aac9-03ddfb650082"],"format":{"column_ratio":0.5,"copied_from_pointer":{"id":"3a87c78d-33b6-4ea3-a3cb-cd34ddad52e7","table":"block","spaceId":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"created_time":1666059017457,"last_edited_time":1666059017457,"parent_id":"f3a383cd-f740-401b-9bea-7ff394a41113","parent_table":"block","alive":true,"copied_from":"3a87c78d-33b6-4ea3-a3cb-cd34ddad52e7","created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"c64eb6ff-84e1-47e0-bf6a-8631cff370e4":{"role":"reader","value":{"id":"c64eb6ff-84e1-47e0-bf6a-8631cff370e4","version":1,"type":"column","content":["c805d76a-d66b-4b80-9bdd-be9a0cf2b5a0"],"format":{"column_ratio":0.49999999999999994,"copied_from_pointer":{"id":"c182761b-a46a-4af8-9f46-316c924ed78e","table":"block","spaceId":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"created_time":1666059017457,"last_edited_time":1666059017457,"parent_id":"f3a383cd-f740-401b-9bea-7ff394a41113","parent_table":"block","alive":true,"copied_from":"c182761b-a46a-4af8-9f46-316c924ed78e","created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"228b3f0a-f556-41e1-aac9-03ddfb650082":{"role":"reader","value":{"id":"228b3f0a-f556-41e1-aac9-03ddfb650082","version":1,"type":"code","properties":{"title":[["# values.yaml\napp_name: \"example_code\"\nother_attr1: \"foo\"\nother_attr2: \"bar\"\n\n# labels.tpl\n{{- define \"foo.labels\" -}}\nlabel1: {{ .Values.app_name | required \"app_name is required\" }} \nlabel2: {{ .Values.other_attr2 }}\n{{ include \"foo.selectorLabels\" . }}\n{{- end }}\n\n{{- define \"foo.selectorLabels\" -}}\nlabel3: {{ printf \"%s-%s\" .Values.app_name .Values.other_attr1 }}\n{{- end }}"]],"language":[["YAML"]]},"format":{"code_wrap":true,"copied_from_pointer":{"id":"f52031da-3ed2-4e6e-9888-ab91b29e1cee","table":"block","spaceId":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"created_time":1666059017457,"last_edited_time":1666059017457,"parent_id":"d2f540af-ac25-4402-a8ce-7ad3444e4d6f","parent_table":"block","alive":true,"copied_from":"f52031da-3ed2-4e6e-9888-ab91b29e1cee","created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"c805d76a-d66b-4b80-9bdd-be9a0cf2b5a0":{"role":"reader","value":{"id":"c805d76a-d66b-4b80-9bdd-be9a0cf2b5a0","version":1,"type":"code","properties":{"title":[["# labels.cue\napp_name: *\"example_code\" ｜ string\nother_attr1: \"foo\"\nother_attr2: \"bar\"\n\nselector_labels: {\n\tlabel3: \"\\( app_name )-\\( other_attr2 )\"\n}\n\nlabels: {\n\tlabel1: app_name\n  label2: other_attr2\n\tselector_labels\n}"]],"language":[["YAML"]]},"format":{"code_wrap":true,"copied_from_pointer":{"id":"cf8b74ed-6562-441d-bbc4-883d796909e7","table":"block","spaceId":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"created_time":1666059017458,"last_edited_time":1666059017458,"parent_id":"c64eb6ff-84e1-47e0-bf6a-8631cff370e4","parent_table":"block","alive":true,"copied_from":"cf8b74ed-6562-441d-bbc4-883d796909e7","created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"8ffe9655-1d23-4813-8a1f-e110c1eef1ed":{"role":"reader","value":{"id":"8ffe9655-1d23-4813-8a1f-e110c1eef1ed","version":1,"type":"bulleted_list","properties":{"title":[["Helm 可以在 "],[".tpl",[["c"]]],[" 文件中定义可复用的模版，并支持其他模版引用它，同时，也只有定义了的模版才能被复用，在复杂的 Chart 项目里你"],["需要额外定义非常多的基础模版",[["a","https://github.com/bitnami/charts/tree/master/bitnami/common/templates"]]],["。"]]},"format":{"copied_from_pointer":{"id":"98cf5f1a-e8da-4024-af81-c102b4c03cff","table":"block","spaceId":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"created_time":1666059017456,"last_edited_time":1666059017456,"parent_id":"29fc49e0-b597-4f2e-9d53-b7dd247adf4b","parent_table":"block","alive":true,"copied_from":"98cf5f1a-e8da-4024-af81-c102b4c03cff","created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"9b9466c6-f7da-4fc8-a161-06adb6406054":{"role":"reader","value":{"id":"9b9466c6-f7da-4fc8-a161-06adb6406054","version":1,"type":"bulleted_list","properties":{"title":[["相对于 Helm 繁琐的写法， 在 CUE 中所有内容均为 JSON 对象，不需要额外的语法去指定模版，任意 JSON 对象都可以互相引用。"]]},"format":{"copied_from_pointer":{"id":"d94d9de5-8827-4db6-aefd-9eb4273f1e8a","table":"block","spaceId":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"created_time":1666059017457,"last_edited_time":1666059017457,"parent_id":"29fc49e0-b597-4f2e-9d53-b7dd247adf4b","parent_table":"block","alive":true,"copied_from":"d94d9de5-8827-4db6-aefd-9eb4273f1e8a","created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"9040cb44-6036-49f1-ae93-1d70b56f2db7":{"role":"reader","value":{"id":"9040cb44-6036-49f1-ae93-1d70b56f2db7","version":1,"type":"sub_sub_header","properties":{"title":[["空行和缩进"]]},"format":{"copied_from_pointer":{"id":"fb641157-e9cc-4bbf-b1e2-fe96a3767258","table":"block","spaceId":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"created_time":1666059017457,"last_edited_time":1666059017457,"parent_id":"29fc49e0-b597-4f2e-9d53-b7dd247adf4b","parent_table":"block","alive":true,"copied_from":"fb641157-e9cc-4bbf-b1e2-fe96a3767258","created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"c5a1284e-db90-411b-aed1-881cd6a1be60":{"role":"reader","value":{"id":"c5a1284e-db90-411b-aed1-881cd6a1be60","version":1,"type":"text","properties":{"title":[["Helm",[["b"]]]]},"format":{"copied_from_pointer":{"id":"421bdb41-f1e3-4958-a852-7a63dd06b803","table":"block","spaceId":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"created_time":1666059017455,"last_edited_time":1666059017455,"parent_id":"29fc49e0-b597-4f2e-9d53-b7dd247adf4b","parent_table":"block","alive":true,"copied_from":"421bdb41-f1e3-4958-a852-7a63dd06b803","created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"54bb4ea7-e012-4912-af45-001b7ae3fe3c":{"role":"reader","value":{"id":"54bb4ea7-e012-4912-af45-001b7ae3fe3c","version":1,"type":"code","properties":{"title":[["apiVersion: apps/v1\nkind: Deployment\nmetadata:\n  name: {{ include \"foo.deploymentName\" . }}\n  labels:\n    {{- include \"foo.labels\" . | nindent 4 }}\nspec:\n  replicas: {{ .Values.replicaCount }}\n  selector:\n    matchLabels:\n      {{- include \"foo.selectorLabels\" . | nindent 6 }}\n  strategy:\n    {{- include \"foo.updateStrategy\" . | nindent 4 }}\n  revisionHistoryLimit: {{ .Values.revisionHistoryLimit }}\n  template:\n    metadata:\n    {{- with .Values.podAnnotations }}\n      annotations:\n        {{- toYaml . | nindent 8 }}\n    {{- end }}\n      labels:\n        {{- include \"foo.labels\" . | nindent 8 }}"]],"language":[["YAML"]]},"format":{"code_wrap":true,"copied_from_pointer":{"id":"d42374e0-866a-4b2f-a318-70cb2c7cbf50","table":"block","spaceId":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"created_time":1666059017457,"last_edited_time":1666059017457,"parent_id":"29fc49e0-b597-4f2e-9d53-b7dd247adf4b","parent_table":"block","alive":true,"copied_from":"d42374e0-866a-4b2f-a318-70cb2c7cbf50","created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"2c08e8f3-7d03-4986-94d0-e06547f46453":{"role":"reader","value":{"id":"2c08e8f3-7d03-4986-94d0-e06547f46453","version":1,"type":"text","properties":{"title":[["CUE",[["b"]]]]},"format":{"copied_from_pointer":{"id":"9b29f127-a554-4bfe-976d-d91f5f58acb6","table":"block","spaceId":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"created_time":1666059017456,"last_edited_time":1666059017456,"parent_id":"29fc49e0-b597-4f2e-9d53-b7dd247adf4b","parent_table":"block","alive":true,"copied_from":"9b29f127-a554-4bfe-976d-d91f5f58acb6","created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"ca829be0-f99d-4edd-8419-92ea8e5cb964":{"role":"reader","value":{"id":"ca829be0-f99d-4edd-8419-92ea8e5cb964","version":1,"type":"code","properties":{"title":[["deployment: {\n\tapiVersion: \"apps/v1\"\n\tkind:       \"Deployment\"\n\tmetadata: {\n\t\tname:   deployment_name\n\t\tlabels: labels\n\t}\n\tspec: {\n\t\treplicas: runtime.replicas\n\t\tselector: matchLabels: selector_labels\n\t\tstrategy:             update_strategy\n\t\trevisionHistoryLimit: revision_history_limit"]],"language":[["YAML"]]},"format":{"code_wrap":true,"copied_from_pointer":{"id":"d45c5dfb-acfb-4620-b7a2-918296786caf","table":"block","spaceId":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"created_time":1666059017457,"last_edited_time":1666059017457,"parent_id":"29fc49e0-b597-4f2e-9d53-b7dd247adf4b","parent_table":"block","alive":true,"copied_from":"d45c5dfb-acfb-4620-b7a2-918296786caf","created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"b5fcb078-10f8-485e-99a3-8e65c1b42d39":{"role":"reader","value":{"id":"b5fcb078-10f8-485e-99a3-8e65c1b42d39","version":1,"type":"bulleted_list","properties":{"title":[[" Helm 中有大量的 "],["{{- include }}",[["c"]]],[" 和 "],["nindent",[["c"]]],[" 等和实际逻辑无关的标记字符，需要在每一次引用的地方计算空格和缩进。"]]},"format":{"copied_from_pointer":{"id":"d9053d6c-ef5b-4f92-a6cb-c7e0c552a16b","table":"block","spaceId":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"created_time":1666059017457,"last_edited_time":1666059017457,"parent_id":"29fc49e0-b597-4f2e-9d53-b7dd247adf4b","parent_table":"block","alive":true,"copied_from":"d9053d6c-ef5b-4f92-a6cb-c7e0c552a16b","created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"38b95650-4833-4fb6-92f4-fb38e1eccd09":{"role":"reader","value":{"id":"38b95650-4833-4fb6-92f4-fb38e1eccd09","version":1,"type":"bulleted_list","properties":{"title":[["而在 CUE 中无用编码更少，不需要过多的 "],["{{ * }}",[["c"]]],[" 来标记代码块，信息密度更高，而且在缩进和空格方面得到了完全的解放。"]]},"format":{"copied_from_pointer":{"id":"bd793b69-edb8-417c-9530-34dc63fca430","table":"block","spaceId":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"created_time":1666059017456,"last_edited_time":1666059017456,"parent_id":"29fc49e0-b597-4f2e-9d53-b7dd247adf4b","parent_table":"block","alive":true,"copied_from":"bd793b69-edb8-417c-9530-34dc63fca430","created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"23d0196a-a8e4-404a-bb2c-fa6af7e01572":{"role":"reader","value":{"id":"23d0196a-a8e4-404a-bb2c-fa6af7e01572","version":1,"type":"sub_sub_header","properties":{"title":[["values.yaml 自引用"]]},"format":{"copied_from_pointer":{"id":"abbbdbc7-2f49-4aa7-a3fa-2c7cbea8e9ef","table":"block","spaceId":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"created_time":1666059017456,"last_edited_time":1666059017456,"parent_id":"29fc49e0-b597-4f2e-9d53-b7dd247adf4b","parent_table":"block","alive":true,"copied_from":"abbbdbc7-2f49-4aa7-a3fa-2c7cbea8e9ef","created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"e0ebfa7c-177e-450c-92f3-fc6c9a54835c":{"role":"reader","value":{"id":"e0ebfa7c-177e-450c-92f3-fc6c9a54835c","version":1,"type":"text","properties":{"title":[["在 Helm 中，一个长久以来的头疼问题就是，无法优雅地实现 "],["values.yaml",[["c"]]],[" 引用问题。"]]},"format":{"copied_from_pointer":{"id":"f265500b-6aca-4d56-b95f-48e3d6315d32","table":"block","spaceId":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"created_time":1666059017457,"last_edited_time":1666059017457,"parent_id":"29fc49e0-b597-4f2e-9d53-b7dd247adf4b","parent_table":"block","alive":true,"copied_from":"f265500b-6aca-4d56-b95f-48e3d6315d32","created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"7984173a-56cb-4bdd-bbd8-efb7f62c2e0f":{"role":"reader","value":{"id":"7984173a-56cb-4bdd-bbd8-efb7f62c2e0f","version":1,"type":"text","properties":{"title":[["我们看下面的例子："]]},"format":{"copied_from_pointer":{"id":"a7e26973-67eb-42ab-b271-b0f5c8bfe381","table":"block","spaceId":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"created_time":1666059017456,"last_edited_time":1666059017456,"parent_id":"29fc49e0-b597-4f2e-9d53-b7dd247adf4b","parent_table":"block","alive":true,"copied_from":"a7e26973-67eb-42ab-b271-b0f5c8bfe381","created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"963d3409-5a7e-4433-8953-8374f0a3407e":{"role":"reader","value":{"id":"963d3409-5a7e-4433-8953-8374f0a3407e","version":1,"type":"code","properties":{"title":[["rootDomain: \"\"\n\n# 我们期待的是通过引用 rootDomain 拼接，例如：\"foo.{{ .Values.rootDomain }}\"\nproductDomain: \"\""]],"language":[["YAML"]]},"format":{"code_wrap":true,"copied_from_pointer":{"id":"570e3c82-9e7a-4cc8-b3e8-1f780dc99762","table":"block","spaceId":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"created_time":1666059017456,"last_edited_time":1666059017456,"parent_id":"29fc49e0-b597-4f2e-9d53-b7dd247adf4b","parent_table":"block","alive":true,"copied_from":"570e3c82-9e7a-4cc8-b3e8-1f780dc99762","created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"f5e89f66-c62b-4209-b64a-fdb7a67e7970":{"role":"reader","value":{"id":"f5e89f66-c62b-4209-b64a-fdb7a67e7970","version":1,"type":"text","properties":{"title":[["通常的情况下，Chart 的使用者需要针对这两个变量分别填写内容，增加了出错的可能。"]]},"format":{"copied_from_pointer":{"id":"acbbe597-a129-44bd-9363-2823f209b59d","table":"block","spaceId":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"created_time":1666059017456,"last_edited_time":1666059017456,"parent_id":"29fc49e0-b597-4f2e-9d53-b7dd247adf4b","parent_table":"block","alive":true,"copied_from":"acbbe597-a129-44bd-9363-2823f209b59d","created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"81310d6b-8e99-401b-acf0-9b9c7fe2da52":{"role":"reader","value":{"id":"81310d6b-8e99-401b-acf0-9b9c7fe2da52","version":1,"type":"text","properties":{"title":[["虽然我们可以通过定义模版来实现："]]},"format":{"copied_from_pointer":{"id":"81c99e62-7d6c-4758-b271-0576cbc1e795","table":"block","spaceId":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"created_time":1666059017456,"last_edited_time":1666059017456,"parent_id":"29fc49e0-b597-4f2e-9d53-b7dd247adf4b","parent_table":"block","alive":true,"copied_from":"81c99e62-7d6c-4758-b271-0576cbc1e795","created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"94da15df-2f80-4180-8e51-77f8bd7d5bf1":{"role":"reader","value":{"id":"94da15df-2f80-4180-8e51-77f8bd7d5bf1","version":1,"type":"code","properties":{"title":[["# values.yaml\nrootDomain: \"\"\nproductDomain: \"foo.{{ .Values.rootDomain }}\"\n\n# helpers.tpl\n{{- define \"foo.productDomain\" -}}\n{{ tpl .Values.productDomain $ }}\n{{- end }}\n\n# ingress.yaml\n...\nspec:\n  rules:\n    - host: {{ include \"foo.productDomain\" . | quote }}\n..."]],"language":[["YAML"]]},"format":{"code_wrap":true,"copied_from_pointer":{"id":"11e7f102-d49b-4be1-b312-b7d051fae34c","table":"block","spaceId":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"created_time":1666059017455,"last_edited_time":1666059017455,"parent_id":"29fc49e0-b597-4f2e-9d53-b7dd247adf4b","parent_table":"block","alive":true,"copied_from":"11e7f102-d49b-4be1-b312-b7d051fae34c","created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"c207daf5-e6d0-4e42-aa28-ca6867a86049":{"role":"reader","value":{"id":"c207daf5-e6d0-4e42-aa28-ca6867a86049","version":1,"type":"text","properties":{"title":[["但在实际使用中，所有引用的地方都需要额外 "],["include",[["c"]]],[" ，同时定义的维护也非常耗费心力（要时刻保证空行、缩进不出错）。"]]},"format":{"copied_from_pointer":{"id":"aeece2c5-25b7-433b-92ad-56e53f9411f1","table":"block","spaceId":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"created_time":1666059017456,"last_edited_time":1666059017456,"parent_id":"29fc49e0-b597-4f2e-9d53-b7dd247adf4b","parent_table":"block","alive":true,"copied_from":"aeece2c5-25b7-433b-92ad-56e53f9411f1","created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"dba38137-957a-4468-a22a-83273ff5a207":{"role":"reader","value":{"id":"dba38137-957a-4468-a22a-83273ff5a207","version":1,"type":"text","properties":{"title":[["而在 CUE 中，相互引用显得自然而舒服。"]]},"format":{"copied_from_pointer":{"id":"69a94ff2-928b-40ca-84e9-69becb83bcc6","table":"block","spaceId":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"created_time":1666059017456,"last_edited_time":1666059017456,"parent_id":"29fc49e0-b597-4f2e-9d53-b7dd247adf4b","parent_table":"block","alive":true,"copied_from":"69a94ff2-928b-40ca-84e9-69becb83bcc6","created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"4c5d10e1-08e2-4402-9165-0f1221532faa":{"role":"reader","value":{"id":"4c5d10e1-08e2-4402-9165-0f1221532faa","version":1,"type":"code","properties":{"title":[["rootDomain: string\nproductDomain: *\"foo.\\( rootDomain )\" | string"]],"language":[["JSON"]]},"format":{"code_wrap":true,"copied_from_pointer":{"id":"806e3786-952e-4c76-9993-e2e7701fdddd","table":"block","spaceId":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"created_time":1666059017456,"last_edited_time":1666059017456,"parent_id":"29fc49e0-b597-4f2e-9d53-b7dd247adf4b","parent_table":"block","alive":true,"copied_from":"806e3786-952e-4c76-9993-e2e7701fdddd","created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"2d212d1d-74ca-4f55-8165-434d9a67aa5d":{"role":"reader","value":{"id":"2d212d1d-74ca-4f55-8165-434d9a67aa5d","version":1,"type":"sub_sub_header","properties":{"title":[["导入 Kubernetes 包"]]},"format":{"copied_from_pointer":{"id":"fcc9c29e-41ee-4cd7-80a5-ab82ca94e623","table":"block","spaceId":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"created_time":1666059017457,"last_edited_time":1666059017457,"parent_id":"29fc49e0-b597-4f2e-9d53-b7dd247adf4b","parent_table":"block","alive":true,"copied_from":"fcc9c29e-41ee-4cd7-80a5-ab82ca94e623","created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"f56cc7da-728d-41d1-a2a8-b1d24e94e30a":{"role":"reader","value":{"id":"f56cc7da-728d-41d1-a2a8-b1d24e94e30a","version":1,"type":"text","properties":{"title":[["CUE 的另一大杀器，可以针对原生 Kubernetes 源码生成描述 cue 文件，所有 k8s 资源相关的配置文件，都可以天然地拥有 schema 校验。具体教程可以查看 "],["Kubernetes tutorial",[["a","https://cue.googlesource.com/cue/+/HEAD/doc/tutorial/kubernetes/README.md"]]],["。"]]},"format":{"copied_from_pointer":{"id":"c7d80eed-0b02-4894-ab8a-a99061b98149","table":"block","spaceId":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"created_time":1666059017457,"last_edited_time":1666059017457,"parent_id":"29fc49e0-b597-4f2e-9d53-b7dd247adf4b","parent_table":"block","alive":true,"copied_from":"c7d80eed-0b02-4894-ab8a-a99061b98149","created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"9a129a87-c198-4d3a-82b1-f45683255a64":{"role":"reader","value":{"id":"9a129a87-c198-4d3a-82b1-f45683255a64","version":1,"type":"code","properties":{"title":[["package templates\n\nimport (\n\tapps \"k8s.io/api/apps/v1\"\n)\n\ndeployment: apps.#Deployment\n\ndeployment: {\n\tapiVersion: \"apps/v1\"\n\tkind:       \"Deployment\"\n\tmetadata: {\n\t\tname:   deployment_name\n\t\tlabels: _labels\n\t}\n..."]],"language":[["YAML"]]},"format":{"code_wrap":true,"copied_from_pointer":{"id":"0c0a1a46-61c0-4fcc-8978-28b4cee471db","table":"block","spaceId":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"created_time":1666059017455,"last_edited_time":1666059017455,"parent_id":"29fc49e0-b597-4f2e-9d53-b7dd247adf4b","parent_table":"block","alive":true,"copied_from":"0c0a1a46-61c0-4fcc-8978-28b4cee471db","created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"1011b4ce-77c1-43f7-972c-c817a33b4dc5":{"role":"reader","value":{"id":"1011b4ce-77c1-43f7-972c-c817a33b4dc5","version":1,"type":"text","properties":{"title":[["类似这个例子中，我们定义的 "],["deployment",[["c"]]],[" 将会通过 "],["apps.#Deployment",[["c"]]],[" 校验，轻松检测出不合法的字段。理论上，你可以针对多个不同版本的 k8s 资源都生成 cue 文件，并且都作为 "],["deployment",[["c"]]],[" 的模型定义，这样可以实现资源定义的多版本兼容能力。"]]},"format":{"copied_from_pointer":{"id":"48b60f2b-8471-4870-9c11-24eee00fdb98","table":"block","spaceId":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"created_time":1666059017455,"last_edited_time":1666059017455,"parent_id":"29fc49e0-b597-4f2e-9d53-b7dd247adf4b","parent_table":"block","alive":true,"copied_from":"48b60f2b-8471-4870-9c11-24eee00fdb98","created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"858fcc7f-e3e0-4cc5-88a7-9ab7fefd25fc":{"role":"reader","value":{"id":"858fcc7f-e3e0-4cc5-88a7-9ab7fefd25fc","version":1,"type":"text","format":{"copied_from_pointer":{"id":"ecdc814c-7664-4e6b-9013-e38c1327aa60","table":"block","spaceId":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"created_time":1666059017457,"last_edited_time":1666059017457,"parent_id":"29fc49e0-b597-4f2e-9d53-b7dd247adf4b","parent_table":"block","alive":true,"copied_from":"ecdc814c-7664-4e6b-9013-e38c1327aa60","created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"c355ab65-5f26-4eb0-8bbb-13cd6597b2d3":{"role":"reader","value":{"id":"c355ab65-5f26-4eb0-8bbb-13cd6597b2d3","version":1,"type":"sub_header","properties":{"title":[["说了这么多好处，现在就把所有 Helm Chart 都替换成 CUE？"]]},"format":{"copied_from_pointer":{"id":"7baa71f9-a288-42d2-9ffd-05ac6f740d9f","table":"block","spaceId":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"created_time":1666059017456,"last_edited_time":1666059017456,"parent_id":"29fc49e0-b597-4f2e-9d53-b7dd247adf4b","parent_table":"block","alive":true,"copied_from":"7baa71f9-a288-42d2-9ffd-05ac6f740d9f","created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"76ee41cf-0b01-4ab5-8342-d9dadfa0dc96":{"role":"reader","value":{"id":"76ee41cf-0b01-4ab5-8342-d9dadfa0dc96","version":1,"type":"text","properties":{"title":[["且慢，还没到时候。"]]},"format":{"copied_from_pointer":{"id":"dfb02238-f079-4510-b9bc-1a5718f0bfb3","table":"block","spaceId":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"created_time":1666059017457,"last_edited_time":1666059017457,"parent_id":"29fc49e0-b597-4f2e-9d53-b7dd247adf4b","parent_table":"block","alive":true,"copied_from":"dfb02238-f079-4510-b9bc-1a5718f0bfb3","created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"66385d71-8ce5-497e-80a4-94732f243c56":{"role":"reader","value":{"id":"66385d71-8ce5-497e-80a4-94732f243c56","version":1,"type":"text","properties":{"title":[["因为 Helm 作为 "],["Package Manager",[["c"]]],[" ，除了 Chart 渲染，本身还具备一定的应用管理功能，例如 "],["Helm install",[["c"]]],[" 、 "],["Helm rollback",[["c"]]],[" 等，而 CUE 仅仅是模版。所以在某些我们只使用了 Helm 的模版功能的情况下，可以考虑迁移到 CUE，其他情况，还是用 Helm 吧。"]]},"format":{"copied_from_pointer":{"id":"49b76d49-6de8-4f75-b597-e5bd26955b54","table":"block","spaceId":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"created_time":1666059017456,"last_edited_time":1666059017456,"parent_id":"29fc49e0-b597-4f2e-9d53-b7dd247adf4b","parent_table":"block","alive":true,"copied_from":"49b76d49-6de8-4f75-b597-e5bd26955b54","created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"21242049-9e7c-482a-8511-5d93d0ea1e20":{"role":"reader","value":{"id":"21242049-9e7c-482a-8511-5d93d0ea1e20","version":1,"type":"sub_sub_header","properties":{"title":[["脑洞"]]},"format":{"copied_from_pointer":{"id":"6348fdc6-57f3-43c3-a38e-f0c75d05233e","table":"block","spaceId":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"created_time":1666059017456,"last_edited_time":1666059017456,"parent_id":"29fc49e0-b597-4f2e-9d53-b7dd247adf4b","parent_table":"block","alive":true,"copied_from":"6348fdc6-57f3-43c3-a38e-f0c75d05233e","created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"5b0d5229-3b8a-424f-ab06-cdfdd4e39da1":{"role":"reader","value":{"id":"5b0d5229-3b8a-424f-ab06-cdfdd4e39da1","version":1,"type":"text","properties":{"title":[["做一个开源的 CLI，支持将多个文件聚合为一个应用统一管理："]]},"format":{"copied_from_pointer":{"id":"5d04a9c0-4755-420b-a08f-eaa4d8d70fd9","table":"block","spaceId":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"created_time":1666059017456,"last_edited_time":1666059017456,"parent_id":"29fc49e0-b597-4f2e-9d53-b7dd247adf4b","parent_table":"block","alive":true,"copied_from":"5d04a9c0-4755-420b-a08f-eaa4d8d70fd9","created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"56634d78-612a-4897-aee0-18a9de4fd74a":{"role":"reader","value":{"id":"56634d78-612a-4897-aee0-18a9de4fd74a","version":1,"type":"bulleted_list","properties":{"title":[["类似 Helm 的能力，支持安装、更新、回滚"]]},"format":{"copied_from_pointer":{"id":"bcde39a4-f97b-45c5-b066-02c6b5748418","table":"block","spaceId":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"created_time":1666059017456,"last_edited_time":1666059017456,"parent_id":"29fc49e0-b597-4f2e-9d53-b7dd247adf4b","parent_table":"block","alive":true,"copied_from":"bcde39a4-f97b-45c5-b066-02c6b5748418","created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"f8a5efbf-3319-4fe1-a7b8-fbb887ab358e":{"role":"reader","value":{"id":"f8a5efbf-3319-4fe1-a7b8-fbb887ab358e","version":1,"type":"bulleted_list","properties":{"title":[["针对配置，支持裸配置和 CUE 文件"]]},"format":{"copied_from_pointer":{"id":"f454e16d-81c9-49bb-b3be-3565bbb9f650","table":"block","spaceId":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"created_time":1666059017457,"last_edited_time":1666059017457,"parent_id":"29fc49e0-b597-4f2e-9d53-b7dd247adf4b","parent_table":"block","alive":true,"copied_from":"f454e16d-81c9-49bb-b3be-3565bbb9f650","created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"b29766be-75ec-4f8b-92d6-92f6e90ff696":{"role":"reader","value":{"id":"b29766be-75ec-4f8b-92d6-92f6e90ff696","version":1,"type":"text","properties":{"title":[["好了，先说这么多，我去尝试写一写，下篇文章见 👋 ～"]]},"format":{"copied_from_pointer":{"id":"4be2870f-1239-4f04-ad22-4be35dfccdb9","table":"block","spaceId":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"created_time":1666059017456,"last_edited_time":1666059017456,"parent_id":"29fc49e0-b597-4f2e-9d53-b7dd247adf4b","parent_table":"block","alive":true,"copied_from":"4be2870f-1239-4f04-ad22-4be35dfccdb9","created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"5731d426-beec-4b59-aae4-0ca01dd3b6e5":{"role":"reader","value":{"id":"5731d426-beec-4b59-aae4-0ca01dd3b6e5","version":1,"type":"text","format":{"copied_from_pointer":{"id":"e0686767-d695-4fad-b579-63c346e7c743","table":"block","spaceId":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"created_time":1666059017457,"last_edited_time":1666059017457,"parent_id":"29fc49e0-b597-4f2e-9d53-b7dd247adf4b","parent_table":"block","alive":true,"copied_from":"e0686767-d695-4fad-b579-63c346e7c743","created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"}}},"collection":{"e34bec60-9b02-4ad8-aaf8-83369409cc9f":{"role":"reader","value":{"id":"e34bec60-9b02-4ad8-aaf8-83369409cc9f","version":92,"name":[["布鲁斯鱼的妙想天开 "]],"schema":{"NX\\Q":{"name":"date","type":"date"},"`gQ~":{"name":"type","type":"select","options":[{"id":"5aff2f95-fd1e-489b-8840-bf10bc9519cb","color":"purple","value":"Post"},{"id":"374d2bc6-a144-4832-8ca4-474aaae0ea1f","color":"orange","value":"Page"}]},"d]hq":{"name":"slug","type":"text"},"sD^m":{"name":"tags","type":"multi_select","options":[{"id":"790180f1-0c2e-4730-a1ef-c5463df34680","color":"brown","value":"python"},{"id":"5d668f5e-7204-4c7e-b57e-5558bd27efaf","color":"gray","value":"pep"},{"id":"9081ab60-29ee-4a5b-9989-f50cf36ecb9b","color":"orange","value":"tech"},{"id":"c0225229-afab-45e4-b69b-b71029b39835","color":"red","value":"django"},{"id":"90084124-d1d5-49fb-86e7-4b133c051d81","color":"default","value":"orm"},{"id":"10ace7d0-10e6-4617-970e-acf2d9348d0f","color":"yellow","value":"best-practice"},{"id":"1b9671ca-93e5-402d-a73e-f9aca38e4358","color":"pink","value":"web"},{"id":"c7015bc7-2283-4b3d-8d19-3075724a10df","color":"blue","value":"blog"},{"id":"22d9ce60-f854-4122-b0fc-4f4c3a41979e","color":"green","value":"guide"},{"id":"6e99d746-1829-43e3-a828-214a1ae79b4a","color":"purple","value":"ELK"},{"id":"45ebe27a-5445-4cc3-91c9-ec1f1296dcf4","color":"brown","value":"pytest"},{"id":"9f679b83-f407-4130-b5b7-f969329300bf","color":"brown","value":"unittest"},{"id":"e30656d1-1ff2-434c-a2cb-8b3c75c9d1a1","color":"gray","value":"fun"},{"id":"5146a8a4-5647-4ce0-8a7b-1a6320adee06","color":"blue","value":"back-pressure"},{"id":"36828c03-3b80-417d-82a3-b1066ad5ca60","color":"green","value":"Dependency injection"},{"id":"9602332d-afbb-41e8-baed-bd0dd39a5e21","color":"brown","value":"k8s"},{"id":"82cd2499-ddd4-43ad-9298-fba21fe29cfa","color":"brown","value":"helm"},{"id":"f0a44444-e52d-4db2-9262-aa29d7ded8e3","color":"blue","value":"celery"},{"id":"a87e284b-1c48-422e-9811-eba8a167f97a","color":"red","value":"amqp"},{"id":"dc50dbb3-8e3a-4747-95d8-c9098e70e088","color":"default","value":"tcp"},{"id":"90b243e4-95f4-459e-b5b7-42f09020978b","color":"gray","value":"graphql"},{"id":"00f0130d-3a96-4e5a-8b5e-77e14e0a3ff7","color":"purple","value":"logstash"},{"id":"a921b879-fcef-4ace-8c96-7a6e11fe2358","color":"orange","value":"konajdk"},{"id":"b8e6dc68-925c-4d32-84d9-580d1a34c3a6","color":"orange","value":"regex"},{"id":"fc66930c-fa10-44b1-b553-5f6acc796321","color":"gray","value":"nfa"},{"id":"f9255cb2-7e85-4bce-8042-472643ff3b58","color":"orange","value":"dfa"},{"id":"e00a51c2-af1c-4bfd-a118-e83e73f3e1a3","color":"purple","value":"security"},{"id":"45105ec0-49be-430b-aead-ef83cfbc8b02","color":"pink","value":"reading"},{"id":"4c3a21fd-3ba5-44a2-8c5e-ef6e9100c32c","color":"brown","value":"software-engineering"},{"id":"4cd1d179-3466-4d7e-baf2-99a4c0250a78","color":"blue","value":"google"},{"id":"22973bbb-4038-4f9b-a30c-c0ab6506d65d","color":"gray","value":"note"},{"id":"1ca18016-ff4e-41e0-af37-6ea457fc4bd8","color":"orange","value":"go"}]},"wz|S":{"name":"summary","type":"text"},"title":{"name":"title","type":"title"},"f211bdc0-ee00-4186-9a7d-f68c055ec2ee":{"name":"status","type":"select","options":[{"id":"22460321-fea2-4c7c-b352-a674760780ac","color":"orange","value":"Idea"},{"id":"41d5f5c6-b53c-42bc-8e0f-fc9402048480","color":"yellow","value":"Draft"},{"id":"c7390b31-9fab-4e21-94ee-7e67ea077a97","color":"blue","value":"Revise"},{"id":"7abc61d4-b405-480d-b699-12588755fa65","color":"red","value":"Published"}]}},"icon":"🗯️","format":{"copied_from_pointer":{"id":"6a42b751-ff40-4f34-aa6a-1830a3344cb7","table":"collection","spaceId":"ac4cb96d-c8f8-4040-9bb2-868d9fc7f526"},"collection_page_properties":[{"visible":false,"property":"NX\\Q"},{"visible":false,"property":"d]hq"},{"visible":false,"property":"f211bdc0-ee00-4186-9a7d-f68c055ec2ee"},{"visible":false,"property":"sD^m"},{"visible":false,"property":"wz|S"},{"visible":false,"property":"`gQ~"}]},"parent_id":"a6089909-2d0d-43ef-af93-5e041712e826","parent_table":"block","alive":true,"file_ids":["6cf3dc36-2f98-4f0e-9679-1bdbb1485129","5520bd92-e709-4c0d-ad58-06923f23f7e9","624d393a-62e3-4464-a1bf-1c79ecd4fbda","d52f6766-3e32-4c3d-8529-46e1f214360f"],"copied_from":"6a42b751-ff40-4f34-aa6a-1830a3344cb7","migrated":true,"space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6","deleted_schema":{"0d330ccb-d222-4440-a0de-6cccfe926a33":{"name":"url","type":"text"},"26ff3130-393a-45ac-92b5-7490d9b87515":{"name":"template","type":"select","options":[{"id":"V*ea","color":"purple","value":"post"}]},"29e679ed-47a3-46c2-9eb4-9070171591b8":{"name":"inList","type":"checkbox"},"2af12d30-97f0-4310-b38c-02e6a554245f":{"name":"publish","type":"checkbox"},"2bf55746-6864-4bb6-b585-77b81f140da1":{"name":"inList","type":"checkbox"},"487aab80-eb42-4dd6-a386-d58672ff59fa":{"name":"description","type":"text"},"53819e0d-5bc6-40de-a8bc-498fdf840fbc":{"name":"description","type":"text"},"67c34d44-b9f2-42c1-b35c-4a534c03bdd9":{"name":"inList","type":"checkbox"},"69fb2cd3-221c-476b-86c2-ab74f4490cc9":{"name":"template","type":"select","options":[{"id":"V*ea","color":"purple","value":"post"}]},"ab0a009c-1080-47c3-aecc-b26dc703a4e0":{"name":"url","type":"text"},"ad8f0878-e947-4188-8970-1ca14665f6e3":{"name":"inMenu","type":"checkbox"},"b2c6f9d4-31e2-4230-b57e-4bdb21a3d635":{"name":"template","type":"select","options":[{"id":"V*ea","color":"purple","value":"post"}]},"b387319f-5770-457e-8453-1d2f2708f9f1":{"name":"url","type":"text"},"b6d830ff-ce1d-4e76-a484-f0fc3f148c52":{"name":"publish","type":"checkbox"},"c0b15f23-eddd-4316-95d1-a92a4edbc710":{"name":"publish","type":"checkbox"},"e3660c02-9d93-463b-9495-addeeabd3e80":{"name":"description","type":"text"}}}}},"space":{},"collection_view":{"065b98d2-d3b4-4dab-8b96-4eb118a3f311":{"role":"reader","value":{"id":"065b98d2-d3b4-4dab-8b96-4eb118a3f311","version":32,"type":"table","name":"Default view","format":{"table_wrap":false,"table_properties":[{"width":371,"visible":true,"property":"title"},{"width":243,"visible":true,"property":"d]hq"},{"width":159,"visible":true,"property":"NX\\Q"},{"width":147,"visible":true,"property":"wz|S"},{"width":356,"visible":true,"property":"sD^m"},{"width":124,"visible":true,"property":"f211bdc0-ee00-4186-9a7d-f68c055ec2ee"},{"width":100,"visible":true,"property":"`gQ~"}]},"parent_id":"a6089909-2d0d-43ef-af93-5e041712e826","parent_table":"block","alive":true,"page_sort":["b1e1d645-db95-42e5-8995-39a80eda6460","e8cd3732-dc1c-43ae-959a-a5a611ec098a","e876558d-e878-47f6-8c95-21be678990a5","5a971ded-d3c5-41be-bef9-ddfff48d43a2","8db8b240-e1c5-4dd7-bf74-72584d7a2ce0","daf94ca4-ec56-47a3-84ed-b1e2479acc4b","d1a2db9b-6820-421e-9b80-017ce7478587","67ea9f83-b9f6-416b-afcb-7c64f7533e6c","45939470-9819-47e8-b12b-999cfefa0aad","c60dc33d-8efb-44be-a863-7a87ad047932","fe4b8d5f-7c49-42c6-a7d5-1cb71c4f7e86","b7233a67-c367-4198-831e-f12089568d1f","4f3bf306-92c4-41b7-a43e-957129a1240a","6a789607-66cf-498e-9b32-eb3fa69a84f4","c9429034-dabd-4a25-8782-97f20c808a60","38c49fe2-37f8-4a7f-a99f-9edb9ddad4c2","474eb638-9f6b-46bf-8004-77668293f199","81d6dfab-69cb-43a0-aa04-e9725f0b67e1","7703d956-84db-46cd-b538-48eae1af68b5","9f937c73-dac9-4ed7-9b01-beefcb321f16","3cf9dcb9-e7db-406c-80ab-c65c11fbf906","5827ab53-e051-455b-b90a-3bdc20158c2c","fa7acd3b-dea9-4fb1-b859-5345f35163c6","696dfc48-62c3-494d-96d0-ec5fa84637e8","79df93cf-9b10-452e-bc62-f39e8cd2d124","9bb8e52d-c459-4528-b1b3-c2378207253a","5da038ef-f419-4a11-aa48-587b3787e040","b4a2c9d4-6a2c-49e6-988d-89a538dfe0f6","c374a479-5cc7-4c54-ba69-6a4d76dc25ad","d470fa67-0e7c-40d8-86ac-9b5a8be88dc8","986be38b-9780-4bb9-bdcd-4e361ddbd888","b7613f56-c2d4-4aae-b967-b7471ade86d0","e357d1fc-7466-4d6a-8d48-71b76ea97cdc","e1735855-4089-4af6-bd4d-0d59f7a76cb4","9b34581a-955a-4229-99d0-8f2a6d0e69ce","b4414811-0599-45cf-b047-fa95eac42d89","c28a8a01-911a-40a2-a607-d3af8cb24017","461d07ae-4b4a-49de-bdcb-341af1153201","3df59023-cb68-4a65-afd1-7f0b8c21cb57","0e3223d1-03df-40fb-90f9-cc8559d776b5","4f45b7d6-cd5b-46ab-b2a6-37ae20bf5f21","fa475a21-5f38-43d4-9a89-67c40b3129ae","97cbc634-fe3a-4b9b-9da6-ac4aaa94772f","8a0d34bc-7e8c-4a68-88a5-5276274f612a","623f8788-a20f-45fd-bb82-08935f59b44d","7ee398f0-450b-47cb-9b53-f5e7736590d2","eae9f077-591e-4841-903b-db395513c834","367d0f2a-0b10-4dbb-b53a-613152f124f9","398e2e28-3997-49bc-a138-0467d4da8531","8aaf4633-e879-44dc-82c8-3c9fb9d3a6f8","1eb5e5f2-8dc9-4ffc-b5e1-09b67be27a83","83465fb9-205b-41fc-83a6-424692ee0a0e","fb1d18d0-6403-4e8a-840e-134553748ff5","4407cb77-3838-4ba5-b474-f15222cd3dba","1880b0f2-e036-42d0-9550-0fb08a962397","d8d60bd6-33f6-458f-a7d6-209ef2fb05a1","29bf65ff-888b-4a76-a8dd-bf54f02c3864","bad1d4ae-fd4a-4671-ae94-dd53d94e0eae","0d59792d-db1c-4ae7-8d7c-4f013be40dcf","337dc259-2805-4b1c-a60f-1b3e6c7badb8","4b1b21a8-c278-4bc6-88f1-1a35d407f4d7","7946aba2-d6d0-45ef-8779-23fa15db8f2d","c18dbce6-9e8c-4f4b-b74a-0994e7c1bc3f","84aa87b7-39e7-493c-87b9-5cae4de95449","1446eadb-8c01-4295-be3a-ecf19361c143","fe8a7d94-e9ba-457d-8f19-10fe53e6ca3c","98a5a0b6-b07b-4065-a73f-2949ad28ac47","099219ec-fb4b-459d-a538-f6c3d54f6ca2","e047becf-e696-42e3-84c9-4f6278c844ae","975051d4-ebbc-4b3f-98cf-1a52e5e4761d","e5d98bee-b2d5-4b45-ab0b-b77da24aebe7","acac2668-1062-4e7a-b095-eda067da8413","179025c4-d8a8-4c47-b621-9fd6a6f3339b","d256e5ed-5eac-43bb-a32e-581774962c23","b843dacf-b655-4b1c-a61c-434b67f18154","56a80c2d-0520-415a-a77a-1db82eff0b3a","9c40a253-b9e8-42cd-8a99-62aaa9789a5e","d3a05020-0948-489a-80ac-fedebc035c58","0ee4f3e9-0451-411f-b903-0c83d30e5b67","769f1163-e45e-4c3b-87a7-3b551895d9be","7e217dcd-e4e5-4bcd-b2de-00fcb5ab7fba","28e3d2f6-abb8-4711-b21e-ce1937e3e546","04d4f00b-9608-4d83-949e-b32313ace34e","41f93fa3-0496-4ea7-8ac3-0a8beaf346da","f0db9e3e-0e99-4465-ae65-6a9a8d8a6468","279e794f-519c-44f5-ab04-422fba916b72","f0b2f8a5-7dfd-48dc-ba1f-419a7fda1fff","e874f269-1938-40be-974b-2e499c1f4590","65265d92-050f-4fb5-b529-a514079cdd83","5fc98358-411a-40d7-a5d0-c4089026ca1f","15fcd77a-6097-4ee9-9835-9d6e85897fd6","6f8b1275-2d88-40e2-b76b-375f3c028b03","33273042-efcc-45bc-8f28-b65a1c2c65ad","c18bd396-be21-4ce2-ab22-32a45c28e37f","ba597bcf-7582-4fd2-8049-6333ef3e4453","4edecef8-106d-489d-be1d-d1b528c4cdc9","b03b3109-e900-4daf-b852-a590324ab747","8cba5326-9daa-4c2c-b763-5476dc8a7a91","9ab4aa63-ce81-415f-bf95-e632006a1aea","e3644bfb-4244-4a82-a7d7-d7cdb65aa1ed","b6a1f5b5-febd-4c26-9e29-520290eb5719","51e53e64-e6dd-4fd6-8062-5d4455f0a1cb","f4ec684b-e5f1-44e9-a8a7-aca27f7ca6f3","177fa228-9099-4dd5-8969-c67f9c78bd0c","d5ab0d7a-0123-473f-84d4-81740defb9b4","548f6d36-c509-4b79-9c4b-59f227c7f550","c0901673-4f5e-4e51-ad87-0217f2d33a0c","0787f8d6-dc99-47c6-946e-2b008814bebc","0ade5216-1103-486a-aff0-a709ff825b02","a2c4dd21-985c-497d-b421-c2d8a9ec0eeb","908a498c-f7e3-4668-8afd-f179a027b4d9","4945e5c3-033d-467c-a8b3-b1479c1fdf0a","854f4584-28d5-43bd-938e-88d0957c78e3","6a6574f8-d63d-4fed-99c5-38f3df0364ac","5639d091-037c-4284-8260-ade765dbbc90","c9669745-2229-4d95-89a1-8f008e8bebc6","78ebe658-6ba5-4478-a53c-ad468984e7e3","c7f44558-498f-44bd-a8a3-504955dde6b1","d928387b-107b-4f27-b0c5-75301ed7fc55","833556aa-d685-488c-88d0-b136b456ff5f","0bfe1b9e-b115-49f4-9279-7b106f7661af","1465efce-6026-4d50-a952-1aff8c10dea1","f8f308d6-f4c4-4b0f-b7a3-df78d41ce55d","ebd71155-4a59-46a0-bbb2-40687ddbcf9d","29fc49e0-b597-4f2e-9d53-b7dd247adf4b","692194e6-08d3-4e36-a94f-dc403d6226e6","da9db882-26ea-4516-815c-75f2f9ddab59","9a08823e-eec6-4cc0-9ec8-890cb0650aa7","f7327b98-b06a-423a-8b9f-646e5ba2123f","a6c3c98f-9ef9-45de-9d52-4baec7327464","9d18b689-cdc2-4d3f-81da-a690c700caee","6ad26f7b-1828-4d64-a948-3cc6367f6901","3927ece3-9931-46e8-8e7e-91d5e0b5c326","f6ba5dfd-5000-4e15-80b4-7d3456bc676a","0c0d5bfd-8642-460a-aedc-5a8277725196","fd036365-88c0-4feb-8482-6b4298cacdcc"],"query2":{"filter":{"operator":"and"},"aggregations":[{"property":"title","aggregator":"count"}]},"space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"}}},"notion_user":{},"collection_query":{},"signed_urls":{}},"emailHash":"d54f099771ff5f17709b76693f693e2e"},"__N_SSG":true},"page":"/[slug]","query":{"slug":"cue-vs-helm.html"},"buildId":"8EjONj3sZ9pYeoX4INcSV","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>