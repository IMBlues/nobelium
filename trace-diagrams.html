<!DOCTYPE html><html lang="zh-CN"><head><meta name="viewport" content="width=device-width"/><title>观测利器：让天下没有难懂的 Trace</title><meta name="robots" content="follow, index"/><meta charSet="UTF-8"/><meta name="keywords" content="Blog, Notion, Tech, Python, Django"/><meta name="description"/><meta property="og:locale" content="zh-CN"/><meta property="og:title" content="观测利器：让天下没有难懂的 Trace"/><meta property="og:description"/><meta property="og:url" content="https://next.emergencyexit.xyz/"/><meta property="og:image" content="https://og-image-craigary.vercel.app/%E8%A7%82%E6%B5%8B%E5%88%A9%E5%99%A8%EF%BC%9A%E8%AE%A9%E5%A4%A9%E4%B8%8B%E6%B2%A1%E6%9C%89%E9%9A%BE%E6%87%82%E7%9A%84%20Trace.png?theme=dark&amp;md=1&amp;fontSize=125px&amp;images=https%3A%2F%2Fnobelium.vercel.app%2Flogo-for-dark-bg.svg"/><meta property="og:type" content="article"/><meta name="twitter:card" content="summary_large_image"/><meta name="twitter:description"/><meta name="twitter:title" content="观测利器：让天下没有难懂的 Trace"/><meta name="twitter:image" content="https://og-image-craigary.vercel.app/%E8%A7%82%E6%B5%8B%E5%88%A9%E5%99%A8%EF%BC%9A%E8%AE%A9%E5%A4%A9%E4%B8%8B%E6%B2%A1%E6%9C%89%E9%9A%BE%E6%87%82%E7%9A%84%20Trace.png?theme=dark&amp;md=1&amp;fontSize=125px&amp;images=https%3A%2F%2Fnobelium.vercel.app%2Flogo-for-dark-bg.svg"/><meta property="article:published_time"/><meta property="article:author" content="bluesyu"/><meta name="next-head-count" content="18"/><link rel="preload" href="/fonts/IBMPlexSansVar-Roman.woff2" as="font" type="font/woff2" crossorigin="anonymous"/><link rel="preload" href="/fonts/IBMPlexSansVar-Italic.woff2" as="font" type="font/woff2" crossorigin="anonymous"/><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="anonymous"/><link rel="preload" as="style" data-href="https://fonts.googleapis.com/css2?family=Noto+Sans+SC:wght@400;500;700&amp;display=swap"/><link rel="stylesheet" data-href="https://fonts.googleapis.com/css2?family=Noto+Sans+SC:wght@400;500;700&amp;display=swap"/><noscript><link rel="stylesheet" data-href="https://fonts.googleapis.com/css2?family=Noto+Sans+SC:wght@400;500;700&amp;display=swap"/></noscript><link rel="icon" href="/favicon.svg" type="image/svg+xml"/><link rel="icon" href="/favicon.ico"/><link rel="apple-touch-icon" sizes="192x192" href="/apple-touch-icon.png"/><link rel="alternate" type="application/rss+xml" title="RSS 2.0" href="/feed"/><meta name="theme-color" content="#ffffff" media="(prefers-color-scheme: light)"/><meta name="theme-color" content="#18181B" media="(prefers-color-scheme: dark)"/><link rel="preload" href="/_next/static/css/8e8bd7c50b2739f5.css" as="style"/><link rel="stylesheet" href="/_next/static/css/8e8bd7c50b2739f5.css" data-n-g=""/><link rel="preload" href="/_next/static/css/6a5815369e10547f.css" as="style"/><link rel="stylesheet" href="/_next/static/css/6a5815369e10547f.css" data-n-p=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-5cd94c89d3acac5f.js"></script><script src="/_next/static/chunks/webpack-c0a56147c8fcef8f.js" defer=""></script><script src="/_next/static/chunks/main-e557dee8cfeafd6c.js" defer=""></script><script src="/_next/static/chunks/pages/_app-44e7ae44283f015e.js" defer=""></script><script src="/_next/static/chunks/b5f2ed29-08db60af0c3043ba.js" defer=""></script><script src="/_next/static/chunks/684-63c1a25e215d8bed.js" defer=""></script><script src="/_next/static/chunks/580-c0214944b9e37cce.js" defer=""></script><script src="/_next/static/chunks/pages/%5Bslug%5D-36397aa552609343.js" defer=""></script><script src="/_next/static/1f_cT2njQHlHXsSNMTqKM/_buildManifest.js" defer=""></script><script src="/_next/static/1f_cT2njQHlHXsSNMTqKM/_ssgManifest.js" defer=""></script><script src="/_next/static/1f_cT2njQHlHXsSNMTqKM/_middlewareManifest.js" defer=""></script><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Noto+Sans+SC:wght@400;500;700&display=swap"/></head><body class="bg-day dark:bg-night"><div id="__next" data-reactroot=""><div><div class="wrapper font-sans"><div class="observer-element h-4 md:h-12"></div><div class="sticky-nav m-auto w-full h-6 flex flex-row justify-between items-center mb-2 md:mb-12 py-8 bg-opacity-60 max-w-3xl px-4" id="sticky-nav"><div class="flex items-center"><a aria-label="布鲁斯鱼的妙想天开" href="/"><div class="h-6"><svg width="28" height="28" viewBox="0 0 28 28" fill="none" xmlns="http://www.w3.org/2000/svg"><circle cx="14" cy="14" r="14" class="fill-current text-black dark:text-white"></circle><circle cx="14" cy="14" r="14" fill="url(#paint0_radial)"></circle><circle cx="8" cy="8" r="2" fill="white"></circle><defs><radialGradient id="paint0_radial" cx="0" cy="0" r="1" gradientUnits="userSpaceOnUse" gradientTransform="rotate(45) scale(39.598)"><stop stop-color="#7FF72A" stop-opacity="1"></stop><stop offset="1" stop-color="#001FCC" stop-opacity="0.1"></stop></radialGradient></defs></svg></div></a><p class="ml-2 font-medium text-day dark:text-night header-name">观测利器：让天下没有难懂的 Trace</p></div><div class="flex-shrink-0"><ul class="flex flex-row"><li class="block ml-4 text-black dark:text-gray-50 nav"><a href="/about">关于</a></li><li class="block ml-4 text-black dark:text-gray-50 nav"><a href="/tag/surfing">冲浪</a></li><li class="block ml-4 text-black dark:text-gray-50 nav"><a href="/search">搜索</a></li></ul></div></div><main class="m-auto flex-grow w-full transition-all max-w-3xl px-4"><article><h1 class="font-bold text-3xl text-black dark:text-white">🦾<!-- --> <!-- -->观测利器：让天下没有难懂的 Trace</h1><nav class="flex mt-7 items-start text-gray-500 dark:text-gray-400"><div class="flex mb-4"><a href="https://twitter.com/bluesedenyu" class="flex"><span style="box-sizing:border-box;display:inline-block;overflow:hidden;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;position:relative;max-width:100%"><span style="box-sizing:border-box;display:block;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;max-width:100%"><img style="display:block;max-width:100%;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0" alt="" aria-hidden="true" src="data:image/svg+xml,%3csvg%20xmlns=%27http://www.w3.org/2000/svg%27%20version=%271.1%27%20width=%2724%27%20height=%2724%27/%3e"/></span><img alt="bluesyu" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" decoding="async" data-nimg="intrinsic" class="rounded-full" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%"/><noscript><img alt="bluesyu" srcSet="https://gravatar.com/avatar/d54f099771ff5f17709b76693f693e2e?imwidth=32 1x, https://gravatar.com/avatar/d54f099771ff5f17709b76693f693e2e?imwidth=48 2x" src="https://gravatar.com/avatar/d54f099771ff5f17709b76693f693e2e?imwidth=48" decoding="async" data-nimg="intrinsic" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%" class="rounded-full" loading="lazy"/></noscript></span><p class="ml-2 md:block">bluesyu</p></a><span class="block"> / </span></div><div class="mr-2 mb-4 md:ml-0">2023 年 9 月 4 日</div><div class="flex flex-nowrap max-w-full overflow-x-auto article-tags"><a href="/tag/observability"><p class="mr-1 rounded-full px-2 py-1 border leading-none text-sm dark:border-gray-600">observability</p></a><a href="/tag/best-practice"><p class="mr-1 rounded-full px-2 py-1 border leading-none text-sm dark:border-gray-600">best-practice</p></a><a href="/tag/trace"><p class="mr-1 rounded-full px-2 py-1 border leading-none text-sm dark:border-gray-600">trace</p></a><a href="/tag/diagram"><p class="mr-1 rounded-full px-2 py-1 border leading-none text-sm dark:border-gray-600">diagram</p></a></div></nav><div class="-mt-4"><main class="notion light-mode notion-page notion-small-text notion-block-2832ab2a059a45e48cf1b0ed05e8e1fa"><div class="notion-viewport"></div><div class="notion-collection-row"><div class="notion-collection-row-body"><div class="notion-collection-row-property"><div class="notion-collection-column-title"><svg viewBox="0 0 14 14" class="notion-collection-column-title-icon"><path d="M10.889 5.5H3.11v1.556h7.778V5.5zm1.555-4.444h-.777V0H10.11v1.056H3.89V0H2.333v1.056h-.777c-.864 0-1.548.7-1.548 1.555L0 12.5c0 .856.692 1.5 1.556 1.5h10.888C13.3 14 14 13.356 14 12.5V2.611c0-.855-.7-1.555-1.556-1.555zm0 11.444H1.556V3.944h10.888V12.5zM8.556 8.611H3.11v1.556h5.445V8.61z"></path></svg><div class="notion-collection-column-title-body">date</div></div><div class="notion-collection-row-value"><span class="notion-property notion-property-date">Sep 4, 2023</span></div></div><div class="notion-collection-row-property"><div class="notion-collection-column-title"><svg viewBox="0 0 14 14" class="notion-collection-column-title-icon"><path d="M7 4.568a.5.5 0 00-.5-.5h-6a.5.5 0 00-.5.5v1.046a.5.5 0 00.5.5h6a.5.5 0 00.5-.5V4.568zM.5 1a.5.5 0 00-.5.5v1.045a.5.5 0 00.5.5h12a.5.5 0 00.5-.5V1.5a.5.5 0 00-.5-.5H.5zM0 8.682a.5.5 0 00.5.5h11a.5.5 0 00.5-.5V7.636a.5.5 0 00-.5-.5H.5a.5.5 0 00-.5.5v1.046zm0 3.068a.5.5 0 00.5.5h9a.5.5 0 00.5-.5v-1.045a.5.5 0 00-.5-.5h-9a.5.5 0 00-.5.5v1.045z"></path></svg><div class="notion-collection-column-title-body">slug</div></div><div class="notion-collection-row-value"><span class="notion-property notion-property-text">trace-diagrams</span></div></div><div class="notion-collection-row-property"><div class="notion-collection-column-title"><svg viewBox="0 0 14 14" class="notion-collection-column-title-icon"><path d="M7 13A6 6 0 107 1a6 6 0 000 12zM3.751 5.323A.2.2 0 013.909 5h6.182a.2.2 0 01.158.323L7.158 9.297a.2.2 0 01-.316 0L3.751 5.323z"></path></svg><div class="notion-collection-column-title-body">status</div></div><div class="notion-collection-row-value"><span class="notion-property notion-property-select"><div class="notion-property-select-item notion-item-red">Published</div></span></div></div><div class="notion-collection-row-property"><div class="notion-collection-column-title"><svg viewBox="0 0 14 14" class="notion-collection-column-title-icon"><path d="M4 3a1 1 0 011-1h7a1 1 0 110 2H5a1 1 0 01-1-1zm0 4a1 1 0 011-1h7a1 1 0 110 2H5a1 1 0 01-1-1zm0 4a1 1 0 011-1h7a1 1 0 110 2H5a1 1 0 01-1-1zM2 4a1 1 0 110-2 1 1 0 010 2zm0 4a1 1 0 110-2 1 1 0 010 2zm0 4a1 1 0 110-2 1 1 0 010 2z"></path></svg><div class="notion-collection-column-title-body">tags</div></div><div class="notion-collection-row-value"><span class="notion-property notion-property-multi_select"><div class="notion-property-multi_select-item notion-item-pink">observability</div><div class="notion-property-multi_select-item notion-item-yellow">best-practice</div><div class="notion-property-multi_select-item notion-item-gray">trace</div><div class="notion-property-multi_select-item notion-item-green">diagram</div></span></div></div><div class="notion-collection-row-property"><div class="notion-collection-column-title"><svg viewBox="0 0 14 14" class="notion-collection-column-title-icon"><path d="M7 4.568a.5.5 0 00-.5-.5h-6a.5.5 0 00-.5.5v1.046a.5.5 0 00.5.5h6a.5.5 0 00.5-.5V4.568zM.5 1a.5.5 0 00-.5.5v1.045a.5.5 0 00.5.5h12a.5.5 0 00.5-.5V1.5a.5.5 0 00-.5-.5H.5zM0 8.682a.5.5 0 00.5.5h11a.5.5 0 00.5-.5V7.636a.5.5 0 00-.5-.5H.5a.5.5 0 00-.5.5v1.046zm0 3.068a.5.5 0 00.5.5h9a.5.5 0 00.5-.5v-1.045a.5.5 0 00-.5-.5h-9a.5.5 0 00-.5.5v1.045z"></path></svg><div class="notion-collection-column-title-body">summary</div></div><div class="notion-collection-row-value"><span class="notion-property notion-property-text"></span></div></div><div class="notion-collection-row-property"><div class="notion-collection-column-title"><svg viewBox="0 0 14 14" class="notion-collection-column-title-icon"><path d="M7 13A6 6 0 107 1a6 6 0 000 12zM3.751 5.323A.2.2 0 013.909 5h6.182a.2.2 0 01.158.323L7.158 9.297a.2.2 0 01-.316 0L3.751 5.323z"></path></svg><div class="notion-collection-column-title-body">type</div></div><div class="notion-collection-row-value"><span class="notion-property notion-property-select"><div class="notion-property-select-item notion-item-purple">Post</div></span></div></div></div></div><div class="notion-table-of-contents notion-gray notion-block-fdb25683ce534db780f917327f5e9527"><a href="#32ba39ae15eb460b828dbcc77d3c3e6a" class="notion-table-of-contents-item"><span class="notion-table-of-contents-item-body" style="display:inline-block;margin-left:0">什么是 Traces ?</span></a><a href="#c511eb825c294f77be6b1bc841a57849" class="notion-table-of-contents-item"><span class="notion-table-of-contents-item-body" style="display:inline-block;margin-left:24px">描绘？</span></a><a href="#53511ecde84c45baa141894f2d81be91" class="notion-table-of-contents-item"><span class="notion-table-of-contents-item-body" style="display:inline-block;margin-left:0">各种变换形态</span></a><a href="#f27f6932e6c646d6af4df99f36080638" class="notion-table-of-contents-item"><span class="notion-table-of-contents-item-body" style="display:inline-block;margin-left:24px">Timeline 时间线图</span></a><a href="#38b6dd6acbc1472ab269d3baa87d4caf" class="notion-table-of-contents-item"><span class="notion-table-of-contents-item-body" style="display:inline-block;margin-left:24px">拓扑图</span></a><a href="#9cad0af9f40740379a627b008b4de1c7" class="notion-table-of-contents-item"><span class="notion-table-of-contents-item-body" style="display:inline-block;margin-left:24px">表格统计</span></a><a href="#e96fb5f746ea4178b42c352445787b26" class="notion-table-of-contents-item"><span class="notion-table-of-contents-item-body" style="display:inline-block;margin-left:48px">接口和服务</span></a><a href="#7655de186bcc4709a6b42a23f23cd958" class="notion-table-of-contents-item"><span class="notion-table-of-contents-item-body" style="display:inline-block;margin-left:24px">时序图</span></a><a href="#7c4ed4e940dc4cc48c1a5a8e7091c73c" class="notion-table-of-contents-item"><span class="notion-table-of-contents-item-body" style="display:inline-block;margin-left:48px">服务接口聚合</span></a><a href="#a881101b3a594faab1abf350b5d24e14" class="notion-table-of-contents-item"><span class="notion-table-of-contents-item-body" style="display:inline-block;margin-left:48px">相对时序</span></a><a href="#0e101b6d6e7045e587e432d40487f73a" class="notion-table-of-contents-item"><span class="notion-table-of-contents-item-body" style="display:inline-block;margin-left:48px">虚拟的开始节点</span></a><a href="#8f584616dbc849039c9bbc295bf99f1a" class="notion-table-of-contents-item"><span class="notion-table-of-contents-item-body" style="display:inline-block;margin-left:48px">调用返回</span></a><a href="#7e392456e048485b9e09fdde6d021f91" class="notion-table-of-contents-item"><span class="notion-table-of-contents-item-body" style="display:inline-block;margin-left:48px">主调被调合并</span></a><a href="#06649dbeb497402f9cabc6e558480592" class="notion-table-of-contents-item"><span class="notion-table-of-contents-item-body" style="display:inline-block;margin-left:24px">火焰图</span></a><a href="#5c24f069332a42b8aa0a119bc56d4b84" class="notion-table-of-contents-item"><span class="notion-table-of-contents-item-body" style="display:inline-block;margin-left:48px">原始的局限</span></a><a href="#93231b98cafe48a6acc182dfd939858b" class="notion-table-of-contents-item"><span class="notion-table-of-contents-item-body" style="display:inline-block;margin-left:0">细节优化</span></a><a href="#4f4882277a074ec28840876f889bcf4b" class="notion-table-of-contents-item"><span class="notion-table-of-contents-item-body" style="display:inline-block;margin-left:24px">折叠</span></a><a href="#76159194b36447588d8b3148c4cf89f2" class="notion-table-of-contents-item"><span class="notion-table-of-contents-item-body" style="display:inline-block;margin-left:24px">并行/并发推测</span></a><a href="#1d83b966d9b34598846718140b90c3f4" class="notion-table-of-contents-item"><span class="notion-table-of-contents-item-body" style="display:inline-block;margin-left:0">对比</span></a><a href="#6b1a050c4f334c968674a7b2bf41c5e9" class="notion-table-of-contents-item"><span class="notion-table-of-contents-item-body" style="display:inline-block;margin-left:24px">对比策略</span></a><a href="#659c28405dc5428e83b6ddbd5f37a55a" class="notion-table-of-contents-item"><span class="notion-table-of-contents-item-body" style="display:inline-block;margin-left:24px">可比性评估</span></a><a href="#5bedb284e9a640d98e0a19ad77e2af0c" class="notion-table-of-contents-item"><span class="notion-table-of-contents-item-body" style="display:inline-block;margin-left:48px">忽略小差异</span></a><a href="#9ddaeb731d74453b87e5b4ccae908e5f" class="notion-table-of-contents-item"><span class="notion-table-of-contents-item-body" style="display:inline-block;margin-left:0">Fin</span></a></div><h2 class="notion-h notion-h1 notion-h-indent-0 notion-block-32ba39ae15eb460b828dbcc77d3c3e6a" data-id="32ba39ae15eb460b828dbcc77d3c3e6a"><span><div id="32ba39ae15eb460b828dbcc77d3c3e6a" class="notion-header-anchor"></div><a class="notion-hash-link" href="#32ba39ae15eb460b828dbcc77d3c3e6a" title="什么是 Traces ?"><svg viewBox="0 0 16 16" width="16" height="16"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><span class="notion-h-title">什么是 Traces ?</span></span></h2><div class="notion-text notion-block-e3cd920c030d41b3bf7382f474311e98">这两年可观测领域受到了比较多的关注，其中以 Traces 尤为突出。那么什么是 Traces 呢？它又能做什么呢？我们来看看官方给予的定义：</div><blockquote class="notion-quote notion-block-e479df3b8b9b438fbdc1e72ff152774f"><b>Traces</b> give us the big <b>picture</b> of what happens when a request is made to an application</blockquote><div class="notion-text notion-block-8a7694d84a8741c6b374ecf298539e9b">简单来说：<em>Traces 能 </em><em><b>描绘 </b></em><em>一个请求在应用中究竟做了什么。</em></div><h3 class="notion-h notion-h2 notion-h-indent-1 notion-block-c511eb825c294f77be6b1bc841a57849" data-id="c511eb825c294f77be6b1bc841a57849"><span><div id="c511eb825c294f77be6b1bc841a57849" class="notion-header-anchor"></div><a class="notion-hash-link" href="#c511eb825c294f77be6b1bc841a57849" title="描绘？"><svg viewBox="0 0 16 16" width="16" height="16"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><span class="notion-h-title">描绘？</span></span></h3><div class="notion-text notion-block-8ef5b145a07b4b24a0fe698bf63fa722">对于原始的 Traces 数据而言，与其说是“描绘”，不如说是“描述”：应用做的事情被拆解成一个个小的单元（Span），多个有着父子关系的 Span 组成一个完整的 Trace。尽管它的数据详尽——包括属性（attributes）、事件（Events）、上下文（Context）等内容，但是最大问题也很明显：<b>不够直观，有效信息获取效率低。</b></div><pre class="notion-code language-json"><code class="language-json"><span class="token punctuation">{</span>
	<span class="token string-property property">"name"</span><span class="token operator">:</span> <span class="token string">"hello-greetings"</span><span class="token punctuation">,</span>
	<span class="token string-property property">"context"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token string-property property">"trace_id"</span><span class="token operator">:</span> <span class="token string">"0x5b8aa5a2d2c872e8321cf37308d69df2"</span><span class="token punctuation">,</span>
		<span class="token string-property property">"span_id"</span><span class="token operator">:</span> <span class="token string">"0x5fb397be34d26b51"</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token string-property property">"parent_id"</span><span class="token operator">:</span> <span class="token string">"0x051581bf3cb55c13"</span><span class="token punctuation">,</span>
	<span class="token string-property property">"start_time"</span><span class="token operator">:</span> <span class="token string">"2022-04-29T18:52:58.114304Z"</span><span class="token punctuation">,</span>
	<span class="token string-property property">"end_time"</span><span class="token operator">:</span> <span class="token string">"2022-04-29T22:52:58.114561Z"</span><span class="token punctuation">,</span>
	<span class="token string-property property">"attributes"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token string-property property">"http.route"</span><span class="token operator">:</span> <span class="token string">"some_route1"</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token string-property property">"events"</span><span class="token operator">:</span> <span class="token punctuation">[</span>
		<span class="token punctuation">{</span>
			<span class="token string-property property">"name"</span><span class="token operator">:</span> <span class="token string">"hey there!"</span><span class="token punctuation">,</span>
			<span class="token string-property property">"timestamp"</span><span class="token operator">:</span> <span class="token string">"2022-04-29T18:52:58.114561Z"</span><span class="token punctuation">,</span>
			<span class="token string-property property">"attributes"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
				<span class="token string-property property">"event_attributes"</span><span class="token operator">:</span> <span class="token number">1</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">]</span>
<span class="token punctuation">}</span></code></pre><div class="notion-text notion-block-66854b86cc384152a5ea853db6b98b25"><b>所以更多维、更直观的图表就显得尤为必要了。</b></div><h2 class="notion-h notion-h1 notion-h-indent-0 notion-block-53511ecde84c45baa141894f2d81be91" data-id="53511ecde84c45baa141894f2d81be91"><span><div id="53511ecde84c45baa141894f2d81be91" class="notion-header-anchor"></div><a class="notion-hash-link" href="#53511ecde84c45baa141894f2d81be91" title="各种变换形态"><svg viewBox="0 0 16 16" width="16" height="16"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><span class="notion-h-title">各种变换形态</span></span></h2><div class="notion-text notion-block-68003399f7f2445d96da82c00ad5d713">首先，我们需要将 Traces 数据抽象成一棵多叉树。</div><figure class="notion-asset-wrapper notion-asset-wrapper-image notion-block-9d043aab62c74341baef3d6b210f1252"><div style="position:relative;display:flex;justify-content:center;align-self:center;width:100%;max-width:100%;flex-direction:column;height:100%"><img style="object-fit:contain" src="https://www.notion.so/image/https%3A%2F%2Ffile.notion.so%2Ff%2Ff%2Fb0a64676-90b9-4734-9c63-2d704ee573b6%2F7681e621-373a-445c-a704-86c32fbbe504%2FUntitled.png%3Fid%3D9d043aab-62c7-4341-baef-3d6b210f1252%26table%3Dblock%26spaceId%3Db0a64676-90b9-4734-9c63-2d704ee573b6%26expirationTimestamp%3D1713952800000%26signature%3DMVKqRhzEMLfBZD_mmeC8ySKl2Ekfje0ZKgd80RGW9Fk?table=block&amp;id=9d043aab-62c7-4341-baef-3d6b210f1252&amp;cache=v2" loading="lazy" alt="一个简单的 Trace 多叉树" decoding="async"/><figcaption class="notion-asset-caption">一个简单的 Trace 多叉树</figcaption></div></figure><div class="notion-text notion-block-ac8771cb2306442fa7a86ab27f05615c">在这棵多叉树的各个节点信息中，藏着 Trace 的多个维度信息：</div><ul class="notion-list notion-list-disc notion-block-b1ab9ce341624c4e9e6bd784e170beba"><li>Span 之间的调用关系：<code class="notion-inline-code">parent_id</code> 指向调用它的父级节点</li></ul><ul class="notion-list notion-list-disc notion-block-7a19ad01333945a48ce8558a5f013e3c"><li>Span 调用的时序关系： <code class="notion-inline-code">start_time</code> &amp; <code class="notion-inline-code">end_time</code> 表明了 Span 的开始结束时间点</li></ul><ul class="notion-list notion-list-disc notion-block-3400e0710a0e44f79599881b0b1a233f"><li>Span 耗时： <code class="notion-inline-code">elapsed_time</code> 代表该 Span 的耗时</li></ul><h3 class="notion-h notion-h2 notion-h-indent-1 notion-block-f27f6932e6c646d6af4df99f36080638" data-id="f27f6932e6c646d6af4df99f36080638"><span><div id="f27f6932e6c646d6af4df99f36080638" class="notion-header-anchor"></div><a class="notion-hash-link" href="#f27f6932e6c646d6af4df99f36080638" title="Timeline 时间线图"><svg viewBox="0 0 16 16" width="16" height="16"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><span class="notion-h-title">Timeline 时间线图</span></span></h3><div class="notion-text notion-block-867e26069d1c48b68eb73b9d978e927d">首先，我们通过「Timeline 图」（a.k.a 瀑布图）纵览所有 Span 之间的父子关系、时序、耗时。</div><figure class="notion-asset-wrapper notion-asset-wrapper-image notion-block-124728a9cc624de397583398b178a9a4"><div style="position:relative;display:flex;justify-content:center;align-self:center;width:100%;max-width:100%;flex-direction:column;height:100%"><img style="object-fit:contain" src="https://www.notion.so/image/https%3A%2F%2Ffile.notion.so%2Ff%2Ff%2Fb0a64676-90b9-4734-9c63-2d704ee573b6%2F6edfdff8-7924-4a86-af03-601e0d1295d8%2FUntitled.png%3Fid%3D124728a9-cc62-4de3-9758-3398b178a9a4%26table%3Dblock%26spaceId%3Db0a64676-90b9-4734-9c63-2d704ee573b6%26expirationTimestamp%3D1713952800000%26signature%3Dus_8tlmflXcK3B3lqHMRPRK-mu8t6bL2Nujbs85troo?table=block&amp;id=124728a9-cc62-4de3-9758-3398b178a9a4&amp;cache=v2" loading="lazy" alt="notion image" decoding="async"/></div></figure><div class="notion-text notion-block-02d3a9d38e03484a9fa1231909a8901c">在时间线图中，你可以掌握单个 Trace 的全部信息：</div><ul class="notion-list notion-list-disc notion-block-5dab1b03bfec44c595eddfb9975ce08b"><li>查看所有的 Span 概况，按照服务进行颜色区分，同时展示所有的父子关系。</li></ul><ul class="notion-list notion-list-disc notion-block-b7a4d1914c8a4b6fbc3707f6f5ae0386"><li>通过时间轴和线条的长度判断出 Span 具体耗时。</li></ul><ul class="notion-list notion-list-disc notion-block-d7b237a1d5d44538a4c546312c6d75b3"><li>点击 Span 可以查看其详细信息，包括标签和进程等所有上报信息。</li></ul><div class="notion-text notion-block-a97a22d102d5477081933ed6347e4d3e">虽然它全能，但在一些具体维度上仍旧不够直观，所以我们要在这棵多叉树上进行精加工：</div><ul class="notion-list notion-list-disc notion-block-95c582682eaf4032a28439d6b429743c"><li>Span 之间的父子关系 → 拓扑图</li></ul><ul class="notion-list notion-list-disc notion-block-423cc8cb56d943be8ea30239a2942d2b"><li>以接口、服务等维度汇聚统计信息 → 表格统计</li></ul><ul class="notion-list notion-list-disc notion-block-5da0a05a4acd4c3faba9949d6145a0c8"><li>Span 调用的时序 → 时序图</li></ul><ul class="notion-list notion-list-disc notion-block-33e9e3d2232c476f9cd636cf9a00ebe9"><li>Span 耗时分布 → 火焰图</li></ul><div class="notion-text notion-block-063b7129060c4e2cbe99846c845ee96e">下面就来分享一下相关图表的展示逻辑细节。</div><h3 class="notion-h notion-h2 notion-h-indent-1 notion-block-38b6dd6acbc1472ab269d3baa87d4caf" data-id="38b6dd6acbc1472ab269d3baa87d4caf"><span><div id="38b6dd6acbc1472ab269d3baa87d4caf" class="notion-header-anchor"></div><a class="notion-hash-link" href="#38b6dd6acbc1472ab269d3baa87d4caf" title="拓扑图"><svg viewBox="0 0 16 16" width="16" height="16"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><span class="notion-h-title">拓扑图</span></span></h3><figure class="notion-asset-wrapper notion-asset-wrapper-image notion-block-cf07b1b83d4c447ab9d5fabd277ebbf8"><div style="position:relative;display:flex;justify-content:center;align-self:center;width:100%;max-width:100%;flex-direction:column;height:100%"><img style="object-fit:contain" src="https://www.notion.so/image/https%3A%2F%2Ffile.notion.so%2Ff%2Ff%2Fb0a64676-90b9-4734-9c63-2d704ee573b6%2Fe834e911-c53c-47ea-8bad-3b1140ca5669%2FUntitled.png%3Fid%3Dcf07b1b8-3d4c-447a-b9d5-fabd277ebbf8%26table%3Dblock%26spaceId%3Db0a64676-90b9-4734-9c63-2d704ee573b6%26expirationTimestamp%3D1713952800000%26signature%3D_GQA2zAxWzeXeh1PlxUbvMlHtP0LBAqe5CsfhzQLnL0?table=block&amp;id=cf07b1b8-3d4c-447a-b9d5-fabd277ebbf8&amp;cache=v2" loading="lazy" alt="notion image" decoding="async"/></div></figure><div class="notion-text notion-block-b680db86b7d444729d1dc2d79f054452">对于拓扑图而言，它将主要的重点放在了 Span 之间的关系上，你可以很清晰地获取到 Trace 的调用关系、层级等信息，但同时它也刻意忽略了时序信息，下面会有较多场景会提到这一点。</div><h3 class="notion-h notion-h2 notion-h-indent-1 notion-block-9cad0af9f40740379a627b008b4de1c7" data-id="9cad0af9f40740379a627b008b4de1c7"><span><div id="9cad0af9f40740379a627b008b4de1c7" class="notion-header-anchor"></div><a class="notion-hash-link" href="#9cad0af9f40740379a627b008b4de1c7" title="表格统计"><svg viewBox="0 0 16 16" width="16" height="16"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><span class="notion-h-title">表格统计</span></span></h3><figure class="notion-asset-wrapper notion-asset-wrapper-image notion-block-d4677c74900344a09ee3a6469a9ba674"><div style="position:relative;display:flex;justify-content:center;align-self:center;width:100%;max-width:100%;flex-direction:column;height:100%"><img style="object-fit:contain" src="https://www.notion.so/image/https%3A%2F%2Ffile.notion.so%2Ff%2Ff%2Fb0a64676-90b9-4734-9c63-2d704ee573b6%2F9c2cf83f-99ef-4208-a363-9fccd73e901d%2FUntitled.png%3Fid%3Dd4677c74-9003-44a0-9ee3-a6469a9ba674%26table%3Dblock%26spaceId%3Db0a64676-90b9-4734-9c63-2d704ee573b6%26expirationTimestamp%3D1713952800000%26signature%3Dg_5hN4y1AdOY5_TLNKCVixbnFJwPOfC6s3HPzJB4Zo0?table=block&amp;id=d4677c74-9003-44a0-9ee3-a6469a9ba674&amp;cache=v2" loading="lazy" alt="notion image" decoding="async"/></div></figure><div class="notion-text notion-block-ccc5c01b47ff499aba1865f348d55037">表格统计的重点是，将 Trace 中的汇聚信息平铺展示出来。这里有两个需要额外解释的概念：接口&amp;服务。</div><h4 class="notion-h notion-h3 notion-h-indent-2 notion-block-e96fb5f746ea4178b42c352445787b26" data-id="e96fb5f746ea4178b42c352445787b26"><span><div id="e96fb5f746ea4178b42c352445787b26" class="notion-header-anchor"></div><a class="notion-hash-link" href="#e96fb5f746ea4178b42c352445787b26" title="接口和服务"><svg viewBox="0 0 16 16" width="16" height="16"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><span class="notion-h-title">接口和服务</span></span></h4><div class="notion-text notion-block-8ec5d40a4f214b699fdc1ab79aac351a">【接口】的内容实际上就是 <code class="notion-inline-code">span_name</code> —— 操作名称的别名。而【服务】则是来自于 <code class="notion-inline-code">resource.service_name</code> ，表明该 Span 所属的服务，以简单的名字字符串作为 Trace 维度的唯一标识。</div><h3 class="notion-h notion-h2 notion-h-indent-1 notion-block-7655de186bcc4709a6b42a23f23cd958" data-id="7655de186bcc4709a6b42a23f23cd958"><span><div id="7655de186bcc4709a6b42a23f23cd958" class="notion-header-anchor"></div><a class="notion-hash-link" href="#7655de186bcc4709a6b42a23f23cd958" title="时序图"><svg viewBox="0 0 16 16" width="16" height="16"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><span class="notion-h-title">时序图</span></span></h3><div class="notion-text notion-block-2a7631a51e3a4625af5d1748a1c78da5">时序图，顾名思义，主要是想突出 Trace 的时序特性。</div><figure class="notion-asset-wrapper notion-asset-wrapper-image notion-block-8a0b69b21b80400dbf7b0afa526856ce"><div style="position:relative;display:flex;justify-content:center;align-self:center;width:100%;max-width:100%;flex-direction:column;height:100%"><img style="object-fit:contain" src="https://www.notion.so/image/https%3A%2F%2Ffile.notion.so%2Ff%2Ff%2Fb0a64676-90b9-4734-9c63-2d704ee573b6%2F5a6d95b7-b607-4a5d-aa27-0f6e27444192%2FUntitled.png%3Fid%3D8a0b69b2-1b80-400d-bf7b-0afa526856ce%26table%3Dblock%26spaceId%3Db0a64676-90b9-4734-9c63-2d704ee573b6%26expirationTimestamp%3D1713952800000%26signature%3DPMHXXICYN1HLMOnFihbrzg9oyl3ZTfIdW1onJnpKdxw?table=block&amp;id=8a0b69b2-1b80-400d-bf7b-0afa526856ce&amp;cache=v2" loading="lazy" alt="时序图示意图" decoding="async"/><figcaption class="notion-asset-caption">时序图示意图</figcaption></div></figure><div class="notion-text notion-block-eb017e378dc3407c9ad4a61c4ae82741">这是一种 <a target="_blank" rel="noopener noreferrer" class="notion-link" href="https://zh.wikipedia.org/wiki/%E6%97%B6%E5%BA%8F%E5%9B%BE">UML</a> 行为图，我们将它原本的几种元素结合 Trace 场景做了一个概念转换：</div><ul class="notion-list notion-list-disc notion-block-3756c5bced6947b09344588340f297e1"><li>物件（Object）和生命线（Lifeline）用一个 <em>方框+垂直线条 </em>来共同表示 <b>接口或服务在 Trace 流程中的生命周期。</b></li></ul><ul class="notion-list notion-list-disc notion-block-4a2ac240b09640d49debe02d338d732c"><li>讯息（Message）用一条 <em>水平带箭头的连线</em> 表示 <b>接口或服务之间的调用，也就是 Span 的主要体现形式</b>。</li></ul><ul class="notion-list notion-list-disc notion-block-8a646b47a77d448dbeb676a67d1f27c9"><li>活化（Activation）：用一个 <em>垂直方向的矩形</em>  表示 <b>接口或服务的耗时区间，它并不精确，但能表达出不同 Span 的耗时前后时序关系。</b></li></ul><div class="notion-text notion-block-23ec6bed887a475da7212ee912203e92">此外，时序图有一些额外封装和添加的概念，下面我们会一一展开解释。</div><h4 class="notion-h notion-h3 notion-h-indent-2 notion-block-7c4ed4e940dc4cc48c1a5a8e7091c73c" data-id="7c4ed4e940dc4cc48c1a5a8e7091c73c"><span><div id="7c4ed4e940dc4cc48c1a5a8e7091c73c" class="notion-header-anchor"></div><a class="notion-hash-link" href="#7c4ed4e940dc4cc48c1a5a8e7091c73c" title="服务接口聚合"><svg viewBox="0 0 16 16" width="16" height="16"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><span class="notion-h-title">服务接口聚合</span></span></h4><div class="notion-text notion-block-d54c49d77b5b469b85c6e0e48881ddb7">首先是对服务聚合的概念阐释，和时间线图类似，我们会从 <code class="notion-inline-code">resource.service_name</code> 字段中抽取所有 Span 共有的服务概念。额外地，我们从 <code class="notion-inline-code">attributes</code> 字段中的信息尝试判断当前 Span 的形态，将不同的场景做一个简单区分。如图所示， <code class="notion-inline-code">service_foo</code> 服务中会区分出 <code class="notion-inline-code">api/*</code> 和 <code class="notion-inline-code">mysql</code> 两种接口，它可以让你更好地了解不同组件之间的调用关系。</div><figure class="notion-asset-wrapper notion-asset-wrapper-image notion-block-cea8a1441cdf41069a8d00c1887ef4bc"><div style="position:relative;display:flex;justify-content:center;align-self:center;width:100%;max-width:100%;flex-direction:column;height:100%"><img style="object-fit:contain" src="https://www.notion.so/image/https%3A%2F%2Ffile.notion.so%2Ff%2Ff%2Fb0a64676-90b9-4734-9c63-2d704ee573b6%2F7f20c898-fe4d-400c-b525-3c509c1bf946%2FUntitled.png%3Fid%3Dcea8a144-1cdf-4106-9a8d-00c1887ef4bc%26table%3Dblock%26spaceId%3Db0a64676-90b9-4734-9c63-2d704ee573b6%26expirationTimestamp%3D1713952800000%26signature%3DPCn8bCu6MAekUdAJpljfybNeSkwdkYdgXrDokKJHGmA?table=block&amp;id=cea8a144-1cdf-4106-9a8d-00c1887ef4bc&amp;cache=v2" loading="lazy" alt="notion image" decoding="async"/></div></figure><h4 class="notion-h notion-h3 notion-h-indent-2 notion-block-a881101b3a594faab1abf350b5d24e14" data-id="a881101b3a594faab1abf350b5d24e14"><span><div id="a881101b3a594faab1abf350b5d24e14" class="notion-header-anchor"></div><a class="notion-hash-link" href="#a881101b3a594faab1abf350b5d24e14" title="相对时序"><svg viewBox="0 0 16 16" width="16" height="16"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><span class="notion-h-title">相对时序</span></span></h4><div class="notion-text notion-block-67a31fab038d4be1b1835022246762e1">与时间线图不同的是，时序图为了表达服务与服务之间的调用关系，默认采用了“相对时序”，而非严格按照 <code class="notion-inline-code">start_time</code> 排序的“绝对时序”。</div><ul class="notion-list notion-list-disc notion-block-a07ad39012964d6db72545afe8cfe077"><li>绝对时序：所有线条都按照 span 的绝对发生时间绘制，淡化父子关系</li></ul><ul class="notion-list notion-list-disc notion-block-7791f2df77c646c19e35e20ecf918808"><li>相对时序：父子的关系优先于绝对时间，同一个父节点下的 span 有绝对的先后顺序，不同父节点下的 span 不保证其绘制的先后顺序</li></ul><div class="notion-text notion-block-09a009c1e3ea4595949fbca3d2570a6c">我们举一个更容易理解的例子：假设某一个 Trace 有5个 Span，s1 → s5。s2 是 s3 的父节点，s4 是 s5 的父节点。先按照“绝对时序”画出时序图：</div><figure class="notion-asset-wrapper notion-asset-wrapper-image notion-block-cc8a1be210c940fc9610203141f9782e"><div style="position:relative;display:flex;justify-content:center;align-self:center;width:432px;max-width:100%;flex-direction:column"><img style="object-fit:contain" src="https://www.notion.so/image/https%3A%2F%2Ffile.notion.so%2Ff%2Ff%2Fb0a64676-90b9-4734-9c63-2d704ee573b6%2Fa00d5828-549c-417d-ac5e-7ec6152606e1%2FUntitled.png%3Fid%3Dcc8a1be2-10c9-40fc-9610-203141f9782e%26table%3Dblock%26spaceId%3Db0a64676-90b9-4734-9c63-2d704ee573b6%26expirationTimestamp%3D1713952800000%26signature%3DSrOkL1k6adcjAhmFm0z9CZ7pdrFP1ydEwJZNnbobyfM?table=block&amp;id=cc8a1be2-10c9-40fc-9610-203141f9782e&amp;cache=v2" loading="lazy" alt="notion image" decoding="async"/></div></figure><div class="notion-text notion-block-36f59f0045b24ac1be4f7a19bd602ecf">虽然它严格遵循了“时序”，但是原本的父子关系被淡化了，仅从图中基本没法判断出 <code class="notion-inline-code">s2 &amp; s3</code> \ <code class="notion-inline-code">s4 &amp; s5</code> 之间有什么联系（图中的 t 是为了展示额外添加的，真实数据中不存在）。</div><div class="notion-text notion-block-cc1d02eaeb3f4a2491507fc6ee6936b2">我们再按照“相对时序”来绘制：</div><figure class="notion-asset-wrapper notion-asset-wrapper-image notion-block-82f6009c67f84cb8aadc9e6e433baada"><div style="position:relative;display:flex;justify-content:center;align-self:center;width:432px;max-width:100%;flex-direction:column"><img style="object-fit:contain" src="https://www.notion.so/image/https%3A%2F%2Ffile.notion.so%2Ff%2Ff%2Fb0a64676-90b9-4734-9c63-2d704ee573b6%2Ff490f8b3-5d4f-43ae-8d96-336e5d1ab1eb%2FUntitled.png%3Fid%3D82f6009c-67f8-4cb8-aadc-9e6e433baada%26table%3Dblock%26spaceId%3Db0a64676-90b9-4734-9c63-2d704ee573b6%26expirationTimestamp%3D1713952800000%26signature%3D8TIgOaNAtEuIg4fOj8G8TP7gbfe3gTnn9tRjpl8ZYz0?table=block&amp;id=82f6009c-67f8-4cb8-aadc-9e6e433baada&amp;cache=v2" loading="lazy" alt="notion image" decoding="async"/></div></figure><div class="notion-text notion-block-80b08259d24c4017bed70b1f50307541">可以看到，虽然我们稍微“牺牲”了一些时序上的绝对性，但是调用之间的关系更清晰了，用户更容易在庞大的图表中找到调用关系。</div><h4 class="notion-h notion-h3 notion-h-indent-2 notion-block-0e101b6d6e7045e587e432d40487f73a" data-id="0e101b6d6e7045e587e432d40487f73a"><span><div id="0e101b6d6e7045e587e432d40487f73a" class="notion-header-anchor"></div><a class="notion-hash-link" href="#0e101b6d6e7045e587e432d40487f73a" title="虚拟的开始节点"><svg viewBox="0 0 16 16" width="16" height="16"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><span class="notion-h-title">虚拟的开始节点</span></span></h4><div class="notion-text notion-block-8075b01c84dc4a9580e1b27da6b43dcf">在图中有两个内容是“虚拟”出来的：开始节点和返回虚线。</div><div class="notion-text notion-block-b140acd55ee2444aa61f5b66d70dc09e"><b>当时序上的第一个 Span（通常是根 Span）的类型是被调或异步被调时，</b>为了表示该特性我们会在图的最左侧补充上一个虚拟的 <code class="notion-inline-code">Start</code> ，它没有其他实际意义，只是表达整个追踪的“开始”节点。</div><figure class="notion-asset-wrapper notion-asset-wrapper-image notion-block-4df2db4cd47146cd91314b52e48c08bf"><div style="position:relative;display:flex;justify-content:center;align-self:center;width:108px;max-width:100%;flex-direction:column"><img style="object-fit:contain" src="https://www.notion.so/image/https%3A%2F%2Ffile.notion.so%2Ff%2Ff%2Fb0a64676-90b9-4734-9c63-2d704ee573b6%2Fe03a0881-0eb5-411d-8aea-2582c70605c3%2FUntitled.png%3Fid%3D4df2db4c-d471-46cd-9131-4b52e48c08bf%26table%3Dblock%26spaceId%3Db0a64676-90b9-4734-9c63-2d704ee573b6%26expirationTimestamp%3D1713952800000%26signature%3DiMYG4wTafgiRvf5Xm36mlzEsKpN7wHg6zhP7xz9G3xo?table=block&amp;id=4df2db4c-d471-46cd-9131-4b52e48c08bf&amp;cache=v2" loading="lazy" alt="notion image" decoding="async"/></div></figure><h4 class="notion-h notion-h3 notion-h-indent-2 notion-block-8f584616dbc849039c9bbc295bf99f1a" data-id="8f584616dbc849039c9bbc295bf99f1a"><span><div id="8f584616dbc849039c9bbc295bf99f1a" class="notion-header-anchor"></div><a class="notion-hash-link" href="#8f584616dbc849039c9bbc295bf99f1a" title="调用返回"><svg viewBox="0 0 16 16" width="16" height="16"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><span class="notion-h-title">调用返回</span></span></h4><div class="notion-text notion-block-00e03c6b4ac744209621f9a91e1f7a5a">第二个添加的虚拟内容就是<b>返回虚线。</b></div><div class="notion-text notion-block-de9bba9a16584fefbcebd6a803e26e33">为了更加准确地表达 Span 在时序上的<b>流入流出状态</b>，我们会根据 Span 中的 <code class="notion-inline-code">end_time</code> 生成的一个虚拟调用返回，同时开启一个时序图的 Activation ，用来做 Span 耗时的示意。需要注意的是：<b>它并不是在所有的请求中都会开启，当且仅当 Span 的调用类型是主调。</b></div><div class="notion-blank notion-block-8261897306f54824815e51a76f7e5894"> </div><figure class="notion-asset-wrapper notion-asset-wrapper-image notion-block-c991985de58f42d082ba40d64f4fbd68"><div style="position:relative;display:flex;justify-content:center;align-self:center;width:100%;max-width:100%;flex-direction:column;height:100%"><img style="object-fit:contain" src="https://www.notion.so/image/https%3A%2F%2Ffile.notion.so%2Ff%2Ff%2Fb0a64676-90b9-4734-9c63-2d704ee573b6%2F82554cf9-ae62-4d00-9568-34f61646ee5d%2FUntitled.png%3Fid%3Dc991985d-e58f-42d0-82ba-40d64f4fbd68%26table%3Dblock%26spaceId%3Db0a64676-90b9-4734-9c63-2d704ee573b6%26expirationTimestamp%3D1713952800000%26signature%3D0XVAySMWt_UYaYTH-SfWqjQ39q67undgWJ_ulpdrHTw?table=block&amp;id=c991985d-e58f-42d0-82ba-40d64f4fbd68&amp;cache=v2" loading="lazy" alt="当 Span 是异步类型时，我们会使用特殊箭头 → ，且不会增加虚拟返回" decoding="async"/><figcaption class="notion-asset-caption">当 Span 是异步类型时，我们会使用特殊箭头 → ，且不会增加虚拟返回</figcaption></div></figure><h4 class="notion-h notion-h3 notion-h-indent-2 notion-block-7e392456e048485b9e09fdde6d021f91" data-id="7e392456e048485b9e09fdde6d021f91"><span><div id="7e392456e048485b9e09fdde6d021f91" class="notion-header-anchor"></div><a class="notion-hash-link" href="#7e392456e048485b9e09fdde6d021f91" title="主调被调合并"><svg viewBox="0 0 16 16" width="16" height="16"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><span class="notion-h-title">主调被调合并</span></span></h4><div class="notion-text notion-block-1e2291c13f7b438eab3840f791b91396">当<b>父 Span 是主调，子 Span 是被调</b>时，我们会把两个 Span 的信息合并到同一个 Message 中。</div><figure class="notion-asset-wrapper notion-asset-wrapper-image notion-block-f84e73ed0d374e7d94e32a6b02ab3c3b"><div style="position:relative;display:flex;justify-content:center;align-self:center;width:100%;max-width:100%;flex-direction:column;height:100%"><img style="object-fit:contain" src="https://www.notion.so/image/https%3A%2F%2Ffile.notion.so%2Ff%2Ff%2Fb0a64676-90b9-4734-9c63-2d704ee573b6%2Fcaec3efc-50be-4267-8950-c832ffdce96d%2FUntitled.png%3Fid%3Df84e73ed-0d37-4e7d-94e3-2a6b02ab3c3b%26table%3Dblock%26spaceId%3Db0a64676-90b9-4734-9c63-2d704ee573b6%26expirationTimestamp%3D1713952800000%26signature%3Dip5rrJ2mj-mpnm1pbYWVa3cXRRMnA_zdc74sT9RVVK0?table=block&amp;id=f84e73ed-0d37-4e7d-94e3-2a6b02ab3c3b&amp;cache=v2" loading="lazy" alt="合并后" decoding="async"/><figcaption class="notion-asset-caption">合并后</figcaption></div></figure><h3 class="notion-h notion-h2 notion-h-indent-1 notion-block-06649dbeb497402f9cabc6e558480592" data-id="06649dbeb497402f9cabc6e558480592"><span><div id="06649dbeb497402f9cabc6e558480592" class="notion-header-anchor"></div><a class="notion-hash-link" href="#06649dbeb497402f9cabc6e558480592" title="火焰图"><svg viewBox="0 0 16 16" width="16" height="16"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><span class="notion-h-title">火焰图</span></span></h3><div class="notion-text notion-block-10cfb10d1a6943b4845611dc693ff1af">火焰图最早是用在 CPU 性能分析领域，最大的特点是形似火焰，CPU 耗时越大在图中展示的元素越宽，开发者可以通过寻找“平顶山”来确定性能瓶颈。</div><figure class="notion-asset-wrapper notion-asset-wrapper-image notion-block-57fd0807a6274ee8ac88f5d30e72b93f"><div style="position:relative;display:flex;justify-content:center;align-self:center;width:100%;max-width:100%;flex-direction:column;height:100%"><img style="object-fit:contain" src="https://www.notion.so/image/https%3A%2F%2Ffile.notion.so%2Ff%2Ff%2Fb0a64676-90b9-4734-9c63-2d704ee573b6%2F10706838-b00e-432d-8385-0c19e6651ab8%2FUntitled.png%3Fid%3D57fd0807-a627-4ee8-ac88-f5d30e72b93f%26table%3Dblock%26spaceId%3Db0a64676-90b9-4734-9c63-2d704ee573b6%26expirationTimestamp%3D1713952800000%26signature%3DTVaqSZu3amVftcGd5hb2KCFXp9VXAF4S3Ci5ec1i74Y?table=block&amp;id=57fd0807-a627-4ee8-ac88-f5d30e72b93f&amp;cache=v2" loading="lazy" alt="原始火焰图，X轴按照字母序排列" decoding="async"/><figcaption class="notion-asset-caption">原始火焰图，X轴按照字母序排列</figcaption></div></figure><h4 class="notion-h notion-h3 notion-h-indent-2 notion-block-5c24f069332a42b8aa0a119bc56d4b84" data-id="5c24f069332a42b8aa0a119bc56d4b84"><span><div id="5c24f069332a42b8aa0a119bc56d4b84" class="notion-header-anchor"></div><a class="notion-hash-link" href="#5c24f069332a42b8aa0a119bc56d4b84" title="原始的局限"><svg viewBox="0 0 16 16" width="16" height="16"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><span class="notion-h-title">原始的局限</span></span></h4><div class="notion-text notion-block-8edf79ae7ff14f2588bab9877f9f953f">火焰图最大的局限在于无法精准地展示 Trace 中的 Span “并行”的概念，<a target="_blank" rel="noopener noreferrer" class="notion-link" href="https://github.com/kubeshop/tracetest/issues/1417#issuecomment-1327874188">即使已经有无数“前者”在尝试了</a>。</div><figure class="notion-asset-wrapper notion-asset-wrapper-image notion-block-8a2619474509440fa43e832129934122"><div style="position:relative;display:flex;justify-content:center;align-self:center;width:100%;max-width:100%;flex-direction:column;height:100%"><img style="object-fit:contain" src="https://www.notion.so/image/https%3A%2F%2Ffile.notion.so%2Ff%2Ff%2Fb0a64676-90b9-4734-9c63-2d704ee573b6%2F3b91e404-14d1-4692-9e0b-e70451b2b53b%2FUntitled.png%3Fid%3D8a261947-4509-440f-a43e-832129934122%26table%3Dblock%26spaceId%3Db0a64676-90b9-4734-9c63-2d704ee573b6%26expirationTimestamp%3D1713952800000%26signature%3DUzhWG_2n6Fh1T6m0F0q_Z0-V1YnUDynZH-t4Xwt_OZU?table=block&amp;id=8a261947-4509-440f-a43e-832129934122&amp;cache=v2" loading="lazy" alt="观测云的做法，看起来貌似可行" decoding="async"/><figcaption class="notion-asset-caption">观测云的做法，看起来貌似可行</figcaption></div></figure><figure class="notion-asset-wrapper notion-asset-wrapper-image notion-block-401867f12f7a4574a900f68040526787"><div style="position:relative;display:flex;justify-content:center;align-self:center;width:576px;max-width:100%;flex-direction:column"><img style="object-fit:contain" src="https://www.notion.so/image/https%3A%2F%2Ffile.notion.so%2Ff%2Ff%2Fb0a64676-90b9-4734-9c63-2d704ee573b6%2Fea7ffad4-43e0-4c1c-8887-becf34d9206b%2FUntitled.png%3Fid%3D401867f1-2f7a-4574-a900-f68040526787%26table%3Dblock%26spaceId%3Db0a64676-90b9-4734-9c63-2d704ee573b6%26expirationTimestamp%3D1713952800000%26signature%3DBQnKtoBToOCx_TQYhnoHq0KBLT3U9dXVQbmTqOCa3lA?table=block&amp;id=401867f1-2f7a-4574-a900-f68040526787&amp;cache=v2" loading="lazy" alt="当复杂场景发生时，必须要舍弃一些信息的精准性" decoding="async"/><figcaption class="notion-asset-caption">当复杂场景发生时，必须要舍弃一些信息的精准性</figcaption></div></figure><div class="notion-text notion-block-13d844f60b814a5ab4d6f142accd3fc2">原始火焰图更多用在 Profiling 场景下，此时对于程序函数调用栈关系的可视度有着更高的要求——即对于 Y 轴信息的准确程度。但是对于 Trace 而言，Span 的执行时间长度、顺序在展示上的优先级更高。所以，在 Trace 领域我们采用了一种火焰图的变体—— <code class="notion-inline-code">FlameChart</code>。它最早来自 Google Chrome 的 Web Inspector：</div><figure class="notion-asset-wrapper notion-asset-wrapper-image notion-block-e2c2399f7c484379a8ef17112346f717"><div style="position:relative;display:flex;justify-content:center;align-self:center;width:100%;max-width:100%;flex-direction:column;height:100%"><img style="object-fit:contain" src="https://www.notion.so/image/https%3A%2F%2Ffile.notion.so%2Ff%2Ff%2Fb0a64676-90b9-4734-9c63-2d704ee573b6%2F9cc16888-a208-4ca6-b6e6-94f6ebe10a23%2FUntitled.png%3Fid%3De2c2399f-7c48-4379-a8ef-17112346f717%26table%3Dblock%26spaceId%3Db0a64676-90b9-4734-9c63-2d704ee573b6%26expirationTimestamp%3D1713952800000%26signature%3DoaHCBzN7a_TVB0zzqORSrQkCW0nEDAiOTGOhFGsOWA0?table=block&amp;id=e2c2399f-7c48-4379-a8ef-17112346f717&amp;cache=v2" loading="lazy" alt="notion image" decoding="async"/></div></figure><div class="notion-text notion-block-6b13508f9d9949c8b8594fadd69a390e">最大的区别是它的 X 轴变成了时间轴，它会准确的表达 Span 的开始和结束时间，而 Y 轴的栈调用信息从绝对值变成相对值。但它一开始的场景更多是在 <code class="notion-inline-code">single-threaded</code> 的 JavaScript 分析，也不能妥善地处理好“多线程”的状况。</div><div class="notion-text notion-block-75c084500b1042ed91122227648ff65b">经过一番搜索，受到一个<a target="_blank" rel="noopener noreferrer" class="notion-link" href="https://github.com/gaogaotiantian/viztracer"> Python Profiling 可视化工具</a>的启发：</div><figure class="notion-asset-wrapper notion-asset-wrapper-image notion-block-1fa2877cdfd948d3b249778e9fe611d5"><div style="position:relative;display:flex;justify-content:center;align-self:center;width:100%;max-width:100%;flex-direction:column;height:100%"><img style="object-fit:contain" src="https://www.notion.so/image/https%3A%2F%2Ffile.notion.so%2Ff%2Ff%2Fb0a64676-90b9-4734-9c63-2d704ee573b6%2F167f1986-dbbd-4b21-93e1-241e29afea1c%2FUntitled.png%3Fid%3D1fa2877c-dfd9-48d3-b249-778e9fe611d5%26table%3Dblock%26spaceId%3Db0a64676-90b9-4734-9c63-2d704ee573b6%26expirationTimestamp%3D1713952800000%26signature%3DF9TP_OPUALXYeRmJgm07iTV7k3rOMFhIUYAqRNzDVnA?table=block&amp;id=1fa2877c-dfd9-48d3-b249-778e9fe611d5&amp;cache=v2" loading="lazy" alt="notion image" decoding="async"/></div></figure><div class="notion-text notion-block-4abdb60f1db644e991847dc8274a908b">类似地，我们在变体 <code class="notion-inline-code">FlameChart</code> 上做了进一步的变形，增加了 <code class="notion-inline-code">thread line</code> ——一个用水平虚线单独格出来的行——额外展示“并行”信息。</div><figure class="notion-asset-wrapper notion-asset-wrapper-image notion-block-302c8773dcec4a3bbc2409206dea5338"><div style="position:relative;display:flex;justify-content:center;align-self:center;width:100%;max-width:100%;flex-direction:column;height:100%"><img style="object-fit:contain" src="https://www.notion.so/image/https%3A%2F%2Ffile.notion.so%2Ff%2Ff%2Fb0a64676-90b9-4734-9c63-2d704ee573b6%2F78784afb-ac4d-401b-a2a2-efaedac9ac4d%2FUntitled.png%3Fid%3D302c8773-dcec-4a3b-bc24-09206dea5338%26table%3Dblock%26spaceId%3Db0a64676-90b9-4734-9c63-2d704ee573b6%26expirationTimestamp%3D1713952800000%26signature%3D4veA95LX3r3MiBxqva2Fkl0v0yzUFqEPMF4OjdHYe2o?table=block&amp;id=302c8773-dcec-4a3b-bc24-09206dea5338&amp;cache=v2" loading="lazy" alt="notion image" decoding="async"/></div></figure><div class="notion-text notion-block-4f7284da64704c308b5af5c1c94caa4f">在图中我们可以看到相较于最原始的火焰图有两个明显的变化：</div><ul class="notion-list notion-list-disc notion-block-10bbbc1383ac411dbdb75a41b8c735c3"><li>X 轴增加了时间纬度，按照 Span 的开始时间&amp;结束时间，保证长短比例，严格分布在 X 轴上</li></ul><ul class="notion-list notion-list-disc notion-block-b6551fcf1f5a446e964c9826b4c0b0bf"><li>Y 轴在相对情况下保持调用的父子关系，但不绝对表示栈的调用深度。</li></ul><div class="notion-text notion-block-851160b506ac40a4bd52ccd9d8de8e71">X 轴相对容易理解，Y轴的变化稍微展开阐述。这里有一个关键的概念——“并行”，当火焰图中有“并行”元素存在时，会单独在原来的火焰图下方另起一“虚线行”展示这个“并行”信息。</div><div class="notion-text notion-block-fa099e39d02f4b34872ebcf6e6b7d7b1">没有并行，和普通 flamechart 无异：</div><figure class="notion-asset-wrapper notion-asset-wrapper-image notion-block-b573f6d80345482e95a19fbbddc60930"><div style="position:relative;display:flex;justify-content:center;align-self:center;width:100%;max-width:100%;flex-direction:column;height:100%"><img style="object-fit:contain" src="https://www.notion.so/image/https%3A%2F%2Ffile.notion.so%2Ff%2Ff%2Fb0a64676-90b9-4734-9c63-2d704ee573b6%2Fb487cc45-3e57-4ac6-8c80-a319e9288b53%2FUntitled.png%3Fid%3Db573f6d8-0345-482e-95a1-9fbbddc60930%26table%3Dblock%26spaceId%3Db0a64676-90b9-4734-9c63-2d704ee573b6%26expirationTimestamp%3D1713952800000%26signature%3DASMUaLrbOfag2JlaYGTFRn_0m7CkhuCGbSLjRDt2EtE?table=block&amp;id=b573f6d8-0345-482e-95a1-9fbbddc60930&amp;cache=v2" loading="lazy" alt="notion image" decoding="async"/></div></figure><div class="notion-text notion-block-14ec2a9f2a6143f0a1460b365018876b">当存在并行内容时，将会有一条<b>“连接线”</b>将所有 Span 的头部都连接到一起，表示他们的“并行”性，此时 Y 轴仅在同一 <code class="notion-inline-code">thread line</code>中保持相对的调用深度，不同<code class="notion-inline-code">thread line</code>之间的调用深度需要通过<b>“连接线”</b>来辅助判断。</div><figure class="notion-asset-wrapper notion-asset-wrapper-image notion-block-db23380e72844779abd489561a757af7"><div style="position:relative;display:flex;justify-content:center;align-self:center;width:100%;max-width:100%;flex-direction:column;height:100%"><img style="object-fit:contain" src="https://www.notion.so/image/https%3A%2F%2Ffile.notion.so%2Ff%2Ff%2Fb0a64676-90b9-4734-9c63-2d704ee573b6%2F3e4ab1ab-91cd-48a6-b15f-e1e80dd1f5ce%2FUntitled.png%3Fid%3Ddb23380e-7284-4779-abd4-89561a757af7%26table%3Dblock%26spaceId%3Db0a64676-90b9-4734-9c63-2d704ee573b6%26expirationTimestamp%3D1713952800000%26signature%3DGHhhlXGwouym1YxV4MT73I8NRqlX6HTXtf2rL4_xpWg?table=block&amp;id=db23380e-7284-4779-abd4-89561a757af7&amp;cache=v2" loading="lazy" alt="notion image" decoding="async"/></div></figure><h2 class="notion-h notion-h1 notion-h-indent-0 notion-block-93231b98cafe48a6acc182dfd939858b" data-id="93231b98cafe48a6acc182dfd939858b"><span><div id="93231b98cafe48a6acc182dfd939858b" class="notion-header-anchor"></div><a class="notion-hash-link" href="#93231b98cafe48a6acc182dfd939858b" title="细节优化"><svg viewBox="0 0 16 16" width="16" height="16"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><span class="notion-h-title">细节优化</span></span></h2><h3 class="notion-h notion-h2 notion-h-indent-1 notion-block-4f4882277a074ec28840876f889bcf4b" data-id="4f4882277a074ec28840876f889bcf4b"><span><div id="4f4882277a074ec28840876f889bcf4b" class="notion-header-anchor"></div><a class="notion-hash-link" href="#4f4882277a074ec28840876f889bcf4b" title="折叠"><svg viewBox="0 0 16 16" width="16" height="16"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><span class="notion-h-title">折叠</span></span></h3><div class="notion-text notion-block-bfdde0090b0a462eb21a51c199bf36aa">由于是多叉树，节点宽度过大往往是控制展示的痛点。在很多场景下，同一次请求中存在大量的<b>重复调用</b>，它们代表的意义近似、耗时量级相同，却占据了画幅中的大量面积，所以我们针对这个场景进行了展示优化：<b>将相似的兄弟节点进行分组折叠</b>。判断节点是否相似取决于以下几个因素：</div><ul class="notion-list notion-list-disc notion-block-4c1023f2adf34bbd9281e84936ccf054"><li>Span Name 是否相同？</li></ul><ul class="notion-list notion-list-disc notion-block-5ced9b344be749be9a51d4d61bab2ccd"><li>Service Name 是否相同？</li></ul><ul class="notion-list notion-list-disc notion-block-7bb5d83565b442c7aee157ace3c7093b"><li>是否在时序上相邻？</li></ul><ul class="notion-list notion-list-disc notion-block-7ebef3f249034862880e6c1dcd047e00"><li>是否存在错误？</li></ul><div class="notion-text notion-block-dc6f7d31fedb425690a66bf613e5a630">不同的展示图表有不同的特性，选取的判断策略也有所不同：</div><ul class="notion-list notion-list-disc notion-block-4b89770223b24db3a00696e875ec2333"><li>瀑布图、时序图重点展示了时序，所以必须相邻才能被折叠到一起。</li><ul class="notion-list notion-list-disc notion-block-4b89770223b24db3a00696e875ec2333"><figure class="notion-asset-wrapper notion-asset-wrapper-image notion-block-477b50b8b36241b28d515404e8514c2a"><div style="position:relative;display:flex;justify-content:center;align-self:center;width:100%;max-width:100%;flex-direction:column;height:100%"><img style="object-fit:contain" src="https://www.notion.so/image/https%3A%2F%2Ffile.notion.so%2Ff%2Ff%2Fb0a64676-90b9-4734-9c63-2d704ee573b6%2Fb78d8290-821b-40e4-9cf5-6d157fe553cd%2FUntitled.png%3Fid%3D477b50b8-b362-41b2-8d51-5404e8514c2a%26table%3Dblock%26spaceId%3Db0a64676-90b9-4734-9c63-2d704ee573b6%26expirationTimestamp%3D1713952800000%26signature%3Drr8gFAQFiMqOqhq9RkzifyxMw3TpgEaDLeFVCoUfCe8?table=block&amp;id=477b50b8-b362-41b2-8d51-5404e8514c2a&amp;cache=v2" loading="lazy" alt="notion image" decoding="async"/></div></figure></ul></ul><ul class="notion-list notion-list-disc notion-block-c57c09763605473d8651dce45dab38f7"><li>拓扑图淡化了时序信息，所以即使时序不接壤，也会被折叠到一起。</li><ul class="notion-list notion-list-disc notion-block-c57c09763605473d8651dce45dab38f7"><figure class="notion-asset-wrapper notion-asset-wrapper-image notion-block-38c147607e024b50a6a59f62d3c3c4c5"><div style="position:relative;display:flex;justify-content:center;align-self:center;width:100%;max-width:100%;flex-direction:column;height:100%"><img style="object-fit:contain" src="https://www.notion.so/image/https%3A%2F%2Ffile.notion.so%2Ff%2Ff%2Fb0a64676-90b9-4734-9c63-2d704ee573b6%2F1ee72dc0-fc95-4e39-be94-dd93d13a63ce%2FUntitled.png%3Fid%3D38c14760-7e02-4b50-a6a5-9f62d3c3c4c5%26table%3Dblock%26spaceId%3Db0a64676-90b9-4734-9c63-2d704ee573b6%26expirationTimestamp%3D1713952800000%26signature%3Dipebjg1UoGS9o0HNqoxnbtgY-4JNPCC42l_6XotTkcM?table=block&amp;id=38c14760-7e02-4b50-a6a5-9f62d3c3c4c5&amp;cache=v2" loading="lazy" alt="notion image" decoding="async"/></div></figure></ul></ul><div class="notion-text notion-block-af636eace50d4a23a392c10940e01b00">同时，由于拓扑图的折叠只会保留一棵抽象的树，当存在两棵子树完全相同时也会被折叠到一起。</div><figure class="notion-asset-wrapper notion-asset-wrapper-image notion-block-5d4fd76d330b4d0a859abbccb4d39f52"><div style="position:relative;display:flex;justify-content:center;align-self:center;width:100%;max-width:100%;flex-direction:column;height:100%"><img style="object-fit:contain" src="https://www.notion.so/image/https%3A%2F%2Ffile.notion.so%2Ff%2Ff%2Fb0a64676-90b9-4734-9c63-2d704ee573b6%2F34b4c95b-c79d-43c9-af56-0fd2345295df%2FUntitled.png%3Fid%3D5d4fd76d-330b-4d0a-859a-bbccb4d39f52%26table%3Dblock%26spaceId%3Db0a64676-90b9-4734-9c63-2d704ee573b6%26expirationTimestamp%3D1713952800000%26signature%3DIHMQLQFR0jenVny_jzAcSCXDBbw2XINmAeVOHPF4gKs?table=block&amp;id=5d4fd76d-330b-4d0a-859a-bbccb4d39f52&amp;cache=v2" loading="lazy" alt="四棵一模一样的树" decoding="async"/><figcaption class="notion-asset-caption">四棵一模一样的树</figcaption></div></figure><figure class="notion-asset-wrapper notion-asset-wrapper-image notion-block-9845f5bcd67c44bb94a82375755e608b"><div style="position:relative;display:flex;justify-content:center;align-self:center;width:100%;max-width:100%;flex-direction:column;height:100%"><img style="object-fit:contain" src="https://www.notion.so/image/https%3A%2F%2Ffile.notion.so%2Ff%2Ff%2Fb0a64676-90b9-4734-9c63-2d704ee573b6%2F029886d0-76bb-4773-8437-53aef0ab054a%2FUntitled.png%3Fid%3D9845f5bc-d67c-44bb-94a8-2375755e608b%26table%3Dblock%26spaceId%3Db0a64676-90b9-4734-9c63-2d704ee573b6%26expirationTimestamp%3D1713952800000%26signature%3D9PHq_0S2tAMbxtrOOLi-LOgzL3ya2D7OJvvlz9p3RwE?table=block&amp;id=9845f5bc-d67c-44bb-94a8-2375755e608b&amp;cache=v2" loading="lazy" alt="聚合到一起，原本子树中已有的分组也会被同时累加聚合" decoding="async"/><figcaption class="notion-asset-caption">聚合到一起，原本子树中已有的分组也会被同时累加聚合</figcaption></div></figure><h3 class="notion-h notion-h2 notion-h-indent-1 notion-block-76159194b36447588d8b3148c4cf89f2" data-id="76159194b36447588d8b3148c4cf89f2"><span><div id="76159194b36447588d8b3148c4cf89f2" class="notion-header-anchor"></div><a class="notion-hash-link" href="#76159194b36447588d8b3148c4cf89f2" title="并行/并发推测"><svg viewBox="0 0 16 16" width="16" height="16"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><span class="notion-h-title"><b><b>并行/并发推测</b></b></span></span></h3><div class="notion-text notion-block-5312a6a7a27e41be92f994593aa6744c">兄弟 Span 之间很多时候会存在并行或者并发的情况，因为没有直接的字段指示，所以我们在多叉树的处理过程中增加了一个“并行/并发推测”的步骤。当存在以下任意两种场景时，我们会认为这些 Span 之间存在“并行或并发”的情况：</div><ul class="notion-list notion-list-disc notion-block-c61cebca6d4b49ec9e3549a85c854871"><li>兄弟 Span 之间的执行时间存在重叠，侧重于同一时间段内同时运行，即并「行」。</li></ul><ul class="notion-list notion-list-disc notion-block-05b458bd69d34bdfa63c0c1f0eb26972"><li>兄弟 Span 的开始时间极为接近（当前默认探测时长为 <code class="notion-inline-code">500μs</code> ），侧重于近乎在同一个时间点发起，即并「发」。</li></ul><div class="notion-text notion-block-e5a64b3bee414c35a544a9ddfbd340a1">这里我们可以回顾上文提到的时序图，里面就包含了一个并发的展示样例：</div><figure class="notion-asset-wrapper notion-asset-wrapper-image notion-block-0baaeea6d8884cb6b2f2701ec261984f"><div style="position:relative;display:flex;justify-content:center;align-self:center;width:100%;max-width:100%;flex-direction:column;height:100%"><img style="object-fit:contain" src="https://www.notion.so/image/https%3A%2F%2Ffile.notion.so%2Ff%2Ff%2Fb0a64676-90b9-4734-9c63-2d704ee573b6%2F12f36acf-24b1-49f0-b4c9-ad0642441967%2FUntitled.png%3Fid%3D0baaeea6-d888-4cb6-b2f2-701ec261984f%26table%3Dblock%26spaceId%3Db0a64676-90b9-4734-9c63-2d704ee573b6%26expirationTimestamp%3D1713952800000%26signature%3DFbPrNKhZpyMp86fUWfJoxrgSmizFIiPCTE-wJy8E-Is?table=block&amp;id=0baaeea6-d888-4cb6-b2f2-701ec261984f&amp;cache=v2" loading="lazy" alt="notion image" decoding="async"/></div></figure><div class="notion-text notion-block-6cbffe185ea34c678fa9ff35d02c7f37">需要注意的是，这里我们提到的“并行”，是一个逻辑概念，是我们根据数据状态进行的一种“推测”，而非坚定的”判断“，被”推测“为并行的元素间<b>可能不存在”真实“的物理并发行为</b>，而同样存在一些“真实”的物理并发没有被并行”推测”所标记。</div><h2 class="notion-h notion-h1 notion-h-indent-0 notion-block-1d83b966d9b34598846718140b90c3f4" data-id="1d83b966d9b34598846718140b90c3f4"><span><div id="1d83b966d9b34598846718140b90c3f4" class="notion-header-anchor"></div><a class="notion-hash-link" href="#1d83b966d9b34598846718140b90c3f4" title="对比"><svg viewBox="0 0 16 16" width="16" height="16"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><span class="notion-h-title">对比</span></span></h2><div class="notion-text notion-block-e9a3032d0e7c4b98af53826742fbb3e1">我们常常需要对比不同时间段内<b>相似的 Trace，</b>它可以帮助我们在更长的时间维度上对程序行为进行观测<b>。</b>正如上文提到每一个 Trace 都是一颗多叉树，相似 Trace 的对比其实就是多叉树对比的策略，但和普通多叉树不同的是，兄弟节点之间是时序相关的。</div><h3 class="notion-h notion-h2 notion-h-indent-1 notion-block-6b1a050c4f334c968674a7b2bf41c5e9" data-id="6b1a050c4f334c968674a7b2bf41c5e9"><span><div id="6b1a050c4f334c968674a7b2bf41c5e9" class="notion-header-anchor"></div><a class="notion-hash-link" href="#6b1a050c4f334c968674a7b2bf41c5e9" title="对比策略"><svg viewBox="0 0 16 16" width="16" height="16"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><span class="notion-h-title">对比策略</span></span></h3><div class="notion-text notion-block-a1fc4d4cb64444f09bfb9f7ead2d63e7">在 Trace 场景中我们采用了通过相对时序的方案对两棵多叉树进行对比。</div><figure class="notion-asset-wrapper notion-asset-wrapper-image notion-block-5e6eb3a3ab6347e883086ffe748d71dc"><div style="position:relative;display:flex;justify-content:center;align-self:center;width:100%;max-width:100%;flex-direction:column;height:100%"><img style="object-fit:contain" src="https://www.notion.so/image/https%3A%2F%2Ffile.notion.so%2Ff%2Ff%2Fb0a64676-90b9-4734-9c63-2d704ee573b6%2Fdcf05123-69b7-410c-b4c9-9600cda694b9%2FUntitled.png%3Fid%3D5e6eb3a3-ab63-47e8-8308-6ffe748d71dc%26table%3Dblock%26spaceId%3Db0a64676-90b9-4734-9c63-2d704ee573b6%26expirationTimestamp%3D1713952800000%26signature%3DHAlbXOe_cl7Ie68qEpnNI1f5HGGEt33SgLIDQAdno_Q?table=block&amp;id=5e6eb3a3-ab63-47e8-8308-6ffe748d71dc&amp;cache=v2" loading="lazy" alt="notion image" decoding="async"/></div></figure><div class="notion-text notion-block-4a749348d5344cfb869488ac27c4486b">相对时序的意思是，我们会根据节点所在兄弟之间的位置来确定其是否在对比树中存在。对于 baseline 的某个节点而言，查找可能会产生四种结果：</div><ul class="notion-list notion-list-disc notion-block-1559ac18fc60457a8c5dc090834c8e59"><li><code class="notion-inline-code">UNCHANGED</code>，未发生变化，相对位置、Span 关键信息、耗时均未发生改变</li></ul><ul class="notion-list notion-list-disc notion-block-e58c59a71a3e4232b2137b0d16e067ae"><li><code class="notion-inline-code">CHANGED</code> ，发生变化，相对位置、Span 关键信息已找到，但是耗时有了增减</li></ul><ul class="notion-list notion-list-disc notion-block-6953b88c7cd7417f90f2afe4f740b415"><li><code class="notion-inline-code">REMOVED</code> ，在 baseline 树中不存在，但是存在于对比树，认为是对比树新增的节点</li></ul><ul class="notion-list notion-list-disc notion-block-022cf753e21046e189b5f3375209c0b9"><li><code class="notion-inline-code">ADDED</code> ，未在对比树中找到对应 Span，判断该节点已经被删除</li></ul><h3 class="notion-h notion-h2 notion-h-indent-1 notion-block-659c28405dc5428e83b6ddbd5f37a55a" data-id="659c28405dc5428e83b6ddbd5f37a55a"><span><div id="659c28405dc5428e83b6ddbd5f37a55a" class="notion-header-anchor"></div><a class="notion-hash-link" href="#659c28405dc5428e83b6ddbd5f37a55a" title="可比性评估"><svg viewBox="0 0 16 16" width="16" height="16"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><span class="notion-h-title">可比性评估</span></span></h3><div class="notion-text notion-block-10488e2625b34142b608177a4f7d3a9d">有时候两棵 Trace 树的差异非常大，进行对比展示的意义不大，我们采取了一种 <b><em>吻合度按层级递减 </em></b>的策略对两棵树的可比性进行了一个评估。采取这个思路的原因是：<em>越靠近根的节点对于树的相似性有更多的影响。</em></div><figure class="notion-asset-wrapper notion-asset-wrapper-image notion-block-5ef27c516fc54b36a7fc7ccf0dec799a"><div style="position:relative;display:flex;justify-content:center;align-self:center;width:100%;max-width:100%;flex-direction:column;height:100%"><img style="object-fit:contain" src="https://www.notion.so/image/https%3A%2F%2Ffile.notion.so%2Ff%2Ff%2Fb0a64676-90b9-4734-9c63-2d704ee573b6%2F93f7a1bf-68c5-41b1-8274-a98fd511b499%2FUntitled.png%3Fid%3D5ef27c51-6fc5-4b36-a7fc-7ccf0dec799a%26table%3Dblock%26spaceId%3Db0a64676-90b9-4734-9c63-2d704ee573b6%26expirationTimestamp%3D1713952800000%26signature%3DEOfOQQBpAAr-2Yp9HCkEplfNH7AWVrjoWNsgPyI2m7U?table=block&amp;id=5ef27c51-6fc5-4b36-a7fc-7ccf0dec799a&amp;cache=v2" loading="lazy" alt="notion image" decoding="async"/></div></figure><div class="notion-text notion-block-c9937e71b0e44389ba2fb60bfdcf523f">在这里我们按照层级，从上到下进行评估可比性。当任意层级评估不可比，即判定两棵树不可比。</div><div class="notion-text notion-block-eb57d0a8a5054b539a8135bd235f1585">依照刚才提到的整体思路，越是靠近根节点的层级，应该有更高的相似性：<b>从左侧 baseline 树的角度出发，计算出节点在对比树中存在的比例是否满足该层级的最低吻合度</b></div><div class="notion-text notion-block-85f96990007c4102bd505cdba7f02988">我们定义了一个变量：吻合度层级递减比例 <code class="notion-inline-code">X</code> ，对于层级而言，最低吻合度就是 <code class="notion-inline-code">(100 - level * X)</code> 。这里的 <code class="notion-inline-code">X</code> 的取值会决定两棵树是否可比，如图所示：</div><ul class="notion-list notion-list-disc notion-block-d18ca17c5a314be78628cf2daa64f855"><li>当 <code class="notion-inline-code">X=25</code> 时， <code class="notion-inline-code">level=3</code> 层级的吻合度 <code class="notion-inline-code">1/6=16.7%</code> 是小于 <code class="notion-inline-code">100 - 3*25=25%</code> ，所以判定这两棵树是不可比的。</li></ul><ul class="notion-list notion-list-disc notion-block-be2877aaec1b481e880c30340800e4f0"><li>当 <code class="notion-inline-code">X=30</code> 时， <code class="notion-inline-code">level=3</code> 层级的吻合度 <code class="notion-inline-code">1/6=16.7%</code> 是大于 <code class="notion-inline-code">100 - 3*30=10%</code> ，所以判定这两棵树是可比的。</li></ul><div class="notion-text notion-block-ea6a0e10ae31467e85f14d6146bc2e51">（<em>对于具体 </em><em><code class="notion-inline-code">X</code></em><em> 的调控，我们暂时采用了一个静态值，更灵活的调整策略还在根据实际场景进行摸索。）</em></div><h4 class="notion-h notion-h3 notion-h-indent-2 notion-block-5bedb284e9a640d98e0a19ad77e2af0c" data-id="5bedb284e9a640d98e0a19ad77e2af0c"><span><div id="5bedb284e9a640d98e0a19ad77e2af0c" class="notion-header-anchor"></div><a class="notion-hash-link" href="#5bedb284e9a640d98e0a19ad77e2af0c" title="忽略小差异"><svg viewBox="0 0 16 16" width="16" height="16"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><span class="notion-h-title">忽略小差异</span></span></h4><div class="notion-text notion-block-afcb9ad0f37847cfbbafb8cc5e5be693">当然存在一些非常小的 Trace 树不太适用吻合度递减的评估策略。</div><figure class="notion-asset-wrapper notion-asset-wrapper-image notion-block-09162450c3d74b7599da417e066a583a"><div style="position:relative;display:flex;justify-content:center;align-self:center;width:100%;max-width:100%;flex-direction:column;height:100%"><img style="object-fit:contain" src="https://www.notion.so/image/https%3A%2F%2Ffile.notion.so%2Ff%2Ff%2Fb0a64676-90b9-4734-9c63-2d704ee573b6%2F836f4bf6-2562-4e28-b81e-9747adf09bd6%2FUntitled.png%3Fid%3D09162450-c3d7-4b75-99da-417e066a583a%26table%3Dblock%26spaceId%3Db0a64676-90b9-4734-9c63-2d704ee573b6%26expirationTimestamp%3D1713952800000%26signature%3D_GoNzP4vJrkCWNkb5GftnkVxDTMFlb_28s4aHqKzyNs?table=block&amp;id=09162450-c3d7-4b75-99da-417e066a583a&amp;cache=v2" loading="lazy" alt="足够小的树，需要 X 值较大才能保证对比性" decoding="async"/><figcaption class="notion-asset-caption">足够小的树，需要 X 值较大才能保证对比性</figcaption></div></figure><div class="notion-text notion-block-5b773fd874d042f7af5d5cb4c2c0de7a">我们设定了一个阈值 <code class="notion-inline-code">Y</code>，当层级节点数小于 <code class="notion-inline-code">Y</code> 时我们不予进行对比评估。</div><h2 class="notion-h notion-h1 notion-h-indent-0 notion-block-9ddaeb731d74453b87e5b4ccae908e5f" data-id="9ddaeb731d74453b87e5b4ccae908e5f"><span><div id="9ddaeb731d74453b87e5b4ccae908e5f" class="notion-header-anchor"></div><a class="notion-hash-link" href="#9ddaeb731d74453b87e5b4ccae908e5f" title="Fin"><svg viewBox="0 0 16 16" width="16" height="16"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><span class="notion-h-title">Fin</span></span></h2><figure class="notion-asset-wrapper notion-asset-wrapper-image notion-block-2101b3de0747477c9a7418aa2da46bff"><div style="position:relative;display:flex;justify-content:center;align-self:center;width:100%;max-width:100%;flex-direction:column;height:100%"><img style="object-fit:contain" src="https://www.notion.so/image/https%3A%2F%2Ffile.notion.so%2Ff%2Ff%2Fb0a64676-90b9-4734-9c63-2d704ee573b6%2F5b92c6a8-938e-4b27-944c-705a46a583e4%2FUntitled.png%3Fid%3D2101b3de-0747-477c-9a74-18aa2da46bff%26table%3Dblock%26spaceId%3Db0a64676-90b9-4734-9c63-2d704ee573b6%26expirationTimestamp%3D1713952800000%26signature%3D2MJuAnPMJqEL9sZqiY0C92Zrn-WFY_pKjbkcGDEcey4?table=block&amp;id=2101b3de-0747-477c-9a74-18aa2da46bff&amp;cache=v2" loading="lazy" alt="notion image" decoding="async"/></div></figure><div class="notion-text notion-block-718b99c23def423283d09151206bc1f4">基于当前的生产管线，后续可以对更多可视化图表，让天下没有难懂的 Trace 😎</div><div class="notion-text notion-block-d52826c5227b4d63953e1cd4c4766476">(以上内容均已<a target="_blank" rel="noopener noreferrer" class="notion-link" href="https://github.com/TencentBlueKing/bk-monitor/tree/master/bkmonitor/packages/apm_web/trace">开源</a> 👾）</div></main></div></article><div class="flex justify-between font-medium text-gray-500 dark:text-gray-400"><a><button class="mt-2 cursor-pointer hover:text-black dark:hover:text-gray-100">← <!-- -->返回</button></a><a><button class="mt-2 cursor-pointer hover:text-black dark:hover:text-gray-100">↑ <!-- -->回到顶部</button></a></div><div></div></main><div class="mt-6 flex-shrink-0 m-auto w-full text-gray-500 dark:text-gray-400 transition-all max-w-3xl px-4"><hr class="border-gray-200 dark:border-gray-600"/><div class="my-4 text-sm leading-6"><div class="flex align-baseline justify-between flex-wrap"><p>© <!-- -->bluesyu<!-- --> <!-- -->2019 - 2024</p><p>powered by <a href="https://github.com/craigary/nobelium"><u>nobelium</u></a></p></div></div></div></div></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"post":{"id":"2832ab2a-059a-45e4-8cf1-b0ed05e8e1fa","date":{"start_date":"2023-09-04"},"type":["Post"],"slug":"trace-diagrams","tags":["observability","best-practice","trace","diagram"],"title":"观测利器：让天下没有难懂的 Trace","status":["Published"],"createdTime":"Mon Jul 24 2023 03:42:03 GMT+0000 (Coordinated Universal Time)","fullWidth":false,"pageIcon":"🦾","pageCover":null},"blockMap":{"block":{"2832ab2a-059a-45e4-8cf1-b0ed05e8e1fa":{"value":{"id":"2832ab2a-059a-45e4-8cf1-b0ed05e8e1fa","version":1386,"type":"page","properties":{"NX\\Q":[["‣",[["d",{"type":"date","start_date":"2023-09-04"}]]]],"`gQ~":[["Post"]],"d]hq":[["trace-diagrams"]],"sD^m":[["observability,best-practice,trace,diagram"]],"title":[["观测利器：让天下没有难懂的 Trace",[["b"]]]],"f211bdc0-ee00-4186-9a7d-f68c055ec2ee":[["Published"]]},"content":["fdb25683-ce53-4db7-80f9-17327f5e9527","32ba39ae-15eb-460b-828d-bcc77d3c3e6a","e3cd920c-030d-41b3-bf73-82f474311e98","e479df3b-8b9b-438f-bdc1-e72ff152774f","8a7694d8-4a87-41c6-b374-ecf298539e9b","c511eb82-5c29-4f77-be6b-1bc841a57849","8ef5b145-a07b-4b24-a0fe-698bf63fa722","e7162fad-2a04-4f87-95de-fd8283fe5235","66854b86-cc38-4152-a5ea-853db6b98b25","53511ecd-e84c-45ba-a141-894f2d81be91","68003399-f7f2-445d-96da-82c00ad5d713","9d043aab-62c7-4341-baef-3d6b210f1252","ac8771cb-2306-442f-a7a8-6ab27f05615c","b1ab9ce3-4162-4c4e-9e6b-d784e170beba","7a19ad01-3339-45a4-8ce8-558a5f013e3c","3400e071-0a0e-44f7-9599-881b0b1a233f","f27f6932-e6c6-46d6-af4d-f99f36080638","867e2606-9d1c-48b6-8eb7-3b9d978e927d","124728a9-cc62-4de3-9758-3398b178a9a4","02d3a9d3-8e03-484a-9fa1-231909a8901c","5dab1b03-bfec-44c5-95ed-dfb9975ce08b","b7a4d191-4c8a-4b6f-bc37-07f6f5ae0386","d7b237a1-d5d4-4538-a4c5-46312c6d75b3","a97a22d1-02d5-4770-8193-3ed6347e4d3e","95c58268-2eaf-4032-a284-39d6b429743c","423cc8cb-56d9-43be-8ea3-0239a2942d2b","5da0a05a-4acd-4c3f-aba9-949d6145a0c8","33e9e3d2-232c-476f-9cd6-36cf9a00ebe9","063b7129-060c-4e2c-be99-846c845ee96e","38b6dd6a-cbc1-472a-b269-d3baa87d4caf","cf07b1b8-3d4c-447a-b9d5-fabd277ebbf8","b680db86-b7d4-4472-9d1d-c2d79f054452","9cad0af9-f407-4037-9a62-7b008b4de1c7","d4677c74-9003-44a0-9ee3-a6469a9ba674","ccc5c01b-47ff-499a-ba18-65f348d55037","e96fb5f7-46ea-4178-b42c-352445787b26","8ec5d40a-4f21-4b69-9fdc-1ab79aac351a","7655de18-6bcc-4709-a6b4-2a23f23cd958","2a7631a5-1e3a-4625-af5d-1748a1c78da5","8a0b69b2-1b80-400d-bf7b-0afa526856ce","eb017e37-8dc3-407c-9ad4-a61c4ae82741","3756c5bc-ed69-47b0-9344-588340f297e1","4a2ac240-b096-40d4-9deb-e02d338d732c","8a646b47-a77d-448d-beb6-76a67d1f27c9","23ec6bed-887a-475d-a721-2ee912203e92","7c4ed4e9-40dc-4cc4-8c1a-5a8e7091c73c","d54c49d7-7b5b-469b-85c6-e0e48881ddb7","cea8a144-1cdf-4106-9a8d-00c1887ef4bc","a881101b-3a59-4faa-b1ab-f350b5d24e14","67a31fab-038d-4be1-b183-5022246762e1","a07ad390-1296-4d6d-b725-45afe8cfe077","7791f2df-77c6-46c1-9e35-e20ecf918808","09a009c1-e3ea-4595-949f-bca3d2570a6c","cc8a1be2-10c9-40fc-9610-203141f9782e","36f59f00-45b2-4ac1-be4f-7a19bd602ecf","cc1d02ea-eb3f-4a24-9150-7fc6ee6936b2","82f6009c-67f8-4cb8-aadc-9e6e433baada","80b08259-d24c-4017-bed7-0b1f50307541","0e101b6d-6e70-45e5-87e4-32d40487f73a","8075b01c-84dc-4a95-80e1-b27da6b43dcf","b140acd5-5ee2-444a-a61f-5b66d70dc09e","4df2db4c-d471-46cd-9131-4b52e48c08bf","8f584616-dbc8-4903-9c9b-bc295bf99f1a","00e03c6b-4ac7-4420-9621-f9a91e1f7a5a","de9bba9a-1658-4fef-bceb-d6a803e26e33","82618973-06f5-4824-815e-51a76f7e5894","c991985d-e58f-42d0-82ba-40d64f4fbd68","7e392456-e048-485b-9e09-fdde6d021f91","1e2291c1-3f7b-438e-ab38-40f791b91396","f84e73ed-0d37-4e7d-94e3-2a6b02ab3c3b","06649dbe-b497-402f-9cab-c6e558480592","10cfb10d-1a69-43b4-8456-11dc693ff1af","57fd0807-a627-4ee8-ac88-f5d30e72b93f","5c24f069-332a-42b8-aa0a-119bc56d4b84","8edf79ae-7ff1-4f25-88ba-b9877f9f953f","8a261947-4509-440f-a43e-832129934122","401867f1-2f7a-4574-a900-f68040526787","13d844f6-0b81-4a5a-b4d6-f142accd3fc2","e2c2399f-7c48-4379-a8ef-17112346f717","6b13508f-9d99-49c8-b859-4fadd69a390e","75c08450-0b10-42ed-9112-2227648ff65b","1fa2877c-dfd9-48d3-b249-778e9fe611d5","4abdb60f-1db6-44e9-9184-7dc8274a908b","302c8773-dcec-4a3b-bc24-09206dea5338","4f7284da-6470-4c30-8b5a-f5c1c94caa4f","10bbbc13-83ac-411d-bdb7-5a41b8c735c3","b6551fcf-1f5a-446e-964c-9826b4c0b0bf","851160b5-06ac-40a4-bd52-ccd9d8de8e71","fa099e39-d02f-4b34-872e-bcf6e6b7d7b1","b573f6d8-0345-482e-95a1-9fbbddc60930","14ec2a9f-2a61-43f0-a146-0b365018876b","db23380e-7284-4779-abd4-89561a757af7","93231b98-cafe-48a6-acc1-82dfd939858b","4f488227-7a07-4ec2-8840-876f889bcf4b","bfdde009-0b0a-462e-b21a-51c199bf36aa","4c1023f2-adf3-4bbd-9281-e84936ccf054","5ced9b34-4be7-49be-9a51-d4d61bab2ccd","7bb5d835-65b4-42c7-aee1-57ace3c7093b","7ebef3f2-4903-4862-880e-6c1dcd047e00","dc6f7d31-fedb-4256-90a6-6bf613e5a630","4b897702-23b2-4db3-a006-96e875ec2333","c57c0976-3605-473d-8651-dce45dab38f7","af636eac-e50d-4a23-a392-c10940e01b00","5d4fd76d-330b-4d0a-859a-bbccb4d39f52","9845f5bc-d67c-44bb-94a8-2375755e608b","76159194-b364-4758-8d8b-3148c4cf89f2","5312a6a7-a27e-41be-92f9-94593aa6744c","c61cebca-6d4b-49ec-9e35-49a85c854871","05b458bd-69d3-4bdf-a63c-0c1f0eb26972","e5a64b3b-ee41-4c35-a544-a9ddfbd340a1","0baaeea6-d888-4cb6-b2f2-701ec261984f","6cbffe18-5ea3-4c67-8fa9-ff35d02c7f37","1d83b966-d9b3-4598-8467-18140b90c3f4","e9a3032d-0e7c-4b98-af53-826742fbb3e1","6b1a050c-4f33-4c96-8674-a7b2bf41c5e9","a1fc4d4c-b644-44f0-9bfb-9f7ead2d63e7","5e6eb3a3-ab63-47e8-8308-6ffe748d71dc","4a749348-d534-4cfb-8694-88ac27c4486b","1559ac18-fc60-457a-8c5d-c090834c8e59","e58c59a7-1a3e-4232-b213-7b0d16e067ae","6953b88c-7cd7-417f-90f2-afe4f740b415","022cf753-e210-46e1-89b5-f3375209c0b9","659c2840-5dc5-428e-83b6-ddbd5f37a55a","10488e26-25b3-4142-b608-177a4f7d3a9d","5ef27c51-6fc5-4b36-a7fc-7ccf0dec799a","c9937e71-b0e4-4389-ba2f-b60bfdcf523f","eb57d0a8-a505-4b53-9a81-35bd235f1585","85f96990-007c-4102-bd50-5cdba7f02988","d18ca17c-5a31-4be7-8628-cf2daa64f855","be2877aa-ec1b-481e-880c-30340800e4f0","ea6a0e10-ae31-467e-85f1-4d6146bc2e51","5bedb284-e9a6-40d9-8e0a-19ad77e2af0c","afcb9ad0-f378-47cf-bbaf-b8cc5e5be693","09162450-c3d7-4b75-99da-417e066a583a","5b773fd8-74d0-42f7-af5d-5cb4c2c0de7a","9ddaeb73-1d74-453b-87e5-b4ccae908e5f","2101b3de-0747-477c-9a74-18aa2da46bff","718b99c2-3def-4232-83d0-9151206bc1f4","d52826c5-227b-4d63-953e-1cd4c4766476"],"format":{"page_icon":"🦾","page_full_width":false,"page_small_text":true},"created_time":1690170123995,"last_edited_time":1701946580837,"parent_id":"e34bec60-9b02-4ad8-aaf8-83369409cc9f","parent_table":"collection","alive":true,"created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"},"role":"reader"},"a6089909-2d0d-43ef-af93-5e041712e826":{"value":{"id":"a6089909-2d0d-43ef-af93-5e041712e826","version":136,"type":"collection_view_page","view_ids":["065b98d2-d3b4-4dab-8b96-4eb118a3f311"],"collection_id":"e34bec60-9b02-4ad8-aaf8-83369409cc9f","format":{"block_locked":false,"block_locked_by":"2c0e0b01-f59e-4e03-b7b6-7d706eecada3","collection_pointer":{"id":"e34bec60-9b02-4ad8-aaf8-83369409cc9f","table":"collection","spaceId":"b0a64676-90b9-4734-9c63-2d704ee573b6"},"copied_from_pointer":{"id":"adc3552c-fc73-442a-b504-8d4b1eb0079a","table":"block","spaceId":"ac4cb96d-c8f8-4040-9bb2-868d9fc7f526"}},"permissions":[{"role":"editor","type":"user_permission","user_id":"f594524b-0941-4aea-99a2-9b9304033287"},{"role":"reader","type":"public_permission","added_timestamp":1713861917858,"allow_duplicate":false,"allow_search_engine_indexing":true}],"created_time":1665993658476,"last_edited_time":1713861931006,"parent_id":"b0a64676-90b9-4734-9c63-2d704ee573b6","parent_table":"space","alive":true,"copied_from":"adc3552c-fc73-442a-b504-8d4b1eb0079a","created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"},"role":"reader"},"fdb25683-ce53-4db7-80f9-17327f5e9527":{"value":{"id":"fdb25683-ce53-4db7-80f9-17327f5e9527","version":4,"type":"table_of_contents","format":{"block_color":"gray"},"created_time":1690257511485,"last_edited_time":1690257511486,"parent_id":"2832ab2a-059a-45e4-8cf1-b0ed05e8e1fa","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"},"role":"reader"},"32ba39ae-15eb-460b-828d-bcc77d3c3e6a":{"value":{"id":"32ba39ae-15eb-460b-828d-bcc77d3c3e6a","version":23,"type":"header","properties":{"title":[["什么是 Traces ?"]]},"created_time":1690257284556,"last_edited_time":1690271487350,"parent_id":"2832ab2a-059a-45e4-8cf1-b0ed05e8e1fa","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"},"role":"reader"},"e3cd920c-030d-41b3-bf73-82f474311e98":{"value":{"id":"e3cd920c-030d-41b3-bf73-82f474311e98","version":421,"type":"text","properties":{"title":[["这两年可观测领域受到了比较多的关注，其中以 Traces 尤为突出。那么什么是 Traces 呢？它又能做什么呢？我们来看看官方给予的定义："]]},"created_time":1690270813774,"last_edited_time":1690270923128,"parent_id":"2832ab2a-059a-45e4-8cf1-b0ed05e8e1fa","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"},"role":"reader"},"e479df3b-8b9b-438f-bdc1-e72ff152774f":{"value":{"id":"e479df3b-8b9b-438f-bdc1-e72ff152774f","version":10,"type":"quote","properties":{"title":[["Traces",[["b"]]],[" give us the big "],["picture",[["b"]]],[" of what happens when a request is made to an application"]]},"format":{"quote_size":"large"},"created_time":1690270896656,"last_edited_time":1690277427848,"parent_id":"2832ab2a-059a-45e4-8cf1-b0ed05e8e1fa","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"},"role":"reader"},"8a7694d8-4a87-41c6-b374-ecf298539e9b":{"value":{"id":"8a7694d8-4a87-41c6-b374-ecf298539e9b","version":159,"type":"text","properties":{"title":[["简单来说："],["Traces 能 ",[["i"]]],["描绘 ",[["b"],["i"]]],["一个请求在应用中究竟做了什么。",[["i"]]]]},"created_time":1690257517641,"last_edited_time":1690271322535,"parent_id":"2832ab2a-059a-45e4-8cf1-b0ed05e8e1fa","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"},"role":"reader"},"c511eb82-5c29-4f77-be6b-1bc841a57849":{"value":{"id":"c511eb82-5c29-4f77-be6b-1bc841a57849","version":93,"type":"sub_header","properties":{"title":[["描绘？"]]},"created_time":1690271328698,"last_edited_time":1690272496734,"parent_id":"2832ab2a-059a-45e4-8cf1-b0ed05e8e1fa","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"},"role":"reader"},"8ef5b145-a07b-4b24-a0fe-698bf63fa722":{"value":{"id":"8ef5b145-a07b-4b24-a0fe-698bf63fa722","version":2735,"type":"text","properties":{"title":[["对于原始的 Traces 数据而言，与其说是“描绘”，不如说是“描述”：应用做的事情被拆解成一个个小的单元（Span），多个有着父子关系的 Span 组成一个完整的 Trace。尽管它的数据详尽——包括属性（attributes）、事件（Events）、上下文（Context）等内容，但是最大问题也很明显："],["不够直观，有效信息获取效率低。",[["b"]]]]},"created_time":1690257522555,"last_edited_time":1691650690433,"parent_id":"2832ab2a-059a-45e4-8cf1-b0ed05e8e1fa","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"},"role":"reader"},"e7162fad-2a04-4f87-95de-fd8283fe5235":{"value":{"id":"e7162fad-2a04-4f87-95de-fd8283fe5235","version":36,"type":"code","properties":{"title":[["{\n\t\"name\": \"hello-greetings\",\n\t\"context\": {\n\t\t\"trace_id\": \"0x5b8aa5a2d2c872e8321cf37308d69df2\",\n\t\t\"span_id\": \"0x5fb397be34d26b51\"\n\t},\n\t\"parent_id\": \"0x051581bf3cb55c13\",\n\t\"start_time\": \"2022-04-29T18:52:58.114304Z\",\n\t\"end_time\": \"2022-04-29T22:52:58.114561Z\",\n\t\"attributes\": {\n\t\t\"http.route\": \"some_route1\"\n\t},\n\t\"events\": [\n\t\t{\n\t\t\t\"name\": \"hey there!\",\n\t\t\t\"timestamp\": \"2022-04-29T18:52:58.114561Z\",\n\t\t\t\"attributes\": {\n\t\t\t\t\"event_attributes\": 1\n\t\t\t}\n\t\t}\n\t]\n}"]],"language":[["JSON"]]},"format":{"code_wrap":true},"created_time":1690272154485,"last_edited_time":1690272516188,"parent_id":"2832ab2a-059a-45e4-8cf1-b0ed05e8e1fa","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"},"role":"reader"},"66854b86-cc38-4152-a5ea-853db6b98b25":{"value":{"id":"66854b86-cc38-4152-a5ea-853db6b98b25","version":549,"type":"text","properties":{"title":[["所以更多维、更直观的图表就显得尤为必要了。",[["b"]]]]},"created_time":1690270691538,"last_edited_time":1690277979329,"parent_id":"2832ab2a-059a-45e4-8cf1-b0ed05e8e1fa","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"},"role":"reader"},"53511ecd-e84c-45ba-a141-894f2d81be91":{"value":{"id":"53511ecd-e84c-45ba-a141-894f2d81be91","version":152,"type":"header","properties":{"title":[["各种变换形态"]]},"created_time":1690267988893,"last_edited_time":1690278590685,"parent_id":"2832ab2a-059a-45e4-8cf1-b0ed05e8e1fa","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"},"role":"reader"},"68003399-f7f2-445d-96da-82c00ad5d713":{"value":{"id":"68003399-f7f2-445d-96da-82c00ad5d713","version":983,"type":"text","properties":{"title":[["首先，我们需要将 Traces 数据抽象成一棵多叉树。"]]},"created_time":1690272622176,"last_edited_time":1691660304937,"parent_id":"2832ab2a-059a-45e4-8cf1-b0ed05e8e1fa","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"},"role":"reader"},"9d043aab-62c7-4341-baef-3d6b210f1252":{"value":{"id":"9d043aab-62c7-4341-baef-3d6b210f1252","version":86,"type":"image","properties":{"size":[["256.6KB"]],"title":[["Untitled"]],"source":[["https://s3-us-west-2.amazonaws.com/secure.notion-static.com/7681e621-373a-445c-a704-86c32fbbe504/Untitled.png"]],"caption":[["一个简单的 Trace 多叉树"]]},"format":{"block_width":1962,"display_source":"https://s3-us-west-2.amazonaws.com/secure.notion-static.com/7681e621-373a-445c-a704-86c32fbbe504/Untitled.png","block_full_width":false,"block_page_width":true,"block_aspect_ratio":0.6004077471967381,"block_preserve_scale":true},"created_time":1690274552107,"last_edited_time":1690275795547,"parent_id":"2832ab2a-059a-45e4-8cf1-b0ed05e8e1fa","parent_table":"block","alive":true,"file_ids":["7681e621-373a-445c-a704-86c32fbbe504"],"created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"},"role":"reader"},"ac8771cb-2306-442f-a7a8-6ab27f05615c":{"value":{"id":"ac8771cb-2306-442f-a7a8-6ab27f05615c","version":559,"type":"text","properties":{"title":[["在这棵多叉树的各个节点信息中，藏着 Trace 的多个维度信息："]]},"created_time":1690277271456,"last_edited_time":1690278631430,"parent_id":"2832ab2a-059a-45e4-8cf1-b0ed05e8e1fa","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"},"role":"reader"},"b1ab9ce3-4162-4c4e-9e6b-d784e170beba":{"value":{"id":"b1ab9ce3-4162-4c4e-9e6b-d784e170beba","version":268,"type":"bulleted_list","properties":{"title":[["Span 之间的调用关系："],["parent_id",[["c"]]],[" 指向调用它的父级节点"]]},"created_time":1690278631764,"last_edited_time":1690278685496,"parent_id":"2832ab2a-059a-45e4-8cf1-b0ed05e8e1fa","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"},"role":"reader"},"7a19ad01-3339-45a4-8ce8-558a5f013e3c":{"value":{"id":"7a19ad01-3339-45a4-8ce8-558a5f013e3c","version":242,"type":"bulleted_list","properties":{"title":[["Span 调用的时序关系： "],["start_time",[["c"]]],[" \u0026 "],["end_time",[["c"]]],[" 表明了 Span 的开始结束时间点"]]},"created_time":1690278651366,"last_edited_time":1690279505481,"parent_id":"2832ab2a-059a-45e4-8cf1-b0ed05e8e1fa","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"},"role":"reader"},"3400e071-0a0e-44f7-9599-881b0b1a233f":{"value":{"id":"3400e071-0a0e-44f7-9599-881b0b1a233f","version":165,"type":"bulleted_list","properties":{"title":[["Span 耗时： "],["elapsed_time",[["c"]]],[" 代表该 Span 的耗时"]]},"created_time":1690279506159,"last_edited_time":1691654848507,"parent_id":"2832ab2a-059a-45e4-8cf1-b0ed05e8e1fa","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"},"role":"reader"},"f27f6932-e6c6-46d6-af4d-f99f36080638":{"value":{"id":"f27f6932-e6c6-46d6-af4d-f99f36080638","version":94,"type":"sub_header","properties":{"title":[["Timeline 时间线图"]]},"created_time":1690280830741,"last_edited_time":1690538560495,"parent_id":"2832ab2a-059a-45e4-8cf1-b0ed05e8e1fa","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"},"role":"reader"},"867e2606-9d1c-48b6-8eb7-3b9d978e927d":{"value":{"id":"867e2606-9d1c-48b6-8eb7-3b9d978e927d","version":7,"type":"text","properties":{"title":[["首先，我们通过「Timeline 图」（a.k.a 瀑布图）纵览所有 Span 之间的父子关系、时序、耗时。"]]},"created_time":1691654846488,"last_edited_time":1691654846911,"parent_id":"2832ab2a-059a-45e4-8cf1-b0ed05e8e1fa","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"},"role":"reader"},"124728a9-cc62-4de3-9758-3398b178a9a4":{"value":{"id":"124728a9-cc62-4de3-9758-3398b178a9a4","version":11,"type":"image","properties":{"size":[["316.4KB"]],"title":[["Untitled"]],"source":[["https://s3-us-west-2.amazonaws.com/secure.notion-static.com/6edfdff8-7924-4a86-af03-601e0d1295d8/Untitled.png"]]},"format":{"block_width":3200,"display_source":"https://s3-us-west-2.amazonaws.com/secure.notion-static.com/6edfdff8-7924-4a86-af03-601e0d1295d8/Untitled.png","block_full_width":false,"block_page_width":true,"block_aspect_ratio":0.4625,"block_preserve_scale":true},"created_time":1691654840746,"last_edited_time":1691654847249,"parent_id":"2832ab2a-059a-45e4-8cf1-b0ed05e8e1fa","parent_table":"block","alive":true,"file_ids":["6edfdff8-7924-4a86-af03-601e0d1295d8"],"created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"},"role":"reader"},"02d3a9d3-8e03-484a-9fa1-231909a8901c":{"value":{"id":"02d3a9d3-8e03-484a-9fa1-231909a8901c","version":4,"type":"text","properties":{"title":[["在时间线图中，你可以掌握单个 Trace 的全部信息："]]},"created_time":1690277271456,"last_edited_time":1690538924802,"parent_id":"2832ab2a-059a-45e4-8cf1-b0ed05e8e1fa","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"},"role":"reader"},"5dab1b03-bfec-44c5-95ed-dfb9975ce08b":{"value":{"id":"5dab1b03-bfec-44c5-95ed-dfb9975ce08b","version":213,"type":"bulleted_list","properties":{"title":[["查看所有的 Span 概况，按照服务进行颜色区分，同时展示所有的父子关系。"]]},"created_time":1690361758599,"last_edited_time":1690538578112,"parent_id":"2832ab2a-059a-45e4-8cf1-b0ed05e8e1fa","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"},"role":"reader"},"b7a4d191-4c8a-4b6f-bc37-07f6f5ae0386":{"value":{"id":"b7a4d191-4c8a-4b6f-bc37-07f6f5ae0386","version":260,"type":"bulleted_list","properties":{"title":[["通过时间轴和线条的长度判断出 Span 具体耗时。"]]},"created_time":1690361758599,"last_edited_time":1690538609460,"parent_id":"2832ab2a-059a-45e4-8cf1-b0ed05e8e1fa","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"},"role":"reader"},"d7b237a1-d5d4-4538-a4c5-46312c6d75b3":{"value":{"id":"d7b237a1-d5d4-4538-a4c5-46312c6d75b3","version":90,"type":"bulleted_list","properties":{"title":[["点击 Span 可以查看其详细信息，包括标签和进程等所有上报信息。"]]},"created_time":1690361758599,"last_edited_time":1690538933484,"parent_id":"2832ab2a-059a-45e4-8cf1-b0ed05e8e1fa","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"},"role":"reader"},"a97a22d1-02d5-4770-8193-3ed6347e4d3e":{"value":{"id":"a97a22d1-02d5-4770-8193-3ed6347e4d3e","version":27,"type":"text","properties":{"title":[["虽然它全能，但在一些具体维度上仍旧不够直观，所以我们要在这棵多叉树上进行精加工："]]},"created_time":1690361705050,"last_edited_time":1690538932695,"parent_id":"2832ab2a-059a-45e4-8cf1-b0ed05e8e1fa","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"},"role":"reader"},"95c58268-2eaf-4032-a284-39d6b429743c":{"value":{"id":"95c58268-2eaf-4032-a284-39d6b429743c","version":3,"type":"bulleted_list","properties":{"title":[["Span 之间的父子关系 → 拓扑图"]]},"format":{"copied_from_pointer":{"id":"77c2b98d-9bb9-4163-9c3a-763de476a9fd","table":"block","spaceId":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"created_time":1690278488135,"last_edited_time":1690278488139,"parent_id":"2832ab2a-059a-45e4-8cf1-b0ed05e8e1fa","parent_table":"block","alive":true,"copied_from":"77c2b98d-9bb9-4163-9c3a-763de476a9fd","created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"},"role":"reader"},"423cc8cb-56d9-43be-8ea3-0239a2942d2b":{"value":{"id":"423cc8cb-56d9-43be-8ea3-0239a2942d2b","version":3,"type":"bulleted_list","properties":{"title":[["以接口、服务等维度汇聚统计信息 → 表格统计"]]},"format":{"copied_from_pointer":{"id":"748b256c-6d36-4cb6-aec6-713cbbaf19ae","table":"block","spaceId":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"created_time":1690278488135,"last_edited_time":1690278488139,"parent_id":"2832ab2a-059a-45e4-8cf1-b0ed05e8e1fa","parent_table":"block","alive":true,"copied_from":"748b256c-6d36-4cb6-aec6-713cbbaf19ae","created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"},"role":"reader"},"5da0a05a-4acd-4c3f-aba9-949d6145a0c8":{"value":{"id":"5da0a05a-4acd-4c3f-aba9-949d6145a0c8","version":3,"type":"bulleted_list","properties":{"title":[["Span 调用的时序 → 时序图"]]},"format":{"copied_from_pointer":{"id":"d9b11a1a-74e8-44df-b533-bb4ce7f68176","table":"block","spaceId":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"created_time":1690278488135,"last_edited_time":1690278488139,"parent_id":"2832ab2a-059a-45e4-8cf1-b0ed05e8e1fa","parent_table":"block","alive":true,"copied_from":"d9b11a1a-74e8-44df-b533-bb4ce7f68176","created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"},"role":"reader"},"33e9e3d2-232c-476f-9cd6-36cf9a00ebe9":{"value":{"id":"33e9e3d2-232c-476f-9cd6-36cf9a00ebe9","version":6,"type":"bulleted_list","properties":{"title":[["Span 耗时分布 → 火焰图"]]},"format":{"copied_from_pointer":{"id":"96610da5-ce7b-4ce4-aff7-8b4b63cb820a","table":"block","spaceId":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"created_time":1690278488136,"last_edited_time":1690280851343,"parent_id":"2832ab2a-059a-45e4-8cf1-b0ed05e8e1fa","parent_table":"block","alive":true,"copied_from":"96610da5-ce7b-4ce4-aff7-8b4b63cb820a","created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"},"role":"reader"},"063b7129-060c-4e2c-be99-846c845ee96e":{"value":{"id":"063b7129-060c-4e2c-be99-846c845ee96e","version":234,"type":"text","properties":{"title":[["下面就来分享一下相关图表的展示逻辑细节。"]]},"created_time":1690360941826,"last_edited_time":1690360961443,"parent_id":"2832ab2a-059a-45e4-8cf1-b0ed05e8e1fa","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"},"role":"reader"},"38b6dd6a-cbc1-472a-b269-d3baa87d4caf":{"value":{"id":"38b6dd6a-cbc1-472a-b269-d3baa87d4caf","version":37,"type":"sub_header","properties":{"title":[["拓扑图"]]},"created_time":1690275908814,"last_edited_time":1690539134149,"parent_id":"2832ab2a-059a-45e4-8cf1-b0ed05e8e1fa","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"},"role":"reader"},"cf07b1b8-3d4c-447a-b9d5-fabd277ebbf8":{"value":{"id":"cf07b1b8-3d4c-447a-b9d5-fabd277ebbf8","version":11,"type":"image","properties":{"size":[["125.5KB"]],"title":[["Untitled"]],"source":[["https://s3-us-west-2.amazonaws.com/secure.notion-static.com/e834e911-c53c-47ea-8bad-3b1140ca5669/Untitled.png"]]},"format":{"block_width":1800,"display_source":"https://s3-us-west-2.amazonaws.com/secure.notion-static.com/e834e911-c53c-47ea-8bad-3b1140ca5669/Untitled.png","block_full_width":false,"block_page_width":true,"block_aspect_ratio":0.6477777777777778,"block_preserve_scale":true},"created_time":1691654944387,"last_edited_time":1691654948139,"parent_id":"2832ab2a-059a-45e4-8cf1-b0ed05e8e1fa","parent_table":"block","alive":true,"file_ids":["e834e911-c53c-47ea-8bad-3b1140ca5669"],"created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"},"role":"reader"},"b680db86-b7d4-4472-9d1d-c2d79f054452":{"value":{"id":"b680db86-b7d4-4472-9d1d-c2d79f054452","version":601,"type":"text","properties":{"title":[["对于拓扑图而言，它将主要的重点放在了 Span 之间的关系上，你可以很清晰地获取到 Trace 的调用关系、层级等信息，但同时它也刻意忽略了时序信息，下面会有较多场景会提到这一点。"]]},"created_time":1691654957206,"last_edited_time":1691655261679,"parent_id":"2832ab2a-059a-45e4-8cf1-b0ed05e8e1fa","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"},"role":"reader"},"9cad0af9-f407-4037-9a62-7b008b4de1c7":{"value":{"id":"9cad0af9-f407-4037-9a62-7b008b4de1c7","version":4,"type":"sub_header","properties":{"title":[["表格统计"]]},"created_time":1690280856469,"last_edited_time":1691654957206,"parent_id":"2832ab2a-059a-45e4-8cf1-b0ed05e8e1fa","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"},"role":"reader"},"d4677c74-9003-44a0-9ee3-a6469a9ba674":{"value":{"id":"d4677c74-9003-44a0-9ee3-a6469a9ba674","version":11,"type":"image","properties":{"size":[["240.3KB"]],"title":[["Untitled"]],"source":[["https://s3-us-west-2.amazonaws.com/secure.notion-static.com/9c2cf83f-99ef-4208-a363-9fccd73e901d/Untitled.png"]]},"format":{"block_width":3222,"display_source":"https://s3-us-west-2.amazonaws.com/secure.notion-static.com/9c2cf83f-99ef-4208-a363-9fccd73e901d/Untitled.png","block_full_width":false,"block_page_width":true,"block_aspect_ratio":0.36250775915580385,"block_preserve_scale":true},"created_time":1691655345332,"last_edited_time":1691655349456,"parent_id":"2832ab2a-059a-45e4-8cf1-b0ed05e8e1fa","parent_table":"block","alive":true,"file_ids":["9c2cf83f-99ef-4208-a363-9fccd73e901d"],"created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"},"role":"reader"},"ccc5c01b-47ff-499a-ba18-65f348d55037":{"value":{"id":"ccc5c01b-47ff-499a-ba18-65f348d55037","version":374,"type":"text","properties":{"title":[["表格统计的重点是，将 Trace 中的汇聚信息平铺展示出来。这里有两个需要额外解释的概念：接口\u0026服务。"]]},"created_time":1691655351734,"last_edited_time":1691655389160,"parent_id":"2832ab2a-059a-45e4-8cf1-b0ed05e8e1fa","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"},"role":"reader"},"e96fb5f7-46ea-4178-b42c-352445787b26":{"value":{"id":"e96fb5f7-46ea-4178-b42c-352445787b26","version":49,"type":"sub_sub_header","properties":{"title":[["接口和服务"]]},"created_time":1691655392816,"last_edited_time":1691655398231,"parent_id":"2832ab2a-059a-45e4-8cf1-b0ed05e8e1fa","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"},"role":"reader"},"8ec5d40a-4f21-4b69-9fdc-1ab79aac351a":{"value":{"id":"8ec5d40a-4f21-4b69-9fdc-1ab79aac351a","version":715,"type":"text","properties":{"title":[["【接口】的内容实际上就是 "],["span_name",[["c"]]],[" —— 操作名称的别名。而【服务】则是来自于 "],["resource.service_name",[["c"]]],[" ，表明该 Span 所属的服务，以简单的名字字符串作为 Trace 维度的唯一标识。"]]},"created_time":1691655398574,"last_edited_time":1691655732901,"parent_id":"2832ab2a-059a-45e4-8cf1-b0ed05e8e1fa","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"},"role":"reader"},"7655de18-6bcc-4709-a6b4-2a23f23cd958":{"value":{"id":"7655de18-6bcc-4709-a6b4-2a23f23cd958","version":4,"type":"sub_header","properties":{"title":[["时序图"]]},"created_time":1690275913484,"last_edited_time":1691655351734,"parent_id":"2832ab2a-059a-45e4-8cf1-b0ed05e8e1fa","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"},"role":"reader"},"2a7631a5-1e3a-4625-af5d-1748a1c78da5":{"value":{"id":"2a7631a5-1e3a-4625-af5d-1748a1c78da5","version":979,"type":"text","properties":{"title":[["时序图，顾名思义，主要是想突出 Trace 的时序特性。"]]},"created_time":1690424638969,"last_edited_time":1690449560659,"parent_id":"2832ab2a-059a-45e4-8cf1-b0ed05e8e1fa","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"},"role":"reader"},"8a0b69b2-1b80-400d-bf7b-0afa526856ce":{"value":{"id":"8a0b69b2-1b80-400d-bf7b-0afa526856ce","version":57,"type":"image","properties":{"size":[["143.0KB"]],"title":[["Untitled"]],"source":[["https://s3-us-west-2.amazonaws.com/secure.notion-static.com/5a6d95b7-b607-4a5d-aa27-0f6e27444192/Untitled.png"]],"caption":[["时序图示意图"]]},"format":{"block_width":1822,"display_source":"https://s3-us-west-2.amazonaws.com/secure.notion-static.com/5a6d95b7-b607-4a5d-aa27-0f6e27444192/Untitled.png","block_full_width":false,"block_page_width":true,"block_aspect_ratio":0.7826564215148188,"block_preserve_scale":true},"created_time":1690445643395,"last_edited_time":1690445656655,"parent_id":"2832ab2a-059a-45e4-8cf1-b0ed05e8e1fa","parent_table":"block","alive":true,"file_ids":["5a6d95b7-b607-4a5d-aa27-0f6e27444192"],"created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"},"role":"reader"},"eb017e37-8dc3-407c-9ad4-a61c4ae82741":{"value":{"id":"eb017e37-8dc3-407c-9ad4-a61c4ae82741","version":264,"type":"text","properties":{"title":[["这是一种 "],["UML",[["a","https://zh.wikipedia.org/wiki/%E6%97%B6%E5%BA%8F%E5%9B%BE"]]],[" 行为图，我们将它原本的几种元素结合 Trace 场景做了一个概念转换："]]},"created_time":1690449474628,"last_edited_time":1690450652592,"parent_id":"2832ab2a-059a-45e4-8cf1-b0ed05e8e1fa","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"},"role":"reader"},"3756c5bc-ed69-47b0-9344-588340f297e1":{"value":{"id":"3756c5bc-ed69-47b0-9344-588340f297e1","version":460,"type":"bulleted_list","properties":{"title":[["物件（Object）和生命线（Lifeline）用一个 "],["方框+垂直线条 ",[["i"]]],["来共同表示 "],["接口或服务在 Trace 流程中的生命周期。",[["b"]]]]},"format":{"copied_from_pointer":{"id":"bf8121a1-8730-4a2a-bd20-e6b54aa77023","table":"block","spaceId":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"created_time":1690450019809,"last_edited_time":1690450734573,"parent_id":"2832ab2a-059a-45e4-8cf1-b0ed05e8e1fa","parent_table":"block","alive":true,"copied_from":"bf8121a1-8730-4a2a-bd20-e6b54aa77023","created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"},"role":"reader"},"4a2ac240-b096-40d4-9deb-e02d338d732c":{"value":{"id":"4a2ac240-b096-40d4-9deb-e02d338d732c","version":314,"type":"bulleted_list","properties":{"title":[["讯息（Message）用一条 "],["水平带箭头的连线",[["i"]]],[" 表示 "],["接口或服务之间的调用，也就是 Span 的主要体现形式",[["b"]]],["。"]]},"format":{"copied_from_pointer":{"id":"b6c2d72a-fa15-4c97-a8f1-e9319ee90e11","table":"block","spaceId":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"created_time":1690450019809,"last_edited_time":1690450725502,"parent_id":"2832ab2a-059a-45e4-8cf1-b0ed05e8e1fa","parent_table":"block","alive":true,"copied_from":"b6c2d72a-fa15-4c97-a8f1-e9319ee90e11","created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"},"role":"reader"},"8a646b47-a77d-448d-beb6-76a67d1f27c9":{"value":{"id":"8a646b47-a77d-448d-beb6-76a67d1f27c9","version":409,"type":"bulleted_list","properties":{"title":[["活化（Activation）：用一个 "],["垂直方向的矩形",[["i"]]],["  表示 "],["接口或服务的耗时区间，它并不精确，但能表达出不同 Span 的耗时前后时序关系。",[["b"]]]]},"format":{"copied_from_pointer":{"id":"9260a96e-eb15-4d7c-9bdc-019b8e1f603c","table":"block","spaceId":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"created_time":1690450019809,"last_edited_time":1690450954569,"parent_id":"2832ab2a-059a-45e4-8cf1-b0ed05e8e1fa","parent_table":"block","alive":true,"copied_from":"9260a96e-eb15-4d7c-9bdc-019b8e1f603c","created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"},"role":"reader"},"23ec6bed-887a-475d-a721-2ee912203e92":{"value":{"id":"23ec6bed-887a-475d-a721-2ee912203e92","version":41,"type":"text","properties":{"title":[["此外，时序图有一些额外封装和添加的概念，下面我们会一一展开解释。"]]},"created_time":1690449730833,"last_edited_time":1690450969499,"parent_id":"2832ab2a-059a-45e4-8cf1-b0ed05e8e1fa","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"},"role":"reader"},"7c4ed4e9-40dc-4cc4-8c1a-5a8e7091c73c":{"value":{"id":"7c4ed4e9-40dc-4cc4-8c1a-5a8e7091c73c","version":98,"type":"sub_sub_header","properties":{"title":[["服务接口聚合"]]},"created_time":1690277553265,"last_edited_time":1690451348006,"parent_id":"2832ab2a-059a-45e4-8cf1-b0ed05e8e1fa","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"},"role":"reader"},"d54c49d7-7b5b-469b-85c6-e0e48881ddb7":{"value":{"id":"d54c49d7-7b5b-469b-85c6-e0e48881ddb7","version":1646,"type":"text","properties":{"title":[["首先是对服务聚合的概念阐释，和时间线图类似，我们会从 "],["resource.service_name",[["c"]]],[" 字段中抽取所有 Span 共有的服务概念。额外地，我们从 "],["attributes",[["c"]]],[" 字段中的信息尝试判断当前 Span 的形态，将不同的场景做一个简单区分。如图所示， "],["service_foo",[["c"]]],[" 服务中会区分出 "],["api/*",[["c"]]],[" 和 "],["mysql",[["c"]]],[" 两种接口，它可以让你更好地了解不同组件之间的调用关系。"]]},"created_time":1690450973323,"last_edited_time":1690451405585,"parent_id":"2832ab2a-059a-45e4-8cf1-b0ed05e8e1fa","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"},"role":"reader"},"cea8a144-1cdf-4106-9a8d-00c1887ef4bc":{"value":{"id":"cea8a144-1cdf-4106-9a8d-00c1887ef4bc","version":11,"type":"image","properties":{"size":[["31.9KB"]],"title":[["Untitled"]],"source":[["https://s3-us-west-2.amazonaws.com/secure.notion-static.com/7f20c898-fe4d-400c-b525-3c509c1bf946/Untitled.png"]]},"format":{"block_width":1534,"display_source":"https://s3-us-west-2.amazonaws.com/secure.notion-static.com/7f20c898-fe4d-400c-b525-3c509c1bf946/Untitled.png","block_full_width":false,"block_page_width":true,"block_aspect_ratio":0.17992177314211213,"block_preserve_scale":true},"created_time":1690451427622,"last_edited_time":1690451431163,"parent_id":"2832ab2a-059a-45e4-8cf1-b0ed05e8e1fa","parent_table":"block","alive":true,"file_ids":["7f20c898-fe4d-400c-b525-3c509c1bf946"],"created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"},"role":"reader"},"a881101b-3a59-4faa-b1ab-f350b5d24e14":{"value":{"id":"a881101b-3a59-4faa-b1ab-f350b5d24e14","version":8,"type":"sub_sub_header","properties":{"title":[["相对时序"]]},"created_time":1690447273596,"last_edited_time":1690447273893,"parent_id":"2832ab2a-059a-45e4-8cf1-b0ed05e8e1fa","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"},"role":"reader"},"67a31fab-038d-4be1-b183-5022246762e1":{"value":{"id":"67a31fab-038d-4be1-b183-5022246762e1","version":88,"type":"text","properties":{"title":[["与时间线图不同的是，时序图为了表达服务与服务之间的调用关系，默认采用了“相对时序”，而非严格按照 "],["start_time",[["c"]]],[" 排序的“绝对时序”。"]]},"format":{"copied_from_pointer":{"id":"67792888-785f-4b74-8e8a-b16a736d2464","table":"block","spaceId":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"created_time":1690447273889,"last_edited_time":1690452965123,"parent_id":"2832ab2a-059a-45e4-8cf1-b0ed05e8e1fa","parent_table":"block","alive":true,"copied_from":"67792888-785f-4b74-8e8a-b16a736d2464","created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"},"role":"reader"},"a07ad390-1296-4d6d-b725-45afe8cfe077":{"value":{"id":"a07ad390-1296-4d6d-b725-45afe8cfe077","version":28,"type":"bulleted_list","properties":{"title":[["绝对时序：所有线条都按照 span 的绝对发生时间绘制，淡化父子关系"]]},"created_time":1690452970530,"last_edited_time":1690452978357,"parent_id":"2832ab2a-059a-45e4-8cf1-b0ed05e8e1fa","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"},"role":"reader"},"7791f2df-77c6-46c1-9e35-e20ecf918808":{"value":{"id":"7791f2df-77c6-46c1-9e35-e20ecf918808","version":79,"type":"bulleted_list","properties":{"title":[["相对时序：父子的关系优先于绝对时间，同一个父节点下的 span 有绝对的先后顺序，不同父节点下的 span 不保证其绘制的先后顺序"]]},"created_time":1690452978354,"last_edited_time":1690453075472,"parent_id":"2832ab2a-059a-45e4-8cf1-b0ed05e8e1fa","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"},"role":"reader"},"09a009c1-e3ea-4595-949f-bca3d2570a6c":{"value":{"id":"09a009c1-e3ea-4595-949f-bca3d2570a6c","version":621,"type":"text","properties":{"title":[["我们举一个更容易理解的例子：假设某一个 Trace 有5个 Span，s1 → s5。s2 是 s3 的父节点，s4 是 s5 的父节点。先按照“绝对时序”画出时序图："]]},"created_time":1690452986430,"last_edited_time":1690453813813,"parent_id":"2832ab2a-059a-45e4-8cf1-b0ed05e8e1fa","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"},"role":"reader"},"cc8a1be2-10c9-40fc-9610-203141f9782e":{"value":{"id":"cc8a1be2-10c9-40fc-9610-203141f9782e","version":13,"type":"image","properties":{"size":[["136.2KB"]],"title":[["Untitled"]],"source":[["https://s3-us-west-2.amazonaws.com/secure.notion-static.com/a00d5828-549c-417d-ac5e-7ec6152606e1/Untitled.png"]]},"format":{"block_width":432,"display_source":"https://s3-us-west-2.amazonaws.com/secure.notion-static.com/a00d5828-549c-417d-ac5e-7ec6152606e1/Untitled.png","block_full_width":false,"block_page_width":false,"block_aspect_ratio":0.7796086508753862,"block_preserve_scale":true},"created_time":1690453724338,"last_edited_time":1690453803986,"parent_id":"2832ab2a-059a-45e4-8cf1-b0ed05e8e1fa","parent_table":"block","alive":true,"file_ids":["a00d5828-549c-417d-ac5e-7ec6152606e1"],"created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"},"role":"reader"},"36f59f00-45b2-4ac1-be4f-7a19bd602ecf":{"value":{"id":"36f59f00-45b2-4ac1-be4f-7a19bd602ecf","version":1172,"type":"text","properties":{"title":[["虽然它严格遵循了“时序”，但是原本的父子关系被淡化了，仅从图中基本没法判断出 "],["s2 \u0026 s3",[["c"]]],[" \\ "],["s4 \u0026 s5",[["c"]]],[" 之间有什么联系（图中的 t 是为了展示额外添加的，真实数据中不存在）。"]]},"created_time":1690452955492,"last_edited_time":1690454660153,"parent_id":"2832ab2a-059a-45e4-8cf1-b0ed05e8e1fa","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"},"role":"reader"},"cc1d02ea-eb3f-4a24-9150-7fc6ee6936b2":{"value":{"id":"cc1d02ea-eb3f-4a24-9150-7fc6ee6936b2","version":5,"type":"text","properties":{"title":[["我们再按照“相对时序”来绘制："]]},"created_time":1690454660151,"last_edited_time":1690454660153,"parent_id":"2832ab2a-059a-45e4-8cf1-b0ed05e8e1fa","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"},"role":"reader"},"82f6009c-67f8-4cb8-aadc-9e6e433baada":{"value":{"id":"82f6009c-67f8-4cb8-aadc-9e6e433baada","version":13,"type":"image","properties":{"size":[["135.4KB"]],"title":[["Untitled"]],"source":[["https://s3-us-west-2.amazonaws.com/secure.notion-static.com/f490f8b3-5d4f-43ae-8d96-336e5d1ab1eb/Untitled.png"]]},"format":{"block_width":432,"display_source":"https://s3-us-west-2.amazonaws.com/secure.notion-static.com/f490f8b3-5d4f-43ae-8d96-336e5d1ab1eb/Untitled.png","block_full_width":false,"block_page_width":false,"block_aspect_ratio":0.7813471502590673,"block_preserve_scale":true},"created_time":1690453946464,"last_edited_time":1690453981504,"parent_id":"2832ab2a-059a-45e4-8cf1-b0ed05e8e1fa","parent_table":"block","alive":true,"file_ids":["f490f8b3-5d4f-43ae-8d96-336e5d1ab1eb"],"created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"},"role":"reader"},"80b08259-d24c-4017-bed7-0b1f50307541":{"value":{"id":"80b08259-d24c-4017-bed7-0b1f50307541","version":878,"type":"text","properties":{"title":[["可以看到，虽然我们稍微“牺牲”了一些时序上的绝对性，但是调用之间的关系更清晰了，用户更容易在庞大的图表中找到调用关系。"]]},"created_time":1690454162619,"last_edited_time":1690454692844,"parent_id":"2832ab2a-059a-45e4-8cf1-b0ed05e8e1fa","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"},"role":"reader"},"0e101b6d-6e70-45e5-87e4-32d40487f73a":{"value":{"id":"0e101b6d-6e70-45e5-87e4-32d40487f73a","version":4,"type":"sub_sub_header","properties":{"title":[["虚拟的开始节点"]]},"created_time":1690277283954,"last_edited_time":1690454162619,"parent_id":"2832ab2a-059a-45e4-8cf1-b0ed05e8e1fa","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"},"role":"reader"},"8075b01c-84dc-4a95-80e1-b27da6b43dcf":{"value":{"id":"8075b01c-84dc-4a95-80e1-b27da6b43dcf","version":447,"type":"text","properties":{"title":[["在图中有两个内容是“虚拟”出来的：开始节点和返回虚线。"]]},"created_time":1690443650325,"last_edited_time":1690444884297,"parent_id":"2832ab2a-059a-45e4-8cf1-b0ed05e8e1fa","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"},"role":"reader"},"b140acd5-5ee2-444a-a61f-5b66d70dc09e":{"value":{"id":"b140acd5-5ee2-444a-a61f-5b66d70dc09e","version":323,"type":"text","properties":{"title":[["当时序上的第一个 Span（通常是根 Span）的类型是被调或异步被调时，",[["b"]]],["为了表示该特性我们会在图的最左侧补充上一个虚拟的 "],["Start",[["c"]]],[" ，它没有其他实际意义，只是表达整个追踪的“开始”节点。"]]},"created_time":1690444893360,"last_edited_time":1690450093762,"parent_id":"2832ab2a-059a-45e4-8cf1-b0ed05e8e1fa","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"},"role":"reader"},"4df2db4c-d471-46cd-9131-4b52e48c08bf":{"value":{"id":"4df2db4c-d471-46cd-9131-4b52e48c08bf","version":30,"type":"image","properties":{"size":[["25.9KB"]],"title":[["Untitled"]],"source":[["https://s3-us-west-2.amazonaws.com/secure.notion-static.com/e03a0881-0eb5-411d-8aea-2582c70605c3/Untitled.png"]]},"format":{"block_width":108,"block_height":1314,"display_source":"https://s3-us-west-2.amazonaws.com/secure.notion-static.com/e03a0881-0eb5-411d-8aea-2582c70605c3/Untitled.png","block_full_width":false,"block_page_width":false,"block_aspect_ratio":3.285,"block_preserve_scale":true},"created_time":1690445406246,"last_edited_time":1690452515440,"parent_id":"2832ab2a-059a-45e4-8cf1-b0ed05e8e1fa","parent_table":"block","alive":true,"file_ids":["e03a0881-0eb5-411d-8aea-2582c70605c3"],"created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"},"role":"reader"},"8f584616-dbc8-4903-9c9b-bc295bf99f1a":{"value":{"id":"8f584616-dbc8-4903-9c9b-bc295bf99f1a","version":100,"type":"sub_sub_header","properties":{"title":[["调用返回"]]},"created_time":1690444895452,"last_edited_time":1690445734858,"parent_id":"2832ab2a-059a-45e4-8cf1-b0ed05e8e1fa","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"},"role":"reader"},"00e03c6b-4ac7-4420-9621-f9a91e1f7a5a":{"value":{"id":"00e03c6b-4ac7-4420-9621-f9a91e1f7a5a","version":1319,"type":"text","properties":{"title":[["第二个添加的虚拟内容就是"],["返回虚线。",[["b"]]]]},"created_time":1690445736214,"last_edited_time":1690446971996,"parent_id":"2832ab2a-059a-45e4-8cf1-b0ed05e8e1fa","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"},"role":"reader"},"de9bba9a-1658-4fef-bceb-d6a803e26e33":{"value":{"id":"de9bba9a-1658-4fef-bceb-d6a803e26e33","version":631,"type":"text","properties":{"title":[["为了更加准确地表达 Span 在时序上的"],["流入流出状态",[["b"]]],["，我们会根据 Span 中的 "],["end_time",[["c"]]],[" 生成的一个虚拟调用返回，同时开启一个时序图的 Activation ，用来做 Span 耗时的示意。需要注意的是："],["它并不是在所有的请求中都会开启，当且仅当 Span 的调用类型是主调。",[["b"]]]]},"created_time":1690446971994,"last_edited_time":1690450825239,"parent_id":"2832ab2a-059a-45e4-8cf1-b0ed05e8e1fa","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"},"role":"reader"},"82618973-06f5-4824-815e-51a76f7e5894":{"value":{"id":"82618973-06f5-4824-815e-51a76f7e5894","version":6,"type":"text","created_time":1690447188161,"last_edited_time":1690447198197,"parent_id":"2832ab2a-059a-45e4-8cf1-b0ed05e8e1fa","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"},"role":"reader"},"c991985d-e58f-42d0-82ba-40d64f4fbd68":{"value":{"id":"c991985d-e58f-42d0-82ba-40d64f4fbd68","version":343,"type":"image","properties":{"size":[["16.4KB"]],"title":[["Untitled"]],"source":[["https://s3-us-west-2.amazonaws.com/secure.notion-static.com/82554cf9-ae62-4d00-9568-34f61646ee5d/Untitled.png"]],"caption":[["当 Span 是异步类型时，我们会使用特殊箭头 → ，且不会增加虚拟返回"]]},"format":{"block_width":1030,"display_source":"https://s3-us-west-2.amazonaws.com/secure.notion-static.com/82554cf9-ae62-4d00-9568-34f61646ee5d/Untitled.png","block_full_width":false,"block_page_width":true,"block_aspect_ratio":0.22330097087378642,"block_preserve_scale":true},"created_time":1690447180171,"last_edited_time":1690447383312,"parent_id":"2832ab2a-059a-45e4-8cf1-b0ed05e8e1fa","parent_table":"block","alive":true,"file_ids":["82554cf9-ae62-4d00-9568-34f61646ee5d"],"created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"},"role":"reader"},"7e392456-e048-485b-9e09-fdde6d021f91":{"value":{"id":"7e392456-e048-485b-9e09-fdde6d021f91","version":4,"type":"sub_sub_header","properties":{"title":[["主调被调合并"]]},"created_time":1690277309076,"last_edited_time":1690447047509,"parent_id":"2832ab2a-059a-45e4-8cf1-b0ed05e8e1fa","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"},"role":"reader"},"1e2291c1-3f7b-438e-ab38-40f791b91396":{"value":{"id":"1e2291c1-3f7b-438e-ab38-40f791b91396","version":539,"type":"text","properties":{"title":[["当"],["父 Span 是主调，子 Span 是被调",[["b"]]],["时，我们会把两个 Span 的信息合并到同一个 Message 中。"]]},"created_time":1690447386904,"last_edited_time":1690450030837,"parent_id":"2832ab2a-059a-45e4-8cf1-b0ed05e8e1fa","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"},"role":"reader"},"f84e73ed-0d37-4e7d-94e3-2a6b02ab3c3b":{"value":{"id":"f84e73ed-0d37-4e7d-94e3-2a6b02ab3c3b","version":37,"type":"image","properties":{"size":[["13.6KB"]],"title":[["Untitled"]],"source":[["https://s3-us-west-2.amazonaws.com/secure.notion-static.com/caec3efc-50be-4267-8950-c832ffdce96d/Untitled.png"]],"caption":[["合并后"]]},"format":{"block_width":1054,"display_source":"https://s3-us-west-2.amazonaws.com/secure.notion-static.com/caec3efc-50be-4267-8950-c832ffdce96d/Untitled.png","block_full_width":false,"block_page_width":true,"block_aspect_ratio":0.11954459203036052,"block_preserve_scale":true},"created_time":1690447570657,"last_edited_time":1690449256847,"parent_id":"2832ab2a-059a-45e4-8cf1-b0ed05e8e1fa","parent_table":"block","alive":true,"file_ids":["caec3efc-50be-4267-8950-c832ffdce96d"],"created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"},"role":"reader"},"06649dbe-b497-402f-9cab-c6e558480592":{"value":{"id":"06649dbe-b497-402f-9cab-c6e558480592","version":35,"type":"sub_header","properties":{"title":[["火焰图"]]},"created_time":1690275916396,"last_edited_time":1690277407412,"parent_id":"2832ab2a-059a-45e4-8cf1-b0ed05e8e1fa","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"},"role":"reader"},"10cfb10d-1a69-43b4-8456-11dc693ff1af":{"value":{"id":"10cfb10d-1a69-43b4-8456-11dc693ff1af","version":1346,"type":"text","properties":{"title":[["火焰图最早是用在 CPU 性能分析领域，最大的特点是形似火焰，CPU 耗时越大在图中展示的元素越宽，开发者可以通过寻找“平顶山”来确定性能瓶颈。"]]},"created_time":1690515640991,"last_edited_time":1691575270087,"parent_id":"2832ab2a-059a-45e4-8cf1-b0ed05e8e1fa","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"},"role":"reader"},"57fd0807-a627-4ee8-ac88-f5d30e72b93f":{"value":{"id":"57fd0807-a627-4ee8-ac88-f5d30e72b93f","version":156,"type":"image","properties":{"size":[["469.3KB"]],"title":[["Untitled"]],"source":[["https://s3-us-west-2.amazonaws.com/secure.notion-static.com/10706838-b00e-432d-8385-0c19e6651ab8/Untitled.png"]],"caption":[["原始火焰图，X轴按照字母序排列"]]},"format":{"block_width":720,"display_source":"https://s3-us-west-2.amazonaws.com/secure.notion-static.com/10706838-b00e-432d-8385-0c19e6651ab8/Untitled.png","block_full_width":false,"block_page_width":true,"block_aspect_ratio":0.5995975855130785,"block_preserve_scale":true},"created_time":1691573930648,"last_edited_time":1691575324162,"parent_id":"2832ab2a-059a-45e4-8cf1-b0ed05e8e1fa","parent_table":"block","alive":true,"file_ids":["10706838-b00e-432d-8385-0c19e6651ab8"],"created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"},"role":"reader"},"5c24f069-332a-42b8-aa0a-119bc56d4b84":{"value":{"id":"5c24f069-332a-42b8-aa0a-119bc56d4b84","version":219,"type":"sub_sub_header","properties":{"title":[["原始的局限"]]},"created_time":1690280888905,"last_edited_time":1691651593215,"parent_id":"2832ab2a-059a-45e4-8cf1-b0ed05e8e1fa","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"},"role":"reader"},"8edf79ae-7ff1-4f25-88ba-b9877f9f953f":{"value":{"id":"8edf79ae-7ff1-4f25-88ba-b9877f9f953f","version":495,"type":"text","properties":{"title":[["火焰图最大的局限在于无法精准地展示 Trace 中的 Span “并行”的概念，"],["即使已经有无数“前者”在尝试了",[["a","https://github.com/kubeshop/tracetest/issues/1417#issuecomment-1327874188"]]],["。"]]},"created_time":1691651709850,"last_edited_time":1691652054650,"parent_id":"2832ab2a-059a-45e4-8cf1-b0ed05e8e1fa","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"},"role":"reader"},"8a261947-4509-440f-a43e-832129934122":{"value":{"id":"8a261947-4509-440f-a43e-832129934122","version":120,"type":"image","properties":{"size":[["819.1KB"]],"title":[["Untitled"]],"source":[["https://s3-us-west-2.amazonaws.com/secure.notion-static.com/3b91e404-14d1-4692-9e0b-e70451b2b53b/Untitled.png"]],"caption":[["观测云的做法，看起来貌似可行"]]},"format":{"block_width":1360,"display_source":"https://s3-us-west-2.amazonaws.com/secure.notion-static.com/3b91e404-14d1-4692-9e0b-e70451b2b53b/Untitled.png","block_full_width":false,"block_page_width":true,"block_aspect_ratio":0.36470588235294116,"block_preserve_scale":true},"created_time":1691651898768,"last_edited_time":1691651955699,"parent_id":"2832ab2a-059a-45e4-8cf1-b0ed05e8e1fa","parent_table":"block","alive":true,"file_ids":["3b91e404-14d1-4692-9e0b-e70451b2b53b"],"created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"},"role":"reader"},"401867f1-2f7a-4574-a900-f68040526787":{"value":{"id":"401867f1-2f7a-4574-a900-f68040526787","version":193,"type":"image","properties":{"size":[["163.0KB"]],"title":[["Untitled"]],"source":[["https://s3-us-west-2.amazonaws.com/secure.notion-static.com/ea7ffad4-43e0-4c1c-8887-becf34d9206b/Untitled.png"]],"caption":[["当复杂场景发生时，必须要舍弃一些信息的精准性"]]},"format":{"block_width":576,"display_source":"https://s3-us-west-2.amazonaws.com/secure.notion-static.com/ea7ffad4-43e0-4c1c-8887-becf34d9206b/Untitled.png","block_full_width":false,"block_page_width":false,"block_aspect_ratio":0.7258620689655172,"block_preserve_scale":true},"created_time":1691651870243,"last_edited_time":1691652003610,"parent_id":"2832ab2a-059a-45e4-8cf1-b0ed05e8e1fa","parent_table":"block","alive":true,"file_ids":["ea7ffad4-43e0-4c1c-8887-becf34d9206b"],"created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"},"role":"reader"},"13d844f6-0b81-4a5a-b4d6-f142accd3fc2":{"value":{"id":"13d844f6-0b81-4a5a-b4d6-f142accd3fc2","version":6,"type":"text","properties":{"title":[["原始火焰图更多用在 Profiling 场景下，此时对于程序函数调用栈关系的可视度有着更高的要求——即对于 Y 轴信息的准确程度。但是对于 Trace 而言，Span 的执行时间长度、顺序在展示上的优先级更高。所以，在 Trace 领域我们采用了一种火焰图的变体—— "],["FlameChart",[["c"]]],["。它最早来自 Google Chrome 的 Web Inspector："]]},"created_time":1691575274448,"last_edited_time":1691652066796,"parent_id":"2832ab2a-059a-45e4-8cf1-b0ed05e8e1fa","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"},"role":"reader"},"e2c2399f-7c48-4379-a8ef-17112346f717":{"value":{"id":"e2c2399f-7c48-4379-a8ef-17112346f717","version":11,"type":"image","properties":{"size":[["24.9KB"]],"title":[["Untitled"]],"source":[["https://s3-us-west-2.amazonaws.com/secure.notion-static.com/9cc16888-a208-4ca6-b6e6-94f6ebe10a23/Untitled.png"]]},"format":{"block_width":1232,"display_source":"https://s3-us-west-2.amazonaws.com/secure.notion-static.com/9cc16888-a208-4ca6-b6e6-94f6ebe10a23/Untitled.png","block_full_width":false,"block_page_width":true,"block_aspect_ratio":0.33116883116883117,"block_preserve_scale":true},"created_time":1691651656086,"last_edited_time":1691651659243,"parent_id":"2832ab2a-059a-45e4-8cf1-b0ed05e8e1fa","parent_table":"block","alive":true,"file_ids":["9cc16888-a208-4ca6-b6e6-94f6ebe10a23"],"created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"},"role":"reader"},"6b13508f-9d99-49c8-b859-4fadd69a390e":{"value":{"id":"6b13508f-9d99-49c8-b859-4fadd69a390e","version":1043,"type":"text","properties":{"title":[["最大的区别是它的 X 轴变成了时间轴，它会准确的表达 Span 的开始和结束时间，而 Y 轴的栈调用信息从绝对值变成相对值。但它一开始的场景更多是在 "],["single-threaded",[["c"]]],[" 的 JavaScript 分析，也不能妥善地处理好“多线程”的状况。"]]},"created_time":1691651629408,"last_edited_time":1691652622558,"parent_id":"2832ab2a-059a-45e4-8cf1-b0ed05e8e1fa","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"},"role":"reader"},"75c08450-0b10-42ed-9112-2227648ff65b":{"value":{"id":"75c08450-0b10-42ed-9112-2227648ff65b","version":200,"type":"text","properties":{"title":[["经过一番搜索，受到一个"],[" Python Profiling 可视化工具",[["a","https://github.com/gaogaotiantian/viztracer"]]],["的启发："]]},"created_time":1691652625465,"last_edited_time":1691652654412,"parent_id":"2832ab2a-059a-45e4-8cf1-b0ed05e8e1fa","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"},"role":"reader"},"1fa2877c-dfd9-48d3-b249-778e9fe611d5":{"value":{"id":"1fa2877c-dfd9-48d3-b249-778e9fe611d5","version":11,"type":"image","properties":{"size":[["237.7KB"]],"title":[["Untitled"]],"source":[["https://s3-us-west-2.amazonaws.com/secure.notion-static.com/167f1986-dbbd-4b21-93e1-241e29afea1c/Untitled.png"]]},"format":{"block_width":2535,"display_source":"https://s3-us-west-2.amazonaws.com/secure.notion-static.com/167f1986-dbbd-4b21-93e1-241e29afea1c/Untitled.png","block_full_width":false,"block_page_width":true,"block_aspect_ratio":0.38777120315581853,"block_preserve_scale":true},"created_time":1691652658174,"last_edited_time":1691652661951,"parent_id":"2832ab2a-059a-45e4-8cf1-b0ed05e8e1fa","parent_table":"block","alive":true,"file_ids":["167f1986-dbbd-4b21-93e1-241e29afea1c"],"created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"},"role":"reader"},"4abdb60f-1db6-44e9-9184-7dc8274a908b":{"value":{"id":"4abdb60f-1db6-44e9-9184-7dc8274a908b","version":193,"type":"text","properties":{"title":[["类似地，我们在变体 "],["FlameChart",[["c"]]],[" 上做了进一步的变形，增加了 "],["thread line",[["c"]]],[" ——一个用水平虚线单独格出来的行——额外展示“并行”信息。"]]},"created_time":1691652622556,"last_edited_time":1691652749512,"parent_id":"2832ab2a-059a-45e4-8cf1-b0ed05e8e1fa","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"},"role":"reader"},"302c8773-dcec-4a3b-bc24-09206dea5338":{"value":{"id":"302c8773-dcec-4a3b-bc24-09206dea5338","version":11,"type":"image","properties":{"size":[["175.5KB"]],"title":[["Untitled"]],"source":[["https://s3-us-west-2.amazonaws.com/secure.notion-static.com/78784afb-ac4d-401b-a2a2-efaedac9ac4d/Untitled.png"]]},"format":{"block_width":3196,"display_source":"https://s3-us-west-2.amazonaws.com/secure.notion-static.com/78784afb-ac4d-401b-a2a2-efaedac9ac4d/Untitled.png","block_full_width":false,"block_page_width":true,"block_aspect_ratio":0.26971214017521905,"block_preserve_scale":true},"created_time":1691639551627,"last_edited_time":1691639555961,"parent_id":"2832ab2a-059a-45e4-8cf1-b0ed05e8e1fa","parent_table":"block","alive":true,"file_ids":["78784afb-ac4d-401b-a2a2-efaedac9ac4d"],"created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"},"role":"reader"},"4f7284da-6470-4c30-8b5a-f5c1c94caa4f":{"value":{"id":"4f7284da-6470-4c30-8b5a-f5c1c94caa4f","version":1029,"type":"text","properties":{"title":[["在图中我们可以看到相较于最原始的火焰图有两个明显的变化："]]},"created_time":1690275920633,"last_edited_time":1691652563664,"parent_id":"2832ab2a-059a-45e4-8cf1-b0ed05e8e1fa","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"},"role":"reader"},"10bbbc13-83ac-411d-bdb7-5a41b8c735c3":{"value":{"id":"10bbbc13-83ac-411d-bdb7-5a41b8c735c3","version":501,"type":"bulleted_list","properties":{"title":[["X 轴增加了时间纬度，按照 Span 的开始时间\u0026结束时间，保证长短比例，严格分布在 X 轴上"]]},"created_time":1691639880286,"last_edited_time":1691639984611,"parent_id":"2832ab2a-059a-45e4-8cf1-b0ed05e8e1fa","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"},"role":"reader"},"b6551fcf-1f5a-446e-964c-9826b4c0b0bf":{"value":{"id":"b6551fcf-1f5a-446e-964c-9826b4c0b0bf","version":311,"type":"bulleted_list","properties":{"title":[["Y 轴在相对情况下保持调用的父子关系，但不绝对表示栈的调用深度。"]]},"created_time":1691639985483,"last_edited_time":1691640062647,"parent_id":"2832ab2a-059a-45e4-8cf1-b0ed05e8e1fa","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"},"role":"reader"},"851160b5-06ac-40a4-bd52-ccd9d8de8e71":{"value":{"id":"851160b5-06ac-40a4-bd52-ccd9d8de8e71","version":841,"type":"text","properties":{"title":[["X 轴相对容易理解，Y轴的变化稍微展开阐述。这里有一个关键的概念——“并行”，当火焰图中有“并行”元素存在时，会单独在原来的火焰图下方另起一“虚线行”展示这个“并行”信息。"]]},"created_time":1691640063926,"last_edited_time":1691648987419,"parent_id":"2832ab2a-059a-45e4-8cf1-b0ed05e8e1fa","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"},"role":"reader"},"fa099e39-d02f-4b34-872e-bcf6e6b7d7b1":{"value":{"id":"fa099e39-d02f-4b34-872e-bcf6e6b7d7b1","version":7,"type":"text","properties":{"title":[["没有并行，和普通 flamechart 无异："]]},"created_time":1691648902922,"last_edited_time":1691648912887,"parent_id":"2832ab2a-059a-45e4-8cf1-b0ed05e8e1fa","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"},"role":"reader"},"b573f6d8-0345-482e-95a1-9fbbddc60930":{"value":{"id":"b573f6d8-0345-482e-95a1-9fbbddc60930","version":136,"type":"image","properties":{"size":[["43.4KB"]],"title":[["Untitled"]],"source":[["https://s3-us-west-2.amazonaws.com/secure.notion-static.com/b487cc45-3e57-4ac6-8c80-a319e9288b53/Untitled.png"]]},"format":{"block_width":720,"display_source":"https://s3-us-west-2.amazonaws.com/secure.notion-static.com/b487cc45-3e57-4ac6-8c80-a319e9288b53/Untitled.png","block_full_width":false,"block_page_width":true,"block_aspect_ratio":0.09881422924901186,"block_preserve_scale":true},"created_time":1691640673295,"last_edited_time":1691648900483,"parent_id":"2832ab2a-059a-45e4-8cf1-b0ed05e8e1fa","parent_table":"block","alive":true,"file_ids":["b487cc45-3e57-4ac6-8c80-a319e9288b53"],"created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"},"role":"reader"},"14ec2a9f-2a61-43f0-a146-0b365018876b":{"value":{"id":"14ec2a9f-2a61-43f0-a146-0b365018876b","version":850,"type":"text","properties":{"title":[["当存在并行内容时，将会有一条"],["“连接线”",[["b"]]],["将所有 Span 的头部都连接到一起，表示他们的“并行”性，此时 Y 轴仅在同一 "],["thread line",[["c"]]],["中保持相对的调用深度，不同"],["thread line",[["c"]]],["之间的调用深度需要通过"],["“连接线”",[["b"]]],["来辅助判断。"]]},"created_time":1691648908338,"last_edited_time":1691652736872,"parent_id":"2832ab2a-059a-45e4-8cf1-b0ed05e8e1fa","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"},"role":"reader"},"db23380e-7284-4779-abd4-89561a757af7":{"value":{"id":"db23380e-7284-4779-abd4-89561a757af7","version":167,"type":"image","properties":{"size":[["61.3KB"]],"title":[["Untitled"]],"source":[["https://s3-us-west-2.amazonaws.com/secure.notion-static.com/3e4ab1ab-91cd-48a6-b15f-e1e80dd1f5ce/Untitled.png"]]},"format":{"block_width":1360,"display_source":"https://s3-us-west-2.amazonaws.com/secure.notion-static.com/3e4ab1ab-91cd-48a6-b15f-e1e80dd1f5ce/Untitled.png","block_full_width":false,"block_page_width":true,"block_aspect_ratio":0.3191176470588235,"block_preserve_scale":true},"created_time":1691648871513,"last_edited_time":1691648895915,"parent_id":"2832ab2a-059a-45e4-8cf1-b0ed05e8e1fa","parent_table":"block","alive":true,"file_ids":["3e4ab1ab-91cd-48a6-b15f-e1e80dd1f5ce"],"created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"},"role":"reader"},"93231b98-cafe-48a6-acc1-82dfd939858b":{"value":{"id":"93231b98-cafe-48a6-acc1-82dfd939858b","version":63,"type":"header","properties":{"title":[["细节优化"]]},"created_time":1690275920633,"last_edited_time":1690455118178,"parent_id":"2832ab2a-059a-45e4-8cf1-b0ed05e8e1fa","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"},"role":"reader"},"4f488227-7a07-4ec2-8840-876f889bcf4b":{"value":{"id":"4f488227-7a07-4ec2-8840-876f889bcf4b","version":28,"type":"sub_header","properties":{"title":[["折叠"]]},"created_time":1690274560861,"last_edited_time":1690275815735,"parent_id":"2832ab2a-059a-45e4-8cf1-b0ed05e8e1fa","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"},"role":"reader"},"bfdde009-0b0a-462e-b21a-51c199bf36aa":{"value":{"id":"bfdde009-0b0a-462e-b21a-51c199bf36aa","version":1545,"type":"text","properties":{"title":[["由于是多叉树，节点宽度过大往往是控制展示的痛点。在很多场景下，同一次请求中存在大量的"],["重复调用",[["b"]]],["，它们代表的意义近似、耗时量级相同，却占据了画幅中的大量面积，所以我们针对这个场景进行了展示优化："],["将相似的兄弟节点进行分组折叠",[["b"]]],["。判断节点是否相似取决于以下几个因素："]]},"created_time":1690275817552,"last_edited_time":1690281000824,"parent_id":"2832ab2a-059a-45e4-8cf1-b0ed05e8e1fa","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"},"role":"reader"},"4c1023f2-adf3-4bbd-9281-e84936ccf054":{"value":{"id":"4c1023f2-adf3-4bbd-9281-e84936ccf054","version":84,"type":"bulleted_list","properties":{"title":[["Span Name 是否相同？"]]},"created_time":1690280495342,"last_edited_time":1690280543318,"parent_id":"2832ab2a-059a-45e4-8cf1-b0ed05e8e1fa","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"},"role":"reader"},"5ced9b34-4be7-49be-9a51-d4d61bab2ccd":{"value":{"id":"5ced9b34-4be7-49be-9a51-d4d61bab2ccd","version":72,"type":"bulleted_list","properties":{"title":[["Service Name 是否相同？"]]},"created_time":1690280504618,"last_edited_time":1690280544556,"parent_id":"2832ab2a-059a-45e4-8cf1-b0ed05e8e1fa","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"},"role":"reader"},"7bb5d835-65b4-42c7-aee1-57ace3c7093b":{"value":{"id":"7bb5d835-65b4-42c7-aee1-57ace3c7093b","version":131,"type":"bulleted_list","properties":{"title":[["是否在时序上相邻？"]]},"created_time":1690280512755,"last_edited_time":1690280684912,"parent_id":"2832ab2a-059a-45e4-8cf1-b0ed05e8e1fa","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"},"role":"reader"},"7ebef3f2-4903-4862-880e-6c1dcd047e00":{"value":{"id":"7ebef3f2-4903-4862-880e-6c1dcd047e00","version":52,"type":"bulleted_list","properties":{"title":[["是否存在错误？"]]},"created_time":1690538983295,"last_edited_time":1691575480921,"parent_id":"2832ab2a-059a-45e4-8cf1-b0ed05e8e1fa","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"},"role":"reader"},"dc6f7d31-fedb-4256-90a6-6bf613e5a630":{"value":{"id":"dc6f7d31-fedb-4256-90a6-6bf613e5a630","version":335,"type":"text","properties":{"title":[["不同的展示图表有不同的特性，选取的判断策略也有所不同："]]},"created_time":1690280556397,"last_edited_time":1690281030290,"parent_id":"2832ab2a-059a-45e4-8cf1-b0ed05e8e1fa","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"},"role":"reader"},"4b897702-23b2-4db3-a006-96e875ec2333":{"value":{"id":"4b897702-23b2-4db3-a006-96e875ec2333","version":385,"type":"bulleted_list","properties":{"title":[["瀑布图、时序图重点展示了时序，所以必须相邻才能被折叠到一起。"]]},"content":["477b50b8-b362-41b2-8d51-5404e8514c2a"],"created_time":1690280625237,"last_edited_time":1691653489663,"parent_id":"2832ab2a-059a-45e4-8cf1-b0ed05e8e1fa","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"},"role":"reader"},"477b50b8-b362-41b2-8d51-5404e8514c2a":{"value":{"id":"477b50b8-b362-41b2-8d51-5404e8514c2a","version":17,"type":"image","properties":{"size":[["117.7KB"]],"title":[["Untitled"]],"source":[["https://s3-us-west-2.amazonaws.com/secure.notion-static.com/b78d8290-821b-40e4-9cf5-6d157fe553cd/Untitled.png"]]},"format":{"block_width":1590,"display_source":"https://s3-us-west-2.amazonaws.com/secure.notion-static.com/b78d8290-821b-40e4-9cf5-6d157fe553cd/Untitled.png","block_full_width":false,"block_page_width":true,"block_aspect_ratio":0.4327044025157233,"block_preserve_scale":true},"created_time":1691653412540,"last_edited_time":1691653489663,"parent_id":"4b897702-23b2-4db3-a006-96e875ec2333","parent_table":"block","alive":true,"file_ids":["b78d8290-821b-40e4-9cf5-6d157fe553cd"],"created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"},"role":"reader"},"c57c0976-3605-473d-8651-dce45dab38f7":{"value":{"id":"c57c0976-3605-473d-8651-dce45dab38f7","version":260,"type":"bulleted_list","properties":{"title":[["拓扑图淡化了时序信息，所以即使时序不接壤，也会被折叠到一起。"]]},"content":["38c14760-7e02-4b50-a6a5-9f62d3c3c4c5"],"created_time":1690280585612,"last_edited_time":1691653493230,"parent_id":"2832ab2a-059a-45e4-8cf1-b0ed05e8e1fa","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"},"role":"reader"},"38c14760-7e02-4b50-a6a5-9f62d3c3c4c5":{"value":{"id":"38c14760-7e02-4b50-a6a5-9f62d3c3c4c5","version":17,"type":"image","properties":{"size":[["56.8KB"]],"title":[["Untitled"]],"source":[["https://s3-us-west-2.amazonaws.com/secure.notion-static.com/1ee72dc0-fc95-4e39-be94-dd93d13a63ce/Untitled.png"]]},"format":{"block_width":2062,"display_source":"https://s3-us-west-2.amazonaws.com/secure.notion-static.com/1ee72dc0-fc95-4e39-be94-dd93d13a63ce/Untitled.png","block_full_width":false,"block_page_width":true,"block_aspect_ratio":0.24442289039767218,"block_preserve_scale":true},"created_time":1691653476115,"last_edited_time":1691653493230,"parent_id":"c57c0976-3605-473d-8651-dce45dab38f7","parent_table":"block","alive":true,"file_ids":["1ee72dc0-fc95-4e39-be94-dd93d13a63ce"],"created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"},"role":"reader"},"af636eac-e50d-4a23-a392-c10940e01b00":{"value":{"id":"af636eac-e50d-4a23-a392-c10940e01b00","version":541,"type":"text","properties":{"title":[["同时，由于拓扑图的折叠只会保留一棵抽象的树，当存在两棵子树完全相同时也会被折叠到一起。"]]},"created_time":1691653475689,"last_edited_time":1691653616168,"parent_id":"2832ab2a-059a-45e4-8cf1-b0ed05e8e1fa","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"},"role":"reader"},"5d4fd76d-330b-4d0a-859a-bbccb4d39f52":{"value":{"id":"5d4fd76d-330b-4d0a-859a-bbccb4d39f52","version":65,"type":"image","properties":{"size":[["558.4KB"]],"title":[["Untitled"]],"source":[["https://s3-us-west-2.amazonaws.com/secure.notion-static.com/34b4c95b-c79d-43c9-af56-0fd2345295df/Untitled.png"]],"caption":[["四棵一模一样的树"]]},"format":{"block_width":3196,"display_source":"https://s3-us-west-2.amazonaws.com/secure.notion-static.com/34b4c95b-c79d-43c9-af56-0fd2345295df/Untitled.png","block_full_width":false,"block_page_width":true,"block_aspect_ratio":0.31539424280350437,"block_preserve_scale":true},"created_time":1691653977981,"last_edited_time":1691654460717,"parent_id":"2832ab2a-059a-45e4-8cf1-b0ed05e8e1fa","parent_table":"block","alive":true,"file_ids":["34b4c95b-c79d-43c9-af56-0fd2345295df"],"created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"},"role":"reader"},"9845f5bc-d67c-44bb-94a8-2375755e608b":{"value":{"id":"9845f5bc-d67c-44bb-94a8-2375755e608b","version":199,"type":"image","properties":{"size":[["319.2KB"]],"title":[["Untitled"]],"source":[["https://s3-us-west-2.amazonaws.com/secure.notion-static.com/029886d0-76bb-4773-8437-53aef0ab054a/Untitled.png"]],"caption":[["聚合到一起，原本子树中已有的分组也会被同时累加聚合"]]},"format":{"block_width":1912,"display_source":"https://s3-us-west-2.amazonaws.com/secure.notion-static.com/029886d0-76bb-4773-8437-53aef0ab054a/Untitled.png","block_full_width":false,"block_page_width":true,"block_aspect_ratio":0.8472803347280334,"block_preserve_scale":true},"created_time":1691653851276,"last_edited_time":1691654481877,"parent_id":"2832ab2a-059a-45e4-8cf1-b0ed05e8e1fa","parent_table":"block","alive":true,"file_ids":["029886d0-76bb-4773-8437-53aef0ab054a"],"created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"},"role":"reader"},"76159194-b364-4758-8d8b-3148c4cf89f2":{"value":{"id":"76159194-b364-4758-8d8b-3148c4cf89f2","version":12,"type":"sub_header","properties":{"title":[["并行/并发推测",[["b"],["b"]]]]},"created_time":1690275863699,"last_edited_time":1694159567773,"parent_id":"2832ab2a-059a-45e4-8cf1-b0ed05e8e1fa","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"},"role":"reader"},"5312a6a7-a27e-41be-92f9-94593aa6744c":{"value":{"id":"5312a6a7-a27e-41be-92f9-94593aa6744c","version":2,"type":"text","properties":{"title":[["兄弟 Span 之间很多时候会存在并行或者并发的情况，因为没有直接的字段指示，所以我们在多叉树的处理过程中增加了一个“并行/并发推测”的步骤。当存在以下任意两种场景时，我们会认为这些 Span 之间存在“并行或并发”的情况："]]},"created_time":1694159548695,"last_edited_time":1694159548698,"parent_id":"2832ab2a-059a-45e4-8cf1-b0ed05e8e1fa","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"},"role":"reader"},"c61cebca-6d4b-49ec-9e35-49a85c854871":{"value":{"id":"c61cebca-6d4b-49ec-9e35-49a85c854871","version":2,"type":"bulleted_list","properties":{"title":[["兄弟 Span 之间的执行时间存在重叠，侧重于同一时间段内同时运行，即并「行」。"]]},"created_time":1694159548696,"last_edited_time":1694159548698,"parent_id":"2832ab2a-059a-45e4-8cf1-b0ed05e8e1fa","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"},"role":"reader"},"05b458bd-69d3-4bdf-a63c-0c1f0eb26972":{"value":{"id":"05b458bd-69d3-4bdf-a63c-0c1f0eb26972","version":12,"type":"bulleted_list","properties":{"title":[["兄弟 Span 的开始时间极为接近（当前默认探测时长为 "],["500μs",[["c"]]],[" ），侧重于近乎在同一个时间点发起，即并「发」。"]]},"created_time":1694159548696,"last_edited_time":1694159560018,"parent_id":"2832ab2a-059a-45e4-8cf1-b0ed05e8e1fa","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"},"role":"reader"},"e5a64b3b-ee41-4c35-a544-a9ddfbd340a1":{"value":{"id":"e5a64b3b-ee41-4c35-a544-a9ddfbd340a1","version":355,"type":"text","properties":{"title":[["这里我们可以回顾上文提到的时序图，里面就包含了一个并发的展示样例："]]},"created_time":1690455610352,"last_edited_time":1690455692529,"parent_id":"2832ab2a-059a-45e4-8cf1-b0ed05e8e1fa","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"},"role":"reader"},"0baaeea6-d888-4cb6-b2f2-701ec261984f":{"value":{"id":"0baaeea6-d888-4cb6-b2f2-701ec261984f","version":11,"type":"image","properties":{"size":[["36.0KB"]],"title":[["Untitled"]],"source":[["https://s3-us-west-2.amazonaws.com/secure.notion-static.com/12f36acf-24b1-49f0-b4c9-ad0642441967/Untitled.png"]]},"format":{"block_width":926,"display_source":"https://s3-us-west-2.amazonaws.com/secure.notion-static.com/12f36acf-24b1-49f0-b4c9-ad0642441967/Untitled.png","block_full_width":false,"block_page_width":true,"block_aspect_ratio":0.5701943844492441,"block_preserve_scale":true},"created_time":1690455665857,"last_edited_time":1690455668721,"parent_id":"2832ab2a-059a-45e4-8cf1-b0ed05e8e1fa","parent_table":"block","alive":true,"file_ids":["12f36acf-24b1-49f0-b4c9-ad0642441967"],"created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"},"role":"reader"},"6cbffe18-5ea3-4c67-8fa9-ff35d02c7f37":{"value":{"id":"6cbffe18-5ea3-4c67-8fa9-ff35d02c7f37","version":1675,"type":"text","properties":{"title":[["需要注意的是，这里我们提到的“并行”，是一个逻辑概念，是我们根据数据状态进行的一种“推测”，而非坚定的”判断“，被”推测“为并行的元素间"],["可能不存在”真实“的物理并发行为",[["b"]]],["，而同样存在一些“真实”的物理并发没有被并行”推测”所标记。"]]},"created_time":1690454933165,"last_edited_time":1690514949615,"parent_id":"2832ab2a-059a-45e4-8cf1-b0ed05e8e1fa","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"},"role":"reader"},"1d83b966-d9b3-4598-8467-18140b90c3f4":{"value":{"id":"1d83b966-d9b3-4598-8467-18140b90c3f4","version":24,"type":"header","properties":{"title":[["对比"]]},"created_time":1690276842521,"last_edited_time":1690276844301,"parent_id":"2832ab2a-059a-45e4-8cf1-b0ed05e8e1fa","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"},"role":"reader"},"e9a3032d-0e7c-4b98-af53-826742fbb3e1":{"value":{"id":"e9a3032d-0e7c-4b98-af53-826742fbb3e1","version":1201,"type":"text","properties":{"title":[["我们常常需要对比不同时间段内"],["相似的 Trace，",[["b"]]],["它可以帮助我们在更长的时间维度上对程序行为进行观测"],["。",[["b"]]],["正如上文提到每一个 Trace 都是一颗多叉树，相似 Trace 的对比其实就是多叉树对比的策略，但和普通多叉树不同的是，兄弟节点之间是时序相关的。"]]},"created_time":1690516580090,"last_edited_time":1690539879516,"parent_id":"2832ab2a-059a-45e4-8cf1-b0ed05e8e1fa","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"},"role":"reader"},"6b1a050c-4f33-4c96-8674-a7b2bf41c5e9":{"value":{"id":"6b1a050c-4f33-4c96-8674-a7b2bf41c5e9","version":8,"type":"sub_header","properties":{"title":[["对比策略"]]},"created_time":1690539757890,"last_edited_time":1690539758311,"parent_id":"2832ab2a-059a-45e4-8cf1-b0ed05e8e1fa","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"},"role":"reader"},"a1fc4d4c-b644-44f0-9bfb-9f7ead2d63e7":{"value":{"id":"a1fc4d4c-b644-44f0-9bfb-9f7ead2d63e7","version":3,"type":"text","properties":{"title":[["在 Trace 场景中我们采用了通过相对时序的方案对两棵多叉树进行对比。"]]},"format":{"copied_from_pointer":{"id":"d39488ff-c369-4b9a-b1c7-6e3f29e8c276","table":"block","spaceId":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"created_time":1690539758301,"last_edited_time":1690539758311,"parent_id":"2832ab2a-059a-45e4-8cf1-b0ed05e8e1fa","parent_table":"block","alive":true,"copied_from":"d39488ff-c369-4b9a-b1c7-6e3f29e8c276","created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"},"role":"reader"},"5e6eb3a3-ab63-47e8-8308-6ffe748d71dc":{"value":{"id":"5e6eb3a3-ab63-47e8-8308-6ffe748d71dc","version":11,"type":"image","properties":{"size":[["84.4KB"]],"title":[["Untitled"]],"source":[["https://s3-us-west-2.amazonaws.com/secure.notion-static.com/dcf05123-69b7-410c-b4c9-9600cda694b9/Untitled.png"]]},"format":{"block_width":1978,"display_source":"https://s3-us-west-2.amazonaws.com/secure.notion-static.com/dcf05123-69b7-410c-b4c9-9600cda694b9/Untitled.png","block_full_width":false,"block_page_width":true,"block_aspect_ratio":0.3346814964610718,"block_preserve_scale":true},"created_time":1690539881652,"last_edited_time":1690539885235,"parent_id":"2832ab2a-059a-45e4-8cf1-b0ed05e8e1fa","parent_table":"block","alive":true,"file_ids":["dcf05123-69b7-410c-b4c9-9600cda694b9"],"created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"},"role":"reader"},"4a749348-d534-4cfb-8694-88ac27c4486b":{"value":{"id":"4a749348-d534-4cfb-8694-88ac27c4486b","version":3,"type":"text","properties":{"title":[["相对时序的意思是，我们会根据节点所在兄弟之间的位置来确定其是否在对比树中存在。对于 baseline 的某个节点而言，查找可能会产生四种结果："]]},"format":{"copied_from_pointer":{"id":"3d4e2fc9-8f22-4f56-ba92-018caf26da44","table":"block","spaceId":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"created_time":1690539758303,"last_edited_time":1690539758311,"parent_id":"2832ab2a-059a-45e4-8cf1-b0ed05e8e1fa","parent_table":"block","alive":true,"copied_from":"3d4e2fc9-8f22-4f56-ba92-018caf26da44","created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"},"role":"reader"},"1559ac18-fc60-457a-8c5d-c090834c8e59":{"value":{"id":"1559ac18-fc60-457a-8c5d-c090834c8e59","version":3,"type":"bulleted_list","properties":{"title":[["UNCHANGED",[["c"]]],["，未发生变化，相对位置、Span 关键信息、耗时均未发生改变"]]},"format":{"copied_from_pointer":{"id":"23d7dadf-75bd-40e6-9f28-56cb36583a59","table":"block","spaceId":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"created_time":1690539758303,"last_edited_time":1690539758311,"parent_id":"2832ab2a-059a-45e4-8cf1-b0ed05e8e1fa","parent_table":"block","alive":true,"copied_from":"23d7dadf-75bd-40e6-9f28-56cb36583a59","created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"},"role":"reader"},"e58c59a7-1a3e-4232-b213-7b0d16e067ae":{"value":{"id":"e58c59a7-1a3e-4232-b213-7b0d16e067ae","version":3,"type":"bulleted_list","properties":{"title":[["CHANGED",[["c"]]],[" ，发生变化，相对位置、Span 关键信息已找到，但是耗时有了增减"]]},"format":{"copied_from_pointer":{"id":"209bbf6d-0f4a-4813-b907-37451b02105f","table":"block","spaceId":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"created_time":1690539758304,"last_edited_time":1690539758311,"parent_id":"2832ab2a-059a-45e4-8cf1-b0ed05e8e1fa","parent_table":"block","alive":true,"copied_from":"209bbf6d-0f4a-4813-b907-37451b02105f","created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"},"role":"reader"},"6953b88c-7cd7-417f-90f2-afe4f740b415":{"value":{"id":"6953b88c-7cd7-417f-90f2-afe4f740b415","version":7,"type":"bulleted_list","properties":{"title":[["REMOVED",[["c"]]],[" ，在 baseline 树中不存在，但是存在于对比树，认为是对比树新增的节点"]]},"format":{"copied_from_pointer":{"id":"cacdff30-f0e0-41ac-bab7-e4528b3ba4be","table":"block","spaceId":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"created_time":1690539758304,"last_edited_time":1691649133158,"parent_id":"2832ab2a-059a-45e4-8cf1-b0ed05e8e1fa","parent_table":"block","alive":true,"copied_from":"cacdff30-f0e0-41ac-bab7-e4528b3ba4be","created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"},"role":"reader"},"022cf753-e210-46e1-89b5-f3375209c0b9":{"value":{"id":"022cf753-e210-46e1-89b5-f3375209c0b9","version":8,"type":"bulleted_list","properties":{"title":[["ADDED",[["c"]]],[" ，未在对比树中找到对应 Span，判断该节点已经被删除"]]},"format":{"copied_from_pointer":{"id":"10c46369-6e33-4a03-885f-e7e6dc29b37f","table":"block","spaceId":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"created_time":1690539758305,"last_edited_time":1691649132445,"parent_id":"2832ab2a-059a-45e4-8cf1-b0ed05e8e1fa","parent_table":"block","alive":true,"copied_from":"10c46369-6e33-4a03-885f-e7e6dc29b37f","created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"},"role":"reader"},"659c2840-5dc5-428e-83b6-ddbd5f37a55a":{"value":{"id":"659c2840-5dc5-428e-83b6-ddbd5f37a55a","version":3,"type":"sub_header","properties":{"title":[["可比性评估"]]},"format":{"copied_from_pointer":{"id":"3afd1846-5cbf-4a3e-9a2d-51757d3729dd","table":"block","spaceId":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"created_time":1690516786979,"last_edited_time":1690516786985,"parent_id":"2832ab2a-059a-45e4-8cf1-b0ed05e8e1fa","parent_table":"block","alive":true,"copied_from":"3afd1846-5cbf-4a3e-9a2d-51757d3729dd","created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"},"role":"reader"},"10488e26-25b3-4142-b608-177a4f7d3a9d":{"value":{"id":"10488e26-25b3-4142-b608-177a4f7d3a9d","version":24,"type":"text","properties":{"title":[["有时候两棵 Trace 树的差异非常大，进行对比展示的意义不大，我们采取了一种 "],["吻合度按层级递减 ",[["i"],["b"]]],["的策略对两棵树的可比性进行了一个评估。采取这个思路的原因是："],["越靠近根的节点对于树的相似性有更多的影响。",[["i"]]]]},"format":{"copied_from_pointer":{"id":"5a036ad9-661c-439c-bee5-704be9dcd446","table":"block","spaceId":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"created_time":1690516786981,"last_edited_time":1690539743702,"parent_id":"2832ab2a-059a-45e4-8cf1-b0ed05e8e1fa","parent_table":"block","alive":true,"copied_from":"5a036ad9-661c-439c-bee5-704be9dcd446","created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"},"role":"reader"},"5ef27c51-6fc5-4b36-a7fc-7ccf0dec799a":{"value":{"id":"5ef27c51-6fc5-4b36-a7fc-7ccf0dec799a","version":11,"type":"image","properties":{"size":[["169.5KB"]],"title":[["Untitled"]],"source":[["https://s3-us-west-2.amazonaws.com/secure.notion-static.com/93f7a1bf-68c5-41b1-8274-a98fd511b499/Untitled.png"]]},"format":{"block_width":2512,"display_source":"https://s3-us-west-2.amazonaws.com/secure.notion-static.com/93f7a1bf-68c5-41b1-8274-a98fd511b499/Untitled.png","block_full_width":false,"block_page_width":true,"block_aspect_ratio":0.35668789808917195,"block_preserve_scale":true},"created_time":1690535139778,"last_edited_time":1690535144646,"parent_id":"2832ab2a-059a-45e4-8cf1-b0ed05e8e1fa","parent_table":"block","alive":true,"file_ids":["93f7a1bf-68c5-41b1-8274-a98fd511b499"],"created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"},"role":"reader"},"c9937e71-b0e4-4389-ba2f-b60bfdcf523f":{"value":{"id":"c9937e71-b0e4-4389-ba2f-b60bfdcf523f","version":1318,"type":"text","properties":{"title":[["在这里我们按照层级，从上到下进行评估可比性。当任意层级评估不可比，即判定两棵树不可比。"]]},"created_time":1690535143837,"last_edited_time":1690535886933,"parent_id":"2832ab2a-059a-45e4-8cf1-b0ed05e8e1fa","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"},"role":"reader"},"eb57d0a8-a505-4b53-9a81-35bd235f1585":{"value":{"id":"eb57d0a8-a505-4b53-9a81-35bd235f1585","version":605,"type":"text","properties":{"title":[["依照刚才提到的整体思路，越是靠近根节点的层级，应该有更高的相似性："],["从左侧 baseline 树的角度出发，计算出节点在对比树中存在的比例是否满足该层级的最低吻合度",[["b"]]]]},"created_time":1690535886930,"last_edited_time":1690536053167,"parent_id":"2832ab2a-059a-45e4-8cf1-b0ed05e8e1fa","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"},"role":"reader"},"85f96990-007c-4102-bd50-5cdba7f02988":{"value":{"id":"85f96990-007c-4102-bd50-5cdba7f02988","version":984,"type":"text","properties":{"title":[["我们定义了一个变量：吻合度层级递减比例 "],["X",[["c"]]],[" ，对于层级而言，最低吻合度就是 "],["(100 - level * X)",[["c"]]],[" 。这里的 "],["X",[["c"]]],[" 的取值会决定两棵树是否可比，如图所示："]]},"created_time":1690536042617,"last_edited_time":1690536314488,"parent_id":"2832ab2a-059a-45e4-8cf1-b0ed05e8e1fa","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"},"role":"reader"},"d18ca17c-5a31-4be7-8628-cf2daa64f855":{"value":{"id":"d18ca17c-5a31-4be7-8628-cf2daa64f855","version":12,"type":"bulleted_list","properties":{"title":[["当 "],["X=25",[["c"]]],[" 时， "],["level=3",[["c"]]],[" 层级的吻合度 "],["1/6=16.7%",[["c"]]],[" 是小于 "],["100 - 3*25=25%",[["c"]]],[" ，所以判定这两棵树是不可比的。"]]},"created_time":1690536314486,"last_edited_time":1690536314861,"parent_id":"2832ab2a-059a-45e4-8cf1-b0ed05e8e1fa","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"},"role":"reader"},"be2877aa-ec1b-481e-880c-30340800e4f0":{"value":{"id":"be2877aa-ec1b-481e-880c-30340800e4f0","version":48,"type":"bulleted_list","properties":{"title":[["当 "],["X=30",[["c"]]],[" 时， "],["level=3",[["c"]]],[" 层级的吻合度 "],["1/6=16.7%",[["c"]]],[" 是大于 "],["100 - 3*30=10%",[["c"]]],[" ，所以判定这两棵树是可比的。"]]},"created_time":1690536316726,"last_edited_time":1690536334996,"parent_id":"2832ab2a-059a-45e4-8cf1-b0ed05e8e1fa","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"},"role":"reader"},"ea6a0e10-ae31-467e-85f1-4d6146bc2e51":{"value":{"id":"ea6a0e10-ae31-467e-85f1-4d6146bc2e51","version":527,"type":"text","properties":{"title":[["（"],["对于具体 ",[["i"]]],["X",[["c"],["i"]]],[" 的调控，我们暂时采用了一个静态值，更灵活的调整策略还在根据实际场景进行摸索。）",[["i"]]]]},"created_time":1690536337304,"last_edited_time":1691575499612,"parent_id":"2832ab2a-059a-45e4-8cf1-b0ed05e8e1fa","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"},"role":"reader"},"5bedb284-e9a6-40d9-8e0a-19ad77e2af0c":{"value":{"id":"5bedb284-e9a6-40d9-8e0a-19ad77e2af0c","version":8,"type":"sub_sub_header","properties":{"title":[["忽略小差异"]]},"format":{"copied_from_pointer":{"id":"25640fbd-f149-447d-ab71-a0cabe2eaf26","table":"block","spaceId":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"created_time":1690516786982,"last_edited_time":1690536177212,"parent_id":"2832ab2a-059a-45e4-8cf1-b0ed05e8e1fa","parent_table":"block","alive":true,"copied_from":"25640fbd-f149-447d-ab71-a0cabe2eaf26","created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"},"role":"reader"},"afcb9ad0-f378-47cf-bbaf-b8cc5e5be693":{"value":{"id":"afcb9ad0-f378-47cf-bbaf-b8cc5e5be693","version":288,"type":"text","properties":{"title":[["当然存在一些非常小的 Trace 树不太适用吻合度递减的评估策略。"]]},"created_time":1690537487412,"last_edited_time":1690537556979,"parent_id":"2832ab2a-059a-45e4-8cf1-b0ed05e8e1fa","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"},"role":"reader"},"09162450-c3d7-4b75-99da-417e066a583a":{"value":{"id":"09162450-c3d7-4b75-99da-417e066a583a","version":168,"type":"image","properties":{"size":[["43.6KB"]],"title":[["Untitled"]],"source":[["https://s3-us-west-2.amazonaws.com/secure.notion-static.com/836f4bf6-2562-4e28-b81e-9747adf09bd6/Untitled.png"]],"caption":[["足够小的树，需要 X 值较大才能保证对比性"]]},"format":{"block_width":1352,"display_source":"https://s3-us-west-2.amazonaws.com/secure.notion-static.com/836f4bf6-2562-4e28-b81e-9747adf09bd6/Untitled.png","block_full_width":false,"block_page_width":true,"block_aspect_ratio":0.3076923076923077,"block_preserve_scale":true},"created_time":1690537739817,"last_edited_time":1690537763157,"parent_id":"2832ab2a-059a-45e4-8cf1-b0ed05e8e1fa","parent_table":"block","alive":true,"file_ids":["836f4bf6-2562-4e28-b81e-9747adf09bd6"],"created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"},"role":"reader"},"5b773fd8-74d0-42f7-af5d-5cb4c2c0de7a":{"value":{"id":"5b773fd8-74d0-42f7-af5d-5cb4c2c0de7a","version":330,"type":"text","properties":{"title":[["我们设定了一个阈值 "],["Y",[["c"]]],["，当层级节点数小于 "],["Y",[["c"]]],[" 时我们不予进行对比评估。"]]},"created_time":1690537765212,"last_edited_time":1691650471798,"parent_id":"2832ab2a-059a-45e4-8cf1-b0ed05e8e1fa","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"},"role":"reader"},"9ddaeb73-1d74-453b-87e5-b4ccae908e5f":{"value":{"id":"9ddaeb73-1d74-453b-87e5-b4ccae908e5f","version":19,"type":"header","properties":{"title":[["Fin"]]},"created_time":1691649153199,"last_edited_time":1691651312588,"parent_id":"2832ab2a-059a-45e4-8cf1-b0ed05e8e1fa","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"},"role":"reader"},"2101b3de-0747-477c-9a74-18aa2da46bff":{"value":{"id":"2101b3de-0747-477c-9a74-18aa2da46bff","version":15,"type":"image","properties":{"size":[["490.5KB"]],"title":[["Untitled"]],"source":[["https://s3-us-west-2.amazonaws.com/secure.notion-static.com/5b92c6a8-938e-4b27-944c-705a46a583e4/Untitled.png"]]},"format":{"block_width":3016,"display_source":"https://s3-us-west-2.amazonaws.com/secure.notion-static.com/5b92c6a8-938e-4b27-944c-705a46a583e4/Untitled.png","block_full_width":false,"block_page_width":true,"block_aspect_ratio":0.40318302387267907,"block_preserve_scale":true},"created_time":1691650438485,"last_edited_time":1691650556647,"parent_id":"2832ab2a-059a-45e4-8cf1-b0ed05e8e1fa","parent_table":"block","alive":true,"file_ids":["5b92c6a8-938e-4b27-944c-705a46a583e4"],"created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"},"role":"reader"},"718b99c2-3def-4232-83d0-9151206bc1f4":{"value":{"id":"718b99c2-3def-4232-83d0-9151206bc1f4","version":4,"type":"text","properties":{"title":[["基于当前的生产管线，后续可以对更多可视化图表，让天下没有难懂的 Trace 😎"]]},"created_time":1691650557971,"last_edited_time":1691651301947,"parent_id":"2832ab2a-059a-45e4-8cf1-b0ed05e8e1fa","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"},"role":"reader"},"d52826c5-227b-4d63-953e-1cd4c4766476":{"value":{"id":"d52826c5-227b-4d63-953e-1cd4c4766476","version":136,"type":"text","properties":{"title":[["(以上内容均已"],["开源",[["a","https://github.com/TencentBlueKing/bk-monitor/tree/master/bkmonitor/packages/apm_web/trace"]]],[" 👾）"]]},"created_time":1701919017126,"last_edited_time":1701919080904,"parent_id":"2832ab2a-059a-45e4-8cf1-b0ed05e8e1fa","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"},"role":"reader"}},"collection":{"e34bec60-9b02-4ad8-aaf8-83369409cc9f":{"value":{"id":"e34bec60-9b02-4ad8-aaf8-83369409cc9f","version":100,"name":[["布鲁斯鱼的妙想天开 "]],"schema":{"NX\\Q":{"name":"date","type":"date"},"`gQ~":{"name":"type","type":"select","options":[{"id":"5aff2f95-fd1e-489b-8840-bf10bc9519cb","color":"purple","value":"Post"},{"id":"374d2bc6-a144-4832-8ca4-474aaae0ea1f","color":"orange","value":"Page"}]},"d]hq":{"name":"slug","type":"text"},"sD^m":{"name":"tags","type":"multi_select","options":[{"id":"790180f1-0c2e-4730-a1ef-c5463df34680","color":"brown","value":"python"},{"id":"5d668f5e-7204-4c7e-b57e-5558bd27efaf","color":"gray","value":"pep"},{"id":"9081ab60-29ee-4a5b-9989-f50cf36ecb9b","color":"orange","value":"tech"},{"id":"c0225229-afab-45e4-b69b-b71029b39835","color":"red","value":"django"},{"id":"90084124-d1d5-49fb-86e7-4b133c051d81","color":"default","value":"orm"},{"id":"10ace7d0-10e6-4617-970e-acf2d9348d0f","color":"yellow","value":"best-practice"},{"id":"1b9671ca-93e5-402d-a73e-f9aca38e4358","color":"pink","value":"web"},{"id":"c7015bc7-2283-4b3d-8d19-3075724a10df","color":"blue","value":"blog"},{"id":"22d9ce60-f854-4122-b0fc-4f4c3a41979e","color":"green","value":"guide"},{"id":"6e99d746-1829-43e3-a828-214a1ae79b4a","color":"purple","value":"ELK"},{"id":"45ebe27a-5445-4cc3-91c9-ec1f1296dcf4","color":"brown","value":"pytest"},{"id":"9f679b83-f407-4130-b5b7-f969329300bf","color":"brown","value":"unittest"},{"id":"e30656d1-1ff2-434c-a2cb-8b3c75c9d1a1","color":"gray","value":"fun"},{"id":"5146a8a4-5647-4ce0-8a7b-1a6320adee06","color":"blue","value":"back-pressure"},{"id":"36828c03-3b80-417d-82a3-b1066ad5ca60","color":"green","value":"Dependency injection"},{"id":"9602332d-afbb-41e8-baed-bd0dd39a5e21","color":"brown","value":"k8s"},{"id":"82cd2499-ddd4-43ad-9298-fba21fe29cfa","color":"brown","value":"helm"},{"id":"f0a44444-e52d-4db2-9262-aa29d7ded8e3","color":"blue","value":"celery"},{"id":"a87e284b-1c48-422e-9811-eba8a167f97a","color":"red","value":"amqp"},{"id":"dc50dbb3-8e3a-4747-95d8-c9098e70e088","color":"default","value":"tcp"},{"id":"90b243e4-95f4-459e-b5b7-42f09020978b","color":"gray","value":"graphql"},{"id":"00f0130d-3a96-4e5a-8b5e-77e14e0a3ff7","color":"purple","value":"logstash"},{"id":"a921b879-fcef-4ace-8c96-7a6e11fe2358","color":"orange","value":"konajdk"},{"id":"b8e6dc68-925c-4d32-84d9-580d1a34c3a6","color":"orange","value":"regex"},{"id":"fc66930c-fa10-44b1-b553-5f6acc796321","color":"gray","value":"nfa"},{"id":"f9255cb2-7e85-4bce-8042-472643ff3b58","color":"orange","value":"dfa"},{"id":"e00a51c2-af1c-4bfd-a118-e83e73f3e1a3","color":"purple","value":"security"},{"id":"45105ec0-49be-430b-aead-ef83cfbc8b02","color":"pink","value":"reading"},{"id":"4c3a21fd-3ba5-44a2-8c5e-ef6e9100c32c","color":"brown","value":"software-engineering"},{"id":"4cd1d179-3466-4d7e-baf2-99a4c0250a78","color":"blue","value":"google"},{"id":"22973bbb-4038-4f9b-a30c-c0ab6506d65d","color":"gray","value":"note"},{"id":"1ca18016-ff4e-41e0-af37-6ea457fc4bd8","color":"orange","value":"go"},{"id":"017cb1fb-940d-4281-a078-ea653dc7688a","color":"green","value":"prometheus"},{"id":"35b57024-e3a6-465c-8845-e359d09c72c7","color":"brown","value":"udp"},{"id":"4357722b-be50-481e-ba42-992e73b7b86e","color":"pink","value":"observability"},{"id":"89d067fb-d3d3-4d3f-b855-5f472e28d80b","color":"orange","value":"profiling"},{"id":"74546b53-0289-4df1-8134-aa3fc41775c0","color":"pink","value":"surfing"},{"id":"886db38e-2150-4cc8-b01c-7617b0ec2497","color":"gray","value":"trace"},{"id":"ee0aa58a-eb8b-41b4-ad1b-60c948d850a9","color":"green","value":"diagram"}]},"wz|S":{"name":"summary","type":"text"},"title":{"name":"title","type":"title"},"f211bdc0-ee00-4186-9a7d-f68c055ec2ee":{"name":"status","type":"select","options":[{"id":"22460321-fea2-4c7c-b352-a674760780ac","color":"orange","value":"Idea"},{"id":"41d5f5c6-b53c-42bc-8e0f-fc9402048480","color":"yellow","value":"Draft"},{"id":"c7390b31-9fab-4e21-94ee-7e67ea077a97","color":"blue","value":"Revise"},{"id":"7abc61d4-b405-480d-b699-12588755fa65","color":"red","value":"Published"}]}},"icon":"🗯️","format":{"copied_from_pointer":{"id":"6a42b751-ff40-4f34-aa6a-1830a3344cb7","table":"collection","spaceId":"ac4cb96d-c8f8-4040-9bb2-868d9fc7f526"},"collection_page_properties":[{"visible":false,"property":"NX\\Q"},{"visible":false,"property":"d]hq"},{"visible":false,"property":"f211bdc0-ee00-4186-9a7d-f68c055ec2ee"},{"visible":false,"property":"sD^m"},{"visible":false,"property":"wz|S"},{"visible":false,"property":"`gQ~"}]},"parent_id":"a6089909-2d0d-43ef-af93-5e041712e826","parent_table":"block","alive":true,"file_ids":["6cf3dc36-2f98-4f0e-9679-1bdbb1485129","5520bd92-e709-4c0d-ad58-06923f23f7e9","624d393a-62e3-4464-a1bf-1c79ecd4fbda","d52f6766-3e32-4c3d-8529-46e1f214360f"],"copied_from":"6a42b751-ff40-4f34-aa6a-1830a3344cb7","migrated":true,"space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6","deleted_schema":{"0d330ccb-d222-4440-a0de-6cccfe926a33":{"name":"url","type":"text"},"26ff3130-393a-45ac-92b5-7490d9b87515":{"name":"template","type":"select","options":[{"id":"V*ea","color":"purple","value":"post"}]},"29e679ed-47a3-46c2-9eb4-9070171591b8":{"name":"inList","type":"checkbox"},"2af12d30-97f0-4310-b38c-02e6a554245f":{"name":"publish","type":"checkbox"},"2bf55746-6864-4bb6-b585-77b81f140da1":{"name":"inList","type":"checkbox"},"487aab80-eb42-4dd6-a386-d58672ff59fa":{"name":"description","type":"text"},"53819e0d-5bc6-40de-a8bc-498fdf840fbc":{"name":"description","type":"text"},"67c34d44-b9f2-42c1-b35c-4a534c03bdd9":{"name":"inList","type":"checkbox"},"69fb2cd3-221c-476b-86c2-ab74f4490cc9":{"name":"template","type":"select","options":[{"id":"V*ea","color":"purple","value":"post"}]},"ab0a009c-1080-47c3-aecc-b26dc703a4e0":{"name":"url","type":"text"},"ad8f0878-e947-4188-8970-1ca14665f6e3":{"name":"inMenu","type":"checkbox"},"b2c6f9d4-31e2-4230-b57e-4bdb21a3d635":{"name":"template","type":"select","options":[{"id":"V*ea","color":"purple","value":"post"}]},"b387319f-5770-457e-8453-1d2f2708f9f1":{"name":"url","type":"text"},"b6d830ff-ce1d-4e76-a484-f0fc3f148c52":{"name":"publish","type":"checkbox"},"c0b15f23-eddd-4316-95d1-a92a4edbc710":{"name":"publish","type":"checkbox"},"e3660c02-9d93-463b-9495-addeeabd3e80":{"name":"description","type":"text"}}},"role":"reader"}},"space":{},"collection_view":{"065b98d2-d3b4-4dab-8b96-4eb118a3f311":{"value":{"id":"065b98d2-d3b4-4dab-8b96-4eb118a3f311","version":46,"type":"table","name":"Default view","format":{"table_wrap":false,"table_properties":[{"width":354,"visible":true,"property":"title"},{"width":243,"visible":true,"property":"d]hq"},{"width":159,"visible":true,"property":"NX\\Q"},{"width":147,"visible":true,"property":"wz|S"},{"width":236,"visible":true,"property":"sD^m"},{"width":124,"visible":true,"property":"f211bdc0-ee00-4186-9a7d-f68c055ec2ee"},{"width":100,"visible":true,"property":"`gQ~"}],"table_frozen_column_index":-1},"parent_id":"a6089909-2d0d-43ef-af93-5e041712e826","parent_table":"block","alive":true,"page_sort":["b1e1d645-db95-42e5-8995-39a80eda6460","e8cd3732-dc1c-43ae-959a-a5a611ec098a","e876558d-e878-47f6-8c95-21be678990a5","5a971ded-d3c5-41be-bef9-ddfff48d43a2","8db8b240-e1c5-4dd7-bf74-72584d7a2ce0","daf94ca4-ec56-47a3-84ed-b1e2479acc4b","d1a2db9b-6820-421e-9b80-017ce7478587","67ea9f83-b9f6-416b-afcb-7c64f7533e6c","45939470-9819-47e8-b12b-999cfefa0aad","c60dc33d-8efb-44be-a863-7a87ad047932","fe4b8d5f-7c49-42c6-a7d5-1cb71c4f7e86","b7233a67-c367-4198-831e-f12089568d1f","4f3bf306-92c4-41b7-a43e-957129a1240a","6a789607-66cf-498e-9b32-eb3fa69a84f4","c9429034-dabd-4a25-8782-97f20c808a60","38c49fe2-37f8-4a7f-a99f-9edb9ddad4c2","474eb638-9f6b-46bf-8004-77668293f199","81d6dfab-69cb-43a0-aa04-e9725f0b67e1","7703d956-84db-46cd-b538-48eae1af68b5","9f937c73-dac9-4ed7-9b01-beefcb321f16","3cf9dcb9-e7db-406c-80ab-c65c11fbf906","5827ab53-e051-455b-b90a-3bdc20158c2c","fa7acd3b-dea9-4fb1-b859-5345f35163c6","696dfc48-62c3-494d-96d0-ec5fa84637e8","79df93cf-9b10-452e-bc62-f39e8cd2d124","9bb8e52d-c459-4528-b1b3-c2378207253a","5da038ef-f419-4a11-aa48-587b3787e040","b4a2c9d4-6a2c-49e6-988d-89a538dfe0f6","c374a479-5cc7-4c54-ba69-6a4d76dc25ad","d470fa67-0e7c-40d8-86ac-9b5a8be88dc8","986be38b-9780-4bb9-bdcd-4e361ddbd888","b7613f56-c2d4-4aae-b967-b7471ade86d0","e357d1fc-7466-4d6a-8d48-71b76ea97cdc","e1735855-4089-4af6-bd4d-0d59f7a76cb4","9b34581a-955a-4229-99d0-8f2a6d0e69ce","b4414811-0599-45cf-b047-fa95eac42d89","c28a8a01-911a-40a2-a607-d3af8cb24017","461d07ae-4b4a-49de-bdcb-341af1153201","3df59023-cb68-4a65-afd1-7f0b8c21cb57","0e3223d1-03df-40fb-90f9-cc8559d776b5","4f45b7d6-cd5b-46ab-b2a6-37ae20bf5f21","fa475a21-5f38-43d4-9a89-67c40b3129ae","97cbc634-fe3a-4b9b-9da6-ac4aaa94772f","8a0d34bc-7e8c-4a68-88a5-5276274f612a","623f8788-a20f-45fd-bb82-08935f59b44d","7ee398f0-450b-47cb-9b53-f5e7736590d2","eae9f077-591e-4841-903b-db395513c834","367d0f2a-0b10-4dbb-b53a-613152f124f9","398e2e28-3997-49bc-a138-0467d4da8531","8aaf4633-e879-44dc-82c8-3c9fb9d3a6f8","1eb5e5f2-8dc9-4ffc-b5e1-09b67be27a83","83465fb9-205b-41fc-83a6-424692ee0a0e","fb1d18d0-6403-4e8a-840e-134553748ff5","4407cb77-3838-4ba5-b474-f15222cd3dba","1880b0f2-e036-42d0-9550-0fb08a962397","d8d60bd6-33f6-458f-a7d6-209ef2fb05a1","29bf65ff-888b-4a76-a8dd-bf54f02c3864","bad1d4ae-fd4a-4671-ae94-dd53d94e0eae","0d59792d-db1c-4ae7-8d7c-4f013be40dcf","337dc259-2805-4b1c-a60f-1b3e6c7badb8","4b1b21a8-c278-4bc6-88f1-1a35d407f4d7","7946aba2-d6d0-45ef-8779-23fa15db8f2d","c18dbce6-9e8c-4f4b-b74a-0994e7c1bc3f","84aa87b7-39e7-493c-87b9-5cae4de95449","1446eadb-8c01-4295-be3a-ecf19361c143","fe8a7d94-e9ba-457d-8f19-10fe53e6ca3c","98a5a0b6-b07b-4065-a73f-2949ad28ac47","099219ec-fb4b-459d-a538-f6c3d54f6ca2","e047becf-e696-42e3-84c9-4f6278c844ae","975051d4-ebbc-4b3f-98cf-1a52e5e4761d","e5d98bee-b2d5-4b45-ab0b-b77da24aebe7","acac2668-1062-4e7a-b095-eda067da8413","179025c4-d8a8-4c47-b621-9fd6a6f3339b","d256e5ed-5eac-43bb-a32e-581774962c23","b843dacf-b655-4b1c-a61c-434b67f18154","56a80c2d-0520-415a-a77a-1db82eff0b3a","9c40a253-b9e8-42cd-8a99-62aaa9789a5e","d3a05020-0948-489a-80ac-fedebc035c58","0ee4f3e9-0451-411f-b903-0c83d30e5b67","769f1163-e45e-4c3b-87a7-3b551895d9be","7e217dcd-e4e5-4bcd-b2de-00fcb5ab7fba","28e3d2f6-abb8-4711-b21e-ce1937e3e546","04d4f00b-9608-4d83-949e-b32313ace34e","41f93fa3-0496-4ea7-8ac3-0a8beaf346da","f0db9e3e-0e99-4465-ae65-6a9a8d8a6468","279e794f-519c-44f5-ab04-422fba916b72","f0b2f8a5-7dfd-48dc-ba1f-419a7fda1fff","e874f269-1938-40be-974b-2e499c1f4590","65265d92-050f-4fb5-b529-a514079cdd83","5fc98358-411a-40d7-a5d0-c4089026ca1f","15fcd77a-6097-4ee9-9835-9d6e85897fd6","6f8b1275-2d88-40e2-b76b-375f3c028b03","33273042-efcc-45bc-8f28-b65a1c2c65ad","c18bd396-be21-4ce2-ab22-32a45c28e37f","ba597bcf-7582-4fd2-8049-6333ef3e4453","4edecef8-106d-489d-be1d-d1b528c4cdc9","b03b3109-e900-4daf-b852-a590324ab747","8cba5326-9daa-4c2c-b763-5476dc8a7a91","9ab4aa63-ce81-415f-bf95-e632006a1aea","e3644bfb-4244-4a82-a7d7-d7cdb65aa1ed","b6a1f5b5-febd-4c26-9e29-520290eb5719","51e53e64-e6dd-4fd6-8062-5d4455f0a1cb","f4ec684b-e5f1-44e9-a8a7-aca27f7ca6f3","177fa228-9099-4dd5-8969-c67f9c78bd0c","d5ab0d7a-0123-473f-84d4-81740defb9b4","548f6d36-c509-4b79-9c4b-59f227c7f550","c0901673-4f5e-4e51-ad87-0217f2d33a0c","0787f8d6-dc99-47c6-946e-2b008814bebc","0ade5216-1103-486a-aff0-a709ff825b02","a2c4dd21-985c-497d-b421-c2d8a9ec0eeb","908a498c-f7e3-4668-8afd-f179a027b4d9","4945e5c3-033d-467c-a8b3-b1479c1fdf0a","854f4584-28d5-43bd-938e-88d0957c78e3","6a6574f8-d63d-4fed-99c5-38f3df0364ac","5639d091-037c-4284-8260-ade765dbbc90","c9669745-2229-4d95-89a1-8f008e8bebc6","78ebe658-6ba5-4478-a53c-ad468984e7e3","c7f44558-498f-44bd-a8a3-504955dde6b1","d928387b-107b-4f27-b0c5-75301ed7fc55","833556aa-d685-488c-88d0-b136b456ff5f","0bfe1b9e-b115-49f4-9279-7b106f7661af","1465efce-6026-4d50-a952-1aff8c10dea1","f8f308d6-f4c4-4b0f-b7a3-df78d41ce55d","ebd71155-4a59-46a0-bbb2-40687ddbcf9d","29fc49e0-b597-4f2e-9d53-b7dd247adf4b","692194e6-08d3-4e36-a94f-dc403d6226e6","da9db882-26ea-4516-815c-75f2f9ddab59","9a08823e-eec6-4cc0-9ec8-890cb0650aa7","f7327b98-b06a-423a-8b9f-646e5ba2123f","a6c3c98f-9ef9-45de-9d52-4baec7327464","9d18b689-cdc2-4d3f-81da-a690c700caee","6ad26f7b-1828-4d64-a948-3cc6367f6901","3927ece3-9931-46e8-8e7e-91d5e0b5c326","f6ba5dfd-5000-4e15-80b4-7d3456bc676a","0c0d5bfd-8642-460a-aedc-5a8277725196","3dd5dfcc-005c-49b5-9cca-96ccded25899","9faa9c16-825a-40c0-898f-7b9f31c30722","75cd1dc0-c250-437f-bb87-62fda63ed092","7af0f28c-2ee3-4083-9df0-1790796cac80","62ece551-8a43-4a55-9c1c-307fd527381e","74120379-4bfb-4a08-b92f-c971f1369359","4bdc3c4d-327e-49bf-8792-760253dfed83","ff7b6fa3-510b-4ba1-9caa-9f8b4771a90e","fd036365-88c0-4feb-8482-6b4298cacdcc"],"query2":{"filter":{"operator":"and"},"aggregations":[{"property":"title","aggregator":"count"}]},"space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"},"role":"reader"}},"notion_user":{},"collection_query":{},"signed_urls":{"9d043aab-62c7-4341-baef-3d6b210f1252":"https://file.notion.so/f/f/b0a64676-90b9-4734-9c63-2d704ee573b6/7681e621-373a-445c-a704-86c32fbbe504/Untitled.png?id=9d043aab-62c7-4341-baef-3d6b210f1252\u0026table=block\u0026spaceId=b0a64676-90b9-4734-9c63-2d704ee573b6\u0026expirationTimestamp=1713952800000\u0026signature=MVKqRhzEMLfBZD_mmeC8ySKl2Ekfje0ZKgd80RGW9Fk","124728a9-cc62-4de3-9758-3398b178a9a4":"https://file.notion.so/f/f/b0a64676-90b9-4734-9c63-2d704ee573b6/6edfdff8-7924-4a86-af03-601e0d1295d8/Untitled.png?id=124728a9-cc62-4de3-9758-3398b178a9a4\u0026table=block\u0026spaceId=b0a64676-90b9-4734-9c63-2d704ee573b6\u0026expirationTimestamp=1713952800000\u0026signature=us_8tlmflXcK3B3lqHMRPRK-mu8t6bL2Nujbs85troo","cf07b1b8-3d4c-447a-b9d5-fabd277ebbf8":"https://file.notion.so/f/f/b0a64676-90b9-4734-9c63-2d704ee573b6/e834e911-c53c-47ea-8bad-3b1140ca5669/Untitled.png?id=cf07b1b8-3d4c-447a-b9d5-fabd277ebbf8\u0026table=block\u0026spaceId=b0a64676-90b9-4734-9c63-2d704ee573b6\u0026expirationTimestamp=1713952800000\u0026signature=_GQA2zAxWzeXeh1PlxUbvMlHtP0LBAqe5CsfhzQLnL0","d4677c74-9003-44a0-9ee3-a6469a9ba674":"https://file.notion.so/f/f/b0a64676-90b9-4734-9c63-2d704ee573b6/9c2cf83f-99ef-4208-a363-9fccd73e901d/Untitled.png?id=d4677c74-9003-44a0-9ee3-a6469a9ba674\u0026table=block\u0026spaceId=b0a64676-90b9-4734-9c63-2d704ee573b6\u0026expirationTimestamp=1713952800000\u0026signature=g_5hN4y1AdOY5_TLNKCVixbnFJwPOfC6s3HPzJB4Zo0","8a0b69b2-1b80-400d-bf7b-0afa526856ce":"https://file.notion.so/f/f/b0a64676-90b9-4734-9c63-2d704ee573b6/5a6d95b7-b607-4a5d-aa27-0f6e27444192/Untitled.png?id=8a0b69b2-1b80-400d-bf7b-0afa526856ce\u0026table=block\u0026spaceId=b0a64676-90b9-4734-9c63-2d704ee573b6\u0026expirationTimestamp=1713952800000\u0026signature=PMHXXICYN1HLMOnFihbrzg9oyl3ZTfIdW1onJnpKdxw","cea8a144-1cdf-4106-9a8d-00c1887ef4bc":"https://file.notion.so/f/f/b0a64676-90b9-4734-9c63-2d704ee573b6/7f20c898-fe4d-400c-b525-3c509c1bf946/Untitled.png?id=cea8a144-1cdf-4106-9a8d-00c1887ef4bc\u0026table=block\u0026spaceId=b0a64676-90b9-4734-9c63-2d704ee573b6\u0026expirationTimestamp=1713952800000\u0026signature=PCn8bCu6MAekUdAJpljfybNeSkwdkYdgXrDokKJHGmA","cc8a1be2-10c9-40fc-9610-203141f9782e":"https://file.notion.so/f/f/b0a64676-90b9-4734-9c63-2d704ee573b6/a00d5828-549c-417d-ac5e-7ec6152606e1/Untitled.png?id=cc8a1be2-10c9-40fc-9610-203141f9782e\u0026table=block\u0026spaceId=b0a64676-90b9-4734-9c63-2d704ee573b6\u0026expirationTimestamp=1713952800000\u0026signature=SrOkL1k6adcjAhmFm0z9CZ7pdrFP1ydEwJZNnbobyfM","82f6009c-67f8-4cb8-aadc-9e6e433baada":"https://file.notion.so/f/f/b0a64676-90b9-4734-9c63-2d704ee573b6/f490f8b3-5d4f-43ae-8d96-336e5d1ab1eb/Untitled.png?id=82f6009c-67f8-4cb8-aadc-9e6e433baada\u0026table=block\u0026spaceId=b0a64676-90b9-4734-9c63-2d704ee573b6\u0026expirationTimestamp=1713952800000\u0026signature=8TIgOaNAtEuIg4fOj8G8TP7gbfe3gTnn9tRjpl8ZYz0","4df2db4c-d471-46cd-9131-4b52e48c08bf":"https://file.notion.so/f/f/b0a64676-90b9-4734-9c63-2d704ee573b6/e03a0881-0eb5-411d-8aea-2582c70605c3/Untitled.png?id=4df2db4c-d471-46cd-9131-4b52e48c08bf\u0026table=block\u0026spaceId=b0a64676-90b9-4734-9c63-2d704ee573b6\u0026expirationTimestamp=1713952800000\u0026signature=iMYG4wTafgiRvf5Xm36mlzEsKpN7wHg6zhP7xz9G3xo","c991985d-e58f-42d0-82ba-40d64f4fbd68":"https://file.notion.so/f/f/b0a64676-90b9-4734-9c63-2d704ee573b6/82554cf9-ae62-4d00-9568-34f61646ee5d/Untitled.png?id=c991985d-e58f-42d0-82ba-40d64f4fbd68\u0026table=block\u0026spaceId=b0a64676-90b9-4734-9c63-2d704ee573b6\u0026expirationTimestamp=1713952800000\u0026signature=0XVAySMWt_UYaYTH-SfWqjQ39q67undgWJ_ulpdrHTw","f84e73ed-0d37-4e7d-94e3-2a6b02ab3c3b":"https://file.notion.so/f/f/b0a64676-90b9-4734-9c63-2d704ee573b6/caec3efc-50be-4267-8950-c832ffdce96d/Untitled.png?id=f84e73ed-0d37-4e7d-94e3-2a6b02ab3c3b\u0026table=block\u0026spaceId=b0a64676-90b9-4734-9c63-2d704ee573b6\u0026expirationTimestamp=1713952800000\u0026signature=ip5rrJ2mj-mpnm1pbYWVa3cXRRMnA_zdc74sT9RVVK0","57fd0807-a627-4ee8-ac88-f5d30e72b93f":"https://file.notion.so/f/f/b0a64676-90b9-4734-9c63-2d704ee573b6/10706838-b00e-432d-8385-0c19e6651ab8/Untitled.png?id=57fd0807-a627-4ee8-ac88-f5d30e72b93f\u0026table=block\u0026spaceId=b0a64676-90b9-4734-9c63-2d704ee573b6\u0026expirationTimestamp=1713952800000\u0026signature=TVaqSZu3amVftcGd5hb2KCFXp9VXAF4S3Ci5ec1i74Y","8a261947-4509-440f-a43e-832129934122":"https://file.notion.so/f/f/b0a64676-90b9-4734-9c63-2d704ee573b6/3b91e404-14d1-4692-9e0b-e70451b2b53b/Untitled.png?id=8a261947-4509-440f-a43e-832129934122\u0026table=block\u0026spaceId=b0a64676-90b9-4734-9c63-2d704ee573b6\u0026expirationTimestamp=1713952800000\u0026signature=UzhWG_2n6Fh1T6m0F0q_Z0-V1YnUDynZH-t4Xwt_OZU","401867f1-2f7a-4574-a900-f68040526787":"https://file.notion.so/f/f/b0a64676-90b9-4734-9c63-2d704ee573b6/ea7ffad4-43e0-4c1c-8887-becf34d9206b/Untitled.png?id=401867f1-2f7a-4574-a900-f68040526787\u0026table=block\u0026spaceId=b0a64676-90b9-4734-9c63-2d704ee573b6\u0026expirationTimestamp=1713952800000\u0026signature=BQnKtoBToOCx_TQYhnoHq0KBLT3U9dXVQbmTqOCa3lA","e2c2399f-7c48-4379-a8ef-17112346f717":"https://file.notion.so/f/f/b0a64676-90b9-4734-9c63-2d704ee573b6/9cc16888-a208-4ca6-b6e6-94f6ebe10a23/Untitled.png?id=e2c2399f-7c48-4379-a8ef-17112346f717\u0026table=block\u0026spaceId=b0a64676-90b9-4734-9c63-2d704ee573b6\u0026expirationTimestamp=1713952800000\u0026signature=oaHCBzN7a_TVB0zzqORSrQkCW0nEDAiOTGOhFGsOWA0","1fa2877c-dfd9-48d3-b249-778e9fe611d5":"https://file.notion.so/f/f/b0a64676-90b9-4734-9c63-2d704ee573b6/167f1986-dbbd-4b21-93e1-241e29afea1c/Untitled.png?id=1fa2877c-dfd9-48d3-b249-778e9fe611d5\u0026table=block\u0026spaceId=b0a64676-90b9-4734-9c63-2d704ee573b6\u0026expirationTimestamp=1713952800000\u0026signature=F9TP_OPUALXYeRmJgm07iTV7k3rOMFhIUYAqRNzDVnA","302c8773-dcec-4a3b-bc24-09206dea5338":"https://file.notion.so/f/f/b0a64676-90b9-4734-9c63-2d704ee573b6/78784afb-ac4d-401b-a2a2-efaedac9ac4d/Untitled.png?id=302c8773-dcec-4a3b-bc24-09206dea5338\u0026table=block\u0026spaceId=b0a64676-90b9-4734-9c63-2d704ee573b6\u0026expirationTimestamp=1713952800000\u0026signature=4veA95LX3r3MiBxqva2Fkl0v0yzUFqEPMF4OjdHYe2o","b573f6d8-0345-482e-95a1-9fbbddc60930":"https://file.notion.so/f/f/b0a64676-90b9-4734-9c63-2d704ee573b6/b487cc45-3e57-4ac6-8c80-a319e9288b53/Untitled.png?id=b573f6d8-0345-482e-95a1-9fbbddc60930\u0026table=block\u0026spaceId=b0a64676-90b9-4734-9c63-2d704ee573b6\u0026expirationTimestamp=1713952800000\u0026signature=ASMUaLrbOfag2JlaYGTFRn_0m7CkhuCGbSLjRDt2EtE","db23380e-7284-4779-abd4-89561a757af7":"https://file.notion.so/f/f/b0a64676-90b9-4734-9c63-2d704ee573b6/3e4ab1ab-91cd-48a6-b15f-e1e80dd1f5ce/Untitled.png?id=db23380e-7284-4779-abd4-89561a757af7\u0026table=block\u0026spaceId=b0a64676-90b9-4734-9c63-2d704ee573b6\u0026expirationTimestamp=1713952800000\u0026signature=GHhhlXGwouym1YxV4MT73I8NRqlX6HTXtf2rL4_xpWg","477b50b8-b362-41b2-8d51-5404e8514c2a":"https://file.notion.so/f/f/b0a64676-90b9-4734-9c63-2d704ee573b6/b78d8290-821b-40e4-9cf5-6d157fe553cd/Untitled.png?id=477b50b8-b362-41b2-8d51-5404e8514c2a\u0026table=block\u0026spaceId=b0a64676-90b9-4734-9c63-2d704ee573b6\u0026expirationTimestamp=1713952800000\u0026signature=rr8gFAQFiMqOqhq9RkzifyxMw3TpgEaDLeFVCoUfCe8","38c14760-7e02-4b50-a6a5-9f62d3c3c4c5":"https://file.notion.so/f/f/b0a64676-90b9-4734-9c63-2d704ee573b6/1ee72dc0-fc95-4e39-be94-dd93d13a63ce/Untitled.png?id=38c14760-7e02-4b50-a6a5-9f62d3c3c4c5\u0026table=block\u0026spaceId=b0a64676-90b9-4734-9c63-2d704ee573b6\u0026expirationTimestamp=1713952800000\u0026signature=ipebjg1UoGS9o0HNqoxnbtgY-4JNPCC42l_6XotTkcM","5d4fd76d-330b-4d0a-859a-bbccb4d39f52":"https://file.notion.so/f/f/b0a64676-90b9-4734-9c63-2d704ee573b6/34b4c95b-c79d-43c9-af56-0fd2345295df/Untitled.png?id=5d4fd76d-330b-4d0a-859a-bbccb4d39f52\u0026table=block\u0026spaceId=b0a64676-90b9-4734-9c63-2d704ee573b6\u0026expirationTimestamp=1713952800000\u0026signature=IHMQLQFR0jenVny_jzAcSCXDBbw2XINmAeVOHPF4gKs","9845f5bc-d67c-44bb-94a8-2375755e608b":"https://file.notion.so/f/f/b0a64676-90b9-4734-9c63-2d704ee573b6/029886d0-76bb-4773-8437-53aef0ab054a/Untitled.png?id=9845f5bc-d67c-44bb-94a8-2375755e608b\u0026table=block\u0026spaceId=b0a64676-90b9-4734-9c63-2d704ee573b6\u0026expirationTimestamp=1713952800000\u0026signature=9PHq_0S2tAMbxtrOOLi-LOgzL3ya2D7OJvvlz9p3RwE","0baaeea6-d888-4cb6-b2f2-701ec261984f":"https://file.notion.so/f/f/b0a64676-90b9-4734-9c63-2d704ee573b6/12f36acf-24b1-49f0-b4c9-ad0642441967/Untitled.png?id=0baaeea6-d888-4cb6-b2f2-701ec261984f\u0026table=block\u0026spaceId=b0a64676-90b9-4734-9c63-2d704ee573b6\u0026expirationTimestamp=1713952800000\u0026signature=FbPrNKhZpyMp86fUWfJoxrgSmizFIiPCTE-wJy8E-Is","5e6eb3a3-ab63-47e8-8308-6ffe748d71dc":"https://file.notion.so/f/f/b0a64676-90b9-4734-9c63-2d704ee573b6/dcf05123-69b7-410c-b4c9-9600cda694b9/Untitled.png?id=5e6eb3a3-ab63-47e8-8308-6ffe748d71dc\u0026table=block\u0026spaceId=b0a64676-90b9-4734-9c63-2d704ee573b6\u0026expirationTimestamp=1713952800000\u0026signature=HAlbXOe_cl7Ie68qEpnNI1f5HGGEt33SgLIDQAdno_Q","5ef27c51-6fc5-4b36-a7fc-7ccf0dec799a":"https://file.notion.so/f/f/b0a64676-90b9-4734-9c63-2d704ee573b6/93f7a1bf-68c5-41b1-8274-a98fd511b499/Untitled.png?id=5ef27c51-6fc5-4b36-a7fc-7ccf0dec799a\u0026table=block\u0026spaceId=b0a64676-90b9-4734-9c63-2d704ee573b6\u0026expirationTimestamp=1713952800000\u0026signature=EOfOQQBpAAr-2Yp9HCkEplfNH7AWVrjoWNsgPyI2m7U","09162450-c3d7-4b75-99da-417e066a583a":"https://file.notion.so/f/f/b0a64676-90b9-4734-9c63-2d704ee573b6/836f4bf6-2562-4e28-b81e-9747adf09bd6/Untitled.png?id=09162450-c3d7-4b75-99da-417e066a583a\u0026table=block\u0026spaceId=b0a64676-90b9-4734-9c63-2d704ee573b6\u0026expirationTimestamp=1713952800000\u0026signature=_GoNzP4vJrkCWNkb5GftnkVxDTMFlb_28s4aHqKzyNs","2101b3de-0747-477c-9a74-18aa2da46bff":"https://file.notion.so/f/f/b0a64676-90b9-4734-9c63-2d704ee573b6/5b92c6a8-938e-4b27-944c-705a46a583e4/Untitled.png?id=2101b3de-0747-477c-9a74-18aa2da46bff\u0026table=block\u0026spaceId=b0a64676-90b9-4734-9c63-2d704ee573b6\u0026expirationTimestamp=1713952800000\u0026signature=2MJuAnPMJqEL9sZqiY0C92Zrn-WFY_pKjbkcGDEcey4"}},"emailHash":"d54f099771ff5f17709b76693f693e2e"},"__N_SSG":true},"page":"/[slug]","query":{"slug":"trace-diagrams"},"buildId":"1f_cT2njQHlHXsSNMTqKM","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>