<!DOCTYPE html><html lang="zh-CN"><head><meta name="viewport" content="width=device-width"/><title>å¼€å‘æ•£æ–‡ï¼šä½¿ç”¨ Python ä»¥ UDP åè®®å‘é€ Prometheus æŒ‡æ ‡æ•°æ®</title><meta name="robots" content="follow, index"/><meta charSet="UTF-8"/><meta name="keywords" content="Blog, Notion, Tech, Python, Django"/><meta name="description" content="å½¢æ•£ç¥ä¸æ•£ï¼Œè®°å½•å¼€å‘æ€è·¯"/><meta property="og:locale" content="zh-CN"/><meta property="og:title" content="å¼€å‘æ•£æ–‡ï¼šä½¿ç”¨ Python ä»¥ UDP åè®®å‘é€ Prometheus æŒ‡æ ‡æ•°æ®"/><meta property="og:description" content="å½¢æ•£ç¥ä¸æ•£ï¼Œè®°å½•å¼€å‘æ€è·¯"/><meta property="og:url" content="https://next.emergencyexit.xyz/"/><meta property="og:image" content="https://og-image-craigary.vercel.app/%E5%BC%80%E5%8F%91%E6%95%A3%E6%96%87%EF%BC%9A%E4%BD%BF%E7%94%A8%20Python%20%E4%BB%A5%20UDP%20%E5%8D%8F%E8%AE%AE%E5%8F%91%E9%80%81%20Prometheus%20%E6%8C%87%E6%A0%87%E6%95%B0%E6%8D%AE.png?theme=dark&amp;md=1&amp;fontSize=125px&amp;images=https%3A%2F%2Fnobelium.vercel.app%2Flogo-for-dark-bg.svg"/><meta property="og:type" content="article"/><meta name="twitter:card" content="summary_large_image"/><meta name="twitter:description" content="å½¢æ•£ç¥ä¸æ•£ï¼Œè®°å½•å¼€å‘æ€è·¯"/><meta name="twitter:title" content="å¼€å‘æ•£æ–‡ï¼šä½¿ç”¨ Python ä»¥ UDP åè®®å‘é€ Prometheus æŒ‡æ ‡æ•°æ®"/><meta name="twitter:image" content="https://og-image-craigary.vercel.app/%E5%BC%80%E5%8F%91%E6%95%A3%E6%96%87%EF%BC%9A%E4%BD%BF%E7%94%A8%20Python%20%E4%BB%A5%20UDP%20%E5%8D%8F%E8%AE%AE%E5%8F%91%E9%80%81%20Prometheus%20%E6%8C%87%E6%A0%87%E6%95%B0%E6%8D%AE.png?theme=dark&amp;md=1&amp;fontSize=125px&amp;images=https%3A%2F%2Fnobelium.vercel.app%2Flogo-for-dark-bg.svg"/><meta property="article:published_time"/><meta property="article:author" content="bluesyu"/><meta name="next-head-count" content="18"/><link rel="preload" href="/fonts/IBMPlexSansVar-Roman.woff2" as="font" type="font/woff2" crossorigin="anonymous"/><link rel="preload" href="/fonts/IBMPlexSansVar-Italic.woff2" as="font" type="font/woff2" crossorigin="anonymous"/><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="anonymous"/><link rel="preload" as="style" data-href="https://fonts.googleapis.com/css2?family=Noto+Sans+SC:wght@400;500;700&amp;display=swap"/><link rel="stylesheet" data-href="https://fonts.googleapis.com/css2?family=Noto+Sans+SC:wght@400;500;700&amp;display=swap"/><noscript><link rel="stylesheet" data-href="https://fonts.googleapis.com/css2?family=Noto+Sans+SC:wght@400;500;700&amp;display=swap"/></noscript><link rel="icon" href="/favicon.svg" type="image/svg+xml"/><link rel="icon" href="/favicon.ico"/><link rel="apple-touch-icon" sizes="192x192" href="/apple-touch-icon.png"/><link rel="alternate" type="application/rss+xml" title="RSS 2.0" href="/feed"/><meta name="theme-color" content="#ffffff" media="(prefers-color-scheme: light)"/><meta name="theme-color" content="#18181B" media="(prefers-color-scheme: dark)"/><link rel="preload" href="/_next/static/css/8e8bd7c50b2739f5.css" as="style"/><link rel="stylesheet" href="/_next/static/css/8e8bd7c50b2739f5.css" data-n-g=""/><link rel="preload" href="/_next/static/css/6a5815369e10547f.css" as="style"/><link rel="stylesheet" href="/_next/static/css/6a5815369e10547f.css" data-n-p=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-5cd94c89d3acac5f.js"></script><script src="/_next/static/chunks/webpack-c0a56147c8fcef8f.js" defer=""></script><script src="/_next/static/chunks/main-e557dee8cfeafd6c.js" defer=""></script><script src="/_next/static/chunks/pages/_app-6b8bcc68cb80bb32.js" defer=""></script><script src="/_next/static/chunks/b5f2ed29-08db60af0c3043ba.js" defer=""></script><script src="/_next/static/chunks/684-63c1a25e215d8bed.js" defer=""></script><script src="/_next/static/chunks/580-c0214944b9e37cce.js" defer=""></script><script src="/_next/static/chunks/pages/%5Bslug%5D-a74a3e35dd0f9ee9.js" defer=""></script><script src="/_next/static/g414gbnn7WeHe2sFVh_rV/_buildManifest.js" defer=""></script><script src="/_next/static/g414gbnn7WeHe2sFVh_rV/_ssgManifest.js" defer=""></script><script src="/_next/static/g414gbnn7WeHe2sFVh_rV/_middlewareManifest.js" defer=""></script><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Noto+Sans+SC:wght@400;500;700&display=swap"/></head><body class="bg-day dark:bg-night"><div id="__next" data-reactroot=""><div><div class="wrapper font-sans"><div class="observer-element h-4 md:h-12"></div><div class="sticky-nav m-auto w-full h-6 flex flex-row justify-between items-center mb-2 md:mb-12 py-8 bg-opacity-60 max-w-3xl px-4" id="sticky-nav"><div class="flex items-center"><a aria-label="å¸ƒé²æ–¯é±¼çš„å¦™æƒ³å¤©å¼€" href="/"><div class="h-6"><svg width="28" height="28" viewBox="0 0 28 28" fill="none" xmlns="http://www.w3.org/2000/svg"><circle cx="14" cy="14" r="14" class="fill-current text-black dark:text-white"></circle><circle cx="14" cy="14" r="14" fill="url(#paint0_radial)"></circle><circle cx="8" cy="8" r="2" fill="white"></circle><defs><radialGradient id="paint0_radial" cx="0" cy="0" r="1" gradientUnits="userSpaceOnUse" gradientTransform="rotate(45) scale(39.598)"><stop stop-color="#7FF72A" stop-opacity="1"></stop><stop offset="1" stop-color="#001FCC" stop-opacity="0.1"></stop></radialGradient></defs></svg></div></a><p class="ml-2 font-medium text-day dark:text-night header-name">å¼€å‘æ•£æ–‡ï¼šä½¿ç”¨ Python ä»¥ UDP åè®®å‘é€ Prometheus æŒ‡æ ‡æ•°æ®</p></div><div class="flex-shrink-0"><ul class="flex flex-row"><li class="block ml-4 text-black dark:text-gray-50 nav"><a href="/about">å…³äº</a></li><li class="block ml-4 text-black dark:text-gray-50 nav"><a href="/search">æœç´¢</a></li></ul></div></div><main class="m-auto flex-grow w-full transition-all max-w-3xl px-4"><article><h1 class="font-bold text-3xl text-black dark:text-white">ğŸ–‹ï¸<!-- --> <!-- -->å¼€å‘æ•£æ–‡ï¼šä½¿ç”¨ Python ä»¥ UDP åè®®å‘é€ Prometheus æŒ‡æ ‡æ•°æ®</h1><nav class="flex mt-7 items-start text-gray-500 dark:text-gray-400"><div class="flex mb-4"><a href="https://twitter.com/bluesedenyu" class="flex"><span style="box-sizing:border-box;display:inline-block;overflow:hidden;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;position:relative;max-width:100%"><span style="box-sizing:border-box;display:block;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;max-width:100%"><img style="display:block;max-width:100%;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0" alt="" aria-hidden="true" src="data:image/svg+xml,%3csvg%20xmlns=%27http://www.w3.org/2000/svg%27%20version=%271.1%27%20width=%2724%27%20height=%2724%27/%3e"/></span><img alt="bluesyu" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" decoding="async" data-nimg="intrinsic" class="rounded-full" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%"/><noscript><img alt="bluesyu" srcSet="https://gravatar.com/avatar/d54f099771ff5f17709b76693f693e2e?imwidth=32 1x, https://gravatar.com/avatar/d54f099771ff5f17709b76693f693e2e?imwidth=48 2x" src="https://gravatar.com/avatar/d54f099771ff5f17709b76693f693e2e?imwidth=48" decoding="async" data-nimg="intrinsic" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%" class="rounded-full" loading="lazy"/></noscript></span><p class="ml-2 md:block">bluesyu</p></a><span class="block">Â /Â </span></div><div class="mr-2 mb-4 md:ml-0">2022 å¹´ 11 æœˆ 11 æ—¥</div><div class="flex flex-nowrap max-w-full overflow-x-auto article-tags"><a href="/tag/python"><p class="mr-1 rounded-full px-2 py-1 border leading-none text-sm dark:border-gray-600">python</p></a><a href="/tag/tech"><p class="mr-1 rounded-full px-2 py-1 border leading-none text-sm dark:border-gray-600">tech</p></a><a href="/tag/prometheus"><p class="mr-1 rounded-full px-2 py-1 border leading-none text-sm dark:border-gray-600">prometheus</p></a><a href="/tag/udp"><p class="mr-1 rounded-full px-2 py-1 border leading-none text-sm dark:border-gray-600">udp</p></a></div><div> <img src="https://images.unsplash.com/photo-1596484552834-6a58f850e0a1?ixlib=rb-4.0.3&amp;q=80&amp;fm=jpg&amp;crop=entropy&amp;cs=tinysrgb"/> </div></nav><div class="-mt-4"><main class="notion light-mode notion-page notion-block-3dd5dfcc005c49b59cca96ccded25899"><div class="notion-viewport"></div><div class="notion-collection-row"><div class="notion-collection-row-body"><div class="notion-collection-row-property"><div class="notion-collection-column-title"><svg viewBox="0 0 14 14" class="notion-collection-column-title-icon"><path d="M10.889 5.5H3.11v1.556h7.778V5.5zm1.555-4.444h-.777V0H10.11v1.056H3.89V0H2.333v1.056h-.777c-.864 0-1.548.7-1.548 1.555L0 12.5c0 .856.692 1.5 1.556 1.5h10.888C13.3 14 14 13.356 14 12.5V2.611c0-.855-.7-1.555-1.556-1.555zm0 11.444H1.556V3.944h10.888V12.5zM8.556 8.611H3.11v1.556h5.445V8.61z"></path></svg><div class="notion-collection-column-title-body">date</div></div><div class="notion-collection-row-value"><span class="notion-property notion-property-date">Nov 11, 2022</span></div></div><div class="notion-collection-row-property"><div class="notion-collection-column-title"><svg viewBox="0 0 14 14" class="notion-collection-column-title-icon"><path d="M7 4.568a.5.5 0 00-.5-.5h-6a.5.5 0 00-.5.5v1.046a.5.5 0 00.5.5h6a.5.5 0 00.5-.5V4.568zM.5 1a.5.5 0 00-.5.5v1.045a.5.5 0 00.5.5h12a.5.5 0 00.5-.5V1.5a.5.5 0 00-.5-.5H.5zM0 8.682a.5.5 0 00.5.5h11a.5.5 0 00.5-.5V7.636a.5.5 0 00-.5-.5H.5a.5.5 0 00-.5.5v1.046zm0 3.068a.5.5 0 00.5.5h9a.5.5 0 00.5-.5v-1.045a.5.5 0 00-.5-.5h-9a.5.5 0 00-.5.5v1.045z"></path></svg><div class="notion-collection-column-title-body">slug</div></div><div class="notion-collection-row-value"><span class="notion-property notion-property-text">python-udp-prom-aggregation-gateway</span></div></div><div class="notion-collection-row-property"><div class="notion-collection-column-title"><svg viewBox="0 0 14 14" class="notion-collection-column-title-icon"><path d="M7 13A6 6 0 107 1a6 6 0 000 12zM3.751 5.323A.2.2 0 013.909 5h6.182a.2.2 0 01.158.323L7.158 9.297a.2.2 0 01-.316 0L3.751 5.323z"></path></svg><div class="notion-collection-column-title-body">status</div></div><div class="notion-collection-row-value"><span class="notion-property notion-property-select"><div class="notion-property-select-item notion-item-red">Published</div></span></div></div><div class="notion-collection-row-property"><div class="notion-collection-column-title"><svg viewBox="0 0 14 14" class="notion-collection-column-title-icon"><path d="M4 3a1 1 0 011-1h7a1 1 0 110 2H5a1 1 0 01-1-1zm0 4a1 1 0 011-1h7a1 1 0 110 2H5a1 1 0 01-1-1zm0 4a1 1 0 011-1h7a1 1 0 110 2H5a1 1 0 01-1-1zM2 4a1 1 0 110-2 1 1 0 010 2zm0 4a1 1 0 110-2 1 1 0 010 2zm0 4a1 1 0 110-2 1 1 0 010 2z"></path></svg><div class="notion-collection-column-title-body">tags</div></div><div class="notion-collection-row-value"><span class="notion-property notion-property-multi_select"><div class="notion-property-multi_select-item notion-item-brown">python</div><div class="notion-property-multi_select-item notion-item-orange">tech</div><div class="notion-property-multi_select-item notion-item-green">prometheus</div><div class="notion-property-multi_select-item notion-item-brown">udp</div></span></div></div><div class="notion-collection-row-property"><div class="notion-collection-column-title"><svg viewBox="0 0 14 14" class="notion-collection-column-title-icon"><path d="M7 4.568a.5.5 0 00-.5-.5h-6a.5.5 0 00-.5.5v1.046a.5.5 0 00.5.5h6a.5.5 0 00.5-.5V4.568zM.5 1a.5.5 0 00-.5.5v1.045a.5.5 0 00.5.5h12a.5.5 0 00.5-.5V1.5a.5.5 0 00-.5-.5H.5zM0 8.682a.5.5 0 00.5.5h11a.5.5 0 00.5-.5V7.636a.5.5 0 00-.5-.5H.5a.5.5 0 00-.5.5v1.046zm0 3.068a.5.5 0 00.5.5h9a.5.5 0 00.5-.5v-1.045a.5.5 0 00-.5-.5h-9a.5.5 0 00-.5.5v1.045z"></path></svg><div class="notion-collection-column-title-body">summary</div></div><div class="notion-collection-row-value"><span class="notion-property notion-property-text">å½¢æ•£ç¥ä¸æ•£ï¼Œè®°å½•å¼€å‘æ€è·¯</span></div></div><div class="notion-collection-row-property"><div class="notion-collection-column-title"><svg viewBox="0 0 14 14" class="notion-collection-column-title-icon"><path d="M7 13A6 6 0 107 1a6 6 0 000 12zM3.751 5.323A.2.2 0 013.909 5h6.182a.2.2 0 01.158.323L7.158 9.297a.2.2 0 01-.316 0L3.751 5.323z"></path></svg><div class="notion-collection-column-title-body">type</div></div><div class="notion-collection-row-value"><span class="notion-property notion-property-select"><div class="notion-property-select-item notion-item-purple">Post</div></span></div></div></div></div><blockquote class="notion-quote notion-block-3aa324746d59444eb61271b45a85531b">å¼€å‘æ•£æ–‡ï¼šä»¥å¼€å‘ä¸ºä¸»é¢˜çš„æ•£æ–‡ã€‚åŸºæœ¬å®Œæ•´å¤ç°äº†ä»é‡åˆ°é—®é¢˜ã€åˆ†æé—®é¢˜ã€æ‰¾åˆ°è§£å†³æ€è·¯ã€ç¼–ç å®ç°æ€è·¯çš„å…¨æµç¨‹ï¼Œé¡ºå¸¦ç€è®°å½•ä¸€äº›æµ…è–„çš„çŸ¥è¯†ç‚¹ã€‚</blockquote><div class="notion-table-of-contents notion-gray notion-block-6055afb634904637b8f05312f7ca0072"><a href="#5487dbcbe73e4255a606e967662777f6" class="notion-table-of-contents-item"><span class="notion-table-of-contents-item-body" style="display:inline-block;margin-left:0">UDP åŒ…æ˜¯å¤šå¤§ï¼Ÿ</span></a><a href="#ae23c961f05f4780a92c3f39333b5c5d" class="notion-table-of-contents-item"><span class="notion-table-of-contents-item-body" style="display:inline-block;margin-left:0">å¦‚ä½•åœ¨ Python è®¡ç®—æ•°æ®å¤§å°ï¼Ÿ</span></a><a href="#db1b2b487e2548ae9c7f72d98039630f" class="notion-table-of-contents-item"><span class="notion-table-of-contents-item-body" style="display:inline-block;margin-left:24px">getsizeof çš„ç–‘æƒ‘</span></a><a href="#9b98bfa140374c349f20d945c33151cf" class="notion-table-of-contents-item"><span class="notion-table-of-contents-item-body" style="display:inline-block;margin-left:24px">ç®€å•ç‚¹ï¼Œ len()</span></a><a href="#b67d18dde98c415195169381e2614077" class="notion-table-of-contents-item"><span class="notion-table-of-contents-item-body" style="display:inline-block;margin-left:0">å¦‚ä½•å¯¹ Prometheus æŒ‡æ ‡æ•°æ®åˆ‡ç‰‡ï¼Ÿ</span></a><a href="#7d02e06069c941e6a29c7efd5fe6cbff" class="notion-table-of-contents-item"><span class="notion-table-of-contents-item-body" style="display:inline-block;margin-left:0">å¼€ç ï¼</span></a><a href="#75801b17238343418b9a4e78c445242b" class="notion-table-of-contents-item"><span class="notion-table-of-contents-item-body" style="display:inline-block;margin-left:24px">é¦–å…ˆå®šä¹‰æ¨¡å‹</span></a><a href="#66f231e03f964a7abdfe0baeee193ec2" class="notion-table-of-contents-item"><span class="notion-table-of-contents-item-body" style="display:inline-block;margin-left:24px">é€’å½’å¯»æ‰¾åˆ‡åˆ†ç‚¹</span></a><a href="#5ba741df599d4a9b82254cdb1e72d0db" class="notion-table-of-contents-item"><span class="notion-table-of-contents-item-body" style="display:inline-block;margin-left:24px">åˆ‡ï¼</span></a><a href="#56f26d8ed4a642df97523fb39e7d6c68" class="notion-table-of-contents-item"><span class="notion-table-of-contents-item-body" style="display:inline-block;margin-left:24px">æ”¶å°¾</span></a><a href="#458980559b0448cb95b4daaf741a3bb3" class="notion-table-of-contents-item"><span class="notion-table-of-contents-item-body" style="display:inline-block;margin-left:24px">æ•ˆæœ</span></a><a href="#05e4e0b063114e1b9081cb6f912af2dc" class="notion-table-of-contents-item"><span class="notion-table-of-contents-item-body" style="display:inline-block;margin-left:0">å°¾å£°</span></a><a href="#91d69515071d461dad6229600df974c4" class="notion-table-of-contents-item"><span class="notion-table-of-contents-item-body" style="display:inline-block;margin-left:24px">è¿›ä¸€æ­¥ä¼˜åŒ–ï¼Ÿ</span></a><a href="#73f4e961d953411cae20a13e623fad7e" class="notion-table-of-contents-item"><span class="notion-table-of-contents-item-body" style="display:inline-block;margin-left:24px">å‚è€ƒ</span></a></div><div class="notion-text notion-block-2be67e4c21354ccea5fe57f4856bd26a">å…ˆç®€è¿°ä¸€ä¸‹éœ€æ±‚èƒŒæ™¯ï¼šä¸ºäº†å®ç°å¯è§‚æµ‹æ€§ï¼Œäº§å“ä¸­çš„ä¸€äº›æŒ‡æ ‡æ•°æ®éœ€è¦æ¨é€åˆ° <a target="_blank" rel="noopener noreferrer" class="notion-link" href="https://github.com/weaveworks/prom-aggregation-gateway">Prometheus èšåˆç½‘å…³</a>ï¼Œå‡ºäºä¸æƒ³å¯¹ä¸»ä½“æœåŠ¡æœ‰æ›´å¤šå¹²æ‰°çš„åŸåˆ™ï¼Œé¡¹ç›®é€‰æ‹©ä½¿ç”¨ UDP åè®®å‘é€æ•°æ®ï¼ˆä¹Ÿå¯¹èšåˆç½‘å…³åšäº†ç®€å•çš„ UDP æ•°æ®æ¥æ”¶æ”¹é€ ï¼‰ã€‚ä½†æ˜¯åœ¨è¿è¡Œè¿‡ç¨‹ä¸­ï¼Œ<b><span class="notion-red">å‘ç°ä¸ŠæŠ¥æ•°æ®é‡åå°‘</span></b>ï¼Œç»è¿‡æ—¥å¿—æ’æŸ¥ï¼Œåœ¨æ•°æ®å‘é€ç«¯ç§å‡ºäº†ç‚¹ç«¯å€ªï¼š</div><pre class="notion-code language-bash"><code class="language-bash"><span class="token literal-property property">error</span><span class="token operator">:</span> <span class="token punctuation">[</span>Errno <span class="token number">90</span><span class="token punctuation">]</span> Message too long</code></pre><div class="notion-text notion-block-c056d5e07bad44ec888b5e7a9c90b4ab">é—®é¢˜éå¸¸ç®€å•æ˜æ™°ï¼š<b>å•æ¬¡è¯·æ±‚å‘é€çš„æ•°æ®åŒ…å¤§å°è¶…è¿‡äº†ç½‘ç»œæ•°æ®åŒ…çš„ä¸Šé™</b>ã€‚</div><div class="notion-text notion-block-acd12bd91bd04f8e9b60aa9357bcb8bd">é‚£ä¹ˆå°±æœ‰äº†ç¬¬ä¸€ä¸ªé—®é¢˜ï¼š<span class="notion-yellow"><b>UDP åè®®è§„å®šçš„åŒ…å¤§å°ç©¶ç«Ÿæ˜¯å¤šå°‘å‘¢ï¼Ÿ</b></span></div><h3 class="notion-h notion-h2 notion-h-indent-0 notion-block-5487dbcbe73e4255a606e967662777f6" data-id="5487dbcbe73e4255a606e967662777f6"><span><div id="5487dbcbe73e4255a606e967662777f6" class="notion-header-anchor"></div><a class="notion-hash-link" href="#5487dbcbe73e4255a606e967662777f6" title="UDP åŒ…æ˜¯å¤šå¤§ï¼Ÿ"><svg viewBox="0 0 16 16" width="16" height="16"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><span class="notion-h-title">UDP åŒ…æ˜¯å¤šå¤§ï¼Ÿ</span></span></h3><div class="notion-text notion-block-949046901e7c435cab5cb1dca604fef4">å…ˆæ¥çœ‹ä¸€ä¸‹ <a target="_blank" rel="noopener noreferrer" class="notion-link" href="https://www.ietf.org/rfc/rfc768.txt">UDP åè®®</a> çš„åŒ…é•¿ä»€ä¹ˆæ ·å­ï¼š</div><figure class="notion-asset-wrapper notion-asset-wrapper-image notion-block-3f9be8e5e7a04f06a8e28796d72822c1"><div style="position:relative;display:flex;justify-content:center;align-self:center;width:100%;max-width:100%;flex-direction:column;height:100%"><img style="object-fit:contain" src="https://www.notion.so/image/https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fsecure.notion-static.com%2F5443128d-3b3b-41b5-8761-7744128d4af8%2FUntitled.png?table=block&amp;id=3f9be8e5-e7a0-4f06-a8e2-8796d72822c1&amp;cache=v2" loading="lazy" alt="The UDP protocol header consists of 8 bytes of Protocol Control Information (PCI)" decoding="async"/><figcaption class="notion-asset-caption"><em>The UDP protocol header consists of 8 bytes of Protocol Control Information (PCI)</em></figcaption></div></figure><div class="notion-text notion-block-e13ff80581c649c2940c7582c2c11e31">å¦‚å›¾æ‰€è§ï¼ŒUDP å¯èƒ½ç®—æ˜¯æœ€ç®€æ´çš„ä¼ è¾“å±‚åè®®ä¹‹ä¸€äº†ï¼ŒåŒ…çš„ç»„æˆéå¸¸ç®€å•æ˜“æ‡‚ï¼š</div><ul class="notion-list notion-list-disc notion-block-60096d253a62426bb8ae8b82ae435dc7"><li><b>Source Portï¼š</b>åŒ…æ¥æºç«¯å£ä¿¡æ¯ã€‚</li></ul><ul class="notion-list notion-list-disc notion-block-5b2b85e9e656430a9c78b48c5a047e45"><li><b>Destination Portï¼š</b>åŒ…ç›®çš„ç«¯å£ä¿¡æ¯ã€‚</li></ul><ul class="notion-list notion-list-disc notion-block-5cb9b141df9045029d80446ade8b87da"><li><b>UDP Lengthï¼š</b>UDP å¤´ä¿¡æ¯+ Payload çš„æ€»é•¿åº¦ã€‚</li></ul><ul class="notion-list notion-list-disc notion-block-dfee2b503adc42959ec5e1ba091f73a0"><li><b>UDP Checksumï¼š</b>åŒ…çš„æ ¡éªŒå’Œï¼Œé¿å…åœ¨æ•°æ®åœ¨ä¼ è¾“ä¸­è¢«æ±¡æŸ“ã€‚</li></ul><div class="notion-text notion-block-4dbe32ced84a4efe9d6574fcf13f2467">ä»¥ä¸Šå››ä¸ªéƒ¨åˆ†ç§°ä¹‹ä¸ºåè®®æ§åˆ¶ä¿¡æ¯ PCIï¼Œåˆç§°åè®®å¤´ï¼Œæ¯ä¸ªéƒ¨åˆ† 2 bytesï¼Œä¸€å…±å  8 bytesã€‚</div><div class="notion-text notion-block-1a53eb8855a74863a5ec92a5cb8a24be">åŒæ—¶ç”±äºç½‘ç»œå±‚çš„ IP å¤´ä¹Ÿéœ€è¦å æ®ä¸€éƒ¨åˆ†ç©ºé—´ï¼Œæ‰€ä»¥åœ¨è®¡ç®— Payload å¤§å°æ—¶éœ€è¦å…ˆæ¥çœ‹çœ‹ IP å±‚çš„æƒ…å†µã€‚é¦–å…ˆæ¥çœ‹ IPv4ï¼š</div><pre class="notion-code language-plain text"><code class="language-plain text"># IPv4
<span class="token number">0xffff</span> <span class="token operator">-</span> <span class="token punctuation">(</span><span class="token function">sizeof</span><span class="token punctuation">(</span><span class="token constant">IP</span> Header<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token function">sizeof</span><span class="token punctuation">(</span><span class="token constant">UDP</span> Header<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">65535</span><span class="token operator">-</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token operator">+</span><span class="token number">8</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">65507</span></code></pre><div class="notion-text notion-block-8f74c9299f88462d9b1d673c589f00bd">æ€»çš„æ¥è¯´ç¬¦åˆé¢„æœŸï¼Œåœ¨ç®—ä¸Š IP å¤´çš„æƒ…å†µä¸‹ï¼ŒIPv4 UDP åŒ… Payload æœ€å¤§ä¸èƒ½è¶…è¿‡ <b><span class="notion-teal">65507 bytesã€‚</span></b></div><div class="notion-text notion-block-803b9eeaa0a54208ab5a5563ebfb9345">ä½†æ˜¯åœ¨ IPv6 çš„æƒ…å†µæœ‰äº†ä¸€ç‚¹ç‚¹å¤æ‚ï¼šç”±äº <a target="_blank" rel="noopener noreferrer" class="notion-link" href="https://datatracker.ietf.org/doc/html/rfc2675">Jumbogram</a>ï¼ˆè¶…å¤§åŒ…ï¼‰ çš„å­˜åœ¨ï¼Œè¶…è¿‡ 65535 bytes çš„åŒ…æ˜¯å¯ä»¥åœ¨è°ƒæ•´è¿‡ <a target="_blank" rel="noopener noreferrer" class="notion-link" href="https://en.wikipedia.org/wiki/Maximum_transmission_unit">MTU</a> çš„èŠ‚ç‚¹ä¸­ä¼ è¾“çš„ï¼Œæ‰€ä»¥ç†è®ºä¸Šçš„æœ€å¤§ä½“ç§¯ä¸ºï¼š</div><pre class="notion-code language-plain text"><code class="language-plain text"># IPv6
<span class="token number">0xffff</span> <span class="token operator">-</span> <span class="token function">sizeof</span><span class="token punctuation">(</span><span class="token constant">UDP</span> Header<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">65535</span><span class="token operator">-</span><span class="token number">8</span> <span class="token operator">=</span> <span class="token number">65527</span></code></pre><div class="notion-text notion-block-1e0435c4d5864df7ae84246c473eb4e2">ä¹Ÿå°±æ˜¯åœ¨ä½ çš„åŸºå»ºå®Œå…¨æ”¯æŒ IPv6 å¹¶ä¸”èƒ½å¤Ÿè®¾ç½®è¶…å¤§ MTU æ—¶ï¼ŒIPv6 UDP åŒ… Payload åŒ…æœ€å¤§ä¸èƒ½è¶…è¿‡ <b><span class="notion-teal">65527 bytesã€‚</span></b></div><div class="notion-callout notion-gray_background_co notion-block-78d076e9d06449c2941e5bb93730b7a4"><span class="notion-page-icon" role="img" aria-label="âš ï¸">âš ï¸</span><div class="notion-callout-text">æ³¨æ„ï¼šä¸åŒæ“ä½œç³»ç»Ÿé™å€¼ä¹Ÿå¯èƒ½ä¼šä¸åŒï¼Œä¾‹å¦‚ macOS ä¸‹æœ€å¤§åŒ…é»˜è®¤å€¼ä¸º 9216 bytesã€‚æœ¬æ–‡ä»…ä»åè®®è§’åº¦è®¨è®ºã€‚</div></div><div class="notion-text notion-block-ecb053b3b0374038b2bc161b24b50901">ä»¥ä¸Šåˆ†æçš„éƒ½æ˜¯ç†è®ºæœ€å¤§å€¼ï¼Œè€Œåœ¨çœŸå®ä¼ è¾“ä¸­ï¼Œå¦‚æœæƒ³å°½å¯èƒ½ä¿è¯ UDP åŒ…çš„å®‰å…¨ï¼Œä¸å¾—ä¸è€ƒè™‘ MTU åœ¨å…¶ä¸­çš„å½±å“ï¼šå½“æ•°æ®åŒ…å¤§å°æ¯” MTU å€¼å¤§çš„è¶Šå¤šï¼Œä¼ è¾“æ—¶è¢«åˆ‡åˆ†çš„æ®µæ•°å°±è¶Šå¤šï¼Œç”±äº UDP æœ¬èº«åè®®çš„ä¸å¯é æ€§ï¼Œæ•°æ®åŒ…çš„å®‰å…¨æ€§å°±è¶Šä½ã€‚</div><div class="notion-text notion-block-f0bd74013ace4c6ca827f04448b26c29">è€Œ MTU çš„æœ€å°å€¼ä¸º 576 bytesï¼Œåœ¨ IPv4 çš„æƒ…å†µä¸‹ï¼Œå‡å»ä¸Šé¢æåˆ°çš„ IP Header å’Œ UDP Header ï¼Œè¿˜å‰©ä¸‹ <b><span class="notion-red">548 bytes</span></b> ã€‚è¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆå¾ˆå¤šå…¬ç½‘æœåŠ¡éƒ½ä¼šé™åˆ¶ UDP åŒ…çš„æœ€å¤§ä¸èƒ½è¶…è¿‡ 512 bytes ï¼ˆä¾‹å¦‚ DNSï¼‰ã€‚åŒæ—¶åœ¨ IP Options å­˜åœ¨çš„æƒ…å†µï¼ŒIP Header å¯èƒ½ä¼šå æ® 60 bytesã€‚æ‰€ä»¥ï¼Œå¦‚æœä½ çš„ UDP åŒ…æƒ³è¦<b><em>ç©¿è¶Šå¤æ‚çš„å…¬ç½‘</em></b>ï¼Œæœ€å®‰å…¨çš„æœ€å¤§å€¼æ˜¯ <span class="notion-red"><b>508 bytes</b></span>ã€‚</div><div class="notion-text notion-block-c32e0712b5a1440db082f7ced0894624">è€ƒè™‘å½“å‰é¢å¯¹çš„ç½‘ç»œç¯å¢ƒâ€”â€”æ¥å‘åŒæ–¹éƒ½å¤„äºåŒä¸€ä¸ªå®¹å™¨é›†ç¾¤å†…ï¼Œå±äºæ²¡æœ‰å¤ªå¤šå¹²æ‰°çš„ç§æœ‰ç½‘ç»œâ€”â€”<b>å¯ä»¥é…Œæƒ…é€‚å½“åŠ å¤§é™åˆ¶ï¼Œåªè¦å°äº 65507 bytes å³å¯</b>ã€‚</div><div class="notion-text notion-block-79f8ec24afdd444d8e5090a43b3d2bb5">ææ¸…æ¥šäº†æœ€å¤§èƒ½å‘é€å¤šå°‘æ•°æ®ï¼Œè‡ªç„¶ä¼šæƒ³<b>å°†è¶…é™çš„æ•°æ®è¿›è¡Œåˆ‡ç‰‡å¤„ç†ï¼Œ</b>é‚£ä¹ˆè¿æ¥äº†ç¬¬äºŒä¸ªé—®é¢˜ï¼š<span class="notion-yellow"><b>å¦‚ä½•åœ¨ Python è®¡ç®—æ•°æ®å¤§å°ï¼Ÿ</b></span></div><h3 class="notion-h notion-h2 notion-h-indent-0 notion-block-ae23c961f05f4780a92c3f39333b5c5d" data-id="ae23c961f05f4780a92c3f39333b5c5d"><span><div id="ae23c961f05f4780a92c3f39333b5c5d" class="notion-header-anchor"></div><a class="notion-hash-link" href="#ae23c961f05f4780a92c3f39333b5c5d" title="å¦‚ä½•åœ¨ Python è®¡ç®—æ•°æ®å¤§å°ï¼Ÿ"><svg viewBox="0 0 16 16" width="16" height="16"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><span class="notion-h-title">å¦‚ä½•åœ¨ Python è®¡ç®—æ•°æ®å¤§å°ï¼Ÿ</span></span></h3><div class="notion-text notion-block-377bdb352eb24bb0945f005eae892d44">æˆ‘çš„ç¬¬ä¸€ååº”æ˜¯ä½¿ç”¨ <code class="notion-inline-code">getsizeof</code> ï¼Œè™½ç„¶ç¨æœ‰ç»éªŒçš„ Python ç¨‹åºå‘˜ä¼šæƒ³åˆ°ï¼Œå®ƒå¯¹äº<a target="_blank" rel="noopener noreferrer" class="notion-link" href="https://code.activestate.com/recipes/577504/">å®¹å™¨ç±»çš„å¯¹è±¡æ˜¯æ²¡æ³•ç²¾å‡†ç»Ÿè®¡çš„</a>ï¼Œå¥½åœ¨å½“å‰åœºæ™¯é‡Œåªæ˜¯ç”¨æ¥ç»Ÿè®¡ bytesï¼Œå¹¶æ²¡æœ‰è¿™ä¸ªå›°æ‰°ã€‚</div><div class="notion-text notion-block-0b6e0e86b8a141ca8c22137ca78b099c">ä½†ç®€å•æµ‹è¯•äº†ä¸€ä¸‹ï¼Œå´å‘ç°äº†æ–°çš„ç–‘æƒ‘ã€‚</div><h4 class="notion-h notion-h3 notion-h-indent-1 notion-block-db1b2b487e2548ae9c7f72d98039630f" data-id="db1b2b487e2548ae9c7f72d98039630f"><span><div id="db1b2b487e2548ae9c7f72d98039630f" class="notion-header-anchor"></div><a class="notion-hash-link" href="#db1b2b487e2548ae9c7f72d98039630f" title="getsizeof çš„ç–‘æƒ‘"><svg viewBox="0 0 16 16" width="16" height="16"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><span class="notion-h-title"><code class="notion-inline-code">getsizeof</code> çš„ç–‘æƒ‘</span></span></h4><pre class="notion-code language-python"><code class="language-python">from sys <span class="token keyword">import</span> getsizeof

<span class="token function">getsizeof</span><span class="token punctuation">(</span>b<span class="token string">""</span><span class="token punctuation">)</span>        ğŸ‘‰ <span class="token number">33</span>
<span class="token function">getsizeof</span><span class="token punctuation">(</span>b<span class="token string">"abcd"</span><span class="token punctuation">)</span>    ğŸ‘‰ <span class="token number">37</span></code></pre><div class="notion-text notion-block-0bf58ff0d9a44a0bb5e7fc0e04bf78ac">æœ‰æ„æ€çš„æ˜¯ï¼Œå°±ç®—ç©º bytesï¼Œä¸ºä»€ä¹ˆä¹Ÿæœ‰ 33 bytes çš„ç©ºé—´å ç”¨ï¼Ÿç¨æœ‰ç»éªŒçš„ç¨‹åºå‘˜å°±èƒ½ç«‹é©¬ååº”è¿‡æ¥ï¼Œè¿™å°±æ˜¯å¯¹è±¡æœ¬èº«çš„å¤§å°ï¼Œä¸€çª¥ Python å†…ç½®æ•°æ®ç±»å‹çš„å¤§å°ï¼ˆ64-bit Python 3.6ï¼‰ï¼š</div><pre class="notion-code language-python"><code class="language-python">Empty
Bytes  type        scaling notes
<span class="token number">28</span>     int         <span class="token operator">+</span><span class="token number">4</span> bytes about every <span class="token number">30</span> powers <span class="token keyword">of</span> <span class="token number">2</span>
<span class="token number">37</span>     bytes       <span class="token operator">+</span><span class="token number">1</span> byte per additional byte
<span class="token number">49</span>     str         <span class="token operator">+</span><span class="token number">1</span><span class="token operator">-</span><span class="token number">4</span> per additional <span class="token function">character</span> <span class="token punctuation">(</span>depending on max width<span class="token punctuation">)</span>
<span class="token number">48</span>     tuple       <span class="token operator">+</span><span class="token number">8</span> per additional item
<span class="token number">64</span>     list        <span class="token operator">+</span><span class="token number">8</span> <span class="token keyword">for</span> each additional
<span class="token number">224</span>    <span class="token keyword">set</span>         5th increases to <span class="token number">736</span><span class="token punctuation">;</span> 21nd<span class="token punctuation">,</span> <span class="token number">2272</span><span class="token punctuation">;</span> 85th<span class="token punctuation">,</span> <span class="token number">8416</span><span class="token punctuation">;</span> <span class="token number">341</span><span class="token punctuation">,</span> <span class="token number">32992</span>
<span class="token number">240</span>    dict        6th increases to <span class="token number">368</span><span class="token punctuation">;</span> 22nd<span class="token punctuation">,</span> <span class="token number">1184</span><span class="token punctuation">;</span> 43rd<span class="token punctuation">,</span> <span class="token number">2280</span><span class="token punctuation">;</span> 86th<span class="token punctuation">,</span> <span class="token number">4704</span><span class="token punctuation">;</span> 171st<span class="token punctuation">,</span> <span class="token number">9320</span>
<span class="token number">136</span>    func def    does not include <span class="token keyword">default</span> args and other attrs
<span class="token number">1056</span>   <span class="token keyword">class</span> <span class="token class-name">def</span>   no slots 
<span class="token number">56</span>     <span class="token keyword">class</span> <span class="token class-name">inst</span>  has a __dict__ attr<span class="token punctuation">,</span> same scaling <span class="token keyword">as</span> dict above
<span class="token number">888</span>    <span class="token keyword">class</span> <span class="token class-name">def</span>   <span class="token keyword">with</span> slots
<span class="token number">16</span>     __slots__   seems to store <span class="token keyword">in</span> mutable tuple<span class="token operator">-</span>like structure
                   first slot grows to <span class="token number">48</span><span class="token punctuation">,</span> and so on<span class="token punctuation">.</span></code></pre><div class="notion-text notion-block-07b97df3d82c42dbb809b46d1e8468ac">è™½ç„¶æˆ‘ä»¬åœ¨ä»£ç ä¸­ä¼ å…¥çš„æ˜¯å¯¹è±¡ï¼Œä½†å®é™…ä¸Šä¼ è¾“çš„æ•°æ®éœ€è¦åˆ¨é™¤è¯­è¨€é™„åŠ çš„å­˜å‚¨ç©ºé—´ï¼Œæ‰€ä»¥ä¸èƒ½é€šè¿‡ <code class="notion-inline-code">getsizeof</code> æ‹¿åˆ°çš„æ•°æ®æœ¬èº«çš„å¤§å°ï¼Œè¿™ç®—æ˜¯ä¸€æ¡èµ°é”™çš„æ€è·¯ xDã€‚</div><h4 class="notion-h notion-h3 notion-h-indent-1 notion-block-9b98bfa140374c349f20d945c33151cf" data-id="9b98bfa140374c349f20d945c33151cf"><span><div id="9b98bfa140374c349f20d945c33151cf" class="notion-header-anchor"></div><a class="notion-hash-link" href="#9b98bfa140374c349f20d945c33151cf" title="ç®€å•ç‚¹ï¼Œ len()"><svg viewBox="0 0 16 16" width="16" height="16"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><span class="notion-h-title">ç®€å•ç‚¹ï¼Œ <code class="notion-inline-code">len()</code></span></span></h4><div class="notion-text notion-block-345fd26989864fcba6b488a6b4a2dfa6">è®©æˆ‘ä»¬å›åˆ°é—®é¢˜æœ¬èº«ï¼Œå¯¹äº bytes æ•°æ®ï¼Œæœ€ç®€å•ç»Ÿè®¡å¤§å°çš„æ–¹å¼å°±æ˜¯ç›´æ¥ä½¿ç”¨ <code class="notion-inline-code">len()</code> ã€‚</div><pre class="notion-code language-python"><code class="language-python"><span class="token literal-property property">big_bytes</span><span class="token operator">:</span> bytes
size <span class="token operator">=</span> <span class="token function">len</span><span class="token punctuation">(</span>big_bytes<span class="token punctuation">)</span></code></pre><div class="notion-text notion-block-d6cd5738d9084b3c86482af69cf19e21">ç¡®å®šäº†å¦‚ä½•è®¡ç®—æ•°æ®å¤§å°ï¼Œä¸‹ä¸€æ­¥çš„æ€è·¯å°±æ˜¯ï¼š<span class="notion-yellow"><b>å¦‚ä½•å¯¹ Prometheus æŒ‡æ ‡æ•°æ®åˆ‡ç‰‡ï¼Ÿ</b></span></div><h3 class="notion-h notion-h2 notion-h-indent-0 notion-block-b67d18dde98c415195169381e2614077" data-id="b67d18dde98c415195169381e2614077"><span><div id="b67d18dde98c415195169381e2614077" class="notion-header-anchor"></div><a class="notion-hash-link" href="#b67d18dde98c415195169381e2614077" title="å¦‚ä½•å¯¹ Prometheus æŒ‡æ ‡æ•°æ®åˆ‡ç‰‡ï¼Ÿ"><svg viewBox="0 0 16 16" width="16" height="16"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><span class="notion-h-title">å¦‚ä½•å¯¹ Prometheus æŒ‡æ ‡æ•°æ®åˆ‡ç‰‡ï¼Ÿ</span></span></h3><div class="notion-text notion-block-c516ed34b62745639d72b6dc0f3d503d">æ­£å¦‚æ ‡é¢˜æåˆ°çš„ï¼Œ UDP ä¼ è¾“çš„æ˜¯ Prometheus çš„æŒ‡æ ‡æ•°æ®ï¼Œå®ƒæ˜¯ç”±ä¸€ä¸ªæœ‰å­—é¢å€¼çš„å­—ç¬¦ä¸²è½¬æ¢è€Œæ¥çš„äºŒè¿›åˆ¶ï¼Œå®ƒè¿˜æ˜¯å­—ç¬¦ä¸²çš„æ—¶å€™ä¸€èˆ¬é•¿è¿™æ ·ï¼š</div><pre class="notion-code language-plain text"><code class="language-plain text"># <span class="token constant">HELP</span> sample_metric_foo_count ç¤ºä¾‹è§£é‡Š
# <span class="token constant">TYPE</span> sample_metric_foo_count gauge
sample_metric_foo_count<span class="token punctuation">{</span>foo<span class="token operator">=</span><span class="token string">"aa"</span><span class="token punctuation">,</span>bar<span class="token operator">=</span><span class="token string">"bb"</span><span class="token punctuation">}</span> <span class="token number">14.0</span>
sample_metric_foo_count<span class="token punctuation">{</span>foo<span class="token operator">=</span><span class="token string">"cc"</span><span class="token punctuation">,</span>bar<span class="token operator">=</span><span class="token string">"dd"</span><span class="token punctuation">}</span> <span class="token number">27.0</span>
sample_metric_foo_count<span class="token punctuation">{</span>foo<span class="token operator">=</span><span class="token string">"ee"</span><span class="token punctuation">,</span>bar<span class="token operator">=</span><span class="token string">"ff"</span><span class="token punctuation">}</span> <span class="token number">12.0</span>

# <span class="token constant">HELP</span> sample_metric_bar_count ç¤ºä¾‹è§£é‡Š
# <span class="token constant">TYPE</span> sample_metric_bar_count gauge
sample_metric_bar_count<span class="token punctuation">{</span>baz<span class="token operator">=</span><span class="token string">"gg"</span><span class="token punctuation">}</span> <span class="token number">660.0</span>
sample_metric_bar_count<span class="token punctuation">{</span>baz<span class="token operator">=</span><span class="token string">"hh"</span><span class="token punctuation">}</span> <span class="token number">660.0</span></code></pre><div class="notion-text notion-block-e2eae7b4510249bdbfd982229e1082e0">å®ƒæœ¬èº«éœ€è¦ç¬¦åˆä¸€å®šçš„<a target="_blank" rel="noopener noreferrer" class="notion-link" href="https://prometheus.io/docs/concepts/data_model/">æ ¼å¼</a>ï¼Œ <code class="notion-inline-code">#</code> å¼€å¤´çš„ä¸¤è¡Œä½œä¸ºæŒ‡æ ‡ä¿¡æ¯çš„å…ƒä¿¡æ¯ï¼Œ</div><pre class="notion-code language-python"><code class="language-python"># <span class="token constant">HELP</span> sample_metric_foo_count ç¤ºä¾‹è§£é‡Š
# <span class="token constant">TYPE</span> sample_metric_foo_count gauge</code></pre><div class="notion-text notion-block-6d0d7fa7602347778c9886ca19110564">å¯ä»¥å…ˆçœ‹çœ‹ Prometheus æ˜¯<a target="_blank" rel="noopener noreferrer" class="notion-link" href="https://github.com/prometheus/common/blob/8c9cb3fa6d01832ea16937b20ea561eed81abd2f/expfmt/text_parse.go#L142">å¦‚ä½•è§£æå®ƒçš„</a>ï¼š</div><pre class="notion-code language-go"><code class="language-go"><span class="token comment">// ä»¥ä¸‹ä¸ºæ‘˜æŠ„å†…å®¹</span>
<span class="token function">func</span> <span class="token punctuation">(</span>p <span class="token operator">*</span>TextParser<span class="token punctuation">)</span> <span class="token function">startOfLine</span><span class="token punctuation">(</span><span class="token punctuation">)</span> stateFn <span class="token punctuation">{</span>
  <span class="token operator">...</span>
	<span class="token keyword">switch</span> p<span class="token punctuation">.</span>currentByte <span class="token punctuation">{</span>
	<span class="token keyword">case</span> <span class="token string">'#'</span><span class="token operator">:</span>
		<span class="token keyword">return</span> p<span class="token punctuation">.</span>startComment
	<span class="token keyword">case</span> <span class="token string">'\n'</span><span class="token operator">:</span>
		<span class="token keyword">return</span> p<span class="token punctuation">.</span>startOfLine <span class="token comment">// Empty line, start the next one.</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">return</span> p<span class="token punctuation">.</span>readingMetricName
<span class="token punctuation">}</span>

<span class="token function">func</span> <span class="token punctuation">(</span>p <span class="token operator">*</span>TextParser<span class="token punctuation">)</span> <span class="token function">startComment</span><span class="token punctuation">(</span><span class="token punctuation">)</span> stateFn <span class="token punctuation">{</span>
  <span class="token operator">...</span>
	<span class="token literal-property property">keyword</span> <span class="token operator">:</span><span class="token operator">=</span> p<span class="token punctuation">.</span>currentToken<span class="token punctuation">.</span><span class="token function">String</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token keyword">if</span> keyword <span class="token operator">!=</span> <span class="token string">"HELP"</span> <span class="token operator">&amp;&amp;</span> keyword <span class="token operator">!=</span> <span class="token string">"TYPE"</span> <span class="token punctuation">{</span>
		<span class="token comment">// Generic comment, ignore by fast forwarding to end of line.</span>
		<span class="token keyword">for</span> p<span class="token punctuation">.</span>currentByte <span class="token operator">!=</span> <span class="token string">'\n'</span> <span class="token punctuation">{</span>
			<span class="token keyword">if</span> p<span class="token punctuation">.</span>currentByte<span class="token punctuation">,</span> p<span class="token punctuation">.</span>err <span class="token operator">=</span> p<span class="token punctuation">.</span>buf<span class="token punctuation">.</span><span class="token function">ReadByte</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> p<span class="token punctuation">.</span>err <span class="token operator">!=</span> nil <span class="token punctuation">{</span>
				<span class="token keyword">return</span> nil <span class="token comment">// Unexpected end of input.</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">return</span> p<span class="token punctuation">.</span>startOfLine
	<span class="token punctuation">}</span>
	<span class="token operator">...</span>
	<span class="token keyword">switch</span> keyword <span class="token punctuation">{</span>
	<span class="token keyword">case</span> <span class="token string">"HELP"</span><span class="token operator">:</span>
		<span class="token keyword">return</span> p<span class="token punctuation">.</span>readingHelp
	<span class="token keyword">case</span> <span class="token string">"TYPE"</span><span class="token operator">:</span>
		<span class="token keyword">return</span> p<span class="token punctuation">.</span>readingType
	<span class="token punctuation">}</span>
	<span class="token function">panic</span><span class="token punctuation">(</span>fmt<span class="token punctuation">.</span><span class="token function">Sprintf</span><span class="token punctuation">(</span><span class="token string">"code error: unexpected keyword %q"</span><span class="token punctuation">,</span> keyword<span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span></code></pre><div class="notion-text notion-block-e75fff1bacda4ed082721e74809d3b5e">å¯ä»¥çœ‹åˆ°ï¼šå¦‚æœç›´æ¥ç²—æš´åœ°åˆ‡åˆ†ä¼šå¯¼è‡´æ¥æ”¶ç«¯æ— æ³•è§£æä»è€Œä¸¢å¼ƒæ•´ä¸ªè¯·æ±‚æ•°æ®ã€‚æ‰€ä»¥éœ€è¦é’ˆå¯¹æ•°æ®çš„å¼€å¤´å’Œç»“å°¾ç‰¹å¾å€¼æ¥å†³å®šå…·ä½“çš„åˆ‡åˆ†ç‚¹ã€‚</div><pre class="notion-code language-plain text"><code class="language-plain text"><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span> # <span class="token constant">HELP</span> ä½œä¸ºå¼€å¤´ï¼Œå°½é‡ä½œä¸ºæ•°æ®åŒ…çš„å¼€å¤´ <span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span>
# <span class="token constant">HELP</span> sample_metric_foo_count ç¤ºä¾‹è§£é‡Š
# <span class="token constant">TYPE</span> sample_metric_foo_count gauge
sample_metric_foo_count<span class="token punctuation">{</span>foo<span class="token operator">=</span><span class="token string">"aa"</span><span class="token punctuation">,</span>bar<span class="token operator">=</span><span class="token string">"bb"</span><span class="token punctuation">}</span> <span class="token number">14.0</span>
sample_metric_foo_count<span class="token punctuation">{</span>foo<span class="token operator">=</span><span class="token string">"cc"</span><span class="token punctuation">,</span>bar<span class="token operator">=</span><span class="token string">"dd"</span><span class="token punctuation">}</span> <span class="token number">27.0</span>
sample_metric_foo_count<span class="token punctuation">{</span>foo<span class="token operator">=</span><span class="token string">"ee"</span><span class="token punctuation">,</span>bar<span class="token operator">=</span><span class="token string">"ff"</span><span class="token punctuation">}</span> <span class="token number">12.0</span>

# <span class="token constant">HELP</span> sample_metric_bar_count ç¤ºä¾‹è§£é‡Š
# <span class="token constant">TYPE</span> sample_metric_bar_count gauge
sample_metric_bar_count<span class="token punctuation">{</span>baz<span class="token operator">=</span><span class="token string">"gg"</span><span class="token punctuation">}</span> <span class="token number">660.0</span>\n
<span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span> \n ä½œä¸ºå•è¡Œæ•°æ®ç»“å°¾ï¼Œèƒ½å¤Ÿä¿è¯åŒ…æ•°æ®è¢«æ­£å¸¸è§£æï¼Œæœ€å·®æƒ…å†µä½œä¸ºæ•°æ®åŒ…çš„ç»“å°¾ <span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span>
sample_metric_bar_count<span class="token punctuation">{</span>baz<span class="token operator">=</span><span class="token string">"hh"</span><span class="token punctuation">}</span> <span class="token number">660.0</span>  ç”±äºç¼ºå°‘ <span class="token constant">HELP</span><span class="token operator">/</span><span class="token constant">TYPE</span> å…ƒä¿¡æ¯ï¼Œå°†æ— æ³•è¢«èšåˆå¤„ç†</code></pre><h3 class="notion-h notion-h2 notion-h-indent-0 notion-block-7d02e06069c941e6a29c7efd5fe6cbff" data-id="7d02e06069c941e6a29c7efd5fe6cbff"><span><div id="7d02e06069c941e6a29c7efd5fe6cbff" class="notion-header-anchor"></div><a class="notion-hash-link" href="#7d02e06069c941e6a29c7efd5fe6cbff" title="å¼€ç ï¼"><svg viewBox="0 0 16 16" width="16" height="16"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><span class="notion-h-title">å¼€ç ï¼</span></span></h3><div class="notion-text notion-block-2ec98a98ed394b4d8717392adf3a6d51">æ—¢ç„¶å‡†å¤‡å¥½äº†æ€è·¯ï¼Œé‚£ä¹ˆå°±å¼€å§‹æ­£å¼ç¼–ç å§ã€‚</div><h4 class="notion-h notion-h3 notion-h-indent-1 notion-block-75801b17238343418b9a4e78c445242b" data-id="75801b17238343418b9a4e78c445242b"><span><div id="75801b17238343418b9a4e78c445242b" class="notion-header-anchor"></div><a class="notion-hash-link" href="#75801b17238343418b9a4e78c445242b" title="é¦–å…ˆå®šä¹‰æ¨¡å‹"><svg viewBox="0 0 16 16" width="16" height="16"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><span class="notion-h-title">é¦–å…ˆå®šä¹‰æ¨¡å‹</span></span></h4><div class="notion-text notion-block-e4c19888dcc0454bad31beae9110fd8b">å¥½çš„æ¨¡å‹èƒ½å¤Ÿæ¸…æ¥šåœ°å±•ç¤ºç¼–ç æ€è·¯ï¼Œä¸ºäº†æ›´æ–¹ä¾¿åˆ‡åˆ†å®šä¹‰äº†å¦‚ä¸‹æ¨¡å‹ï¼š</div><pre class="notion-code language-python"><code class="language-python">@dataclass
<span class="token keyword">class</span> <span class="token class-name">SlicedIndex</span><span class="token operator">:</span>
    <span class="token string">""</span><span class="token string">"æ•°æ®åˆ‡åˆ†ç´¢å¼•"</span><span class="token string">""</span>
    <span class="token literal-property property">start</span><span class="token operator">:</span> int
    <span class="token literal-property property">end</span><span class="token operator">:</span> int
    # å¦‚æœä¸æ˜¯ä»¥ # <span class="token constant">HELP</span> å¼€å¤´ï¼Œä¼šå¯¼è‡´ metric æ— æ³•è¢«è¯†åˆ«åˆå¹¶
    <span class="token literal-property property">valid_start</span><span class="token operator">:</span> bool <span class="token operator">=</span> True
    # å¦‚æœä¸æ˜¯ä»¥ metric å†…å®¹å®Œç»“ï¼Œä¼šè®©ä¸‹ä¸€ä¸ªåˆ†ç‰‡åŒ…æ²¡æœ‰æœ‰æ•ˆå¼€å¤´
    <span class="token literal-property property">valid_end</span><span class="token operator">:</span> bool <span class="token operator">=</span> True

    def <span class="token function">to_tuple</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">></span> tuple<span class="token operator">:</span>
        <span class="token keyword">return</span> self<span class="token punctuation">.</span>start<span class="token punctuation">,</span> self<span class="token punctuation">.</span>end

    def <span class="token function">__len__</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token operator">:</span>
        <span class="token keyword">return</span> self<span class="token punctuation">.</span>end <span class="token operator">-</span> self<span class="token punctuation">.</span>start


@dataclass
<span class="token keyword">class</span> <span class="token class-name">SlicedIndexList</span><span class="token operator">:</span>
    <span class="token literal-property property">indexes</span><span class="token operator">:</span> List<span class="token punctuation">[</span>SlicedIndex<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">field</span><span class="token punctuation">(</span>default_factory<span class="token operator">=</span>list<span class="token punctuation">)</span>

    def <span class="token function">append</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> <span class="token literal-property property">start</span><span class="token operator">:</span> int<span class="token punctuation">,</span> <span class="token literal-property property">end</span><span class="token operator">:</span> int<span class="token punctuation">,</span> <span class="token literal-property property">valid_end</span><span class="token operator">:</span> bool <span class="token operator">=</span> True<span class="token punctuation">)</span><span class="token operator">:</span>
        valid_start <span class="token operator">=</span> True
        <span class="token keyword">if</span> self<span class="token punctuation">.</span>indexes and not self<span class="token punctuation">.</span>indexes<span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>valid_end<span class="token operator">:</span>
            valid_start <span class="token operator">=</span> False

        self<span class="token punctuation">.</span>indexes<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token function">SlicedIndex</span><span class="token punctuation">(</span>start<span class="token punctuation">,</span> end<span class="token punctuation">,</span> valid_start<span class="token punctuation">,</span> valid_end<span class="token punctuation">)</span><span class="token punctuation">)</span>

    def <span class="token function">__iter__</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token operator">:</span>
        <span class="token keyword">for</span> elem <span class="token keyword">in</span> self<span class="token punctuation">.</span>indexes<span class="token operator">:</span>
            <span class="token keyword">yield</span> elem

    def <span class="token function">__getitem__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> ii<span class="token punctuation">)</span><span class="token operator">:</span>
        <span class="token string">""</span><span class="token string">"Get a list item"</span><span class="token string">""</span>
        <span class="token keyword">return</span> self<span class="token punctuation">.</span>indexes<span class="token punctuation">[</span>ii<span class="token punctuation">]</span></code></pre><div class="notion-text notion-block-b0e4940f7fb84cc583211d354c7912c8">ç”±äºç½‘ç»œç¯å¢ƒè¾ƒä¸ºè‰¯å¥½ï¼Œè¿™é‡Œæ›´å€¾å‘äºå•æ¬¡å°½å¯èƒ½æäº¤è¶³å¤Ÿå¤šçš„æ•°æ®è€Œå‡å°‘ç½‘ç»œå‘é€æ¬¡æ•°ã€‚æ‰€ä»¥å°½é‡è´´è¿‘æœ€å¤§é™åˆ¶åšæ•°æ®åˆ‡åˆ†ï¼Œç”±äºæ¯æ¬¡æŸ¥æ‰¾é€»è¾‘ç±»åŒï¼Œé‡‡ç”¨é€’å½’ä¼šæ›´ç®€å•ã€‚</div><h4 class="notion-h notion-h3 notion-h-indent-1 notion-block-66f231e03f964a7abdfe0baeee193ec2" data-id="66f231e03f964a7abdfe0baeee193ec2"><span><div id="66f231e03f964a7abdfe0baeee193ec2" class="notion-header-anchor"></div><a class="notion-hash-link" href="#66f231e03f964a7abdfe0baeee193ec2" title="é€’å½’å¯»æ‰¾åˆ‡åˆ†ç‚¹"><svg viewBox="0 0 16 16" width="16" height="16"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><span class="notion-h-title">é€’å½’å¯»æ‰¾åˆ‡åˆ†ç‚¹</span></span></h4><pre class="notion-code language-python"><code class="language-python">def <span class="token function">find_sliced_indexes</span><span class="token punctuation">(</span>data<span class="token operator">:</span> bytes<span class="token punctuation">,</span> <span class="token literal-property property">start</span><span class="token operator">:</span> int<span class="token punctuation">,</span> <span class="token literal-property property">udp_package_max_size</span><span class="token operator">:</span> int<span class="token punctuation">,</span> <span class="token literal-property property">sliced_index_list</span><span class="token operator">:</span> SlicedIndexList<span class="token punctuation">)</span><span class="token operator">:</span>
    <span class="token string">""</span><span class="token string">"é€’å½’æ‰¾å¯»æŒ‡æ ‡å¼€å¤´æ ‡å¿—"</span><span class="token string">""</span>
    <span class="token keyword">if</span> start <span class="token operator">+</span> udp_package_max_size <span class="token operator">>=</span> <span class="token function">len</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token operator">:</span>
        sliced_index_list<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>start<span class="token punctuation">,</span> <span class="token function">len</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token keyword">return</span>

    valid_start_index <span class="token operator">=</span> data<span class="token punctuation">.</span><span class="token function">rfind</span><span class="token punctuation">(</span>b<span class="token string">"# HELP"</span><span class="token punctuation">,</span> start<span class="token punctuation">,</span> start <span class="token operator">+</span> udp_package_max_size<span class="token punctuation">)</span>
    <span class="token keyword">if</span> valid_start_index <span class="token operator">==</span> <span class="token operator">-</span><span class="token number">1</span> or valid_start_index <span class="token operator">==</span> start<span class="token operator">:</span>
        # å½“æŸä¸ª metrics æ•°æ®å¤§å°å¤§äº <span class="token constant">UDP</span> åè®®æœ€å¤§åŒ…é™åˆ¶æ—¶ï¼ŒåŸåˆ™ä¸Šæˆ‘ä»¬æ— æ³•é€šè¿‡ <span class="token constant">UDP</span> å‘é€è¯¥æ•°æ®
        # ä½†è¿™é‡Œæˆ‘ä»¬å°è¯•ä»¥æœ€å¤§é™åˆ¶å‘é€è¯¥æ•°æ®ï¼Œä»¥ä¸€ä¸ªè¶…è¿‡æœ€å¤§é™åˆ¶çš„æ•°æ®ä¸ºä¾‹
        # <span class="token operator">+</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span><span class="token operator">+</span> åè®®æœ€å¤§é•¿åº¦
        # <span class="token operator">+</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span><span class="token operator">+</span>  <span class="token operator">+</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span><span class="token operator">+</span>  <span class="token operator">+</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span><span class="token operator">+</span>
        # æœ‰æ•ˆ            <span class="token function">æœ‰æ•ˆ</span>  <span class="token punctuation">(</span>ç¼ºå¤±å…ƒä¿¡æ¯éƒ¨åˆ†ä¸¢å¼ƒ<span class="token punctuation">)</span> æœ‰æ•ˆ  æœ‰æ•ˆ              æœ‰æ•ˆ
        # å¯ä»¥çœ‹åˆ°ä¸­é—´æ®µæ•°æ®ä¼šè¢«ä¸¢å¼ƒï¼Œå› ä¸ºæ²¡æœ‰æœ‰æ•ˆçš„ metrics å¼€å¤´ï¼Œä½†æ˜¯æˆ‘ä»¬å°½å¯èƒ½ä¿è¯äº†åç»­çš„åŒ…æ˜¯æœ‰æ•ˆå¼€å¤´å’Œæœ‰æ•ˆç»“å°¾
        # æ‰€ä»¥å½“å‰çš„åšæ³•æ›´åˆ©äºæˆ‘ä»¬å• metrics æ•°æ®æ¯” <span class="token number">65535</span> ç¨å¤§çš„åœºæ™¯ï¼Œè¿™æ ·ä¸¢å¼ƒçš„å†…å®¹å°‘ï¼Œä¿ç•™çš„å†…å®¹å¤š
        # åä¹‹ï¼Œå½“å•ä¸ª metrics çš„æ•°æ®æ¯”æœ€å¤§é™åˆ¶å¤§çš„è¶Šå¤šï¼Œä¸¢å¼ƒçš„è¶Šå¤š

        # sample è‚¯å®šä¼šè½¬è¡Œï¼Œåªè¦æœ‰è½¬è¡Œå°±èƒ½ä¿è¯èµ·ç å‰ä¸€ä¸ªåŒ…çš„å†…å®¹æ ¼å¼æœ‰æ•ˆ
        valid_end_index <span class="token operator">=</span> data<span class="token punctuation">.</span><span class="token function">rfind</span><span class="token punctuation">(</span>b<span class="token string">"\n"</span><span class="token punctuation">,</span> start<span class="token punctuation">,</span> start <span class="token operator">+</span> udp_package_max_size<span class="token punctuation">)</span>
        new_start <span class="token operator">=</span> valid_end_index <span class="token operator">+</span> <span class="token number">1</span>
        sliced_index_list<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>start<span class="token punctuation">,</span> new_start<span class="token punctuation">,</span> valid_end<span class="token operator">=</span>False<span class="token punctuation">)</span>
    <span class="token keyword">else</span><span class="token operator">:</span>
        sliced_index_list<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>start<span class="token punctuation">,</span> valid_start_index<span class="token punctuation">)</span>
        new_start <span class="token operator">=</span> valid_start_index

    # å°è¯•ç»§ç»­å‘åæŸ¥æ‰¾
    <span class="token function">find_sliced_indexes</span><span class="token punctuation">(</span>data<span class="token punctuation">,</span> new_start<span class="token punctuation">,</span> udp_package_max_size<span class="token punctuation">,</span> sliced_index_list<span class="token punctuation">)</span>
    <span class="token keyword">return</span></code></pre><h4 class="notion-h notion-h3 notion-h-indent-1 notion-block-5ba741df599d4a9b82254cdb1e72d0db" data-id="5ba741df599d4a9b82254cdb1e72d0db"><span><div id="5ba741df599d4a9b82254cdb1e72d0db" class="notion-header-anchor"></div><a class="notion-hash-link" href="#5ba741df599d4a9b82254cdb1e72d0db" title="åˆ‡ï¼"><svg viewBox="0 0 16 16" width="16" height="16"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><span class="notion-h-title">åˆ‡ï¼</span></span></h4><div class="notion-text notion-block-2c78da288e01456e8ea80ef5a485096c">å½“æ‹¿åˆ°äº†æƒ³è¦åˆ‡å…¥ç‚¹åï¼Œå°±å¯ä»¥å¯¹åŸæ•°æ®è¿›è¡Œåˆ‡åˆ†äº†ã€‚è¿™é‡Œå¯ä»¥ä½¿ç”¨ <a target="_blank" rel="noopener noreferrer" class="notion-link" href="https://docs.python.org/zh-cn/3/c-api/memoryview.html">memoryview</a>ï¼ŒèŠ‚çœä¸€æ¬¡å¤§æ•°æ®æ‹·è´ï¼Œåˆ‡ç‰‡çš„é€Ÿåº¦ä¹Ÿä¼šæ›´å¿«ä¸€ç‚¹ï¼š</div><pre class="notion-code language-python"><code class="language-python">def <span class="token function">slice_metrics_udp_data</span><span class="token punctuation">(</span>data<span class="token operator">:</span> bytes<span class="token punctuation">,</span> <span class="token literal-property property">sliced_indexes</span><span class="token operator">:</span> SlicedIndexList<span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">></span> Generator<span class="token punctuation">[</span>memoryview<span class="token punctuation">,</span> None<span class="token punctuation">,</span> None<span class="token punctuation">]</span><span class="token operator">:</span>
    <span class="token string">""</span><span class="token string">"æ‹†åˆ† metrics UDP data"</span><span class="token string">""</span>
    # <span class="token constant">Q</span><span class="token operator">:</span> ä¸ºä»€ä¹ˆä¸ç›´æ¥åˆ‡åˆ†<span class="token operator">?</span>
    # <span class="token constant">A</span><span class="token operator">:</span> ç›´æ¥æŒ‰ç…§å¤§å°åˆ‡åˆ†ä¼šé™ bytes ä¸­çš„å­—é¢å€¼åˆ‡æ–­ï¼Œè®©æœåŠ¡ç«¯å¯¹äºæŒ‡æ ‡æ— æ³•ç†è§£ï¼Œæ‰€ä»¥è¦æŒ‰ç…§å­—é¢å€¼çš„å†…å®¹åšåˆ‡åˆ†

    # memoryview æ— éœ€é¢å¤–æ‹·è´
    mview <span class="token operator">=</span> <span class="token function">memoryview</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span>
    <span class="token keyword">for</span> index <span class="token keyword">in</span> <span class="token literal-property property">sliced_indexes</span><span class="token operator">:</span>
        <span class="token keyword">if</span> not index<span class="token punctuation">.</span>valid_start<span class="token operator">:</span>
            logger<span class="token punctuation">.</span><span class="token function">warning</span><span class="token punctuation">(</span><span class="token string">"data&lt;len:%s> has no valid start, may not be parsed"</span><span class="token punctuation">,</span> <span class="token function">len</span><span class="token punctuation">(</span>index<span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token keyword">yield</span> mview<span class="token punctuation">[</span>index<span class="token punctuation">.</span>start <span class="token operator">:</span> index<span class="token punctuation">.</span>end<span class="token punctuation">]</span></code></pre><h4 class="notion-h notion-h3 notion-h-indent-1 notion-block-56f26d8ed4a642df97523fb39e7d6c68" data-id="56f26d8ed4a642df97523fb39e7d6c68"><span><div id="56f26d8ed4a642df97523fb39e7d6c68" class="notion-header-anchor"></div><a class="notion-hash-link" href="#56f26d8ed4a642df97523fb39e7d6c68" title="æ”¶å°¾"><svg viewBox="0 0 16 16" width="16" height="16"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><span class="notion-h-title">æ”¶å°¾</span></span></h4><div class="notion-text notion-block-122aac50d321402e858702653cb64287">é’ˆå¯¹ä¸€äº›ç‰¹æ®Šåœºæ™¯åšæœ€åçš„å–„åå¤„ç†</div><pre class="notion-code language-python"><code class="language-python">def <span class="token function">find_udp_data_sliced_indexes</span><span class="token punctuation">(</span>data<span class="token operator">:</span> bytes<span class="token punctuation">,</span> <span class="token literal-property property">udp_package_max_size</span><span class="token operator">:</span> int <span class="token operator">=</span> <span class="token number">65507</span><span class="token punctuation">,</span> <span class="token literal-property property">mtu</span><span class="token operator">:</span> int <span class="token operator">=</span> <span class="token number">1500</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">></span> SlicedIndexList<span class="token operator">:</span>
    <span class="token string">""</span>"å¯¹ <span class="token constant">UDP</span> <span class="token literal-property property">å‘é€æ•°æ®è¿›è¡Œåˆ‡ç‰‡å¤„ç†ï¼Œä¿è¯æ¯æ¬¡å‘é€æˆåŠŸ</span>
    <span class="token operator">:</span>param data<span class="token operator">:</span> é¢„å‘é€æ•°æ®
    <span class="token operator">:</span>param udp_package_max_size<span class="token operator">:</span> å½“å‰ç³»ç»Ÿæ”¯æŒçš„æœ€å¤§ <span class="token constant">UDP</span> å‘é€åŒ…å¤§å°ï¼Œä»¥ bytes è®¡ç®—ï¼Œé»˜è®¤ä¸º <span class="token number">65535</span> <span class="token punctuation">(</span>åœ¨ macOS ä¸‹é»˜è®¤ä¸º <span class="token number">9126</span><span class="token punctuation">)</span>
    <span class="token operator">:</span>param mtu<span class="token operator">:</span> Maximum Transmission Unit

    udp_package_max_size <span class="token operator">=</span> <span class="token number">0xffff</span> <span class="token operator">-</span> <span class="token punctuation">(</span><span class="token function">sizeof</span><span class="token punctuation">(</span><span class="token constant">IP</span> Header<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token function">sizeof</span><span class="token punctuation">(</span><span class="token constant">UDP</span> Header<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">65535</span><span class="token operator">-</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token operator">+</span><span class="token number">8</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">65507</span>
    ref to<span class="token operator">:</span> https<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>en<span class="token punctuation">.</span>wikipedia<span class="token punctuation">.</span>org<span class="token operator">/</span>wiki<span class="token operator">/</span>User_Datagram_Protocol
    <span class="token string">""</span>"
    length <span class="token operator">=</span> <span class="token function">len</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span>
    <span class="token keyword">if</span> length <span class="token operator">></span> mtu<span class="token operator">:</span>
        # <span class="token constant">TODO</span><span class="token operator">:</span> å½“å‰æˆ‘ä»¬æš‚ä¸è€ƒè™‘å¤„ç† <span class="token constant">MTU</span> çš„é—®é¢˜ï¼Œå…ˆè§£å†³ <span class="token constant">UDP</span> åŒ…è¿‡å¤§çš„æƒ…å†µ
        logger<span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token string">"UDP packages is larger than MTU, not safe for single push."</span><span class="token punctuation">)</span>

    <span class="token keyword">if</span> length <span class="token operator">&lt;=</span> udp_package_max_size<span class="token operator">:</span>
        <span class="token keyword">return</span> <span class="token function">SlicedIndexList</span><span class="token punctuation">(</span>indexes<span class="token operator">=</span><span class="token punctuation">[</span><span class="token function">SlicedIndex</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> length<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span>

    sliced_index_list <span class="token operator">=</span> <span class="token function">SlicedIndexList</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">try</span><span class="token operator">:</span>
        <span class="token function">find_sliced_indexes</span><span class="token punctuation">(</span>data<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> udp_package_max_size<span class="token punctuation">,</span> sliced_index_list<span class="token punctuation">)</span>
    except RecursionError<span class="token operator">:</span>
        logger<span class="token punctuation">.</span><span class="token function">warning</span><span class="token punctuation">(</span><span class="token string">"data has no valid format, drop it..."</span><span class="token punctuation">)</span>

    <span class="token keyword">return</span> sliced_index_list</code></pre><h4 class="notion-h notion-h3 notion-h-indent-1 notion-block-458980559b0448cb95b4daaf741a3bb3" data-id="458980559b0448cb95b4daaf741a3bb3"><span><div id="458980559b0448cb95b4daaf741a3bb3" class="notion-header-anchor"></div><a class="notion-hash-link" href="#458980559b0448cb95b4daaf741a3bb3" title="æ•ˆæœ"><svg viewBox="0 0 16 16" width="16" height="16"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><span class="notion-h-title">æ•ˆæœ</span></span></h4><pre class="notion-code language-python"><code class="language-python"># åŸæ¥çš„ <span class="token constant">UDP</span> ç›´æ¥å‘é€
# å°†æŠ›å‡º error<span class="token operator">:</span> <span class="token punctuation">[</span>Errno <span class="token number">90</span><span class="token punctuation">]</span> Message too long
udp_socket<span class="token punctuation">.</span><span class="token function">sendto</span><span class="token punctuation">(</span>data<span class="token punctuation">,</span> <span class="token punctuation">(</span>address<span class="token punctuation">,</span> port<span class="token punctuation">)</span><span class="token punctuation">)</span>

# å¾ªç¯è°ƒç”¨ <span class="token constant">UDP</span> è¯·æ±‚
<span class="token keyword">for</span> sliced_data <span class="token keyword">in</span> <span class="token function">slice_metrics_udp_data</span><span class="token punctuation">(</span>data<span class="token punctuation">,</span> <span class="token function">find_udp_data_sliced_indexes</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">:</span>
	  # æ‰€æœ‰ <span class="token constant">UDP</span> åŒ…éƒ½å¯ä»¥å‘é€å‡ºå»
    # åŒæ—¶å–å†³äºæ•°æ®ç‰¹æ€§ï¼Œç»å¤§å¤šæ•°çš„ <span class="token constant">UDP</span> æ•°æ®éƒ½èƒ½åœ¨æœåŠ¡ç«¯å¾—åˆ°è§£æ
    udp_socket<span class="token punctuation">.</span><span class="token function">sendto</span><span class="token punctuation">(</span>sliced_data<span class="token punctuation">,</span> <span class="token punctuation">(</span>address<span class="token punctuation">,</span> port<span class="token punctuation">)</span><span class="token punctuation">)</span></code></pre><div class="notion-blank notion-block-cc9839ec71544fca859bb2a5d393654f">Â </div><h3 class="notion-h notion-h2 notion-h-indent-0 notion-block-05e4e0b063114e1b9081cb6f912af2dc" data-id="05e4e0b063114e1b9081cb6f912af2dc"><span><div id="05e4e0b063114e1b9081cb6f912af2dc" class="notion-header-anchor"></div><a class="notion-hash-link" href="#05e4e0b063114e1b9081cb6f912af2dc" title="å°¾å£°"><svg viewBox="0 0 16 16" width="16" height="16"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><span class="notion-h-title">å°¾å£°</span></span></h3><h4 class="notion-h notion-h3 notion-h-indent-1 notion-block-91d69515071d461dad6229600df974c4" data-id="91d69515071d461dad6229600df974c4"><span><div id="91d69515071d461dad6229600df974c4" class="notion-header-anchor"></div><a class="notion-hash-link" href="#91d69515071d461dad6229600df974c4" title="è¿›ä¸€æ­¥ä¼˜åŒ–ï¼Ÿ"><svg viewBox="0 0 16 16" width="16" height="16"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><span class="notion-h-title">è¿›ä¸€æ­¥ä¼˜åŒ–ï¼Ÿ</span></span></h4><div class="notion-text notion-block-cd36daaebf0b4627b5543b1c1f5b0b5d">æ­£å¦‚æˆ‘ä»¬ä¸Šé¢å®ç°çš„é€»è¾‘ï¼Œä»æ—§æ— æ³•ä¿è¯æ‰€æœ‰æ•°æ®éƒ½èƒ½è¢«è§£ææˆåŠŸï¼Œä¸»è¦çš„åŸå› å°±æ˜¯æˆ‘ä»¬æ²¡æœ‰å¯¹ç¼ºå¤±å…ƒä¿¡æ¯çš„æŒ‡æ ‡è¿›è¡Œå¤„ç†ï¼Œè€Œæˆ‘ä»¬åœ¨è§£æå…¶ä¸­å†…å®¹çš„æ—¶å€™æ˜¯å¯ä»¥é€šè¿‡ <code class="notion-inline-code">bytes.index()</code> æ‰¾åˆ°å…ƒä¿¡æ¯ä½ç½®çš„ï¼Œå¯ä»¥å°†å…ƒä¿¡æ¯æš‚å­˜èµ·æ¥ï¼Œåœ¨ <code class="notion-inline-code">valid_start</code> æ—¶ç›´æ¥è¡¥å……ä¸Šå»ï¼Œè¿™æ ·å°±èƒ½ä¿è¯æ‰€æœ‰æ•°æ®éƒ½æœ‰åˆé€‚çš„æ ¼å¼ã€‚</div><div class="notion-blank notion-block-0df3835b491f4a4da4285c30a7a9a702">Â </div><div class="notion-text notion-block-364256dc3d344b519606336988bdc22c">Prometheus UDP æ•°æ®åˆ‡åˆ†æ˜¯ä¸€ä¸ªåœ¨å¼€å‘ä¸­æ™®é€šçš„ä¸èƒ½å†æ™®é€šçš„å°é—®é¢˜ã€‚åœ¨è¿™é‡Œå†™è¿™ä¹ˆå¤šå¹¶ä¸æ˜¯ä¸ºäº†å±•ç°è¯¥é—®é¢˜æœ¬èº«çš„è§£å†³æ–¹æ¡ˆï¼Œè€Œæ˜¯ç”¨æ¥æè¿°ä¸€ç§å®Œå¤‡çš„å¼€å‘æ€è·¯ã€‚</div><h4 class="notion-h notion-h3 notion-h-indent-1 notion-block-73f4e961d953411cae20a13e623fad7e" data-id="73f4e961d953411cae20a13e623fad7e"><span><div id="73f4e961d953411cae20a13e623fad7e" class="notion-header-anchor"></div><a class="notion-hash-link" href="#73f4e961d953411cae20a13e623fad7e" title="å‚è€ƒ"><svg viewBox="0 0 16 16" width="16" height="16"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><span class="notion-h-title">å‚è€ƒ</span></span></h4><ul class="notion-list notion-list-disc notion-block-830397c52a294702ae130f5d04b519fd"><li><a target="_blank" rel="noopener noreferrer" class="notion-link" href="https://www.ietf.org/rfc/rfc768.txt">https://www.ietf.org/rfc/rfc768.txt</a></li></ul><ul class="notion-list notion-list-disc notion-block-fd3df686f5b043df85a23537d5ab1e82"><li><a target="_blank" rel="noopener noreferrer" class="notion-link" href="https://erg.abdn.ac.uk/users/gorry/course/inet-pages/udp.html">https://erg.abdn.ac.uk/users/gorry/course/inet-pages/udp.html</a></li></ul><ul class="notion-list notion-list-disc notion-block-0e7afdae4077446d8acde3a365ef7310"><li><a target="_blank" rel="noopener noreferrer" class="notion-link" href="https://www.rfc-editor.org/rfc/rfc2675.html">https://www.rfc-editor.org/rfc/rfc2675.html</a></li></ul><ul class="notion-list notion-list-disc notion-block-f4ecc82a58c8423eb92169c49f10e2f8"><li><a target="_blank" rel="noopener noreferrer" class="notion-link" href="https://stackoverflow.com/questions/1098897/what-is-the-largest-safe-udp-packet-size-on-the-internet">https://stackoverflow.com/questions/1098897/what-is-the-largest-safe-udp-packet-size-on-the-internet</a></li></ul><ul class="notion-list notion-list-disc notion-block-6a59c5ca28614f0cad1801fc9a7e5abc"><li><a target="_blank" rel="noopener noreferrer" class="notion-link" href="https://stackoverflow.com/questions/449560/how-do-i-determine-the-size-of-an-object-in-python">https://stackoverflow.com/questions/449560/how-do-i-determine-the-size-of-an-object-in-python</a></li></ul><ul class="notion-list notion-list-disc notion-block-db259695817844739eee93f65fcb4234"><li><a target="_blank" rel="noopener noreferrer" class="notion-link" href="https://docs.python.org/zh-cn/3/c-api/memoryview.html">https://docs.python.org/zh-cn/3/c-api/memoryview.html</a></li></ul></main></div></article><div class="flex justify-between font-medium text-gray-500 dark:text-gray-400"><a><button class="mt-2 cursor-pointer hover:text-black dark:hover:text-gray-100">â† <!-- -->è¿”å›</button></a><a><button class="mt-2 cursor-pointer hover:text-black dark:hover:text-gray-100">â†‘ <!-- -->å›åˆ°é¡¶éƒ¨</button></a></div><div></div></main><div class="mt-6 flex-shrink-0 m-auto w-full text-gray-500 dark:text-gray-400 transition-all max-w-3xl px-4"><hr class="border-gray-200 dark:border-gray-600"/><div class="my-4 text-sm leading-6"><div class="flex align-baseline justify-between flex-wrap"><p>Â© <!-- -->bluesyu<!-- --> <!-- -->2019 - 2023</p><p>powered by <a href="https://github.com/craigary/nobelium"><u>nobelium</u></a></p></div></div></div></div></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"post":{"id":"3dd5dfcc-005c-49b5-9cca-96ccded25899","date":{"start_date":"2022-11-11"},"type":["Post"],"slug":"python-udp-prom-aggregation-gateway","tags":["python","tech","prometheus","udp"],"summary":"å½¢æ•£ç¥ä¸æ•£ï¼Œè®°å½•å¼€å‘æ€è·¯","title":"å¼€å‘æ•£æ–‡ï¼šä½¿ç”¨ Python ä»¥ UDP åè®®å‘é€ Prometheus æŒ‡æ ‡æ•°æ®","status":["Published"],"createdTime":"Wed Nov 09 2022 02:39:34 GMT+0000 (Coordinated Universal Time)","fullWidth":false,"pageIcon":"ğŸ–‹ï¸","pageCover":"https://images.unsplash.com/photo-1596484552834-6a58f850e0a1?ixlib=rb-4.0.3\u0026q=80\u0026fm=jpg\u0026crop=entropy\u0026cs=tinysrgb"},"blockMap":{"block":{"3dd5dfcc-005c-49b5-9cca-96ccded25899":{"value":{"id":"3dd5dfcc-005c-49b5-9cca-96ccded25899","version":864,"type":"page","properties":{"NX\\Q":[["â€£",[["d",{"type":"date","start_date":"2022-11-11"}]]]],"`gQ~":[["Post"]],"d]hq":[["python-udp-prom-aggregation-gateway"]],"sD^m":[["python,tech,prometheus,udp"]],"wz|S":[["å½¢æ•£ç¥ä¸æ•£ï¼Œè®°å½•å¼€å‘æ€è·¯"]],"title":[["å¼€å‘æ•£æ–‡ï¼šä½¿ç”¨ Python ä»¥ UDP åè®®å‘é€ Prometheus æŒ‡æ ‡æ•°æ®"]],"f211bdc0-ee00-4186-9a7d-f68c055ec2ee":[["Published"]]},"content":["3aa32474-6d59-444e-b612-71b45a85531b","6055afb6-3490-4637-b8f0-5312f7ca0072","2be67e4c-2135-4cce-a5fe-57f4856bd26a","3530898c-cc63-4c38-b32a-992df442fca8","c056d5e0-7bad-44ec-888b-5e7a9c90b4ab","acd12bd9-1bd0-4f8e-9b60-aa9357bcb8bd","5487dbcb-e73e-4255-a606-e967662777f6","94904690-1e7c-435c-ab5c-b1dca604fef4","3f9be8e5-e7a0-4f06-a8e2-8796d72822c1","e13ff805-81c6-49c2-940c-7582c2c11e31","60096d25-3a62-426b-b8ae-8b82ae435dc7","5b2b85e9-e656-430a-9c78-b48c5a047e45","5cb9b141-df90-4502-9d80-446ade8b87da","dfee2b50-3adc-4295-9ec5-e1ba091f73a0","4dbe32ce-d84a-4efe-9d65-74fcf13f2467","1a53eb88-55a7-4863-a5ec-92a5cb8a24be","6d4ee7de-d618-4a66-9af8-edc0aec8c99a","8f74c929-9f88-462d-9b1d-673c589f00bd","803b9eea-a0a5-4208-ab5a-5563ebfb9345","1c09fb54-7939-491e-a036-98af01b54df2","1e0435c4-d586-4df7-ae84-246c473eb4e2","78d076e9-d064-49c2-941e-5bb93730b7a4","ecb053b3-b037-4038-b2bc-161b24b50901","f0bd7401-3ace-4c6c-a827-f04448b26c29","c32e0712-b5a1-440d-b082-f7ced0894624","79f8ec24-afdd-444d-8e50-90a43b3d2bb5","ae23c961-f05f-4780-a92c-3f39333b5c5d","377bdb35-2eb2-4bb0-945f-005eae892d44","0b6e0e86-b8a1-41ca-8c22-137ca78b099c","db1b2b48-7e25-48ae-9c7f-72d98039630f","40089843-df40-4d63-a754-46ecb5fb9141","0bf58ff0-d9a4-4a0b-b5e7-fc0e04bf78ac","e1a7c942-f8f3-4283-96ef-6e19bd729141","07b97df3-d82c-42db-b809-b46d1e8468ac","9b98bfa1-4037-4c34-9f20-d945c33151cf","345fd269-8986-4fcb-a6b4-88a6b4a2dfa6","2afba870-3145-46d8-acd0-8a6b39efef40","d6cd5738-d908-4b3c-8648-2af69cf19e21","b67d18dd-e98c-4151-9516-9381e2614077","c516ed34-b627-4563-9d72-b6dc0f3d503d","e0e95de4-a475-4d15-8abc-6cf1a2f1b6f4","e2eae7b4-5102-49bd-bfd9-82229e1082e0","fea57376-524e-48f4-9fb7-bb66eb5260ef","6d0d7fa7-6023-4777-8c98-86ca19110564","b7c70e4a-385a-4a32-be3a-290a61782940","e75fff1b-acda-4ed0-8272-1e74809d3b5e","5c9b9a93-d107-4bb5-ba2d-9e4c1902453a","7d02e060-69c9-41e6-a29c-7efd5fe6cbff","2ec98a98-ed39-4b4d-8717-392adf3a6d51","75801b17-2383-4341-8b9a-4e78c445242b","e4c19888-dcc0-454b-ad31-beae9110fd8b","e8584c6f-7e2d-4371-925c-75c8d560ee46","b0e4940f-7fb8-4cc5-8321-1d354c7912c8","66f231e0-3f96-4a7a-bdfe-0baeee193ec2","fb6d429f-a429-4073-926b-a718f4127e5b","5ba741df-599d-4a9b-8225-4cdb1e72d0db","2c78da28-8e01-456e-8ea8-0ef5a485096c","b23577c1-67fb-40aa-92ff-6aafa6ae92ee","56f26d8e-d4a6-42df-9752-3fb39e7d6c68","122aac50-d321-402e-8587-02653cb64287","84a73b07-b1fc-40ae-8987-ce735d282d23","45898055-9b04-48cb-95b4-daaf741a3bb3","640cd3c1-6682-4cc4-b03c-12616149f639","cc9839ec-7154-4fca-859b-b2a5d393654f","05e4e0b0-6311-4e1b-9081-cb6f912af2dc","91d69515-071d-461d-ad62-29600df974c4","cd36daae-bf0b-4627-b554-3b1c1f5b0b5d","0df3835b-491f-4a4d-a428-5c30a7a9a702","364256dc-3d34-4b51-9606-336988bdc22c","73f4e961-d953-411c-ae20-a13e623fad7e","830397c5-2a29-4702-ae13-0f5d04b519fd","fd3df686-f5b0-43df-85a2-3537d5ab1e82","0e7afdae-4077-446d-8acd-e3a365ef7310","f4ecc82a-58c8-423e-b921-69c49f10e2f8","6a59c5ca-2861-4f0c-ad18-01fc9a7e5abc","db259695-8178-4473-9eee-93f65fcb4234"],"format":{"page_icon":"ğŸ–‹ï¸","page_cover":"https://images.unsplash.com/photo-1596484552834-6a58f850e0a1?ixlib=rb-4.0.3\u0026q=80\u0026fm=jpg\u0026crop=entropy\u0026cs=tinysrgb","page_cover_position":0.5},"created_time":1667961574811,"last_edited_time":1683787935489,"parent_id":"e34bec60-9b02-4ad8-aaf8-83369409cc9f","parent_table":"collection","alive":true,"created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"},"role":"reader"},"a6089909-2d0d-43ef-af93-5e041712e826":{"value":{"id":"a6089909-2d0d-43ef-af93-5e041712e826","version":116,"type":"collection_view_page","view_ids":["065b98d2-d3b4-4dab-8b96-4eb118a3f311"],"collection_id":"e34bec60-9b02-4ad8-aaf8-83369409cc9f","format":{"block_locked":false,"block_locked_by":"2c0e0b01-f59e-4e03-b7b6-7d706eecada3","collection_pointer":{"id":"e34bec60-9b02-4ad8-aaf8-83369409cc9f","table":"collection","spaceId":"b0a64676-90b9-4734-9c63-2d704ee573b6"},"copied_from_pointer":{"id":"adc3552c-fc73-442a-b504-8d4b1eb0079a","table":"block","spaceId":"ac4cb96d-c8f8-4040-9bb2-868d9fc7f526"}},"permissions":[{"role":"editor","type":"user_permission","user_id":"f594524b-0941-4aea-99a2-9b9304033287"},{"role":"reader","type":"public_permission","added_timestamp":1666006306008}],"created_time":1665993658476,"last_edited_time":1681291806215,"parent_id":"b0a64676-90b9-4734-9c63-2d704ee573b6","parent_table":"space","alive":true,"copied_from":"adc3552c-fc73-442a-b504-8d4b1eb0079a","created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"},"role":"reader"},"3aa32474-6d59-444e-b612-71b45a85531b":{"value":{"id":"3aa32474-6d59-444e-b612-71b45a85531b","version":167,"type":"quote","properties":{"title":[["å¼€å‘æ•£æ–‡ï¼šä»¥å¼€å‘ä¸ºä¸»é¢˜çš„æ•£æ–‡ã€‚åŸºæœ¬å®Œæ•´å¤ç°äº†ä»é‡åˆ°é—®é¢˜ã€åˆ†æé—®é¢˜ã€æ‰¾åˆ°è§£å†³æ€è·¯ã€ç¼–ç å®ç°æ€è·¯çš„å…¨æµç¨‹ï¼Œé¡ºå¸¦ç€è®°å½•ä¸€äº›æµ…è–„çš„çŸ¥è¯†ç‚¹ã€‚"]]},"format":{"quote_size":"large"},"created_time":1668164183779,"last_edited_time":1668164220000,"parent_id":"3dd5dfcc-005c-49b5-9cca-96ccded25899","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"},"role":"reader"},"6055afb6-3490-4637-b8f0-5312f7ca0072":{"value":{"id":"6055afb6-3490-4637-b8f0-5312f7ca0072","version":4,"type":"table_of_contents","format":{"block_color":"gray"},"created_time":1668666530021,"last_edited_time":1668666480000,"parent_id":"3dd5dfcc-005c-49b5-9cca-96ccded25899","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"},"role":"reader"},"2be67e4c-2135-4cce-a5fe-57f4856bd26a":{"value":{"id":"2be67e4c-2135-4cce-a5fe-57f4856bd26a","version":978,"type":"text","properties":{"title":[["å…ˆç®€è¿°ä¸€ä¸‹éœ€æ±‚èƒŒæ™¯ï¼šä¸ºäº†å®ç°å¯è§‚æµ‹æ€§ï¼Œäº§å“ä¸­çš„ä¸€äº›æŒ‡æ ‡æ•°æ®éœ€è¦æ¨é€åˆ° "],["Prometheus èšåˆç½‘å…³",[["a","https://github.com/weaveworks/prom-aggregation-gateway"]]],["ï¼Œå‡ºäºä¸æƒ³å¯¹ä¸»ä½“æœåŠ¡æœ‰æ›´å¤šå¹²æ‰°çš„åŸåˆ™ï¼Œé¡¹ç›®é€‰æ‹©ä½¿ç”¨ UDP åè®®å‘é€æ•°æ®ï¼ˆä¹Ÿå¯¹èšåˆç½‘å…³åšäº†ç®€å•çš„ UDP æ•°æ®æ¥æ”¶æ”¹é€ ï¼‰ã€‚ä½†æ˜¯åœ¨è¿è¡Œè¿‡ç¨‹ä¸­ï¼Œ"],["å‘ç°ä¸ŠæŠ¥æ•°æ®é‡åå°‘",[["h","red"],["b"]]],["ï¼Œç»è¿‡æ—¥å¿—æ’æŸ¥ï¼Œåœ¨æ•°æ®å‘é€ç«¯ç§å‡ºäº†ç‚¹ç«¯å€ªï¼š"]]},"created_time":1668134520000,"last_edited_time":1668163440000,"parent_id":"3dd5dfcc-005c-49b5-9cca-96ccded25899","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"},"role":"reader"},"3530898c-cc63-4c38-b32a-992df442fca8":{"value":{"id":"3530898c-cc63-4c38-b32a-992df442fca8","version":22,"type":"code","properties":{"title":[["error: [Errno 90] Message too long"]],"language":[["Bash"]]},"format":{"code_wrap":true},"created_time":1667961540000,"last_edited_time":1668135660000,"parent_id":"3dd5dfcc-005c-49b5-9cca-96ccded25899","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"},"role":"reader"},"c056d5e0-7bad-44ec-888b-5e7a9c90b4ab":{"value":{"id":"c056d5e0-7bad-44ec-888b-5e7a9c90b4ab","version":515,"type":"text","properties":{"title":[["é—®é¢˜éå¸¸ç®€å•æ˜æ™°ï¼š"],["å•æ¬¡è¯·æ±‚å‘é€çš„æ•°æ®åŒ…å¤§å°è¶…è¿‡äº†ç½‘ç»œæ•°æ®åŒ…çš„ä¸Šé™",[["b"]]],["ã€‚"]]},"created_time":1667961540000,"last_edited_time":1668159600000,"parent_id":"3dd5dfcc-005c-49b5-9cca-96ccded25899","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"},"role":"reader"},"acd12bd9-1bd0-4f8e-9b60-aa9357bcb8bd":{"value":{"id":"acd12bd9-1bd0-4f8e-9b60-aa9357bcb8bd","version":96,"type":"text","properties":{"title":[["é‚£ä¹ˆå°±æœ‰äº†ç¬¬ä¸€ä¸ªé—®é¢˜ï¼š"],["UDP åè®®è§„å®šçš„åŒ…å¤§å°ç©¶ç«Ÿæ˜¯å¤šå°‘å‘¢ï¼Ÿ",[["b"],["h","yellow"]]]]},"created_time":1668137520000,"last_edited_time":1668163440000,"parent_id":"3dd5dfcc-005c-49b5-9cca-96ccded25899","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"},"role":"reader"},"5487dbcb-e73e-4255-a606-e967662777f6":{"value":{"id":"5487dbcb-e73e-4255-a606-e967662777f6","version":67,"type":"sub_header","properties":{"title":[["UDP åŒ…æ˜¯å¤šå¤§ï¼Ÿ"]]},"created_time":1668137460000,"last_edited_time":1668137520000,"parent_id":"3dd5dfcc-005c-49b5-9cca-96ccded25899","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"},"role":"reader"},"94904690-1e7c-435c-ab5c-b1dca604fef4":{"value":{"id":"94904690-1e7c-435c-ab5c-b1dca604fef4","version":18,"type":"text","properties":{"title":[["å…ˆæ¥çœ‹ä¸€ä¸‹ "],["UDP åè®®",[["a","https://www.ietf.org/rfc/rfc768.txt"]]],[" çš„åŒ…é•¿ä»€ä¹ˆæ ·å­ï¼š"]]},"created_time":1668137460000,"last_edited_time":1668163440000,"parent_id":"3dd5dfcc-005c-49b5-9cca-96ccded25899","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"},"role":"reader"},"3f9be8e5-e7a0-4f06-a8e2-8796d72822c1":{"value":{"id":"3f9be8e5-e7a0-4f06-a8e2-8796d72822c1","version":11,"type":"image","properties":{"size":[["79.7KB"]],"title":[["Untitled"]],"source":[["https://s3-us-west-2.amazonaws.com/secure.notion-static.com/5443128d-3b3b-41b5-8761-7744128d4af8/Untitled.png"]],"caption":[["The UDP protocol header consists of 8 bytes of Protocol Control Information (PCI)",[["i"]]]]},"format":{"block_width":1418,"display_source":"https://s3-us-west-2.amazonaws.com/secure.notion-static.com/5443128d-3b3b-41b5-8761-7744128d4af8/Untitled.png","block_full_width":false,"block_page_width":true,"block_aspect_ratio":0.3554301833568406,"block_preserve_scale":true},"created_time":1668136620000,"last_edited_time":1668137640000,"parent_id":"3dd5dfcc-005c-49b5-9cca-96ccded25899","parent_table":"block","alive":true,"file_ids":["5443128d-3b3b-41b5-8761-7744128d4af8"],"created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"},"role":"reader"},"e13ff805-81c6-49c2-940c-7582c2c11e31":{"value":{"id":"e13ff805-81c6-49c2-940c-7582c2c11e31","version":246,"type":"text","properties":{"title":[["å¦‚å›¾æ‰€è§ï¼ŒUDP å¯èƒ½ç®—æ˜¯æœ€ç®€æ´çš„ä¼ è¾“å±‚åè®®ä¹‹ä¸€äº†ï¼ŒåŒ…çš„ç»„æˆéå¸¸ç®€å•æ˜“æ‡‚ï¼š"]]},"created_time":1668136020000,"last_edited_time":1668137700000,"parent_id":"3dd5dfcc-005c-49b5-9cca-96ccded25899","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"},"role":"reader"},"60096d25-3a62-426b-b8ae-8b82ae435dc7":{"value":{"id":"60096d25-3a62-426b-b8ae-8b82ae435dc7","version":87,"type":"bulleted_list","properties":{"title":[["Source Portï¼š",[["b"]]],["åŒ…æ¥æºç«¯å£ä¿¡æ¯ã€‚"]]},"created_time":1668136680000,"last_edited_time":1668137460000,"parent_id":"3dd5dfcc-005c-49b5-9cca-96ccded25899","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"},"role":"reader"},"5b2b85e9-e656-430a-9c78-b48c5a047e45":{"value":{"id":"5b2b85e9-e656-430a-9c78-b48c5a047e45","version":74,"type":"bulleted_list","properties":{"title":[["Destination Portï¼š",[["b"]]],["åŒ…ç›®çš„ç«¯å£ä¿¡æ¯ã€‚"]]},"created_time":1668136740000,"last_edited_time":1668137460000,"parent_id":"3dd5dfcc-005c-49b5-9cca-96ccded25899","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"},"role":"reader"},"5cb9b141-df90-4502-9d80-446ade8b87da":{"value":{"id":"5cb9b141-df90-4502-9d80-446ade8b87da","version":83,"type":"bulleted_list","properties":{"title":[["UDP Lengthï¼š",[["b"]]],["UDP å¤´ä¿¡æ¯+ Payload çš„æ€»é•¿åº¦ã€‚"]]},"created_time":1668136860000,"last_edited_time":1668137460000,"parent_id":"3dd5dfcc-005c-49b5-9cca-96ccded25899","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"},"role":"reader"},"dfee2b50-3adc-4295-9ec5-e1ba091f73a0":{"value":{"id":"dfee2b50-3adc-4295-9ec5-e1ba091f73a0","version":140,"type":"bulleted_list","properties":{"title":[["UDP Checksumï¼š",[["b"]]],["åŒ…çš„æ ¡éªŒå’Œï¼Œé¿å…åœ¨æ•°æ®åœ¨ä¼ è¾“ä¸­è¢«æ±¡æŸ“ã€‚"]]},"created_time":1668137160000,"last_edited_time":1668137280000,"parent_id":"3dd5dfcc-005c-49b5-9cca-96ccded25899","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"},"role":"reader"},"4dbe32ce-d84a-4efe-9d65-74fcf13f2467":{"value":{"id":"4dbe32ce-d84a-4efe-9d65-74fcf13f2467","version":918,"type":"text","properties":{"title":[["ä»¥ä¸Šå››ä¸ªéƒ¨åˆ†ç§°ä¹‹ä¸ºåè®®æ§åˆ¶ä¿¡æ¯ PCIï¼Œåˆç§°åè®®å¤´ï¼Œæ¯ä¸ªéƒ¨åˆ† 2 bytesï¼Œä¸€å…±å  8 bytesã€‚"]]},"created_time":1668136020000,"last_edited_time":1668163440000,"parent_id":"3dd5dfcc-005c-49b5-9cca-96ccded25899","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"},"role":"reader"},"1a53eb88-55a7-4863-a5ec-92a5cb8a24be":{"value":{"id":"1a53eb88-55a7-4863-a5ec-92a5cb8a24be","version":28,"type":"text","properties":{"title":[["åŒæ—¶ç”±äºç½‘ç»œå±‚çš„ IP å¤´ä¹Ÿéœ€è¦å æ®ä¸€éƒ¨åˆ†ç©ºé—´ï¼Œæ‰€ä»¥åœ¨è®¡ç®— Payload å¤§å°æ—¶éœ€è¦å…ˆæ¥çœ‹çœ‹ IP å±‚çš„æƒ…å†µã€‚é¦–å…ˆæ¥çœ‹ IPv4ï¼š"]]},"created_time":1668152820000,"last_edited_time":1668153420000,"parent_id":"3dd5dfcc-005c-49b5-9cca-96ccded25899","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"},"role":"reader"},"6d4ee7de-d618-4a66-9af8-edc0aec8c99a":{"value":{"id":"6d4ee7de-d618-4a66-9af8-edc0aec8c99a","version":70,"type":"code","properties":{"title":[["# IPv4\n"],["0xffff - (sizeof(IP Header) + sizeof(UDP Header)) = 65535-(20+8) = 65507",[["b"]]]],"language":[["Plain Text"]]},"format":{"code_wrap":true},"created_time":1668152040000,"last_edited_time":1668154920000,"parent_id":"3dd5dfcc-005c-49b5-9cca-96ccded25899","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"},"role":"reader"},"8f74c929-9f88-462d-9b1d-673c589f00bd":{"value":{"id":"8f74c929-9f88-462d-9b1d-673c589f00bd","version":234,"type":"text","properties":{"title":[["æ€»çš„æ¥è¯´ç¬¦åˆé¢„æœŸï¼Œåœ¨ç®—ä¸Š IP å¤´çš„æƒ…å†µä¸‹ï¼ŒIPv4 UDP åŒ… Payload æœ€å¤§ä¸èƒ½è¶…è¿‡ "],["65507 bytesã€‚",[["h","teal"],["b"]]]]},"created_time":1668138780000,"last_edited_time":1668163500000,"parent_id":"3dd5dfcc-005c-49b5-9cca-96ccded25899","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"},"role":"reader"},"803b9eea-a0a5-4208-ab5a-5563ebfb9345":{"value":{"id":"803b9eea-a0a5-4208-ab5a-5563ebfb9345","version":448,"type":"text","properties":{"title":[["ä½†æ˜¯åœ¨ IPv6 çš„æƒ…å†µæœ‰äº†ä¸€ç‚¹ç‚¹å¤æ‚ï¼šç”±äº "],["Jumbogram",[["a","https://datatracker.ietf.org/doc/html/rfc2675"]]],["ï¼ˆè¶…å¤§åŒ…ï¼‰ çš„å­˜åœ¨ï¼Œè¶…è¿‡ 65535 bytes çš„åŒ…æ˜¯å¯ä»¥åœ¨è°ƒæ•´è¿‡ "],["MTU",[["a","https://en.wikipedia.org/wiki/Maximum_transmission_unit"]]],[" çš„èŠ‚ç‚¹ä¸­ä¼ è¾“çš„ï¼Œæ‰€ä»¥ç†è®ºä¸Šçš„æœ€å¤§ä½“ç§¯ä¸ºï¼š"]]},"created_time":1668153060000,"last_edited_time":1668671100000,"parent_id":"3dd5dfcc-005c-49b5-9cca-96ccded25899","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"},"role":"reader"},"1c09fb54-7939-491e-a036-98af01b54df2":{"value":{"id":"1c09fb54-7939-491e-a036-98af01b54df2","version":39,"type":"code","properties":{"title":[["# IPv6\n"],["0xffff - sizeof(UDP Header) = 65535-8 = 65527",[["b"]]]],"language":[["Plain Text"]]},"format":{"code_wrap":true},"created_time":1668153360000,"last_edited_time":1668154920000,"parent_id":"3dd5dfcc-005c-49b5-9cca-96ccded25899","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"},"role":"reader"},"1e0435c4-d586-4df7-ae84-246c473eb4e2":{"value":{"id":"1e0435c4-d586-4df7-ae84-246c473eb4e2","version":278,"type":"text","properties":{"title":[["ä¹Ÿå°±æ˜¯åœ¨ä½ çš„åŸºå»ºå®Œå…¨æ”¯æŒ IPv6 å¹¶ä¸”èƒ½å¤Ÿè®¾ç½®è¶…å¤§ MTU æ—¶ï¼ŒIPv6 UDP åŒ… Payload åŒ…æœ€å¤§ä¸èƒ½è¶…è¿‡ "],["65527 bytesã€‚",[["h","teal"],["b"]]]]},"created_time":1668138780000,"last_edited_time":1668157140000,"parent_id":"3dd5dfcc-005c-49b5-9cca-96ccded25899","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"},"role":"reader"},"78d076e9-d064-49c2-941e-5bb93730b7a4":{"value":{"id":"78d076e9-d064-49c2-941e-5bb93730b7a4","version":287,"type":"callout","properties":{"title":[["æ³¨æ„ï¼šä¸åŒæ“ä½œç³»ç»Ÿé™å€¼ä¹Ÿå¯èƒ½ä¼šä¸åŒï¼Œä¾‹å¦‚ macOS ä¸‹æœ€å¤§åŒ…é»˜è®¤å€¼ä¸º 9216 bytesã€‚æœ¬æ–‡ä»…ä»åè®®è§’åº¦è®¨è®ºã€‚"]]},"format":{"page_icon":"âš ï¸","block_color":"gray_background"},"created_time":1668157183807,"last_edited_time":1668671100000,"parent_id":"3dd5dfcc-005c-49b5-9cca-96ccded25899","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"},"role":"reader"},"ecb053b3-b037-4038-b2bc-161b24b50901":{"value":{"id":"ecb053b3-b037-4038-b2bc-161b24b50901","version":916,"type":"text","properties":{"title":[["ä»¥ä¸Šåˆ†æçš„éƒ½æ˜¯ç†è®ºæœ€å¤§å€¼ï¼Œè€Œåœ¨çœŸå®ä¼ è¾“ä¸­ï¼Œå¦‚æœæƒ³å°½å¯èƒ½ä¿è¯ UDP åŒ…çš„å®‰å…¨ï¼Œä¸å¾—ä¸è€ƒè™‘ MTU åœ¨å…¶ä¸­çš„å½±å“ï¼šå½“æ•°æ®åŒ…å¤§å°æ¯” MTU å€¼å¤§çš„è¶Šå¤šï¼Œä¼ è¾“æ—¶è¢«åˆ‡åˆ†çš„æ®µæ•°å°±è¶Šå¤šï¼Œç”±äº UDP æœ¬èº«åè®®çš„ä¸å¯é æ€§ï¼Œæ•°æ®åŒ…çš„å®‰å…¨æ€§å°±è¶Šä½ã€‚"]]},"created_time":1668153720000,"last_edited_time":1668155280000,"parent_id":"3dd5dfcc-005c-49b5-9cca-96ccded25899","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"},"role":"reader"},"f0bd7401-3ace-4c6c-a827-f04448b26c29":{"value":{"id":"f0bd7401-3ace-4c6c-a827-f04448b26c29","version":661,"type":"text","properties":{"title":[["è€Œ MTU çš„æœ€å°å€¼ä¸º 576 bytesï¼Œåœ¨ IPv4 çš„æƒ…å†µä¸‹ï¼Œå‡å»ä¸Šé¢æåˆ°çš„ IP Header å’Œ UDP Header ï¼Œè¿˜å‰©ä¸‹ "],["548 bytes",[["h","red"],["b"]]],[" ã€‚è¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆå¾ˆå¤šå…¬ç½‘æœåŠ¡éƒ½ä¼šé™åˆ¶ UDP åŒ…çš„æœ€å¤§ä¸èƒ½è¶…è¿‡ 512 bytes ï¼ˆä¾‹å¦‚ DNSï¼‰ã€‚åŒæ—¶åœ¨ IP Options å­˜åœ¨çš„æƒ…å†µï¼ŒIP Header å¯èƒ½ä¼šå æ® 60 bytesã€‚æ‰€ä»¥ï¼Œå¦‚æœä½ çš„ UDP åŒ…æƒ³è¦"],["ç©¿è¶Šå¤æ‚çš„å…¬ç½‘",[["i"],["b"]]],["ï¼Œæœ€å®‰å…¨çš„æœ€å¤§å€¼æ˜¯ "],["508 bytes",[["b"],["h","red"]]],["ã€‚"]]},"created_time":1668155280000,"last_edited_time":1668156180000,"parent_id":"3dd5dfcc-005c-49b5-9cca-96ccded25899","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"},"role":"reader"},"c32e0712-b5a1-440d-b082-f7ced0894624":{"value":{"id":"c32e0712-b5a1-440d-b082-f7ced0894624","version":550,"type":"text","properties":{"title":[["è€ƒè™‘å½“å‰é¢å¯¹çš„ç½‘ç»œç¯å¢ƒâ€”â€”æ¥å‘åŒæ–¹éƒ½å¤„äºåŒä¸€ä¸ªå®¹å™¨é›†ç¾¤å†…ï¼Œå±äºæ²¡æœ‰å¤ªå¤šå¹²æ‰°çš„ç§æœ‰ç½‘ç»œâ€”â€”"],["å¯ä»¥é…Œæƒ…é€‚å½“åŠ å¤§é™åˆ¶ï¼Œåªè¦å°äº 65507 bytes å³å¯",[["b"]]],["ã€‚"]]},"created_time":1668156120000,"last_edited_time":1668516300000,"parent_id":"3dd5dfcc-005c-49b5-9cca-96ccded25899","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"},"role":"reader"},"79f8ec24-afdd-444d-8e50-90a43b3d2bb5":{"value":{"id":"79f8ec24-afdd-444d-8e50-90a43b3d2bb5","version":316,"type":"text","properties":{"title":[["ææ¸…æ¥šäº†æœ€å¤§èƒ½å‘é€å¤šå°‘æ•°æ®ï¼Œè‡ªç„¶ä¼šæƒ³"],["å°†è¶…é™çš„æ•°æ®è¿›è¡Œåˆ‡ç‰‡å¤„ç†ï¼Œ",[["b"]]],["é‚£ä¹ˆè¿æ¥äº†ç¬¬äºŒä¸ªé—®é¢˜ï¼š"],["å¦‚ä½•åœ¨ Python è®¡ç®—æ•°æ®å¤§å°ï¼Ÿ",[["b"],["h","yellow"]]]]},"created_time":1668136020000,"last_edited_time":1668516720000,"parent_id":"3dd5dfcc-005c-49b5-9cca-96ccded25899","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"},"role":"reader"},"ae23c961-f05f-4780-a92c-3f39333b5c5d":{"value":{"id":"ae23c961-f05f-4780-a92c-3f39333b5c5d","version":28,"type":"sub_header","properties":{"title":[["å¦‚ä½•åœ¨ Python è®¡ç®—æ•°æ®å¤§å°ï¼Ÿ"]]},"created_time":1667977200000,"last_edited_time":1668138540000,"parent_id":"3dd5dfcc-005c-49b5-9cca-96ccded25899","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"},"role":"reader"},"377bdb35-2eb2-4bb0-945f-005eae892d44":{"value":{"id":"377bdb35-2eb2-4bb0-945f-005eae892d44","version":566,"type":"text","properties":{"title":[["æˆ‘çš„ç¬¬ä¸€ååº”æ˜¯ä½¿ç”¨ "],["getsizeof",[["c"]]],[" ï¼Œè™½ç„¶ç¨æœ‰ç»éªŒçš„ Python ç¨‹åºå‘˜ä¼šæƒ³åˆ°ï¼Œå®ƒå¯¹äº"],["å®¹å™¨ç±»çš„å¯¹è±¡æ˜¯æ²¡æ³•ç²¾å‡†ç»Ÿè®¡çš„",[["a","https://code.activestate.com/recipes/577504/"]]],["ï¼Œå¥½åœ¨å½“å‰åœºæ™¯é‡Œåªæ˜¯ç”¨æ¥ç»Ÿè®¡ bytesï¼Œå¹¶æ²¡æœ‰è¿™ä¸ªå›°æ‰°ã€‚"]]},"created_time":1668135060000,"last_edited_time":1668163560000,"parent_id":"3dd5dfcc-005c-49b5-9cca-96ccded25899","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"},"role":"reader"},"0b6e0e86-b8a1-41ca-8c22-137ca78b099c":{"value":{"id":"0b6e0e86-b8a1-41ca-8c22-137ca78b099c","version":4,"type":"text","properties":{"title":[["ä½†ç®€å•æµ‹è¯•äº†ä¸€ä¸‹ï¼Œå´å‘ç°äº†æ–°çš„ç–‘æƒ‘ã€‚"]]},"created_time":1668157260000,"last_edited_time":1668157260000,"parent_id":"3dd5dfcc-005c-49b5-9cca-96ccded25899","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"},"role":"reader"},"db1b2b48-7e25-48ae-9c7f-72d98039630f":{"value":{"id":"db1b2b48-7e25-48ae-9c7f-72d98039630f","version":62,"type":"sub_sub_header","properties":{"title":[["getsizeof",[["c"]]],[" çš„ç–‘æƒ‘"]]},"created_time":1667979960000,"last_edited_time":1668138960000,"parent_id":"3dd5dfcc-005c-49b5-9cca-96ccded25899","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"},"role":"reader"},"40089843-df40-4d63-a754-46ecb5fb9141":{"value":{"id":"40089843-df40-4d63-a754-46ecb5fb9141","version":110,"type":"code","properties":{"title":[["from sys import getsizeof\n\ngetsizeof(b\"\")        ğŸ‘‰ 33\ngetsizeof(b\"abcd\")    ğŸ‘‰ 37"]],"language":[["Python"]]},"format":{"code_wrap":true},"created_time":1667979960000,"last_edited_time":1668157800000,"parent_id":"3dd5dfcc-005c-49b5-9cca-96ccded25899","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"},"role":"reader"},"0bf58ff0-d9a4-4a0b-b5e7-fc0e04bf78ac":{"value":{"id":"0bf58ff0-d9a4-4a0b-b5e7-fc0e04bf78ac","version":977,"type":"text","properties":{"title":[["æœ‰æ„æ€çš„æ˜¯ï¼Œå°±ç®—ç©º bytesï¼Œä¸ºä»€ä¹ˆä¹Ÿæœ‰ 33 bytes çš„ç©ºé—´å ç”¨ï¼Ÿç¨æœ‰ç»éªŒçš„ç¨‹åºå‘˜å°±èƒ½ç«‹é©¬ååº”è¿‡æ¥ï¼Œè¿™å°±æ˜¯å¯¹è±¡æœ¬èº«çš„å¤§å°ï¼Œä¸€çª¥ Python å†…ç½®æ•°æ®ç±»å‹çš„å¤§å°ï¼ˆ64-bit Python 3.6ï¼‰ï¼š"]]},"created_time":1667980020000,"last_edited_time":1668653700000,"parent_id":"3dd5dfcc-005c-49b5-9cca-96ccded25899","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"},"role":"reader"},"e1a7c942-f8f3-4283-96ef-6e19bd729141":{"value":{"id":"e1a7c942-f8f3-4283-96ef-6e19bd729141","version":38,"type":"code","properties":{"title":[["Empty\nBytes  type        scaling notes\n28     int         +4 bytes about every 30 powers of 2\n37     bytes       +1 byte per additional byte\n49     str         +1-4 per additional character (depending on max width)\n48     tuple       +8 per additional item\n64     list        +8 for each additional\n224    set         5th increases to 736; 21nd, 2272; 85th, 8416; 341, 32992\n240    dict        6th increases to 368; 22nd, 1184; 43rd, 2280; 86th, 4704; 171st, 9320\n136    func def    does not include default args and other attrs\n1056   class def   no slots \n56     class inst  has a __dict__ attr, same scaling as dict above\n888    class def   with slots\n16     __slots__   seems to store in mutable tuple-like structure\n                   first slot grows to 48, and so on."]],"language":[["Python"]]},"format":{"code_wrap":true},"created_time":1668158280000,"last_edited_time":1668653700000,"parent_id":"3dd5dfcc-005c-49b5-9cca-96ccded25899","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"},"role":"reader"},"07b97df3-d82c-42db-b809-b46d1e8468ac":{"value":{"id":"07b97df3-d82c-42db-b809-b46d1e8468ac","version":6,"type":"text","properties":{"title":[["è™½ç„¶æˆ‘ä»¬åœ¨ä»£ç ä¸­ä¼ å…¥çš„æ˜¯å¯¹è±¡ï¼Œä½†å®é™…ä¸Šä¼ è¾“çš„æ•°æ®éœ€è¦åˆ¨é™¤è¯­è¨€é™„åŠ çš„å­˜å‚¨ç©ºé—´ï¼Œæ‰€ä»¥ä¸èƒ½é€šè¿‡ "],["getsizeof",[["c"]]],[" æ‹¿åˆ°çš„æ•°æ®æœ¬èº«çš„å¤§å°ï¼Œè¿™ç®—æ˜¯ä¸€æ¡èµ°é”™çš„æ€è·¯ xDã€‚"]]},"created_time":1668653700000,"last_edited_time":1668653700000,"parent_id":"3dd5dfcc-005c-49b5-9cca-96ccded25899","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"},"role":"reader"},"9b98bfa1-4037-4c34-9f20-d945c33151cf":{"value":{"id":"9b98bfa1-4037-4c34-9f20-d945c33151cf","version":3,"type":"sub_sub_header","properties":{"title":[["ç®€å•ç‚¹ï¼Œ "],["len()",[["c"]]]]},"created_time":1668139020000,"last_edited_time":1668159300000,"parent_id":"3dd5dfcc-005c-49b5-9cca-96ccded25899","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"},"role":"reader"},"345fd269-8986-4fcb-a6b4-88a6b4a2dfa6":{"value":{"id":"345fd269-8986-4fcb-a6b4-88a6b4a2dfa6","version":219,"type":"text","properties":{"title":[["è®©æˆ‘ä»¬å›åˆ°é—®é¢˜æœ¬èº«ï¼Œå¯¹äº bytes æ•°æ®ï¼Œæœ€ç®€å•ç»Ÿè®¡å¤§å°çš„æ–¹å¼å°±æ˜¯ç›´æ¥ä½¿ç”¨ "],["len()",[["c"]]],[" ã€‚"]]},"created_time":1668139020000,"last_edited_time":1668158580000,"parent_id":"3dd5dfcc-005c-49b5-9cca-96ccded25899","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"},"role":"reader"},"2afba870-3145-46d8-acd0-8a6b39efef40":{"value":{"id":"2afba870-3145-46d8-acd0-8a6b39efef40","version":82,"type":"code","properties":{"title":[["big_bytes: bytes\nsize = len(big_bytes)"]],"language":[["Python"]]},"format":{"code_wrap":true},"created_time":1667980020000,"last_edited_time":1668653760000,"parent_id":"3dd5dfcc-005c-49b5-9cca-96ccded25899","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"},"role":"reader"},"d6cd5738-d908-4b3c-8648-2af69cf19e21":{"value":{"id":"d6cd5738-d908-4b3c-8648-2af69cf19e21","version":218,"type":"text","properties":{"title":[["ç¡®å®šäº†å¦‚ä½•è®¡ç®—æ•°æ®å¤§å°ï¼Œä¸‹ä¸€æ­¥çš„æ€è·¯å°±æ˜¯ï¼š"],["å¦‚ä½•å¯¹ Prometheus æŒ‡æ ‡æ•°æ®åˆ‡ç‰‡ï¼Ÿ",[["b"],["h","yellow"]]]]},"created_time":1668159360000,"last_edited_time":1668163560000,"parent_id":"3dd5dfcc-005c-49b5-9cca-96ccded25899","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"},"role":"reader"},"b67d18dd-e98c-4151-9516-9381e2614077":{"value":{"id":"b67d18dd-e98c-4151-9516-9381e2614077","version":56,"type":"sub_header","properties":{"title":[["å¦‚ä½•å¯¹ Prometheus æŒ‡æ ‡æ•°æ®åˆ‡ç‰‡ï¼Ÿ"]]},"created_time":1667961540000,"last_edited_time":1668159900000,"parent_id":"3dd5dfcc-005c-49b5-9cca-96ccded25899","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"},"role":"reader"},"c516ed34-b627-4563-9d72-b6dc0f3d503d":{"value":{"id":"c516ed34-b627-4563-9d72-b6dc0f3d503d","version":500,"type":"text","properties":{"title":[["æ­£å¦‚æ ‡é¢˜æåˆ°çš„ï¼Œ UDP ä¼ è¾“çš„æ˜¯ Prometheus çš„æŒ‡æ ‡æ•°æ®ï¼Œå®ƒæ˜¯ç”±ä¸€ä¸ªæœ‰å­—é¢å€¼çš„å­—ç¬¦ä¸²è½¬æ¢è€Œæ¥çš„äºŒè¿›åˆ¶ï¼Œå®ƒè¿˜æ˜¯å­—ç¬¦ä¸²çš„æ—¶å€™ä¸€èˆ¬é•¿è¿™æ ·ï¼š"]]},"created_time":1668158640000,"last_edited_time":1668163560000,"parent_id":"3dd5dfcc-005c-49b5-9cca-96ccded25899","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"},"role":"reader"},"e0e95de4-a475-4d15-8abc-6cf1a2f1b6f4":{"value":{"id":"e0e95de4-a475-4d15-8abc-6cf1a2f1b6f4","version":184,"type":"code","properties":{"title":[["# HELP sample_metric_foo_count ç¤ºä¾‹è§£é‡Š\n# TYPE sample_metric_foo_count gauge",[["h","gray"]]],["\nsample_metric_foo_count{foo=\"aa\",bar=\"bb\"} 14.0\nsample_metric_foo_count{foo=\"cc\",bar=\"dd\"} 27.0\nsample_metric_foo_count{foo=\"ee\",bar=\"ff\"} 12.0\n\n"],["# HELP sample_metric_bar_count ç¤ºä¾‹è§£é‡Š\n# TYPE sample_metric_bar_count gauge",[["h","gray"]]],["\nsample_metric_bar_count{baz=\"gg\"} 660.0\nsample_metric_bar_count{baz=\"hh\"} 660.0"]],"language":[["Plain Text"]]},"format":{"code_wrap":true},"created_time":1668159480000,"last_edited_time":1668495540000,"parent_id":"3dd5dfcc-005c-49b5-9cca-96ccded25899","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"},"role":"reader"},"e2eae7b4-5102-49bd-bfd9-82229e1082e0":{"value":{"id":"e2eae7b4-5102-49bd-bfd9-82229e1082e0","version":585,"type":"text","properties":{"title":[["å®ƒæœ¬èº«éœ€è¦ç¬¦åˆä¸€å®šçš„"],["æ ¼å¼",[["a","https://prometheus.io/docs/concepts/data_model/"]]],["ï¼Œ "],["#",[["c"]]],[" å¼€å¤´çš„ä¸¤è¡Œä½œä¸ºæŒ‡æ ‡ä¿¡æ¯çš„å…ƒä¿¡æ¯ï¼Œ"]]},"created_time":1668138780000,"last_edited_time":1668654360000,"parent_id":"3dd5dfcc-005c-49b5-9cca-96ccded25899","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"},"role":"reader"},"fea57376-524e-48f4-9fb7-bb66eb5260ef":{"value":{"id":"fea57376-524e-48f4-9fb7-bb66eb5260ef","version":27,"type":"code","properties":{"title":[["# HELP sample_metric_foo_count ç¤ºä¾‹è§£é‡Š\n# TYPE sample_metric_foo_count gauge",[["h","gray"]]]],"language":[["Python"]]},"format":{"code_wrap":true},"created_time":1668654180000,"last_edited_time":1668654360000,"parent_id":"3dd5dfcc-005c-49b5-9cca-96ccded25899","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"},"role":"reader"},"6d0d7fa7-6023-4777-8c98-86ca19110564":{"value":{"id":"6d0d7fa7-6023-4777-8c98-86ca19110564","version":111,"type":"text","properties":{"title":[["å¯ä»¥å…ˆçœ‹çœ‹ Prometheus æ˜¯"],["å¦‚ä½•è§£æå®ƒçš„",[["a","https://github.com/prometheus/common/blob/8c9cb3fa6d01832ea16937b20ea561eed81abd2f/expfmt/text_parse.go#L142"]]],["ï¼š"]]},"created_time":1668654180000,"last_edited_time":1668654480000,"parent_id":"3dd5dfcc-005c-49b5-9cca-96ccded25899","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"},"role":"reader"},"b7c70e4a-385a-4a32-be3a-290a61782940":{"value":{"id":"b7c70e4a-385a-4a32-be3a-290a61782940","version":151,"type":"code","properties":{"title":[["// ä»¥ä¸‹ä¸ºæ‘˜æŠ„å†…å®¹\nfunc (p *TextParser) startOfLine() stateFn {\n  ...\n\tswitch p.currentByte {\n\tcase '#':\n\t\treturn p.startComment\n\tcase '\\n':\n\t\treturn p.startOfLine // Empty line, start the next one.\n\t}\n\treturn p.readingMetricName\n}\n\nfunc (p *TextParser) startComment() stateFn {\n  ...\n\tkeyword := p.currentToken.String()\n\tif keyword != \"HELP\" \u0026\u0026 keyword != \"TYPE\" {\n\t\t// Generic comment, ignore by fast forwarding to end of line.\n\t\tfor p.currentByte != '\\n' {\n\t\t\tif p.currentByte, p.err = p.buf.ReadByte(); p.err != nil {\n\t\t\t\treturn nil // Unexpected end of input.\n\t\t\t}\n\t\t}\n\t\treturn p.startOfLine\n\t}\n\t...\n\tswitch keyword {\n\tcase \"HELP\":\n\t\treturn p.readingHelp\n\tcase \"TYPE\":\n\t\treturn p.readingType\n\t}\n\tpanic(fmt.Sprintf(\"code error: unexpected keyword %q\", keyword))\n}"]],"language":[["Go"]]},"format":{"code_wrap":true},"created_time":1668654480000,"last_edited_time":1668654780000,"parent_id":"3dd5dfcc-005c-49b5-9cca-96ccded25899","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"},"role":"reader"},"e75fff1b-acda-4ed0-8272-1e74809d3b5e":{"value":{"id":"e75fff1b-acda-4ed0-8272-1e74809d3b5e","version":172,"type":"text","properties":{"title":[["å¯ä»¥çœ‹åˆ°ï¼šå¦‚æœç›´æ¥ç²—æš´åœ°åˆ‡åˆ†ä¼šå¯¼è‡´æ¥æ”¶ç«¯æ— æ³•è§£æä»è€Œä¸¢å¼ƒæ•´ä¸ªè¯·æ±‚æ•°æ®ã€‚æ‰€ä»¥éœ€è¦é’ˆå¯¹æ•°æ®çš„å¼€å¤´å’Œç»“å°¾ç‰¹å¾å€¼æ¥å†³å®šå…·ä½“çš„åˆ‡åˆ†ç‚¹ã€‚"]]},"created_time":1668654180000,"last_edited_time":1668655200000,"parent_id":"3dd5dfcc-005c-49b5-9cca-96ccded25899","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"},"role":"reader"},"5c9b9a93-d107-4bb5-ba2d-9e4c1902453a":{"value":{"id":"5c9b9a93-d107-4bb5-ba2d-9e4c1902453a","version":474,"type":"code","properties":{"title":[["------ # HELP ä½œä¸ºå¼€å¤´ï¼Œå°½é‡ä½œä¸ºæ•°æ®åŒ…çš„å¼€å¤´ ------",[["b"],["h","teal"]]],["\n"],["# HELP ",[["h","teal"],["b"]]],["sample_metric_foo_count ç¤ºä¾‹è§£é‡Š\n# TYPE sample_metric_foo_count gauge",[["h","gray"]]],["\nsample_metric_foo_count{foo=\"aa\",bar=\"bb\"} 14.0\nsample_metric_foo_count{foo=\"cc\",bar=\"dd\"} 27.0\nsample_metric_foo_count{foo=\"ee\",bar=\"ff\"} 12.0\n\n"],["# HELP sample_metric_bar_count ç¤ºä¾‹è§£é‡Š\n# TYPE sample_metric_bar_count gauge",[["h","gray"]]],["\nsample_metric_bar_count{baz=\"gg\"} 660.0"],["\\n",[["b"],["h","teal"]]],["\n"],["------ \\n ä½œä¸ºå•è¡Œæ•°æ®ç»“å°¾ï¼Œèƒ½å¤Ÿä¿è¯åŒ…æ•°æ®è¢«æ­£å¸¸è§£æï¼Œæœ€å·®æƒ…å†µä½œä¸ºæ•°æ®åŒ…çš„ç»“å°¾ ------",[["b"],["h","teal"]]],["\n"],["sample_metric_bar_count{baz=\"hh\"} 660.0  ",[["h","yellow"]]],["ç”±äºç¼ºå°‘ HELP/TYPE å…ƒä¿¡æ¯ï¼Œå°†æ— æ³•è¢«èšåˆå¤„ç†",[["h","yellow"],["b"]]]],"language":[["Plain Text"]]},"format":{"code_wrap":true,"copied_from_pointer":{"id":"e0e95de4-a475-4d15-8abc-6cf1a2f1b6f4","table":"block","spaceId":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"created_time":1668160414364,"last_edited_time":1668654900000,"parent_id":"3dd5dfcc-005c-49b5-9cca-96ccded25899","parent_table":"block","alive":true,"copied_from":"e0e95de4-a475-4d15-8abc-6cf1a2f1b6f4","created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"},"role":"reader"},"7d02e060-69c9-41e6-a29c-7efd5fe6cbff":{"value":{"id":"7d02e060-69c9-41e6-a29c-7efd5fe6cbff","version":8,"type":"sub_header","properties":{"title":[["å¼€ç ï¼"]]},"created_time":1668137280000,"last_edited_time":1668654900000,"parent_id":"3dd5dfcc-005c-49b5-9cca-96ccded25899","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"},"role":"reader"},"2ec98a98-ed39-4b4d-8717-392adf3a6d51":{"value":{"id":"2ec98a98-ed39-4b4d-8717-392adf3a6d51","version":89,"type":"text","properties":{"title":[["æ—¢ç„¶å‡†å¤‡å¥½äº†æ€è·¯ï¼Œé‚£ä¹ˆå°±å¼€å§‹æ­£å¼ç¼–ç å§ã€‚"]]},"created_time":1668162300000,"last_edited_time":1668163560000,"parent_id":"3dd5dfcc-005c-49b5-9cca-96ccded25899","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"},"role":"reader"},"75801b17-2383-4341-8b9a-4e78c445242b":{"value":{"id":"75801b17-2383-4341-8b9a-4e78c445242b","version":127,"type":"sub_sub_header","properties":{"title":[["é¦–å…ˆå®šä¹‰æ¨¡å‹"]]},"created_time":1668162360000,"last_edited_time":1668163680000,"parent_id":"3dd5dfcc-005c-49b5-9cca-96ccded25899","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"},"role":"reader"},"e4c19888-dcc0-454b-ad31-beae9110fd8b":{"value":{"id":"e4c19888-dcc0-454b-ad31-beae9110fd8b","version":204,"type":"text","properties":{"title":[["å¥½çš„æ¨¡å‹èƒ½å¤Ÿæ¸…æ¥šåœ°å±•ç¤ºç¼–ç æ€è·¯ï¼Œä¸ºäº†æ›´æ–¹ä¾¿åˆ‡åˆ†å®šä¹‰äº†å¦‚ä¸‹æ¨¡å‹ï¼š"]]},"created_time":1668163620000,"last_edited_time":1668163740000,"parent_id":"3dd5dfcc-005c-49b5-9cca-96ccded25899","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"},"role":"reader"},"e8584c6f-7e2d-4371-925c-75c8d560ee46":{"value":{"id":"e8584c6f-7e2d-4371-925c-75c8d560ee46","version":78,"type":"code","properties":{"title":[["@dataclass\nclass SlicedIndex:\n    \"\"\"æ•°æ®åˆ‡åˆ†ç´¢å¼•\"\"\"\n    start: int\n    end: int\n    # å¦‚æœä¸æ˜¯ä»¥ # HELP å¼€å¤´ï¼Œä¼šå¯¼è‡´ metric æ— æ³•è¢«è¯†åˆ«åˆå¹¶\n    valid_start: bool = True\n    # å¦‚æœä¸æ˜¯ä»¥ metric å†…å®¹å®Œç»“ï¼Œä¼šè®©ä¸‹ä¸€ä¸ªåˆ†ç‰‡åŒ…æ²¡æœ‰æœ‰æ•ˆå¼€å¤´\n    valid_end: bool = True\n\n    def to_tuple(self) -\u003e tuple:\n        return self.start, self.end\n\n    def __len__(self):\n        return self.end - self.start\n\n\n@dataclass\nclass SlicedIndexList:\n    indexes: List[SlicedIndex] = field(default_factory=list)\n\n    def append(self, start: int, end: int, valid_end: bool = True):\n        valid_start = True\n        if self.indexes and not self.indexes[-1].valid_end:\n            valid_start = False\n\n        self.indexes.append(SlicedIndex(start, end, valid_start, valid_end))\n\n    def __iter__(self):\n        for elem in self.indexes:\n            yield elem\n\n    def __getitem__(self, ii):\n        \"\"\"Get a list item\"\"\"\n        return self.indexes[ii]"]],"language":[["Python"]]},"format":{"code_wrap":true},"created_time":1668162360000,"last_edited_time":1668162420000,"parent_id":"3dd5dfcc-005c-49b5-9cca-96ccded25899","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"},"role":"reader"},"b0e4940f-7fb8-4cc5-8321-1d354c7912c8":{"value":{"id":"b0e4940f-7fb8-4cc5-8321-1d354c7912c8","version":17,"type":"text","properties":{"title":[["ç”±äºç½‘ç»œç¯å¢ƒè¾ƒä¸ºè‰¯å¥½ï¼Œè¿™é‡Œæ›´å€¾å‘äºå•æ¬¡å°½å¯èƒ½æäº¤è¶³å¤Ÿå¤šçš„æ•°æ®è€Œå‡å°‘ç½‘ç»œå‘é€æ¬¡æ•°ã€‚æ‰€ä»¥å°½é‡è´´è¿‘æœ€å¤§é™åˆ¶åšæ•°æ®åˆ‡åˆ†ï¼Œç”±äºæ¯æ¬¡æŸ¥æ‰¾é€»è¾‘ç±»åŒï¼Œé‡‡ç”¨é€’å½’ä¼šæ›´ç®€å•ã€‚"]]},"created_time":1668137280000,"last_edited_time":1668163620000,"parent_id":"3dd5dfcc-005c-49b5-9cca-96ccded25899","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"},"role":"reader"},"66f231e0-3f96-4a7a-bdfe-0baeee193ec2":{"value":{"id":"66f231e0-3f96-4a7a-bdfe-0baeee193ec2","version":41,"type":"sub_sub_header","properties":{"title":[["é€’å½’å¯»æ‰¾åˆ‡åˆ†ç‚¹"]]},"created_time":1668163620000,"last_edited_time":1668163680000,"parent_id":"3dd5dfcc-005c-49b5-9cca-96ccded25899","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"},"role":"reader"},"fb6d429f-a429-4073-926b-a718f4127e5b":{"value":{"id":"fb6d429f-a429-4073-926b-a718f4127e5b","version":86,"type":"code","properties":{"title":[["def find_sliced_indexes(data: bytes, start: int, udp_package_max_size: int, sliced_index_list: SlicedIndexList):\n    \"\"\"é€’å½’æ‰¾å¯»æŒ‡æ ‡å¼€å¤´æ ‡å¿—\"\"\"\n    if start + udp_package_max_size \u003e= len(data):\n        sliced_index_list.append(start, len(data))\n        return\n\n    valid_start_index = data.rfind(b\"# HELP\", start, start + udp_package_max_size)\n    if valid_start_index == -1 or valid_start_index == start:\n        # å½“æŸä¸ª metrics æ•°æ®å¤§å°å¤§äº UDP åè®®æœ€å¤§åŒ…é™åˆ¶æ—¶ï¼ŒåŸåˆ™ä¸Šæˆ‘ä»¬æ— æ³•é€šè¿‡ UDP å‘é€è¯¥æ•°æ®\n        # ä½†è¿™é‡Œæˆ‘ä»¬å°è¯•ä»¥æœ€å¤§é™åˆ¶å‘é€è¯¥æ•°æ®ï¼Œä»¥ä¸€ä¸ªè¶…è¿‡æœ€å¤§é™åˆ¶çš„æ•°æ®ä¸ºä¾‹\n        # +-----------------+ åè®®æœ€å¤§é•¿åº¦\n        # +-----------------+  +-------------------+  +-------------------+\n        # æœ‰æ•ˆ            æœ‰æ•ˆ  (ç¼ºå¤±å…ƒä¿¡æ¯éƒ¨åˆ†ä¸¢å¼ƒ) æœ‰æ•ˆ  æœ‰æ•ˆ              æœ‰æ•ˆ\n        # å¯ä»¥çœ‹åˆ°ä¸­é—´æ®µæ•°æ®ä¼šè¢«ä¸¢å¼ƒï¼Œå› ä¸ºæ²¡æœ‰æœ‰æ•ˆçš„ metrics å¼€å¤´ï¼Œä½†æ˜¯æˆ‘ä»¬å°½å¯èƒ½ä¿è¯äº†åç»­çš„åŒ…æ˜¯æœ‰æ•ˆå¼€å¤´å’Œæœ‰æ•ˆç»“å°¾\n        # æ‰€ä»¥å½“å‰çš„åšæ³•æ›´åˆ©äºæˆ‘ä»¬å• metrics æ•°æ®æ¯” 65535 ç¨å¤§çš„åœºæ™¯ï¼Œè¿™æ ·ä¸¢å¼ƒçš„å†…å®¹å°‘ï¼Œä¿ç•™çš„å†…å®¹å¤š\n        # åä¹‹ï¼Œå½“å•ä¸ª metrics çš„æ•°æ®æ¯”æœ€å¤§é™åˆ¶å¤§çš„è¶Šå¤šï¼Œä¸¢å¼ƒçš„è¶Šå¤š\n\n        # sample è‚¯å®šä¼šè½¬è¡Œï¼Œåªè¦æœ‰è½¬è¡Œå°±èƒ½ä¿è¯èµ·ç å‰ä¸€ä¸ªåŒ…çš„å†…å®¹æ ¼å¼æœ‰æ•ˆ\n        valid_end_index = data.rfind(b\"\\n\", start, start + udp_package_max_size)\n        new_start = valid_end_index + 1\n        sliced_index_list.append(start, new_start, valid_end=False)\n    else:\n        sliced_index_list.append(start, valid_start_index)\n        new_start = valid_start_index\n\n    # å°è¯•ç»§ç»­å‘åæŸ¥æ‰¾\n    find_sliced_indexes(data, new_start, udp_package_max_size, sliced_index_list)\n    return"]],"language":[["Python"]]},"format":{"code_wrap":true},"created_time":1668160800000,"last_edited_time":1668162840000,"parent_id":"3dd5dfcc-005c-49b5-9cca-96ccded25899","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"},"role":"reader"},"5ba741df-599d-4a9b-8225-4cdb1e72d0db":{"value":{"id":"5ba741df-599d-4a9b-8225-4cdb1e72d0db","version":355,"type":"sub_sub_header","properties":{"title":[["åˆ‡ï¼"]]},"created_time":1668160740000,"last_edited_time":1668163680000,"parent_id":"3dd5dfcc-005c-49b5-9cca-96ccded25899","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"},"role":"reader"},"2c78da28-8e01-456e-8ea8-0ef5a485096c":{"value":{"id":"2c78da28-8e01-456e-8ea8-0ef5a485096c","version":2,"type":"text","properties":{"title":[["å½“æ‹¿åˆ°äº†æƒ³è¦åˆ‡å…¥ç‚¹åï¼Œå°±å¯ä»¥å¯¹åŸæ•°æ®è¿›è¡Œåˆ‡åˆ†äº†ã€‚è¿™é‡Œå¯ä»¥ä½¿ç”¨ "],["memoryview",[["a","https://docs.python.org/zh-cn/3/c-api/memoryview.html"]]],["ï¼ŒèŠ‚çœä¸€æ¬¡å¤§æ•°æ®æ‹·è´ï¼Œåˆ‡ç‰‡çš„é€Ÿåº¦ä¹Ÿä¼šæ›´å¿«ä¸€ç‚¹ï¼š"]]},"created_time":1668160740000,"last_edited_time":1668163680000,"parent_id":"3dd5dfcc-005c-49b5-9cca-96ccded25899","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"},"role":"reader"},"b23577c1-67fb-40aa-92ff-6aafa6ae92ee":{"value":{"id":"b23577c1-67fb-40aa-92ff-6aafa6ae92ee","version":15,"type":"code","properties":{"title":[["def slice_metrics_udp_data(data: bytes, sliced_indexes: SlicedIndexList) -\u003e Generator[memoryview, None, None]:\n    \"\"\"æ‹†åˆ† metrics UDP data\"\"\"\n    # Q: ä¸ºä»€ä¹ˆä¸ç›´æ¥åˆ‡åˆ†?\n    # A: ç›´æ¥æŒ‰ç…§å¤§å°åˆ‡åˆ†ä¼šé™ bytes ä¸­çš„å­—é¢å€¼åˆ‡æ–­ï¼Œè®©æœåŠ¡ç«¯å¯¹äºæŒ‡æ ‡æ— æ³•ç†è§£ï¼Œæ‰€ä»¥è¦æŒ‰ç…§å­—é¢å€¼çš„å†…å®¹åšåˆ‡åˆ†\n\n    # memoryview æ— éœ€é¢å¤–æ‹·è´\n    mview = memoryview(data)\n    for index in sliced_indexes:\n        if not index.valid_start:\n            logger.warning(\"data\u003clen:%s\u003e has no valid start, may not be parsed\", len(index))\n        yield mview[index.start : index.end]"]],"language":[["Python"]]},"format":{"code_wrap":true},"created_time":1668163140000,"last_edited_time":1668163200000,"parent_id":"3dd5dfcc-005c-49b5-9cca-96ccded25899","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"},"role":"reader"},"56f26d8e-d4a6-42df-9752-3fb39e7d6c68":{"value":{"id":"56f26d8e-d4a6-42df-9752-3fb39e7d6c68","version":22,"type":"sub_sub_header","properties":{"title":[["æ”¶å°¾"]]},"created_time":1668160740000,"last_edited_time":1668163680000,"parent_id":"3dd5dfcc-005c-49b5-9cca-96ccded25899","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"},"role":"reader"},"122aac50-d321-402e-8587-02653cb64287":{"value":{"id":"122aac50-d321-402e-8587-02653cb64287","version":72,"type":"text","properties":{"title":[["é’ˆå¯¹ä¸€äº›ç‰¹æ®Šåœºæ™¯åšæœ€åçš„å–„åå¤„ç†"]]},"created_time":1668163680000,"last_edited_time":1668163680000,"parent_id":"3dd5dfcc-005c-49b5-9cca-96ccded25899","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"},"role":"reader"},"84a73b07-b1fc-40ae-8987-ce735d282d23":{"value":{"id":"84a73b07-b1fc-40ae-8987-ce735d282d23","version":88,"type":"code","properties":{"title":[["def find_udp_data_sliced_indexes(data: bytes, udp_package_max_size: int = 65507, mtu: int = 1500) -\u003e SlicedIndexList:\n    \"\"\"å¯¹ UDP å‘é€æ•°æ®è¿›è¡Œåˆ‡ç‰‡å¤„ç†ï¼Œä¿è¯æ¯æ¬¡å‘é€æˆåŠŸ\n    :param data: é¢„å‘é€æ•°æ®\n    :param udp_package_max_size: å½“å‰ç³»ç»Ÿæ”¯æŒçš„æœ€å¤§ UDP å‘é€åŒ…å¤§å°ï¼Œä»¥ bytes è®¡ç®—ï¼Œé»˜è®¤ä¸º 65535 (åœ¨ macOS ä¸‹é»˜è®¤ä¸º 9126)\n    :param mtu: Maximum Transmission Unit\n\n    udp_package_max_size = 0xffff - (sizeof(IP Header) + sizeof(UDP Header)) = 65535-(20+8) = 65507\n    ref to: https://en.wikipedia.org/wiki/User_Datagram_Protocol\n    \"\"\"\n    length = len(data)\n    if length \u003e mtu:\n        # TODO: å½“å‰æˆ‘ä»¬æš‚ä¸è€ƒè™‘å¤„ç† MTU çš„é—®é¢˜ï¼Œå…ˆè§£å†³ UDP åŒ…è¿‡å¤§çš„æƒ…å†µ\n        logger.debug(\"UDP packages is larger than MTU, not safe for single push.\")\n\n    if length \u003c= udp_package_max_size:\n        return SlicedIndexList(indexes=[SlicedIndex(0, length)])\n\n    sliced_index_list = SlicedIndexList()\n    try:\n        find_sliced_indexes(data, 0, udp_package_max_size, sliced_index_list)\n    except RecursionError:\n        logger.warning(\"data has no valid format, drop it...\")\n\n    return sliced_index_list"]],"language":[["Python"]]},"format":{"code_wrap":true},"created_time":1668162900000,"last_edited_time":1668515520000,"parent_id":"3dd5dfcc-005c-49b5-9cca-96ccded25899","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"},"role":"reader"},"45898055-9b04-48cb-95b4-daaf741a3bb3":{"value":{"id":"45898055-9b04-48cb-95b4-daaf741a3bb3","version":34,"type":"sub_sub_header","properties":{"title":[["æ•ˆæœ"]]},"created_time":1668515520000,"last_edited_time":1668515520000,"parent_id":"3dd5dfcc-005c-49b5-9cca-96ccded25899","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"},"role":"reader"},"640cd3c1-6682-4cc4-b03c-12616149f639":{"value":{"id":"640cd3c1-6682-4cc4-b03c-12616149f639","version":295,"type":"code","properties":{"title":[["# åŸæ¥çš„ UDP ç›´æ¥å‘é€\n# å°†æŠ›å‡º error: [Errno 90] Message too long\nudp_socket.sendto(data, (address, port))\n\n# å¾ªç¯è°ƒç”¨ UDP è¯·æ±‚\nfor sliced_data in slice_metrics_udp_data(data, find_udp_data_sliced_indexes(data)):\n\t  # æ‰€æœ‰ UDP åŒ…éƒ½å¯ä»¥å‘é€å‡ºå»\n    # åŒæ—¶å–å†³äºæ•°æ®ç‰¹æ€§ï¼Œ"],["ç»å¤§å¤šæ•°",[["b"]]],["çš„ UDP æ•°æ®éƒ½èƒ½åœ¨æœåŠ¡ç«¯å¾—åˆ°è§£æ\n    udp_socket.sendto(sliced_data, (address, port))"]],"language":[["Python"]]},"format":{"code_wrap":true},"created_time":1668515520000,"last_edited_time":1668654900000,"parent_id":"3dd5dfcc-005c-49b5-9cca-96ccded25899","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"},"role":"reader"},"cc9839ec-7154-4fca-859b-b2a5d393654f":{"value":{"id":"cc9839ec-7154-4fca-859b-b2a5d393654f","version":26,"type":"text","created_time":1668654900000,"last_edited_time":1668676320000,"parent_id":"3dd5dfcc-005c-49b5-9cca-96ccded25899","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"},"role":"reader"},"05e4e0b0-6311-4e1b-9081-cb6f912af2dc":{"value":{"id":"05e4e0b0-6311-4e1b-9081-cb6f912af2dc","version":16,"type":"sub_header","properties":{"title":[["å°¾å£°"]]},"created_time":1668160740000,"last_edited_time":1668676260000,"parent_id":"3dd5dfcc-005c-49b5-9cca-96ccded25899","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"},"role":"reader"},"91d69515-071d-461d-ad62-29600df974c4":{"value":{"id":"91d69515-071d-461d-ad62-29600df974c4","version":15,"type":"sub_sub_header","properties":{"title":[["è¿›ä¸€æ­¥ä¼˜åŒ–ï¼Ÿ"]]},"created_time":1668676320000,"last_edited_time":1668676320000,"parent_id":"3dd5dfcc-005c-49b5-9cca-96ccded25899","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"},"role":"reader"},"cd36daae-bf0b-4627-b554-3b1c1f5b0b5d":{"value":{"id":"cd36daae-bf0b-4627-b554-3b1c1f5b0b5d","version":4,"type":"text","properties":{"title":[["æ­£å¦‚æˆ‘ä»¬ä¸Šé¢å®ç°çš„é€»è¾‘ï¼Œä»æ—§æ— æ³•ä¿è¯æ‰€æœ‰æ•°æ®éƒ½èƒ½è¢«è§£ææˆåŠŸï¼Œä¸»è¦çš„åŸå› å°±æ˜¯æˆ‘ä»¬æ²¡æœ‰å¯¹ç¼ºå¤±å…ƒä¿¡æ¯çš„æŒ‡æ ‡è¿›è¡Œå¤„ç†ï¼Œè€Œæˆ‘ä»¬åœ¨è§£æå…¶ä¸­å†…å®¹çš„æ—¶å€™æ˜¯å¯ä»¥é€šè¿‡ "],["bytes.index()",[["c"]]],[" æ‰¾åˆ°å…ƒä¿¡æ¯ä½ç½®çš„ï¼Œå¯ä»¥å°†å…ƒä¿¡æ¯æš‚å­˜èµ·æ¥ï¼Œåœ¨ "],["valid_start",[["c"]]],[" æ—¶ç›´æ¥è¡¥å……ä¸Šå»ï¼Œè¿™æ ·å°±èƒ½ä¿è¯æ‰€æœ‰æ•°æ®éƒ½æœ‰åˆé€‚çš„æ ¼å¼ã€‚"]]},"format":{"copied_from_pointer":{"id":"1b11538c-9e43-40ad-aecf-bda21a6e7b4e","table":"block","spaceId":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"created_time":1668676333478,"last_edited_time":1668676320000,"parent_id":"3dd5dfcc-005c-49b5-9cca-96ccded25899","parent_table":"block","alive":true,"copied_from":"1b11538c-9e43-40ad-aecf-bda21a6e7b4e","created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"},"role":"reader"},"0df3835b-491f-4a4d-a428-5c30a7a9a702":{"value":{"id":"0df3835b-491f-4a4d-a428-5c30a7a9a702","version":4,"type":"text","created_time":1668676320000,"last_edited_time":1668676320000,"parent_id":"3dd5dfcc-005c-49b5-9cca-96ccded25899","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"},"role":"reader"},"364256dc-3d34-4b51-9606-336988bdc22c":{"value":{"id":"364256dc-3d34-4b51-9606-336988bdc22c","version":622,"type":"text","properties":{"title":[["Prometheus UDP æ•°æ®åˆ‡åˆ†æ˜¯ä¸€ä¸ªåœ¨å¼€å‘ä¸­æ™®é€šçš„ä¸èƒ½å†æ™®é€šçš„å°é—®é¢˜ã€‚åœ¨è¿™é‡Œå†™è¿™ä¹ˆå¤šå¹¶ä¸æ˜¯ä¸ºäº†å±•ç°è¯¥é—®é¢˜æœ¬èº«çš„è§£å†³æ–¹æ¡ˆï¼Œè€Œæ˜¯ç”¨æ¥æè¿°ä¸€ç§å®Œå¤‡çš„å¼€å‘æ€è·¯ã€‚"]]},"created_time":1668515520000,"last_edited_time":1668656280000,"parent_id":"3dd5dfcc-005c-49b5-9cca-96ccded25899","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"},"role":"reader"},"73f4e961-d953-411c-ae20-a13e623fad7e":{"value":{"id":"73f4e961-d953-411c-ae20-a13e623fad7e","version":20,"type":"sub_sub_header","properties":{"title":[["å‚è€ƒ"]]},"created_time":1668137280000,"last_edited_time":1668667320000,"parent_id":"3dd5dfcc-005c-49b5-9cca-96ccded25899","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"},"role":"reader"},"830397c5-2a29-4702-ae13-0f5d04b519fd":{"value":{"id":"830397c5-2a29-4702-ae13-0f5d04b519fd","version":18,"type":"bulleted_list","properties":{"title":[["https://www.ietf.org/rfc/rfc768.txt",[["a","https://www.ietf.org/rfc/rfc768.txt"]]]]},"created_time":1668138240000,"last_edited_time":1668154800000,"parent_id":"3dd5dfcc-005c-49b5-9cca-96ccded25899","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"},"role":"reader"},"fd3df686-f5b0-43df-85a2-3537d5ab1e82":{"value":{"id":"fd3df686-f5b0-43df-85a2-3537d5ab1e82","version":9,"type":"bulleted_list","properties":{"title":[["https://erg.abdn.ac.uk/users/gorry/course/inet-pages/udp.html",[["a","https://erg.abdn.ac.uk/users/gorry/course/inet-pages/udp.html"]]]]},"created_time":1668137280000,"last_edited_time":1668137280000,"parent_id":"3dd5dfcc-005c-49b5-9cca-96ccded25899","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"},"role":"reader"},"0e7afdae-4077-446d-8acd-e3a365ef7310":{"value":{"id":"0e7afdae-4077-446d-8acd-e3a365ef7310","version":5,"type":"bulleted_list","properties":{"title":[["https://www.rfc-editor.org/rfc/rfc2675.html",[["a","https://www.rfc-editor.org/rfc/rfc2675.html"]]]]},"created_time":1668153540000,"last_edited_time":1668153540000,"parent_id":"3dd5dfcc-005c-49b5-9cca-96ccded25899","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"},"role":"reader"},"f4ecc82a-58c8-423e-b921-69c49f10e2f8":{"value":{"id":"f4ecc82a-58c8-423e-b921-69c49f10e2f8","version":7,"type":"bulleted_list","properties":{"title":[["https://stackoverflow.com/questions/1098897/what-is-the-largest-safe-udp-packet-size-on-the-internet",[["a","https://stackoverflow.com/questions/1098897/what-is-the-largest-safe-udp-packet-size-on-the-internet"]]]]},"created_time":1668153780000,"last_edited_time":1668158340000,"parent_id":"3dd5dfcc-005c-49b5-9cca-96ccded25899","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"},"role":"reader"},"6a59c5ca-2861-4f0c-ad18-01fc9a7e5abc":{"value":{"id":"6a59c5ca-2861-4f0c-ad18-01fc9a7e5abc","version":5,"type":"bulleted_list","properties":{"title":[["https://stackoverflow.com/questions/449560/how-do-i-determine-the-size-of-an-object-in-python",[["a","https://stackoverflow.com/questions/449560/how-do-i-determine-the-size-of-an-object-in-python"]]]]},"created_time":1668158340000,"last_edited_time":1668158340000,"parent_id":"3dd5dfcc-005c-49b5-9cca-96ccded25899","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"},"role":"reader"},"db259695-8178-4473-9eee-93f65fcb4234":{"value":{"id":"db259695-8178-4473-9eee-93f65fcb4234","version":5,"type":"bulleted_list","properties":{"title":[["https://docs.python.org/zh-cn/3/c-api/memoryview.html",[["a","https://docs.python.org/zh-cn/3/c-api/memoryview.html"]]]]},"created_time":1668163860000,"last_edited_time":1668163860000,"parent_id":"3dd5dfcc-005c-49b5-9cca-96ccded25899","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"},"role":"reader"}},"collection":{"e34bec60-9b02-4ad8-aaf8-83369409cc9f":{"value":{"id":"e34bec60-9b02-4ad8-aaf8-83369409cc9f","version":96,"name":[["å¸ƒé²æ–¯é±¼çš„å¦™æƒ³å¤©å¼€ "]],"schema":{"NX\\Q":{"name":"date","type":"date"},"`gQ~":{"name":"type","type":"select","options":[{"id":"5aff2f95-fd1e-489b-8840-bf10bc9519cb","color":"purple","value":"Post"},{"id":"374d2bc6-a144-4832-8ca4-474aaae0ea1f","color":"orange","value":"Page"}]},"d]hq":{"name":"slug","type":"text"},"sD^m":{"name":"tags","type":"multi_select","options":[{"id":"790180f1-0c2e-4730-a1ef-c5463df34680","color":"brown","value":"python"},{"id":"5d668f5e-7204-4c7e-b57e-5558bd27efaf","color":"gray","value":"pep"},{"id":"9081ab60-29ee-4a5b-9989-f50cf36ecb9b","color":"orange","value":"tech"},{"id":"c0225229-afab-45e4-b69b-b71029b39835","color":"red","value":"django"},{"id":"90084124-d1d5-49fb-86e7-4b133c051d81","color":"default","value":"orm"},{"id":"10ace7d0-10e6-4617-970e-acf2d9348d0f","color":"yellow","value":"best-practice"},{"id":"1b9671ca-93e5-402d-a73e-f9aca38e4358","color":"pink","value":"web"},{"id":"c7015bc7-2283-4b3d-8d19-3075724a10df","color":"blue","value":"blog"},{"id":"22d9ce60-f854-4122-b0fc-4f4c3a41979e","color":"green","value":"guide"},{"id":"6e99d746-1829-43e3-a828-214a1ae79b4a","color":"purple","value":"ELK"},{"id":"45ebe27a-5445-4cc3-91c9-ec1f1296dcf4","color":"brown","value":"pytest"},{"id":"9f679b83-f407-4130-b5b7-f969329300bf","color":"brown","value":"unittest"},{"id":"e30656d1-1ff2-434c-a2cb-8b3c75c9d1a1","color":"gray","value":"fun"},{"id":"5146a8a4-5647-4ce0-8a7b-1a6320adee06","color":"blue","value":"back-pressure"},{"id":"36828c03-3b80-417d-82a3-b1066ad5ca60","color":"green","value":"Dependency injection"},{"id":"9602332d-afbb-41e8-baed-bd0dd39a5e21","color":"brown","value":"k8s"},{"id":"82cd2499-ddd4-43ad-9298-fba21fe29cfa","color":"brown","value":"helm"},{"id":"f0a44444-e52d-4db2-9262-aa29d7ded8e3","color":"blue","value":"celery"},{"id":"a87e284b-1c48-422e-9811-eba8a167f97a","color":"red","value":"amqp"},{"id":"dc50dbb3-8e3a-4747-95d8-c9098e70e088","color":"default","value":"tcp"},{"id":"90b243e4-95f4-459e-b5b7-42f09020978b","color":"gray","value":"graphql"},{"id":"00f0130d-3a96-4e5a-8b5e-77e14e0a3ff7","color":"purple","value":"logstash"},{"id":"a921b879-fcef-4ace-8c96-7a6e11fe2358","color":"orange","value":"konajdk"},{"id":"b8e6dc68-925c-4d32-84d9-580d1a34c3a6","color":"orange","value":"regex"},{"id":"fc66930c-fa10-44b1-b553-5f6acc796321","color":"gray","value":"nfa"},{"id":"f9255cb2-7e85-4bce-8042-472643ff3b58","color":"orange","value":"dfa"},{"id":"e00a51c2-af1c-4bfd-a118-e83e73f3e1a3","color":"purple","value":"security"},{"id":"45105ec0-49be-430b-aead-ef83cfbc8b02","color":"pink","value":"reading"},{"id":"4c3a21fd-3ba5-44a2-8c5e-ef6e9100c32c","color":"brown","value":"software-engineering"},{"id":"4cd1d179-3466-4d7e-baf2-99a4c0250a78","color":"blue","value":"google"},{"id":"22973bbb-4038-4f9b-a30c-c0ab6506d65d","color":"gray","value":"note"},{"id":"1ca18016-ff4e-41e0-af37-6ea457fc4bd8","color":"orange","value":"go"},{"id":"017cb1fb-940d-4281-a078-ea653dc7688a","color":"green","value":"prometheus"},{"id":"35b57024-e3a6-465c-8845-e359d09c72c7","color":"brown","value":"udp"},{"id":"4357722b-be50-481e-ba42-992e73b7b86e","color":"pink","value":"observability"},{"id":"89d067fb-d3d3-4d3f-b855-5f472e28d80b","color":"orange","value":"profiling"}]},"wz|S":{"name":"summary","type":"text"},"title":{"name":"title","type":"title"},"f211bdc0-ee00-4186-9a7d-f68c055ec2ee":{"name":"status","type":"select","options":[{"id":"22460321-fea2-4c7c-b352-a674760780ac","color":"orange","value":"Idea"},{"id":"41d5f5c6-b53c-42bc-8e0f-fc9402048480","color":"yellow","value":"Draft"},{"id":"c7390b31-9fab-4e21-94ee-7e67ea077a97","color":"blue","value":"Revise"},{"id":"7abc61d4-b405-480d-b699-12588755fa65","color":"red","value":"Published"}]}},"icon":"ğŸ—¯ï¸","format":{"copied_from_pointer":{"id":"6a42b751-ff40-4f34-aa6a-1830a3344cb7","table":"collection","spaceId":"ac4cb96d-c8f8-4040-9bb2-868d9fc7f526"},"collection_page_properties":[{"visible":false,"property":"NX\\Q"},{"visible":false,"property":"d]hq"},{"visible":false,"property":"f211bdc0-ee00-4186-9a7d-f68c055ec2ee"},{"visible":false,"property":"sD^m"},{"visible":false,"property":"wz|S"},{"visible":false,"property":"`gQ~"}]},"parent_id":"a6089909-2d0d-43ef-af93-5e041712e826","parent_table":"block","alive":true,"file_ids":["6cf3dc36-2f98-4f0e-9679-1bdbb1485129","5520bd92-e709-4c0d-ad58-06923f23f7e9","624d393a-62e3-4464-a1bf-1c79ecd4fbda","d52f6766-3e32-4c3d-8529-46e1f214360f"],"copied_from":"6a42b751-ff40-4f34-aa6a-1830a3344cb7","migrated":true,"space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6","deleted_schema":{"0d330ccb-d222-4440-a0de-6cccfe926a33":{"name":"url","type":"text"},"26ff3130-393a-45ac-92b5-7490d9b87515":{"name":"template","type":"select","options":[{"id":"V*ea","color":"purple","value":"post"}]},"29e679ed-47a3-46c2-9eb4-9070171591b8":{"name":"inList","type":"checkbox"},"2af12d30-97f0-4310-b38c-02e6a554245f":{"name":"publish","type":"checkbox"},"2bf55746-6864-4bb6-b585-77b81f140da1":{"name":"inList","type":"checkbox"},"487aab80-eb42-4dd6-a386-d58672ff59fa":{"name":"description","type":"text"},"53819e0d-5bc6-40de-a8bc-498fdf840fbc":{"name":"description","type":"text"},"67c34d44-b9f2-42c1-b35c-4a534c03bdd9":{"name":"inList","type":"checkbox"},"69fb2cd3-221c-476b-86c2-ab74f4490cc9":{"name":"template","type":"select","options":[{"id":"V*ea","color":"purple","value":"post"}]},"ab0a009c-1080-47c3-aecc-b26dc703a4e0":{"name":"url","type":"text"},"ad8f0878-e947-4188-8970-1ca14665f6e3":{"name":"inMenu","type":"checkbox"},"b2c6f9d4-31e2-4230-b57e-4bdb21a3d635":{"name":"template","type":"select","options":[{"id":"V*ea","color":"purple","value":"post"}]},"b387319f-5770-457e-8453-1d2f2708f9f1":{"name":"url","type":"text"},"b6d830ff-ce1d-4e76-a484-f0fc3f148c52":{"name":"publish","type":"checkbox"},"c0b15f23-eddd-4316-95d1-a92a4edbc710":{"name":"publish","type":"checkbox"},"e3660c02-9d93-463b-9495-addeeabd3e80":{"name":"description","type":"text"}}},"role":"reader"}},"space":{},"collection_view":{"065b98d2-d3b4-4dab-8b96-4eb118a3f311":{"value":{"id":"065b98d2-d3b4-4dab-8b96-4eb118a3f311","version":33,"type":"table","name":"Default view","format":{"table_wrap":false,"table_properties":[{"width":371,"visible":true,"property":"title"},{"width":243,"visible":true,"property":"d]hq"},{"width":159,"visible":true,"property":"NX\\Q"},{"width":147,"visible":true,"property":"wz|S"},{"width":356,"visible":true,"property":"sD^m"},{"width":124,"visible":true,"property":"f211bdc0-ee00-4186-9a7d-f68c055ec2ee"},{"width":100,"visible":true,"property":"`gQ~"}]},"parent_id":"a6089909-2d0d-43ef-af93-5e041712e826","parent_table":"block","alive":true,"page_sort":["b1e1d645-db95-42e5-8995-39a80eda6460","e8cd3732-dc1c-43ae-959a-a5a611ec098a","e876558d-e878-47f6-8c95-21be678990a5","5a971ded-d3c5-41be-bef9-ddfff48d43a2","8db8b240-e1c5-4dd7-bf74-72584d7a2ce0","daf94ca4-ec56-47a3-84ed-b1e2479acc4b","d1a2db9b-6820-421e-9b80-017ce7478587","67ea9f83-b9f6-416b-afcb-7c64f7533e6c","45939470-9819-47e8-b12b-999cfefa0aad","c60dc33d-8efb-44be-a863-7a87ad047932","fe4b8d5f-7c49-42c6-a7d5-1cb71c4f7e86","b7233a67-c367-4198-831e-f12089568d1f","4f3bf306-92c4-41b7-a43e-957129a1240a","6a789607-66cf-498e-9b32-eb3fa69a84f4","c9429034-dabd-4a25-8782-97f20c808a60","38c49fe2-37f8-4a7f-a99f-9edb9ddad4c2","474eb638-9f6b-46bf-8004-77668293f199","81d6dfab-69cb-43a0-aa04-e9725f0b67e1","7703d956-84db-46cd-b538-48eae1af68b5","9f937c73-dac9-4ed7-9b01-beefcb321f16","3cf9dcb9-e7db-406c-80ab-c65c11fbf906","5827ab53-e051-455b-b90a-3bdc20158c2c","fa7acd3b-dea9-4fb1-b859-5345f35163c6","696dfc48-62c3-494d-96d0-ec5fa84637e8","79df93cf-9b10-452e-bc62-f39e8cd2d124","9bb8e52d-c459-4528-b1b3-c2378207253a","5da038ef-f419-4a11-aa48-587b3787e040","b4a2c9d4-6a2c-49e6-988d-89a538dfe0f6","c374a479-5cc7-4c54-ba69-6a4d76dc25ad","d470fa67-0e7c-40d8-86ac-9b5a8be88dc8","986be38b-9780-4bb9-bdcd-4e361ddbd888","b7613f56-c2d4-4aae-b967-b7471ade86d0","e357d1fc-7466-4d6a-8d48-71b76ea97cdc","e1735855-4089-4af6-bd4d-0d59f7a76cb4","9b34581a-955a-4229-99d0-8f2a6d0e69ce","b4414811-0599-45cf-b047-fa95eac42d89","c28a8a01-911a-40a2-a607-d3af8cb24017","461d07ae-4b4a-49de-bdcb-341af1153201","3df59023-cb68-4a65-afd1-7f0b8c21cb57","0e3223d1-03df-40fb-90f9-cc8559d776b5","4f45b7d6-cd5b-46ab-b2a6-37ae20bf5f21","fa475a21-5f38-43d4-9a89-67c40b3129ae","97cbc634-fe3a-4b9b-9da6-ac4aaa94772f","8a0d34bc-7e8c-4a68-88a5-5276274f612a","623f8788-a20f-45fd-bb82-08935f59b44d","7ee398f0-450b-47cb-9b53-f5e7736590d2","eae9f077-591e-4841-903b-db395513c834","367d0f2a-0b10-4dbb-b53a-613152f124f9","398e2e28-3997-49bc-a138-0467d4da8531","8aaf4633-e879-44dc-82c8-3c9fb9d3a6f8","1eb5e5f2-8dc9-4ffc-b5e1-09b67be27a83","83465fb9-205b-41fc-83a6-424692ee0a0e","fb1d18d0-6403-4e8a-840e-134553748ff5","4407cb77-3838-4ba5-b474-f15222cd3dba","1880b0f2-e036-42d0-9550-0fb08a962397","d8d60bd6-33f6-458f-a7d6-209ef2fb05a1","29bf65ff-888b-4a76-a8dd-bf54f02c3864","bad1d4ae-fd4a-4671-ae94-dd53d94e0eae","0d59792d-db1c-4ae7-8d7c-4f013be40dcf","337dc259-2805-4b1c-a60f-1b3e6c7badb8","4b1b21a8-c278-4bc6-88f1-1a35d407f4d7","7946aba2-d6d0-45ef-8779-23fa15db8f2d","c18dbce6-9e8c-4f4b-b74a-0994e7c1bc3f","84aa87b7-39e7-493c-87b9-5cae4de95449","1446eadb-8c01-4295-be3a-ecf19361c143","fe8a7d94-e9ba-457d-8f19-10fe53e6ca3c","98a5a0b6-b07b-4065-a73f-2949ad28ac47","099219ec-fb4b-459d-a538-f6c3d54f6ca2","e047becf-e696-42e3-84c9-4f6278c844ae","975051d4-ebbc-4b3f-98cf-1a52e5e4761d","e5d98bee-b2d5-4b45-ab0b-b77da24aebe7","acac2668-1062-4e7a-b095-eda067da8413","179025c4-d8a8-4c47-b621-9fd6a6f3339b","d256e5ed-5eac-43bb-a32e-581774962c23","b843dacf-b655-4b1c-a61c-434b67f18154","56a80c2d-0520-415a-a77a-1db82eff0b3a","9c40a253-b9e8-42cd-8a99-62aaa9789a5e","d3a05020-0948-489a-80ac-fedebc035c58","0ee4f3e9-0451-411f-b903-0c83d30e5b67","769f1163-e45e-4c3b-87a7-3b551895d9be","7e217dcd-e4e5-4bcd-b2de-00fcb5ab7fba","28e3d2f6-abb8-4711-b21e-ce1937e3e546","04d4f00b-9608-4d83-949e-b32313ace34e","41f93fa3-0496-4ea7-8ac3-0a8beaf346da","f0db9e3e-0e99-4465-ae65-6a9a8d8a6468","279e794f-519c-44f5-ab04-422fba916b72","f0b2f8a5-7dfd-48dc-ba1f-419a7fda1fff","e874f269-1938-40be-974b-2e499c1f4590","65265d92-050f-4fb5-b529-a514079cdd83","5fc98358-411a-40d7-a5d0-c4089026ca1f","15fcd77a-6097-4ee9-9835-9d6e85897fd6","6f8b1275-2d88-40e2-b76b-375f3c028b03","33273042-efcc-45bc-8f28-b65a1c2c65ad","c18bd396-be21-4ce2-ab22-32a45c28e37f","ba597bcf-7582-4fd2-8049-6333ef3e4453","4edecef8-106d-489d-be1d-d1b528c4cdc9","b03b3109-e900-4daf-b852-a590324ab747","8cba5326-9daa-4c2c-b763-5476dc8a7a91","9ab4aa63-ce81-415f-bf95-e632006a1aea","e3644bfb-4244-4a82-a7d7-d7cdb65aa1ed","b6a1f5b5-febd-4c26-9e29-520290eb5719","51e53e64-e6dd-4fd6-8062-5d4455f0a1cb","f4ec684b-e5f1-44e9-a8a7-aca27f7ca6f3","177fa228-9099-4dd5-8969-c67f9c78bd0c","d5ab0d7a-0123-473f-84d4-81740defb9b4","548f6d36-c509-4b79-9c4b-59f227c7f550","c0901673-4f5e-4e51-ad87-0217f2d33a0c","0787f8d6-dc99-47c6-946e-2b008814bebc","0ade5216-1103-486a-aff0-a709ff825b02","a2c4dd21-985c-497d-b421-c2d8a9ec0eeb","908a498c-f7e3-4668-8afd-f179a027b4d9","4945e5c3-033d-467c-a8b3-b1479c1fdf0a","854f4584-28d5-43bd-938e-88d0957c78e3","6a6574f8-d63d-4fed-99c5-38f3df0364ac","5639d091-037c-4284-8260-ade765dbbc90","c9669745-2229-4d95-89a1-8f008e8bebc6","78ebe658-6ba5-4478-a53c-ad468984e7e3","c7f44558-498f-44bd-a8a3-504955dde6b1","d928387b-107b-4f27-b0c5-75301ed7fc55","833556aa-d685-488c-88d0-b136b456ff5f","0bfe1b9e-b115-49f4-9279-7b106f7661af","1465efce-6026-4d50-a952-1aff8c10dea1","f8f308d6-f4c4-4b0f-b7a3-df78d41ce55d","ebd71155-4a59-46a0-bbb2-40687ddbcf9d","29fc49e0-b597-4f2e-9d53-b7dd247adf4b","692194e6-08d3-4e36-a94f-dc403d6226e6","da9db882-26ea-4516-815c-75f2f9ddab59","9a08823e-eec6-4cc0-9ec8-890cb0650aa7","f7327b98-b06a-423a-8b9f-646e5ba2123f","a6c3c98f-9ef9-45de-9d52-4baec7327464","9d18b689-cdc2-4d3f-81da-a690c700caee","6ad26f7b-1828-4d64-a948-3cc6367f6901","3927ece3-9931-46e8-8e7e-91d5e0b5c326","f6ba5dfd-5000-4e15-80b4-7d3456bc676a","0c0d5bfd-8642-460a-aedc-5a8277725196","ff7b6fa3-510b-4ba1-9caa-9f8b4771a90e","fd036365-88c0-4feb-8482-6b4298cacdcc"],"query2":{"filter":{"operator":"and"},"aggregations":[{"property":"title","aggregator":"count"}]},"space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"},"role":"reader"}},"notion_user":{},"collection_query":{},"signed_urls":{}},"emailHash":"d54f099771ff5f17709b76693f693e2e"},"__N_SSG":true},"page":"/[slug]","query":{"slug":"python-udp-prom-aggregation-gateway"},"buildId":"g414gbnn7WeHe2sFVh_rV","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>