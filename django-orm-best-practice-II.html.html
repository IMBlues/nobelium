<!DOCTYPE html><html lang="zh-CN"><head><meta name="viewport" content="width=device-width"/><title>Django ORM：天使与魔鬼 II</title><meta name="robots" content="follow, index"/><meta charSet="UTF-8"/><meta name="keywords" content="Blog, Notion, Tech, Python, Django"/><meta name="description" content="CRUD boy 回来了"/><meta property="og:locale" content="zh-CN"/><meta property="og:title" content="Django ORM：天使与魔鬼 II"/><meta property="og:description" content="CRUD boy 回来了"/><meta property="og:url" content="https://next.emergencyexit.xyz/"/><meta property="og:image" content="https://og-image-craigary.vercel.app/Django%20ORM%EF%BC%9A%E5%A4%A9%E4%BD%BF%E4%B8%8E%E9%AD%94%E9%AC%BC%20II.png?theme=dark&amp;md=1&amp;fontSize=125px&amp;images=https%3A%2F%2Fnobelium.vercel.app%2Flogo-for-dark-bg.svg"/><meta property="og:type" content="article"/><meta name="twitter:card" content="summary_large_image"/><meta name="twitter:description" content="CRUD boy 回来了"/><meta name="twitter:title" content="Django ORM：天使与魔鬼 II"/><meta name="twitter:image" content="https://og-image-craigary.vercel.app/Django%20ORM%EF%BC%9A%E5%A4%A9%E4%BD%BF%E4%B8%8E%E9%AD%94%E9%AC%BC%20II.png?theme=dark&amp;md=1&amp;fontSize=125px&amp;images=https%3A%2F%2Fnobelium.vercel.app%2Flogo-for-dark-bg.svg"/><meta property="article:published_time"/><meta property="article:author" content="bluesyu"/><meta name="next-head-count" content="18"/><link rel="preload" href="/fonts/IBMPlexSansVar-Roman.woff2" as="font" type="font/woff2" crossorigin="anonymous"/><link rel="preload" href="/fonts/IBMPlexSansVar-Italic.woff2" as="font" type="font/woff2" crossorigin="anonymous"/><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="anonymous"/><link rel="preload" as="style" data-href="https://fonts.googleapis.com/css2?family=Noto+Sans+SC:wght@400;500;700&amp;display=swap"/><link rel="stylesheet" data-href="https://fonts.googleapis.com/css2?family=Noto+Sans+SC:wght@400;500;700&amp;display=swap"/><noscript><link rel="stylesheet" data-href="https://fonts.googleapis.com/css2?family=Noto+Sans+SC:wght@400;500;700&amp;display=swap"/></noscript><link rel="icon" href="/favicon.svg" type="image/svg+xml"/><link rel="icon" href="/favicon.ico"/><link rel="apple-touch-icon" sizes="192x192" href="/apple-touch-icon.png"/><link rel="alternate" type="application/rss+xml" title="RSS 2.0" href="/feed"/><meta name="theme-color" content="#ffffff" media="(prefers-color-scheme: light)"/><meta name="theme-color" content="#18181B" media="(prefers-color-scheme: dark)"/><link rel="preload" href="/_next/static/css/8e8bd7c50b2739f5.css" as="style"/><link rel="stylesheet" href="/_next/static/css/8e8bd7c50b2739f5.css" data-n-g=""/><link rel="preload" href="/_next/static/css/6a5815369e10547f.css" as="style"/><link rel="stylesheet" href="/_next/static/css/6a5815369e10547f.css" data-n-p=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-5cd94c89d3acac5f.js"></script><script src="/_next/static/chunks/webpack-c0a56147c8fcef8f.js" defer=""></script><script src="/_next/static/chunks/main-e557dee8cfeafd6c.js" defer=""></script><script src="/_next/static/chunks/pages/_app-7c8400856d0a7e46.js" defer=""></script><script src="/_next/static/chunks/b5f2ed29-08db60af0c3043ba.js" defer=""></script><script src="/_next/static/chunks/684-63c1a25e215d8bed.js" defer=""></script><script src="/_next/static/chunks/580-c0214944b9e37cce.js" defer=""></script><script src="/_next/static/chunks/pages/%5Bslug%5D-5e131ae0621e9945.js" defer=""></script><script src="/_next/static/whNozGoNnKrTnthLemfFf/_buildManifest.js" defer=""></script><script src="/_next/static/whNozGoNnKrTnthLemfFf/_ssgManifest.js" defer=""></script><script src="/_next/static/whNozGoNnKrTnthLemfFf/_middlewareManifest.js" defer=""></script><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Noto+Sans+SC:wght@400;500;700&display=swap"/></head><body class="bg-day dark:bg-night"><div id="__next" data-reactroot=""><div><div class="wrapper font-sans"><div class="observer-element h-4 md:h-12"></div><div class="sticky-nav m-auto w-full h-6 flex flex-row justify-between items-center mb-2 md:mb-12 py-8 bg-opacity-60 max-w-3xl px-4" id="sticky-nav"><div class="flex items-center"><a aria-label="布鲁斯鱼的妙想天开" href="/"><div class="h-6"><svg width="28" height="28" viewBox="0 0 28 28" fill="none" xmlns="http://www.w3.org/2000/svg"><circle cx="14" cy="14" r="14" class="fill-current text-black dark:text-white"></circle><circle cx="14" cy="14" r="14" fill="url(#paint0_radial)"></circle><circle cx="8" cy="8" r="2" fill="white"></circle><defs><radialGradient id="paint0_radial" cx="0" cy="0" r="1" gradientUnits="userSpaceOnUse" gradientTransform="rotate(45) scale(39.598)"><stop stop-color="#7FF72A" stop-opacity="1"></stop><stop offset="1" stop-color="#001FCC" stop-opacity="0.1"></stop></radialGradient></defs></svg></div></a><p class="ml-2 font-medium text-day dark:text-night header-name">Django ORM：天使与魔鬼 II</p></div><div class="flex-shrink-0"><ul class="flex flex-row"><li class="block ml-4 text-black dark:text-gray-50 nav"><a href="/about">关于</a></li><li class="block ml-4 text-black dark:text-gray-50 nav"><a href="/surfing">冲浪</a></li><li class="block ml-4 text-black dark:text-gray-50 nav"><a href="/search">搜索</a></li></ul></div></div><main class="m-auto flex-grow w-full transition-all max-w-3xl px-4"><article><h1 class="font-bold text-3xl text-black dark:text-white">👼<!-- --> <!-- -->Django ORM：天使与魔鬼 II</h1><nav class="flex mt-7 items-start text-gray-500 dark:text-gray-400"><div class="flex mb-4"><a href="https://twitter.com/bluesedenyu" class="flex"><span style="box-sizing:border-box;display:inline-block;overflow:hidden;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;position:relative;max-width:100%"><span style="box-sizing:border-box;display:block;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;max-width:100%"><img style="display:block;max-width:100%;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0" alt="" aria-hidden="true" src="data:image/svg+xml,%3csvg%20xmlns=%27http://www.w3.org/2000/svg%27%20version=%271.1%27%20width=%2724%27%20height=%2724%27/%3e"/></span><img alt="bluesyu" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" decoding="async" data-nimg="intrinsic" class="rounded-full" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%"/><noscript><img alt="bluesyu" srcSet="https://gravatar.com/avatar/d54f099771ff5f17709b76693f693e2e?imwidth=32 1x, https://gravatar.com/avatar/d54f099771ff5f17709b76693f693e2e?imwidth=48 2x" src="https://gravatar.com/avatar/d54f099771ff5f17709b76693f693e2e?imwidth=48" decoding="async" data-nimg="intrinsic" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%" class="rounded-full" loading="lazy"/></noscript></span><p class="ml-2 md:block">bluesyu</p></a><span class="block"> / </span></div><div class="mr-2 mb-4 md:ml-0">2022 年 9 月 9 日</div><div class="flex flex-nowrap max-w-full overflow-x-auto article-tags"><a href="/tag/python"><p class="mr-1 rounded-full px-2 py-1 border leading-none text-sm dark:border-gray-600">python</p></a><a href="/tag/django"><p class="mr-1 rounded-full px-2 py-1 border leading-none text-sm dark:border-gray-600">django</p></a><a href="/tag/orm"><p class="mr-1 rounded-full px-2 py-1 border leading-none text-sm dark:border-gray-600">orm</p></a><a href="/tag/best-practice"><p class="mr-1 rounded-full px-2 py-1 border leading-none text-sm dark:border-gray-600">best-practice</p></a><a href="/tag/tech"><p class="mr-1 rounded-full px-2 py-1 border leading-none text-sm dark:border-gray-600">tech</p></a></div><div> <img src="https://www.notion.so/images/page-cover/nasa_fingerprints_of_water_on_the_sand.jpg"/> </div></nav><div class="-mt-4"><main class="notion light-mode notion-page notion-block-6ad26f7b18284d64a9483cc6367f6901"><div class="notion-viewport"></div><div class="notion-collection-row"><div class="notion-collection-row-body"><div class="notion-collection-row-property"><div class="notion-collection-column-title"><svg viewBox="0 0 14 14" class="notion-collection-column-title-icon"><path d="M10.889 5.5H3.11v1.556h7.778V5.5zm1.555-4.444h-.777V0H10.11v1.056H3.89V0H2.333v1.056h-.777c-.864 0-1.548.7-1.548 1.555L0 12.5c0 .856.692 1.5 1.556 1.5h10.888C13.3 14 14 13.356 14 12.5V2.611c0-.855-.7-1.555-1.556-1.555zm0 11.444H1.556V3.944h10.888V12.5zM8.556 8.611H3.11v1.556h5.445V8.61z"></path></svg><div class="notion-collection-column-title-body">date</div></div><div class="notion-collection-row-value"><span class="notion-property notion-property-date">Sep 9, 2022</span></div></div><div class="notion-collection-row-property"><div class="notion-collection-column-title"><svg viewBox="0 0 14 14" class="notion-collection-column-title-icon"><path d="M7 4.568a.5.5 0 00-.5-.5h-6a.5.5 0 00-.5.5v1.046a.5.5 0 00.5.5h6a.5.5 0 00.5-.5V4.568zM.5 1a.5.5 0 00-.5.5v1.045a.5.5 0 00.5.5h12a.5.5 0 00.5-.5V1.5a.5.5 0 00-.5-.5H.5zM0 8.682a.5.5 0 00.5.5h11a.5.5 0 00.5-.5V7.636a.5.5 0 00-.5-.5H.5a.5.5 0 00-.5.5v1.046zm0 3.068a.5.5 0 00.5.5h9a.5.5 0 00.5-.5v-1.045a.5.5 0 00-.5-.5h-9a.5.5 0 00-.5.5v1.045z"></path></svg><div class="notion-collection-column-title-body">slug</div></div><div class="notion-collection-row-value"><span class="notion-property notion-property-text">django-orm-best-practice-II.html</span></div></div><div class="notion-collection-row-property"><div class="notion-collection-column-title"><svg viewBox="0 0 14 14" class="notion-collection-column-title-icon"><path d="M7 13A6 6 0 107 1a6 6 0 000 12zM3.751 5.323A.2.2 0 013.909 5h6.182a.2.2 0 01.158.323L7.158 9.297a.2.2 0 01-.316 0L3.751 5.323z"></path></svg><div class="notion-collection-column-title-body">status</div></div><div class="notion-collection-row-value"><span class="notion-property notion-property-select"><div class="notion-property-select-item notion-item-red">Published</div></span></div></div><div class="notion-collection-row-property"><div class="notion-collection-column-title"><svg viewBox="0 0 14 14" class="notion-collection-column-title-icon"><path d="M4 3a1 1 0 011-1h7a1 1 0 110 2H5a1 1 0 01-1-1zm0 4a1 1 0 011-1h7a1 1 0 110 2H5a1 1 0 01-1-1zm0 4a1 1 0 011-1h7a1 1 0 110 2H5a1 1 0 01-1-1zM2 4a1 1 0 110-2 1 1 0 010 2zm0 4a1 1 0 110-2 1 1 0 010 2zm0 4a1 1 0 110-2 1 1 0 010 2z"></path></svg><div class="notion-collection-column-title-body">tags</div></div><div class="notion-collection-row-value"><span class="notion-property notion-property-multi_select"><div class="notion-property-multi_select-item notion-item-brown">python</div><div class="notion-property-multi_select-item notion-item-red">django</div><div class="notion-property-multi_select-item notion-item-default">orm</div><div class="notion-property-multi_select-item notion-item-yellow">best-practice</div><div class="notion-property-multi_select-item notion-item-orange">tech</div></span></div></div><div class="notion-collection-row-property"><div class="notion-collection-column-title"><svg viewBox="0 0 14 14" class="notion-collection-column-title-icon"><path d="M7 4.568a.5.5 0 00-.5-.5h-6a.5.5 0 00-.5.5v1.046a.5.5 0 00.5.5h6a.5.5 0 00.5-.5V4.568zM.5 1a.5.5 0 00-.5.5v1.045a.5.5 0 00.5.5h12a.5.5 0 00.5-.5V1.5a.5.5 0 00-.5-.5H.5zM0 8.682a.5.5 0 00.5.5h11a.5.5 0 00.5-.5V7.636a.5.5 0 00-.5-.5H.5a.5.5 0 00-.5.5v1.046zm0 3.068a.5.5 0 00.5.5h9a.5.5 0 00.5-.5v-1.045a.5.5 0 00-.5-.5h-9a.5.5 0 00-.5.5v1.045z"></path></svg><div class="notion-collection-column-title-body">summary</div></div><div class="notion-collection-row-value"><span class="notion-property notion-property-text">CRUD boy 回来了</span></div></div><div class="notion-collection-row-property"><div class="notion-collection-column-title"><svg viewBox="0 0 14 14" class="notion-collection-column-title-icon"><path d="M7 13A6 6 0 107 1a6 6 0 000 12zM3.751 5.323A.2.2 0 013.909 5h6.182a.2.2 0 01.158.323L7.158 9.297a.2.2 0 01-.316 0L3.751 5.323z"></path></svg><div class="notion-collection-column-title-body">type</div></div><div class="notion-collection-row-value"><span class="notion-property notion-property-select"><div class="notion-property-select-item notion-item-purple">Post</div></span></div></div></div></div><div class="notion-text notion-block-917f169ee9c34019a62c5f85892e3620">最近重操 CRUD 旧业，又有一些新的发现，故增加一篇 <a class="notion-link" href="https://www.notion.so/982e294cabb247aa878134d8bb6fd6ce">Django ORM：天使与魔鬼</a> Part II。</div><h3 class="notion-h notion-h2 notion-h-indent-0 notion-block-4d19de6795b04c9f89f8e3a758d0954c" data-id="4d19de6795b04c9f89f8e3a758d0954c"><span><div id="4d19de6795b04c9f89f8e3a758d0954c" class="notion-header-anchor"></div><a class="notion-hash-link" href="#4d19de6795b04c9f89f8e3a758d0954c" title="利用 batch_size 控制数据库单次提交的大小"><svg viewBox="0 0 16 16" width="16" height="16"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><span class="notion-h-title">利用 batch_size 控制数据库单次提交的大小</span></span></h3><div class="notion-text notion-block-4441855d1bb34da0aed6aa17fcf05202"><code class="notion-inline-code">bulk_create</code> 和 <code class="notion-inline-code">bulk_update</code> 是我们常用的批量创建、更新的方法，但批量提速一时爽，提交过长会直接导致任务失败。</div><div class="notion-text notion-block-5c409ae54dae4b2b882909acbbeec43c">之前没有细致查阅文档，想当然 <a target="_blank" rel="noopener noreferrer" class="notion-link" href="https://github.com/TencentBlueKing/bk-user/blob/cd3d14b72d92de0cf687e9466a797b9fd07e0daf/src/api/bkuser_core/common/db_sync.py#L140">手写了批量提交分片的逻辑</a> ，虽然也完全实现了功能，但终究多了一份需要维护的逻辑，实际上直接用 <a target="_blank" rel="noopener noreferrer" class="notion-link" href="https://docs.djangoproject.com/zh-hans/4.1/ref/models/querysets/#bulk-create">Django 默认提供的 </a><a target="_blank" rel="noopener noreferrer" class="notion-link" href="https://docs.djangoproject.com/zh-hans/4.1/ref/models/querysets/#bulk-create"><code class="notion-inline-code">batch_size</code></a> 即可。</div><pre class="notion-code language-python"><code class="language-python">from itertools <span class="token keyword">import</span> islice

batch_size <span class="token operator">=</span> <span class="token number">100</span>
objs <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token function">Entry</span><span class="token punctuation">(</span>headline<span class="token operator">=</span><span class="token string">'Test %s'</span> <span class="token operator">%</span> i<span class="token punctuation">)</span> <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token function">range</span><span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token keyword">while</span> <span class="token literal-property property">True</span><span class="token operator">:</span>
    batch <span class="token operator">=</span> <span class="token function">list</span><span class="token punctuation">(</span><span class="token function">islice</span><span class="token punctuation">(</span>objs<span class="token punctuation">,</span> batch_size<span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token keyword">if</span> not batch<span class="token operator">:</span>
        <span class="token keyword">break</span>
    Entry<span class="token punctuation">.</span>objects<span class="token punctuation">.</span><span class="token function">bulk_create</span><span class="token punctuation">(</span>batch<span class="token punctuation">,</span> batch_size<span class="token punctuation">)</span></code></pre><h3 class="notion-h notion-h2 notion-h-indent-0 notion-block-4560c1f2cdc34fc8b26c830584140494" data-id="4560c1f2cdc34fc8b26c830584140494"><span><div id="4560c1f2cdc34fc8b26c830584140494" class="notion-header-anchor"></div><a class="notion-hash-link" href="#4560c1f2cdc34fc8b26c830584140494" title="通过 Prefetch 控制预取的查询"><svg viewBox="0 0 16 16" width="16" height="16"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><span class="notion-h-title">通过 Prefetch 控制预取的查询</span></span></h3><div class="notion-text notion-block-942fb49c92dd440eacbde16315aa4e4c"><a target="_blank" rel="noopener noreferrer" class="notion-link" href="https://stackoverflow.com/questions/97197/what-is-the-n1-selects-problem-in-orm-object-relational-mapping">N + 1 问题</a>是非常常见的查询效率杀手。在 Django 中我们通常会使用 <code class="notion-inline-code">selected_related</code> 或<code class="notion-inline-code">prefetch_related</code> 来预取关联对象，来减少和 DB 之间的交互，但是在使用上也需要有一些注意的地方。</div><div class="notion-text notion-block-29fd3c9a717c4acaa7d4af894c3bf0e7">首先，预取需要精确控制到字段。</div><div class="notion-text notion-block-e116a47ba91e4fe3a33d9bbd54be8429">Django 默认的查询方式都是粗放的，例如普通查询不使用 <code class="notion-inline-code">values</code> 或者 <code class="notion-inline-code">only</code> 时都是 <code class="notion-inline-code">select *</code> ，而预取也不例外，看看下面这个例子。</div><pre class="notion-code language-python"><code class="language-python"><span class="token keyword">class</span> <span class="token class-name">Foo</span><span class="token punctuation">(</span>models<span class="token punctuation">.</span>Model<span class="token punctuation">)</span><span class="token operator">:</span>
	<span class="token operator">...</span>

<span class="token keyword">class</span> <span class="token class-name">Bar</span><span class="token punctuation">(</span>models<span class="token punctuation">.</span>Model<span class="token punctuation">)</span><span class="token operator">:</span>
	foo <span class="token operator">=</span> models<span class="token punctuation">.</span><span class="token function">ForeignKey</span><span class="token punctuation">(</span>Foo<span class="token punctuation">)</span>
	<span class="token operator">...</span>

<span class="token keyword">class</span> <span class="token class-name">Baz</span><span class="token punctuation">(</span>models<span class="token punctuation">.</span>Model<span class="token punctuation">)</span><span class="token operator">:</span>
  <span class="token string">""</span><span class="token string">"A very large table"</span><span class="token string">""</span>
	foo <span class="token operator">=</span> models<span class="token punctuation">.</span><span class="token function">ForeignKey</span><span class="token punctuation">(</span>Foo<span class="token punctuation">)</span></code></pre><div class="notion-text notion-block-844a600b3a5c44fb806ca38269fa0a16">我们在查询 <code class="notion-inline-code">Foo</code> 时，会尝试预取关联字段以加速后续数据读取，但如果我们在调用时不加任何参数：<code class="notion-inline-code">Foo.objects.all().prefetch_related()</code> ，<b>默认地 Django 会将所有关联字段都取出来</b>，加入 <code class="notion-inline-code">Baz</code> 表无比巨大，本来用作性能优化的 <code class="notion-inline-code">prefetch_related</code> 就会摇身变成耗时怪兽。</div><div class="notion-text notion-block-05eabf30586c4efd84335bcd09602fed">此外，我们还会遇到级联预取的场景。</div><pre class="notion-code language-python"><code class="language-python"><span class="token keyword">class</span> <span class="token class-name">Foo</span><span class="token punctuation">(</span>models<span class="token punctuation">.</span>Model<span class="token punctuation">)</span><span class="token operator">:</span>
	<span class="token operator">...</span>

<span class="token keyword">class</span> <span class="token class-name">Bar</span><span class="token punctuation">(</span>models<span class="token punctuation">.</span>Model<span class="token punctuation">)</span><span class="token operator">:</span>
	foo <span class="token operator">=</span> models<span class="token punctuation">.</span><span class="token function">ForeignKey</span><span class="token punctuation">(</span>Foo<span class="token punctuation">,</span> related_name<span class="token operator">=</span><span class="token string">"bars"</span><span class="token punctuation">)</span>
	<span class="token operator">...</span>

<span class="token keyword">class</span> <span class="token class-name">Baz</span><span class="token punctuation">(</span>models<span class="token punctuation">.</span>Model<span class="token punctuation">)</span><span class="token operator">:</span>
	bar <span class="token operator">=</span> models<span class="token punctuation">.</span><span class="token function">ForeignKey</span><span class="token punctuation">(</span>Bar<span class="token punctuation">,</span> related_name<span class="token operator">=</span><span class="token string">"bazs"</span><span class="token punctuation">)</span>
	large_config <span class="token operator">=</span> models<span class="token punctuation">.</span><span class="token function">JSONField</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token operator">...</span></code></pre><div class="notion-text notion-block-f2e6729bc91346c6ad21fd1a2bcd4ff4">此时在后续的循环处理中，我们需要通过 <code class="notion-inline-code">Foo</code> 对象查询到 <code class="notion-inline-code">Baz</code> 的数据，为了避免 N + 1 我们也会多级预取:</div><pre class="notion-code language-python"><code class="language-python">Foo<span class="token punctuation">.</span>objects<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">select_related</span><span class="token punctuation">(</span><span class="token string">"bars"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">prefetch_related</span><span class="token punctuation">(</span><span class="token string">"bars__bazs"</span><span class="token punctuation">)</span></code></pre><div class="notion-text notion-block-e7a383c89d8a47d98bb03ea1215373c5">此时二级预取也是默认获取全部字段，倘若 <code class="notion-inline-code">Baz</code> 表中有一个需要额外耗时序列化的字段，同样会使优化适得其反。这时可以考虑引入 <a target="_blank" rel="noopener noreferrer" class="notion-link" href="https://docs.djangoproject.com/zh-hans/4.1/ref/models/querysets/#prefetch-objects"><code class="notion-inline-code">Prefetch</code></a> 对象，做更细致的查询控制。</div><pre class="notion-code language-python"><code class="language-python">Foo<span class="token punctuation">.</span>objects<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">select_related</span><span class="token punctuation">(</span><span class="token string">"bars"</span><span class="token punctuation">)</span>
<span class="token punctuation">.</span><span class="token function">prefetch_related</span><span class="token punctuation">(</span>
	<span class="token function">Prefetch</span><span class="token punctuation">(</span><span class="token string">"bars__bazs"</span><span class="token punctuation">,</span> queryset<span class="token operator">=</span>Baz<span class="token punctuation">.</span>objects<span class="token punctuation">.</span><span class="token function">defer</span><span class="token punctuation">(</span><span class="token string">"large_config"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span></code></pre><div class="notion-blank notion-block-49ad21cac56745f889392cedcb9e5b71"> </div><div class="notion-text notion-block-744cc7796009402fab94db362da28356">是不是觉得 ORM 查询本身也挺繁杂的？用 SQL 有时会更直接清晰地多。所以也会有一些完全<a target="_blank" rel="noopener noreferrer" class="notion-link" href="https://dev.solita.fi/2021/06/01/why-avoid-an-orm.html">不使用 ORM 的观点</a>。在我看来，ORM 能让 90% 的查询都变得结构化更清晰、更易维护、甚至更安全，但剩下的 10% 也许会耗费更多的精力，所以何时使用 ORM 是根据具体项目场景来定的，不能因噎废食。</div><h3 class="notion-h notion-h2 notion-h-indent-0 notion-block-b5a4d66ac57a4ca8b13e1028109b39c7" data-id="b5a4d66ac57a4ca8b13e1028109b39c7"><span><div id="b5a4d66ac57a4ca8b13e1028109b39c7" class="notion-header-anchor"></div><a class="notion-hash-link" href="#b5a4d66ac57a4ca8b13e1028109b39c7" title="小广告"><svg viewBox="0 0 16 16" width="16" height="16"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><span class="notion-h-title">小广告</span></span></h3><div class="notion-text notion-block-f88ddea20edb497b87e46b9377a818d2">是不是觉得 Part II 内容有点少？没关系，更多的内容我都放在了这里。</div><div class="notion-row"><a target="_blank" rel="noopener noreferrer" class="notion-bookmark notion-block-11be5a01c4ec4b2abb68cbf4b3bc73dc" href="https://github.com/TencentBlueKing/python-best-practices"><div><div class="notion-bookmark-title">GitHub - TencentBlueKing/python-best-practices</div><div class="notion-bookmark-description">Contribute to TencentBlueKing/python-best-practices development by creating an account on GitHub.</div><div class="notion-bookmark-link"><img src="https://github.com/favicon.ico" alt="GitHub - TencentBlueKing/python-best-practices" loading="lazy"/><div>https://github.com/TencentBlueKing/python-best-practices</div></div></div><div class="notion-bookmark-image"><img src="https://opengraph.githubassets.com/e9d11601584d87c0fbb4092264f7ab23a33987f8d05dfb8b0e0c57157aecc9b3/TencentBlueKing/python-best-practices" alt="GitHub - TencentBlueKing/python-best-practices" loading="lazy"/></div></a></div><div class="notion-text notion-block-c4cb7b9d7d92463eb7dd154161269031">我和团队小伙伴整理了很多 Python\Django\DRF 的最佳实践经验，项目会持续更新，欢迎一起探讨维护，希望每一个 CRUD 男孩/女孩都能少踩坑。</div></main></div></article><div class="flex justify-between font-medium text-gray-500 dark:text-gray-400"><a><button class="mt-2 cursor-pointer hover:text-black dark:hover:text-gray-100">← <!-- -->返回</button></a><a><button class="mt-2 cursor-pointer hover:text-black dark:hover:text-gray-100">↑ <!-- -->回到顶部</button></a></div><div></div></main><div class="mt-6 flex-shrink-0 m-auto w-full text-gray-500 dark:text-gray-400 transition-all max-w-3xl px-4"><hr class="border-gray-200 dark:border-gray-600"/><div class="my-4 text-sm leading-6"><div class="flex align-baseline justify-between flex-wrap"><p>© <!-- -->bluesyu<!-- --> <!-- -->2019 - 2023</p><p>powered by <a href="https://github.com/craigary/nobelium"><u>nobelium</u></a></p></div></div></div></div></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"post":{"id":"6ad26f7b-1828-4d64-a948-3cc6367f6901","date":{"start_date":"2022-09-09"},"type":["Post"],"slug":"django-orm-best-practice-II.html","tags":["python","django","orm","best-practice","tech"],"summary":"CRUD boy 回来了","title":"Django ORM：天使与魔鬼 II","status":["Published"],"createdTime":"Tue Oct 18 2022 02:11:26 GMT+0000 (Coordinated Universal Time)","fullWidth":false,"pageIcon":"👼","pageCover":"/images/page-cover/nasa_fingerprints_of_water_on_the_sand.jpg"},"blockMap":{"block":{"6ad26f7b-1828-4d64-a948-3cc6367f6901":{"value":{"id":"6ad26f7b-1828-4d64-a948-3cc6367f6901","version":42,"type":"page","properties":{"NX\\Q":[["‣",[["d",{"type":"date","start_date":"2022-09-09"}]]]],"`gQ~":[["Post"]],"d]hq":[["django-orm-best-practice-II.html"]],"sD^m":[["python,django,orm,best-practice,tech"]],"wz|S":[["CRUD boy 回来了"]],"title":[["Django ORM：天使与魔鬼 II"]],"26ff3130-393a-45ac-92b5-7490d9b87515":[["post"]],"29e679ed-47a3-46c2-9eb4-9070171591b8":[["Yes"]],"b6d830ff-ce1d-4e76-a484-f0fc3f148c52":[["Yes"]],"f211bdc0-ee00-4186-9a7d-f68c055ec2ee":[["Published"]]},"content":["917f169e-e9c3-4019-a62c-5f85892e3620","4d19de67-95b0-4c9f-89f8-e3a758d0954c","4441855d-1bb3-4da0-aed6-aa17fcf05202","5c409ae5-4dae-4b2b-8829-09acbbeec43c","74254274-03ce-4b4f-b0eb-33a666d6d54e","4560c1f2-cdc3-4fc8-b26c-830584140494","942fb49c-92dd-440e-acbd-e16315aa4e4c","29fd3c9a-717c-4aca-a7d4-af894c3bf0e7","e116a47b-a91e-4fe3-a33d-9bbd54be8429","da30a7c7-c37f-40a6-812e-fe60a51ac5ea","844a600b-3a5c-44fb-806c-a38269fa0a16","05eabf30-586c-4efd-8433-5bcd09602fed","df3427c8-a988-49f8-89f0-30f90bc183b1","f2e6729b-c913-46c6-ad21-fd1a2bcd4ff4","cc23ed8d-3bce-429d-b9b7-d3ce5e1d04f6","e7a383c8-9d8a-47d9-8bb0-3ea1215373c5","97e3a3f5-53e6-4fae-864b-237da186b553","49ad21ca-c567-45f8-8939-2cedcb9e5b71","744cc779-6009-402f-ab94-db362da28356","b5a4d66a-c57a-4ca8-b13e-1028109b39c7","f88ddea2-0edb-497b-87e4-6b9377a818d2","11be5a01-c4ec-4b2a-bb68-cbf4b3bc73dc","c4cb7b9d-7d92-463e-b7dd-154161269031"],"format":{"page_icon":"👼","page_cover":"/images/page-cover/nasa_fingerprints_of_water_on_the_sand.jpg","copied_from_pointer":{"id":"df2f83f3-a8af-4dc1-b9a5-bf5ead728813","table":"block","spaceId":"b0a64676-90b9-4734-9c63-2d704ee573b6"},"page_cover_position":0.4},"created_time":1666059086871,"last_edited_time":1666200480000,"parent_id":"e34bec60-9b02-4ad8-aaf8-83369409cc9f","parent_table":"collection","alive":true,"copied_from":"df2f83f3-a8af-4dc1-b9a5-bf5ead728813","created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"},"role":"reader"},"a6089909-2d0d-43ef-af93-5e041712e826":{"value":{"id":"a6089909-2d0d-43ef-af93-5e041712e826","version":121,"type":"collection_view_page","view_ids":["065b98d2-d3b4-4dab-8b96-4eb118a3f311"],"collection_id":"e34bec60-9b02-4ad8-aaf8-83369409cc9f","format":{"block_locked":false,"block_locked_by":"2c0e0b01-f59e-4e03-b7b6-7d706eecada3","collection_pointer":{"id":"e34bec60-9b02-4ad8-aaf8-83369409cc9f","table":"collection","spaceId":"b0a64676-90b9-4734-9c63-2d704ee573b6"},"copied_from_pointer":{"id":"adc3552c-fc73-442a-b504-8d4b1eb0079a","table":"block","spaceId":"ac4cb96d-c8f8-4040-9bb2-868d9fc7f526"}},"permissions":[{"role":"editor","type":"user_permission","user_id":"f594524b-0941-4aea-99a2-9b9304033287"},{"role":"reader","type":"public_permission","added_timestamp":1666006306008}],"created_time":1665993658476,"last_edited_time":1685590782024,"parent_id":"b0a64676-90b9-4734-9c63-2d704ee573b6","parent_table":"space","alive":true,"copied_from":"adc3552c-fc73-442a-b504-8d4b1eb0079a","created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"},"role":"reader"},"917f169e-e9c3-4019-a62c-5f85892e3620":{"value":{"id":"917f169e-e9c3-4019-a62c-5f85892e3620","version":1,"type":"text","properties":{"title":[["最近重操 CRUD 旧业，又有一些新的发现，故增加一篇 "],["Django ORM：天使与魔鬼",[["a","/982e294cabb247aa878134d8bb6fd6ce"]]],[" Part II。"]]},"format":{"quote_size":"large","copied_from_pointer":{"id":"4a546d3d-7c74-496e-9b1d-7d1fb42c535d","table":"block","spaceId":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"created_time":1666059086870,"last_edited_time":1666059086870,"parent_id":"6ad26f7b-1828-4d64-a948-3cc6367f6901","parent_table":"block","alive":true,"copied_from":"4a546d3d-7c74-496e-9b1d-7d1fb42c535d","created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"},"role":"reader"},"982e294c-abb2-47aa-8781-34d8bb6fd6ce":{"value":{"id":"982e294c-abb2-47aa-8781-34d8bb6fd6ce","version":6,"type":"page","properties":{"!`\"w":[["Yes"]],"'2]%":[["django-orm-best-practice"]],"98uZ":[["平时是小天使，出了问题就是大撒旦"]],":H`m":[["Yes"]],"xY$N":[["‣",[["d",{"type":"date","start_date":"2020-11-27"}]]]],"{iD?":[["web,django,orm,best-practice,tech"]],"|Ay0":[["post"]],"title":[["Django ORM：天使与魔鬼"]]},"content":["65eb3916-5001-42db-8115-b161d79ad878","ae374395-8978-43c3-b068-26ed14984083","1df92409-ac02-4080-b676-fc7d3bdd70f1","4a306f5e-d2fc-4f81-bb02-3f2c5beaabfa","6c1bbcd6-6e4d-4e77-8284-4ab050c1219b","c436ae0e-bfb3-4819-bc4f-b3fbe9246a57","120a19e1-3232-487f-9622-5b1ae3e82b96","e8e3441e-58f6-4808-a572-17549b7d07ef","ff5f9408-39bc-48d8-9ae0-16731aa9c6ed","f603f2fb-d032-4a84-99a7-3d36b96392f8","0e3ffa2a-8eab-498d-a16d-8858bc82861c","1a76639d-83a6-4d25-81c9-40d2f6b2fcb7","df8188cb-b2bc-4446-b331-07f9dbff5f45","6db8e2a3-ed26-4249-93cb-9663b65027db","2312ce96-c541-4a7a-baa0-6aabeea7b424","516ac619-6479-4145-9525-fa359a8e25ce","a594144a-4bfa-4a12-99f9-cd22b8cb05d9","ce72c123-4015-44e8-ba02-381db0d0a755","7f8fd448-c9c5-46f5-990c-d3cf99b47855","47d04002-f095-4b63-8a2f-e2d0c273586c","0d8a49ef-dc9a-4ea8-a01d-3a66f92ef8ad","376ac1aa-ae6a-490b-a7f1-c4293e6d3c6f","2fa597b3-038e-4882-8349-30f673a51010","31904386-08db-4193-921b-84728cfdef7c","ed9afc00-e697-47ce-940c-ca0c9bc3ce0d","f26dd53e-313f-4959-86af-a0be00dbaf06","26a0e17b-df14-4da9-beb8-c803ff731926","6c9af6e6-75e4-48fe-a225-e5a014efe4e5","c4515a80-83a4-4225-9f29-3ef3c0e3ab38","72e813d0-12b1-403f-8ec3-cf7c158dd7c5","701ba0fe-2137-4e35-bd15-9414d89b92b3","9fd7c1a9-f5ce-4591-a7a8-316455423263","34abe9dc-3682-4f97-bf4b-46f29816ac85","83a9e6e0-d99f-4295-a673-b051a47669dd","ba597644-6ab8-4f75-8736-43606d6035ca","d4c35226-3bb6-4a00-8bc8-1cba9941d68c","85486655-3124-422a-a2c6-c9bd317148b8","c8504db6-20c6-4ef2-9ab1-69a63ea1320b","abb45429-6588-4cd4-8b07-04b7543b06c8","e770841d-a565-4cbe-b6d4-d6119198f395","f618f11c-eb5f-4e6e-b7cd-69cc151f026b","bcfcf9ae-9941-4f86-a116-a21fbbd7fd0f","a692a669-d955-4f99-97df-85f289c8ac84","dadcf3b3-611d-47c0-9032-bc3866edee31","f8033d2a-cf7a-419b-a31e-4302c024ef6c","f35f10b1-8b21-4aad-8383-e122260b182d","dbb143ee-8380-465e-a587-73d6184445db","4039d41f-0f20-48bd-8f36-2b2bf8074361","4c22b1b1-5bf0-4ca9-ab2d-4d5749343835","1ea4c6d5-33ef-44b0-8d83-64ea11a16bb8","162617b0-46c9-41da-9973-4d9bc18c8eca","f12494a7-a8bc-4c25-8898-6d5052d0b457","403186d6-8af1-4bd4-9add-2428bb10df36","7005ffc7-17ee-4130-bc43-297c3b2aafd5","a3ed25e3-5d9b-4c56-8e84-ed89d614787d","4e74cfc4-290f-4cf3-880b-1ce716f2fd81","f51be009-8d88-4db1-a0b8-0443262781f4","78702bc4-1685-42bf-8f1d-77913cb25ac1","f75715e8-c09c-42b6-af63-05e5800e1622","049161c4-4319-4efb-bc90-c78469ce4674","ebfff28f-8890-470e-ac3b-1f29f03ed1c3","9f2f462d-ece7-4c03-aa64-3fe99cac1985","acc07a2e-8c4e-425b-b3a3-f3a7f48cf0cc","dbdb29f2-6067-48aa-b873-230f4e581bb5","1ab7b6b7-335d-42d9-ad36-3862e1e044b8","7c451391-7905-4983-b5ef-c9ceaa50b6f6","c1660190-9fca-4a63-ab73-cb94f27d905b","4d5853a0-7d6d-48a1-97c3-cd1e428933a7","bce18671-696b-47df-8fde-1c582cccdd32","7851b7be-70b9-43b7-a130-68b159696e33","145c0edd-05d4-429a-829e-f581838006b3","5b48843a-1a93-4ade-8495-125e2e246d07"],"format":{"page_icon":"👹","page_cover":"https://images.unsplash.com/photo-1561411996-3794338f63cc?ixlib=rb-1.2.1\u0026q=85\u0026fm=jpg\u0026crop=entropy\u0026cs=srgb\u0026ixid=eyJhcHBfaWQiOjYzOTIxfQ","page_full_width":false,"page_small_text":true,"copied_from_pointer":{"id":"94a28416-ce6b-44ac-91e1-5744eea88dd4","table":"block","spaceId":"3a0f5a6b-9035-473b-b3ec-70cd3c949dea"},"page_cover_position":0.7072},"permissions":[{"role":"reader","type":"public_permission","added_timestamp":1637140835856,"allow_search_engine_indexing":true}],"created_time":1623035152450,"last_edited_time":1662692640000,"parent_id":"12c44699-617b-45ed-a019-c3b075e0ae01","parent_table":"collection","alive":true,"copied_from":"94a28416-ce6b-44ac-91e1-5744eea88dd4","created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"},"role":"reader"},"8d450f36-4a4e-4df4-ad68-bcbe4dd14216":{"value":{"id":"8d450f36-4a4e-4df4-ad68-bcbe4dd14216","version":73,"type":"collection_view_page","view_ids":["3ac983fd-1048-450d-8fa0-59c0206fdcf7"],"collection_id":"12c44699-617b-45ed-a019-c3b075e0ae01","format":{"collection_pointer":{"id":"12c44699-617b-45ed-a019-c3b075e0ae01","table":"collection","spaceId":"b0a64676-90b9-4734-9c63-2d704ee573b6"},"copied_from_pointer":{"id":"8cfd69be-c740-4ee4-983e-ed6484ad3138","table":"block","spaceId":"3a0f5a6b-9035-473b-b3ec-70cd3c949dea"},"page_cover_position":0.5},"permissions":[{"role":"editor","type":"user_permission","user_id":"f594524b-0941-4aea-99a2-9b9304033287"},{"role":"reader","type":"public_permission","added_timestamp":1637140724674,"allow_search_engine_indexing":false}],"created_by":"c1282c3a-ad55-4c3a-8c50-b810234a23b5","created_time":1623035155728,"last_edited_by":"c1282c3a-ad55-4c3a-8c50-b810234a23b5","last_edited_time":1666169400000,"parent_id":"b0a64676-90b9-4734-9c63-2d704ee573b6","parent_table":"space","alive":true,"copied_from":"8cfd69be-c740-4ee4-983e-ed6484ad3138","file_ids":["b4485585-00bf-4b0b-8f62-22a93abba559","3395865a-5862-4588-9b43-6179d1a4a029","a26360ab-cdc4-4a53-80b2-b03385b849b7","15dfe408-8b89-4b86-abf5-6351fc8433c8","fbedc099-e679-4ee5-a94b-e649c66c8845","3552bd9f-8c5b-4bcc-98d9-da0f17f7c71f","37771f08-82f2-49c2-9ad6-9d82a513b54a","400fe81c-4cda-40ab-ae58-a28ccf26464e","66ae2268-69fb-4a91-a4a8-fea3ba4543a5"],"created_by_table":"notion_user","created_by_id":"c1282c3a-ad55-4c3a-8c50-b810234a23b5","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"},"role":"reader"},"4d19de67-95b0-4c9f-89f8-e3a758d0954c":{"value":{"id":"4d19de67-95b0-4c9f-89f8-e3a758d0954c","version":1,"type":"sub_header","properties":{"title":[["利用 batch_size 控制数据库单次提交的大小"]]},"format":{"copied_from_pointer":{"id":"82db9c2a-eb01-4301-95ba-ee7397543088","table":"block","spaceId":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"created_time":1666059086870,"last_edited_time":1666059086870,"parent_id":"6ad26f7b-1828-4d64-a948-3cc6367f6901","parent_table":"block","alive":true,"copied_from":"82db9c2a-eb01-4301-95ba-ee7397543088","created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"},"role":"reader"},"4441855d-1bb3-4da0-aed6-aa17fcf05202":{"value":{"id":"4441855d-1bb3-4da0-aed6-aa17fcf05202","version":1,"type":"text","properties":{"title":[["bulk_create",[["c"]]],[" 和 "],["bulk_update",[["c"]]],[" 是我们常用的批量创建、更新的方法，但批量提速一时爽，提交过长会直接导致任务失败。"]]},"format":{"copied_from_pointer":{"id":"b955dbba-d6af-4e4b-bbf1-7f57011e519d","table":"block","spaceId":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"created_time":1666059086871,"last_edited_time":1666059086871,"parent_id":"6ad26f7b-1828-4d64-a948-3cc6367f6901","parent_table":"block","alive":true,"copied_from":"b955dbba-d6af-4e4b-bbf1-7f57011e519d","created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"},"role":"reader"},"5c409ae5-4dae-4b2b-8829-09acbbeec43c":{"value":{"id":"5c409ae5-4dae-4b2b-8829-09acbbeec43c","version":1,"type":"text","properties":{"title":[["之前没有细致查阅文档，想当然 "],["手写了批量提交分片的逻辑",[["a","https://github.com/TencentBlueKing/bk-user/blob/cd3d14b72d92de0cf687e9466a797b9fd07e0daf/src/api/bkuser_core/common/db_sync.py#L140"]]],[" ，虽然也完全实现了功能，但终究多了一份需要维护的逻辑，实际上直接用 "],["Django 默认提供的 ",[["a","https://docs.djangoproject.com/zh-hans/4.1/ref/models/querysets/#bulk-create"]]],["batch_size",[["c"],["a","https://docs.djangoproject.com/zh-hans/4.1/ref/models/querysets/#bulk-create"]]],[" 即可。"]]},"format":{"copied_from_pointer":{"id":"e46752e4-dc8d-4b0f-8210-4152bcaf7bc5","table":"block","spaceId":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"created_time":1666059086871,"last_edited_time":1666059086871,"parent_id":"6ad26f7b-1828-4d64-a948-3cc6367f6901","parent_table":"block","alive":true,"copied_from":"e46752e4-dc8d-4b0f-8210-4152bcaf7bc5","created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"},"role":"reader"},"74254274-03ce-4b4f-b0eb-33a666d6d54e":{"value":{"id":"74254274-03ce-4b4f-b0eb-33a666d6d54e","version":1,"type":"code","properties":{"title":[["from itertools import islice\n\nbatch_size = 100\nobjs = (Entry(headline='Test %s' % i) for i in range(1000))\nwhile True:\n    batch = list(islice(objs, batch_size))\n    if not batch:\n        break\n    Entry.objects.bulk_create(batch, batch_size)"]],"language":[["Python"]]},"format":{"code_wrap":true,"copied_from_pointer":{"id":"3b93cd87-9b89-49c7-be5d-71ab2141bd68","table":"block","spaceId":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"created_time":1666059086869,"last_edited_time":1666059086869,"parent_id":"6ad26f7b-1828-4d64-a948-3cc6367f6901","parent_table":"block","alive":true,"copied_from":"3b93cd87-9b89-49c7-be5d-71ab2141bd68","created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"},"role":"reader"},"4560c1f2-cdc3-4fc8-b26c-830584140494":{"value":{"id":"4560c1f2-cdc3-4fc8-b26c-830584140494","version":1,"type":"sub_header","properties":{"title":[["通过 Prefetch 控制预取的查询"]]},"format":{"copied_from_pointer":{"id":"c1d8db45-a591-4bd3-aeaf-1fd0888cfbaf","table":"block","spaceId":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"created_time":1666059086871,"last_edited_time":1666059086871,"parent_id":"6ad26f7b-1828-4d64-a948-3cc6367f6901","parent_table":"block","alive":true,"copied_from":"c1d8db45-a591-4bd3-aeaf-1fd0888cfbaf","created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"},"role":"reader"},"942fb49c-92dd-440e-acbd-e16315aa4e4c":{"value":{"id":"942fb49c-92dd-440e-acbd-e16315aa4e4c","version":1,"type":"text","properties":{"title":[["N + 1 问题",[["a","https://stackoverflow.com/questions/97197/what-is-the-n1-selects-problem-in-orm-object-relational-mapping"]]],["是非常常见的查询效率杀手。在 Django 中我们通常会使用 "],["selected_related",[["c"]]],[" 或"],["prefetch_related",[["c"]]],[" 来预取关联对象，来减少和 DB 之间的交互，但是在使用上也需要有一些注意的地方。"]]},"format":{"copied_from_pointer":{"id":"2f295609-869e-4562-862d-be2af09eeb07","table":"block","spaceId":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"created_time":1666059086869,"last_edited_time":1666059086869,"parent_id":"6ad26f7b-1828-4d64-a948-3cc6367f6901","parent_table":"block","alive":true,"copied_from":"2f295609-869e-4562-862d-be2af09eeb07","created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"},"role":"reader"},"29fd3c9a-717c-4aca-a7d4-af894c3bf0e7":{"value":{"id":"29fd3c9a-717c-4aca-a7d4-af894c3bf0e7","version":1,"type":"text","properties":{"title":[["首先，预取需要精确控制到字段。"]]},"format":{"copied_from_pointer":{"id":"bfa09ef6-2f6e-4f97-9b47-cbd47ecc450a","table":"block","spaceId":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"created_time":1666059086871,"last_edited_time":1666059086871,"parent_id":"6ad26f7b-1828-4d64-a948-3cc6367f6901","parent_table":"block","alive":true,"copied_from":"bfa09ef6-2f6e-4f97-9b47-cbd47ecc450a","created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"},"role":"reader"},"e116a47b-a91e-4fe3-a33d-9bbd54be8429":{"value":{"id":"e116a47b-a91e-4fe3-a33d-9bbd54be8429","version":1,"type":"text","properties":{"title":[["Django 默认的查询方式都是粗放的，例如普通查询不使用 "],["values",[["c"]]],[" 或者 "],["only",[["c"]]],[" 时都是 "],["select *",[["c"]]],[" ，而预取也不例外，看看下面这个例子。"]]},"format":{"copied_from_pointer":{"id":"a7ed80d3-60ec-48b3-9005-3dc4545f72db","table":"block","spaceId":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"created_time":1666059086870,"last_edited_time":1666059086870,"parent_id":"6ad26f7b-1828-4d64-a948-3cc6367f6901","parent_table":"block","alive":true,"copied_from":"a7ed80d3-60ec-48b3-9005-3dc4545f72db","created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"},"role":"reader"},"da30a7c7-c37f-40a6-812e-fe60a51ac5ea":{"value":{"id":"da30a7c7-c37f-40a6-812e-fe60a51ac5ea","version":1,"type":"code","properties":{"title":[["class Foo(models.Model):\n\t...\n\nclass Bar(models.Model):\n\tfoo = models.ForeignKey(Foo)\n\t...\n\nclass Baz(models.Model):\n  \"\"\"A very large table\"\"\"\n\tfoo = models.ForeignKey(Foo)"]],"language":[["Python"]]},"format":{"code_wrap":true,"copied_from_pointer":{"id":"8c41fb09-0be2-4c97-8d16-70bff05edd5a","table":"block","spaceId":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"created_time":1666059086870,"last_edited_time":1666059086870,"parent_id":"6ad26f7b-1828-4d64-a948-3cc6367f6901","parent_table":"block","alive":true,"copied_from":"8c41fb09-0be2-4c97-8d16-70bff05edd5a","created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"},"role":"reader"},"844a600b-3a5c-44fb-806c-a38269fa0a16":{"value":{"id":"844a600b-3a5c-44fb-806c-a38269fa0a16","version":1,"type":"text","properties":{"title":[["我们在查询 "],["Foo",[["c"]]],[" 时，会尝试预取关联字段以加速后续数据读取，但如果我们在调用时不加任何参数："],["Foo.objects.all().prefetch_related()",[["c"]]],[" ，"],["默认地 Django 会将所有关联字段都取出来",[["b"]]],["，加入 "],["Baz",[["c"]]],[" 表无比巨大，本来用作性能优化的 "],["prefetch_related",[["c"]]],[" 就会摇身变成耗时怪兽。"]]},"format":{"copied_from_pointer":{"id":"af347279-8e4b-4d8d-b935-e670a2bc0082","table":"block","spaceId":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"created_time":1666059086871,"last_edited_time":1666059086871,"parent_id":"6ad26f7b-1828-4d64-a948-3cc6367f6901","parent_table":"block","alive":true,"copied_from":"af347279-8e4b-4d8d-b935-e670a2bc0082","created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"},"role":"reader"},"05eabf30-586c-4efd-8433-5bcd09602fed":{"value":{"id":"05eabf30-586c-4efd-8433-5bcd09602fed","version":1,"type":"text","properties":{"title":[["此外，我们还会遇到级联预取的场景。"]]},"format":{"copied_from_pointer":{"id":"994ff684-a5bb-4535-8ec9-081b81474c2e","table":"block","spaceId":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"created_time":1666059086870,"last_edited_time":1666059086870,"parent_id":"6ad26f7b-1828-4d64-a948-3cc6367f6901","parent_table":"block","alive":true,"copied_from":"994ff684-a5bb-4535-8ec9-081b81474c2e","created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"},"role":"reader"},"df3427c8-a988-49f8-89f0-30f90bc183b1":{"value":{"id":"df3427c8-a988-49f8-89f0-30f90bc183b1","version":1,"type":"code","properties":{"title":[["class Foo(models.Model):\n\t...\n\nclass Bar(models.Model):\n\tfoo = models.ForeignKey(Foo, related_name=\"bars\")\n\t...\n\nclass Baz(models.Model):\n\tbar = models.ForeignKey(Bar, related_name=\"bazs\")\n\tlarge_config = models.JSONField()\n\t..."]],"language":[["Python"]]},"format":{"code_wrap":true,"copied_from_pointer":{"id":"4b1e9848-8e28-4c1c-afd9-832a72ad4c7c","table":"block","spaceId":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"created_time":1666059086870,"last_edited_time":1666059086870,"parent_id":"6ad26f7b-1828-4d64-a948-3cc6367f6901","parent_table":"block","alive":true,"copied_from":"4b1e9848-8e28-4c1c-afd9-832a72ad4c7c","created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"},"role":"reader"},"f2e6729b-c913-46c6-ad21-fd1a2bcd4ff4":{"value":{"id":"f2e6729b-c913-46c6-ad21-fd1a2bcd4ff4","version":1,"type":"text","properties":{"title":[["此时在后续的循环处理中，我们需要通过 "],["Foo",[["c"]]],[" 对象查询到 "],["Baz",[["c"]]],[" 的数据，为了避免 N + 1 我们也会多级预取:"]]},"format":{"copied_from_pointer":{"id":"a7a20e49-4256-48d9-a95c-62c9e8f17838","table":"block","spaceId":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"created_time":1666059086870,"last_edited_time":1666059086870,"parent_id":"6ad26f7b-1828-4d64-a948-3cc6367f6901","parent_table":"block","alive":true,"copied_from":"a7a20e49-4256-48d9-a95c-62c9e8f17838","created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"},"role":"reader"},"cc23ed8d-3bce-429d-b9b7-d3ce5e1d04f6":{"value":{"id":"cc23ed8d-3bce-429d-b9b7-d3ce5e1d04f6","version":1,"type":"code","properties":{"title":[["Foo.objects.filter().select_related(\"bars\").prefetch_related(\"bars__bazs\")"]],"language":[["Python"]]},"format":{"code_wrap":true,"copied_from_pointer":{"id":"43c1c48a-f79f-485e-af62-57421b46ee7a","table":"block","spaceId":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"created_time":1666059086869,"last_edited_time":1666059086869,"parent_id":"6ad26f7b-1828-4d64-a948-3cc6367f6901","parent_table":"block","alive":true,"copied_from":"43c1c48a-f79f-485e-af62-57421b46ee7a","created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"},"role":"reader"},"e7a383c8-9d8a-47d9-8bb0-3ea1215373c5":{"value":{"id":"e7a383c8-9d8a-47d9-8bb0-3ea1215373c5","version":1,"type":"text","properties":{"title":[["此时二级预取也是默认获取全部字段，倘若 "],["Baz",[["c"]]],[" 表中有一个需要额外耗时序列化的字段，同样会使优化适得其反。这时可以考虑引入 "],["Prefetch",[["c"],["a","https://docs.djangoproject.com/zh-hans/4.1/ref/models/querysets/#prefetch-objects"]]],[" 对象，做更细致的查询控制。"]]},"format":{"copied_from_pointer":{"id":"6ed989f8-3123-42e2-b147-92e216500f48","table":"block","spaceId":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"created_time":1666059086870,"last_edited_time":1666059086870,"parent_id":"6ad26f7b-1828-4d64-a948-3cc6367f6901","parent_table":"block","alive":true,"copied_from":"6ed989f8-3123-42e2-b147-92e216500f48","created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"},"role":"reader"},"97e3a3f5-53e6-4fae-864b-237da186b553":{"value":{"id":"97e3a3f5-53e6-4fae-864b-237da186b553","version":1,"type":"code","properties":{"title":[["Foo.objects.filter().select_related(\"bars\")\n.prefetch_related(\n\tPrefetch(\"bars__bazs\", queryset=Baz.objects.defer(\"large_config\"))\n)"]],"language":[["Python"]]},"format":{"code_wrap":true,"copied_from_pointer":{"id":"80535a8e-9f1a-4f9e-928d-d61ea5d16311","table":"block","spaceId":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"created_time":1666059086870,"last_edited_time":1666059086870,"parent_id":"6ad26f7b-1828-4d64-a948-3cc6367f6901","parent_table":"block","alive":true,"copied_from":"80535a8e-9f1a-4f9e-928d-d61ea5d16311","created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"},"role":"reader"},"49ad21ca-c567-45f8-8939-2cedcb9e5b71":{"value":{"id":"49ad21ca-c567-45f8-8939-2cedcb9e5b71","version":1,"type":"text","format":{"copied_from_pointer":{"id":"ccd36cfe-5f13-48f5-b9e3-1ca19eedeb10","table":"block","spaceId":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"created_time":1666059086871,"last_edited_time":1666059086871,"parent_id":"6ad26f7b-1828-4d64-a948-3cc6367f6901","parent_table":"block","alive":true,"copied_from":"ccd36cfe-5f13-48f5-b9e3-1ca19eedeb10","created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"},"role":"reader"},"744cc779-6009-402f-ab94-db362da28356":{"value":{"id":"744cc779-6009-402f-ab94-db362da28356","version":1,"type":"text","properties":{"title":[["是不是觉得 ORM 查询本身也挺繁杂的？用 SQL 有时会更直接清晰地多。所以也会有一些完全"],["不使用 ORM 的观点",[["a","https://dev.solita.fi/2021/06/01/why-avoid-an-orm.html"]]],["。在我看来，ORM 能让 90% 的查询都变得结构化更清晰、更易维护、甚至更安全，但剩下的 10% 也许会耗费更多的精力，所以何时使用 ORM 是根据具体项目场景来定的，不能因噎废食。"]]},"format":{"copied_from_pointer":{"id":"658dd384-a7a9-499e-8498-4b784abf2102","table":"block","spaceId":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"created_time":1666059086870,"last_edited_time":1666059086870,"parent_id":"6ad26f7b-1828-4d64-a948-3cc6367f6901","parent_table":"block","alive":true,"copied_from":"658dd384-a7a9-499e-8498-4b784abf2102","created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"},"role":"reader"},"b5a4d66a-c57a-4ca8-b13e-1028109b39c7":{"value":{"id":"b5a4d66a-c57a-4ca8-b13e-1028109b39c7","version":1,"type":"sub_header","properties":{"title":[["小广告"]]},"format":{"copied_from_pointer":{"id":"b8220e76-aee2-4124-8794-f0dde87fd8e3","table":"block","spaceId":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"created_time":1666059086871,"last_edited_time":1666059086871,"parent_id":"6ad26f7b-1828-4d64-a948-3cc6367f6901","parent_table":"block","alive":true,"copied_from":"b8220e76-aee2-4124-8794-f0dde87fd8e3","created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"},"role":"reader"},"f88ddea2-0edb-497b-87e4-6b9377a818d2":{"value":{"id":"f88ddea2-0edb-497b-87e4-6b9377a818d2","version":1,"type":"text","properties":{"title":[["是不是觉得 Part II 内容有点少？没关系，更多的内容我都放在了这里。"]]},"format":{"copied_from_pointer":{"id":"95186dc7-ed69-4d41-a52a-0af8aed1c8a3","table":"block","spaceId":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"created_time":1666059086870,"last_edited_time":1666059086870,"parent_id":"6ad26f7b-1828-4d64-a948-3cc6367f6901","parent_table":"block","alive":true,"copied_from":"95186dc7-ed69-4d41-a52a-0af8aed1c8a3","created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"},"role":"reader"},"11be5a01-c4ec-4b2a-bb68-cbf4b3bc73dc":{"value":{"id":"11be5a01-c4ec-4b2a-bb68-cbf4b3bc73dc","version":1,"type":"bookmark","properties":{"link":[["https://github.com/TencentBlueKing/python-best-practices"]],"title":[["GitHub - TencentBlueKing/python-best-practices"]],"description":[["Contribute to TencentBlueKing/python-best-practices development by creating an account on GitHub."]]},"format":{"bookmark_icon":"https://github.com/favicon.ico","bookmark_cover":"https://opengraph.githubassets.com/e9d11601584d87c0fbb4092264f7ab23a33987f8d05dfb8b0e0c57157aecc9b3/TencentBlueKing/python-best-practices","copied_from_pointer":{"id":"1b205682-94cc-4936-9201-6c2f5fae5683","table":"block","spaceId":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"created_time":1666059086869,"last_edited_time":1666059086869,"parent_id":"6ad26f7b-1828-4d64-a948-3cc6367f6901","parent_table":"block","alive":true,"copied_from":"1b205682-94cc-4936-9201-6c2f5fae5683","created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"},"role":"reader"},"c4cb7b9d-7d92-463e-b7dd-154161269031":{"value":{"id":"c4cb7b9d-7d92-463e-b7dd-154161269031","version":1,"type":"text","properties":{"title":[["我和团队小伙伴整理了很多 Python\\Django\\DRF 的最佳实践经验，项目会持续更新，欢迎一起探讨维护，希望每一个 CRUD 男孩/女孩都能少踩坑。"]]},"format":{"copied_from_pointer":{"id":"095acb08-8c8a-44bb-a82f-e37824e7be3b","table":"block","spaceId":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"created_time":1666059086869,"last_edited_time":1666059086869,"parent_id":"6ad26f7b-1828-4d64-a948-3cc6367f6901","parent_table":"block","alive":true,"copied_from":"095acb08-8c8a-44bb-a82f-e37824e7be3b","created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"},"role":"reader"}},"collection":{"e34bec60-9b02-4ad8-aaf8-83369409cc9f":{"value":{"id":"e34bec60-9b02-4ad8-aaf8-83369409cc9f","version":97,"name":[["布鲁斯鱼的妙想天开 "]],"schema":{"NX\\Q":{"name":"date","type":"date"},"`gQ~":{"name":"type","type":"select","options":[{"id":"5aff2f95-fd1e-489b-8840-bf10bc9519cb","color":"purple","value":"Post"},{"id":"374d2bc6-a144-4832-8ca4-474aaae0ea1f","color":"orange","value":"Page"}]},"d]hq":{"name":"slug","type":"text"},"sD^m":{"name":"tags","type":"multi_select","options":[{"id":"790180f1-0c2e-4730-a1ef-c5463df34680","color":"brown","value":"python"},{"id":"5d668f5e-7204-4c7e-b57e-5558bd27efaf","color":"gray","value":"pep"},{"id":"9081ab60-29ee-4a5b-9989-f50cf36ecb9b","color":"orange","value":"tech"},{"id":"c0225229-afab-45e4-b69b-b71029b39835","color":"red","value":"django"},{"id":"90084124-d1d5-49fb-86e7-4b133c051d81","color":"default","value":"orm"},{"id":"10ace7d0-10e6-4617-970e-acf2d9348d0f","color":"yellow","value":"best-practice"},{"id":"1b9671ca-93e5-402d-a73e-f9aca38e4358","color":"pink","value":"web"},{"id":"c7015bc7-2283-4b3d-8d19-3075724a10df","color":"blue","value":"blog"},{"id":"22d9ce60-f854-4122-b0fc-4f4c3a41979e","color":"green","value":"guide"},{"id":"6e99d746-1829-43e3-a828-214a1ae79b4a","color":"purple","value":"ELK"},{"id":"45ebe27a-5445-4cc3-91c9-ec1f1296dcf4","color":"brown","value":"pytest"},{"id":"9f679b83-f407-4130-b5b7-f969329300bf","color":"brown","value":"unittest"},{"id":"e30656d1-1ff2-434c-a2cb-8b3c75c9d1a1","color":"gray","value":"fun"},{"id":"5146a8a4-5647-4ce0-8a7b-1a6320adee06","color":"blue","value":"back-pressure"},{"id":"36828c03-3b80-417d-82a3-b1066ad5ca60","color":"green","value":"Dependency injection"},{"id":"9602332d-afbb-41e8-baed-bd0dd39a5e21","color":"brown","value":"k8s"},{"id":"82cd2499-ddd4-43ad-9298-fba21fe29cfa","color":"brown","value":"helm"},{"id":"f0a44444-e52d-4db2-9262-aa29d7ded8e3","color":"blue","value":"celery"},{"id":"a87e284b-1c48-422e-9811-eba8a167f97a","color":"red","value":"amqp"},{"id":"dc50dbb3-8e3a-4747-95d8-c9098e70e088","color":"default","value":"tcp"},{"id":"90b243e4-95f4-459e-b5b7-42f09020978b","color":"gray","value":"graphql"},{"id":"00f0130d-3a96-4e5a-8b5e-77e14e0a3ff7","color":"purple","value":"logstash"},{"id":"a921b879-fcef-4ace-8c96-7a6e11fe2358","color":"orange","value":"konajdk"},{"id":"b8e6dc68-925c-4d32-84d9-580d1a34c3a6","color":"orange","value":"regex"},{"id":"fc66930c-fa10-44b1-b553-5f6acc796321","color":"gray","value":"nfa"},{"id":"f9255cb2-7e85-4bce-8042-472643ff3b58","color":"orange","value":"dfa"},{"id":"e00a51c2-af1c-4bfd-a118-e83e73f3e1a3","color":"purple","value":"security"},{"id":"45105ec0-49be-430b-aead-ef83cfbc8b02","color":"pink","value":"reading"},{"id":"4c3a21fd-3ba5-44a2-8c5e-ef6e9100c32c","color":"brown","value":"software-engineering"},{"id":"4cd1d179-3466-4d7e-baf2-99a4c0250a78","color":"blue","value":"google"},{"id":"22973bbb-4038-4f9b-a30c-c0ab6506d65d","color":"gray","value":"note"},{"id":"1ca18016-ff4e-41e0-af37-6ea457fc4bd8","color":"orange","value":"go"},{"id":"017cb1fb-940d-4281-a078-ea653dc7688a","color":"green","value":"prometheus"},{"id":"35b57024-e3a6-465c-8845-e359d09c72c7","color":"brown","value":"udp"},{"id":"4357722b-be50-481e-ba42-992e73b7b86e","color":"pink","value":"observability"},{"id":"89d067fb-d3d3-4d3f-b855-5f472e28d80b","color":"orange","value":"profiling"},{"id":"74546b53-0289-4df1-8134-aa3fc41775c0","color":"pink","value":"surfing-records"}]},"wz|S":{"name":"summary","type":"text"},"title":{"name":"title","type":"title"},"f211bdc0-ee00-4186-9a7d-f68c055ec2ee":{"name":"status","type":"select","options":[{"id":"22460321-fea2-4c7c-b352-a674760780ac","color":"orange","value":"Idea"},{"id":"41d5f5c6-b53c-42bc-8e0f-fc9402048480","color":"yellow","value":"Draft"},{"id":"c7390b31-9fab-4e21-94ee-7e67ea077a97","color":"blue","value":"Revise"},{"id":"7abc61d4-b405-480d-b699-12588755fa65","color":"red","value":"Published"}]}},"icon":"🗯️","format":{"copied_from_pointer":{"id":"6a42b751-ff40-4f34-aa6a-1830a3344cb7","table":"collection","spaceId":"ac4cb96d-c8f8-4040-9bb2-868d9fc7f526"},"collection_page_properties":[{"visible":false,"property":"NX\\Q"},{"visible":false,"property":"d]hq"},{"visible":false,"property":"f211bdc0-ee00-4186-9a7d-f68c055ec2ee"},{"visible":false,"property":"sD^m"},{"visible":false,"property":"wz|S"},{"visible":false,"property":"`gQ~"}]},"parent_id":"a6089909-2d0d-43ef-af93-5e041712e826","parent_table":"block","alive":true,"file_ids":["6cf3dc36-2f98-4f0e-9679-1bdbb1485129","5520bd92-e709-4c0d-ad58-06923f23f7e9","624d393a-62e3-4464-a1bf-1c79ecd4fbda","d52f6766-3e32-4c3d-8529-46e1f214360f"],"copied_from":"6a42b751-ff40-4f34-aa6a-1830a3344cb7","migrated":true,"space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6","deleted_schema":{"0d330ccb-d222-4440-a0de-6cccfe926a33":{"name":"url","type":"text"},"26ff3130-393a-45ac-92b5-7490d9b87515":{"name":"template","type":"select","options":[{"id":"V*ea","color":"purple","value":"post"}]},"29e679ed-47a3-46c2-9eb4-9070171591b8":{"name":"inList","type":"checkbox"},"2af12d30-97f0-4310-b38c-02e6a554245f":{"name":"publish","type":"checkbox"},"2bf55746-6864-4bb6-b585-77b81f140da1":{"name":"inList","type":"checkbox"},"487aab80-eb42-4dd6-a386-d58672ff59fa":{"name":"description","type":"text"},"53819e0d-5bc6-40de-a8bc-498fdf840fbc":{"name":"description","type":"text"},"67c34d44-b9f2-42c1-b35c-4a534c03bdd9":{"name":"inList","type":"checkbox"},"69fb2cd3-221c-476b-86c2-ab74f4490cc9":{"name":"template","type":"select","options":[{"id":"V*ea","color":"purple","value":"post"}]},"ab0a009c-1080-47c3-aecc-b26dc703a4e0":{"name":"url","type":"text"},"ad8f0878-e947-4188-8970-1ca14665f6e3":{"name":"inMenu","type":"checkbox"},"b2c6f9d4-31e2-4230-b57e-4bdb21a3d635":{"name":"template","type":"select","options":[{"id":"V*ea","color":"purple","value":"post"}]},"b387319f-5770-457e-8453-1d2f2708f9f1":{"name":"url","type":"text"},"b6d830ff-ce1d-4e76-a484-f0fc3f148c52":{"name":"publish","type":"checkbox"},"c0b15f23-eddd-4316-95d1-a92a4edbc710":{"name":"publish","type":"checkbox"},"e3660c02-9d93-463b-9495-addeeabd3e80":{"name":"description","type":"text"}}},"role":"reader"},"12c44699-617b-45ed-a019-c3b075e0ae01":{"value":{"id":"12c44699-617b-45ed-a019-c3b075e0ae01","version":55,"name":[["布鲁斯鱼的奇思乱想 💭"]],"description":[["此间的博文大抵有两类，一种是水的，另一种仍是水的罢。 —— 鲁迅"]],"schema":{"!`\"w":{"name":"inList","type":"checkbox"},"'2]%":{"name":"url","type":"text"},"98uZ":{"name":"description","type":"text"},":H`m":{"name":"publish","type":"checkbox"},"C'lP":{"name":"inMenu","type":"checkbox"},"xY$N":{"name":"date","type":"date"},"{iD?":{"name":"tags","type":"multi_select","options":[{"id":"84eb0fd2-ecaa-46c4-ae45-a52c1f4d5ed5","color":"blue","value":"announcement"},{"id":"18bcb4d7-5263-4e8e-a661-ab4cc26103a9","color":"yellow","value":"js"},{"id":"19e85f42-c775-43a9-bf63-0cf693377a3c","color":"pink","value":"web"},{"id":"b956bf5a-6720-4840-ac40-3331012c6745","color":"gray","value":"django"},{"id":"723ea83f-1c22-4dde-9d90-6a36400024bd","color":"brown","value":"orm"},{"id":"f8e3b3e3-8e30-4045-bc39-545308533aed","color":"green","value":"best-practice"},{"id":"36e3cef2-3a9d-415f-90a7-abc397137a0b","color":"purple","value":"blog"},{"id":"286030a5-005b-42ac-99cd-181c82b55df0","color":"default","value":"python"},{"id":"172b0aea-454b-48b3-91f6-c5eaf752a270","color":"red","value":"pep"},{"id":"40e91648-9ac1-4d3d-838d-0d6ec55d271d","color":"orange","value":"guide"},{"id":"96feab37-fd27-4c2d-935c-2db2b5f1c623","color":"orange","value":"prometheus"},{"id":"f93681c3-fb69-4568-ba47-8e21a1744312","color":"green","value":"nginx"},{"id":"53f8c0c8-03d6-4d9a-9337-fb7e128d3fc4","color":"red","value":"ELK"},{"id":"5b27144a-18a3-4b08-9d4b-7a6058c73af9","color":"pink","value":"back-pressure"},{"id":"f003662f-7864-4f86-9129-cbcabc8a2a89","color":"yellow","value":"pytest"},{"id":"5b49a104-3ec9-4e4b-8dbf-41df503b6bde","color":"orange","value":"unittest"},{"id":"eac885c8-2c87-4bce-a143-089d9fca1eac","color":"default","value":"fun"},{"id":"58224683-b22e-424b-8931-074afd6c699d","color":"blue","value":"Dependency injection"},{"id":"ba95973c-3e60-4810-a7ce-e83c605b24db","color":"default","value":"tech"},{"id":"e22200af-c790-4eab-bb33-4f6dbd6a6c40","color":"green","value":"k8s"},{"id":"cc6ed06e-a332-42eb-b9dc-00d4743c270d","color":"blue","value":"helm"},{"id":"ebfd42c6-965c-4f4c-bc63-9f6d674be417","color":"yellow","value":"cue"},{"id":"b6f59804-9da2-4990-b810-c5ac4618196c","color":"purple","value":"celery"},{"id":"e42c4910-891c-40f4-9129-7b0b088f86ec","color":"purple","value":"amqp"},{"id":"c01d9dda-79fa-4719-b095-d60f85163593","color":"pink","value":"tcp"},{"id":"71e5c3e2-cd68-4073-b82a-f3a2f2972237","color":"green","value":"graphql"},{"id":"488753a6-4ec9-42c2-be9c-028b0502f84a","color":"blue","value":"ruby"},{"id":"6963bab5-0c24-464a-b9af-66f80fd1e38a","color":"yellow","value":"note"},{"id":"e9833ae7-2065-4e94-bd05-9aa2ad4ae368","color":"default","value":"konajdk"},{"id":"3dc6497c-e3f5-4958-a003-cc816a03798e","color":"purple","value":"logstash"},{"id":"26fca78b-7234-424e-b59a-2448d9cd412f","color":"pink","value":"regex"},{"id":"92bbf273-df92-4604-80af-137055669ebd","color":"brown","value":"nfa"},{"id":"73df84db-a594-45a3-a35f-6b735272a91c","color":"red","value":"dfa"},{"id":"eb87b7f0-fb60-4f9d-b738-8b814ff799d6","color":"orange","value":"reading"},{"id":"c977540e-c19b-48bc-aa1b-958323719352","color":"orange","value":"software-engineering"},{"id":"c10959ed-0617-4141-87e6-5350065bc364","color":"default","value":"google"},{"id":"25ab0915-8f24-4dff-a022-30c33cb6c578","color":"purple","value":"golang"}]},"|Ay0":{"name":"template","type":"select","options":[{"id":"V*ea","color":"purple","value":"post"}]},"title":{"name":"title","type":"title"}},"icon":"https://s3-us-west-2.amazonaws.com/secure.notion-static.com/66ae2268-69fb-4a91-a4a8-fea3ba4543a5/bluesyu.png","cover":"https://images.unsplash.com/photo-1555061724-af1bc943c885?ixlib=rb-1.2.1\u0026q=85\u0026fm=jpg\u0026crop=entropy\u0026cs=srgb","format":{"copied_from_pointer":{"id":"9afdfa62-529b-4b90-a7c1-425fa9c6284d","table":"collection","spaceId":"3a0f5a6b-9035-473b-b3ec-70cd3c949dea"},"collection_cover_position":0.3978},"parent_id":"8d450f36-4a4e-4df4-ad68-bcbe4dd14216","parent_table":"block","alive":true,"file_ids":["b118bd89-acbf-4a5f-82ae-dfa8b695a878","b4485585-00bf-4b0b-8f62-22a93abba559","3395865a-5862-4588-9b43-6179d1a4a029","a26360ab-cdc4-4a53-80b2-b03385b849b7","15dfe408-8b89-4b86-abf5-6351fc8433c8","fbedc099-e679-4ee5-a94b-e649c66c8845","3552bd9f-8c5b-4bcc-98d9-da0f17f7c71f","37771f08-82f2-49c2-9ad6-9d82a513b54a","400fe81c-4cda-40ab-ae58-a28ccf26464e","66ae2268-69fb-4a91-a4a8-fea3ba4543a5"],"copied_from":"9afdfa62-529b-4b90-a7c1-425fa9c6284d","migrated":true,"space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"},"role":"reader"}},"space":{},"collection_view":{"065b98d2-d3b4-4dab-8b96-4eb118a3f311":{"value":{"id":"065b98d2-d3b4-4dab-8b96-4eb118a3f311","version":38,"type":"table","name":"Default view","format":{"table_wrap":false,"table_properties":[{"width":371,"visible":true,"property":"title"},{"width":243,"visible":true,"property":"d]hq"},{"width":159,"visible":true,"property":"NX\\Q"},{"width":147,"visible":true,"property":"wz|S"},{"width":356,"visible":true,"property":"sD^m"},{"width":124,"visible":true,"property":"f211bdc0-ee00-4186-9a7d-f68c055ec2ee"},{"width":100,"visible":true,"property":"`gQ~"}]},"parent_id":"a6089909-2d0d-43ef-af93-5e041712e826","parent_table":"block","alive":true,"page_sort":["b1e1d645-db95-42e5-8995-39a80eda6460","e8cd3732-dc1c-43ae-959a-a5a611ec098a","e876558d-e878-47f6-8c95-21be678990a5","5a971ded-d3c5-41be-bef9-ddfff48d43a2","8db8b240-e1c5-4dd7-bf74-72584d7a2ce0","daf94ca4-ec56-47a3-84ed-b1e2479acc4b","d1a2db9b-6820-421e-9b80-017ce7478587","67ea9f83-b9f6-416b-afcb-7c64f7533e6c","45939470-9819-47e8-b12b-999cfefa0aad","c60dc33d-8efb-44be-a863-7a87ad047932","fe4b8d5f-7c49-42c6-a7d5-1cb71c4f7e86","b7233a67-c367-4198-831e-f12089568d1f","4f3bf306-92c4-41b7-a43e-957129a1240a","6a789607-66cf-498e-9b32-eb3fa69a84f4","c9429034-dabd-4a25-8782-97f20c808a60","38c49fe2-37f8-4a7f-a99f-9edb9ddad4c2","474eb638-9f6b-46bf-8004-77668293f199","81d6dfab-69cb-43a0-aa04-e9725f0b67e1","7703d956-84db-46cd-b538-48eae1af68b5","9f937c73-dac9-4ed7-9b01-beefcb321f16","3cf9dcb9-e7db-406c-80ab-c65c11fbf906","5827ab53-e051-455b-b90a-3bdc20158c2c","fa7acd3b-dea9-4fb1-b859-5345f35163c6","696dfc48-62c3-494d-96d0-ec5fa84637e8","79df93cf-9b10-452e-bc62-f39e8cd2d124","9bb8e52d-c459-4528-b1b3-c2378207253a","5da038ef-f419-4a11-aa48-587b3787e040","b4a2c9d4-6a2c-49e6-988d-89a538dfe0f6","c374a479-5cc7-4c54-ba69-6a4d76dc25ad","d470fa67-0e7c-40d8-86ac-9b5a8be88dc8","986be38b-9780-4bb9-bdcd-4e361ddbd888","b7613f56-c2d4-4aae-b967-b7471ade86d0","e357d1fc-7466-4d6a-8d48-71b76ea97cdc","e1735855-4089-4af6-bd4d-0d59f7a76cb4","9b34581a-955a-4229-99d0-8f2a6d0e69ce","b4414811-0599-45cf-b047-fa95eac42d89","c28a8a01-911a-40a2-a607-d3af8cb24017","461d07ae-4b4a-49de-bdcb-341af1153201","3df59023-cb68-4a65-afd1-7f0b8c21cb57","0e3223d1-03df-40fb-90f9-cc8559d776b5","4f45b7d6-cd5b-46ab-b2a6-37ae20bf5f21","fa475a21-5f38-43d4-9a89-67c40b3129ae","97cbc634-fe3a-4b9b-9da6-ac4aaa94772f","8a0d34bc-7e8c-4a68-88a5-5276274f612a","623f8788-a20f-45fd-bb82-08935f59b44d","7ee398f0-450b-47cb-9b53-f5e7736590d2","eae9f077-591e-4841-903b-db395513c834","367d0f2a-0b10-4dbb-b53a-613152f124f9","398e2e28-3997-49bc-a138-0467d4da8531","8aaf4633-e879-44dc-82c8-3c9fb9d3a6f8","1eb5e5f2-8dc9-4ffc-b5e1-09b67be27a83","83465fb9-205b-41fc-83a6-424692ee0a0e","fb1d18d0-6403-4e8a-840e-134553748ff5","4407cb77-3838-4ba5-b474-f15222cd3dba","1880b0f2-e036-42d0-9550-0fb08a962397","d8d60bd6-33f6-458f-a7d6-209ef2fb05a1","29bf65ff-888b-4a76-a8dd-bf54f02c3864","bad1d4ae-fd4a-4671-ae94-dd53d94e0eae","0d59792d-db1c-4ae7-8d7c-4f013be40dcf","337dc259-2805-4b1c-a60f-1b3e6c7badb8","4b1b21a8-c278-4bc6-88f1-1a35d407f4d7","7946aba2-d6d0-45ef-8779-23fa15db8f2d","c18dbce6-9e8c-4f4b-b74a-0994e7c1bc3f","84aa87b7-39e7-493c-87b9-5cae4de95449","1446eadb-8c01-4295-be3a-ecf19361c143","fe8a7d94-e9ba-457d-8f19-10fe53e6ca3c","98a5a0b6-b07b-4065-a73f-2949ad28ac47","099219ec-fb4b-459d-a538-f6c3d54f6ca2","e047becf-e696-42e3-84c9-4f6278c844ae","975051d4-ebbc-4b3f-98cf-1a52e5e4761d","e5d98bee-b2d5-4b45-ab0b-b77da24aebe7","acac2668-1062-4e7a-b095-eda067da8413","179025c4-d8a8-4c47-b621-9fd6a6f3339b","d256e5ed-5eac-43bb-a32e-581774962c23","b843dacf-b655-4b1c-a61c-434b67f18154","56a80c2d-0520-415a-a77a-1db82eff0b3a","9c40a253-b9e8-42cd-8a99-62aaa9789a5e","d3a05020-0948-489a-80ac-fedebc035c58","0ee4f3e9-0451-411f-b903-0c83d30e5b67","769f1163-e45e-4c3b-87a7-3b551895d9be","7e217dcd-e4e5-4bcd-b2de-00fcb5ab7fba","28e3d2f6-abb8-4711-b21e-ce1937e3e546","04d4f00b-9608-4d83-949e-b32313ace34e","41f93fa3-0496-4ea7-8ac3-0a8beaf346da","f0db9e3e-0e99-4465-ae65-6a9a8d8a6468","279e794f-519c-44f5-ab04-422fba916b72","f0b2f8a5-7dfd-48dc-ba1f-419a7fda1fff","e874f269-1938-40be-974b-2e499c1f4590","65265d92-050f-4fb5-b529-a514079cdd83","5fc98358-411a-40d7-a5d0-c4089026ca1f","15fcd77a-6097-4ee9-9835-9d6e85897fd6","6f8b1275-2d88-40e2-b76b-375f3c028b03","33273042-efcc-45bc-8f28-b65a1c2c65ad","c18bd396-be21-4ce2-ab22-32a45c28e37f","ba597bcf-7582-4fd2-8049-6333ef3e4453","4edecef8-106d-489d-be1d-d1b528c4cdc9","b03b3109-e900-4daf-b852-a590324ab747","8cba5326-9daa-4c2c-b763-5476dc8a7a91","9ab4aa63-ce81-415f-bf95-e632006a1aea","e3644bfb-4244-4a82-a7d7-d7cdb65aa1ed","b6a1f5b5-febd-4c26-9e29-520290eb5719","51e53e64-e6dd-4fd6-8062-5d4455f0a1cb","f4ec684b-e5f1-44e9-a8a7-aca27f7ca6f3","177fa228-9099-4dd5-8969-c67f9c78bd0c","d5ab0d7a-0123-473f-84d4-81740defb9b4","548f6d36-c509-4b79-9c4b-59f227c7f550","c0901673-4f5e-4e51-ad87-0217f2d33a0c","0787f8d6-dc99-47c6-946e-2b008814bebc","0ade5216-1103-486a-aff0-a709ff825b02","a2c4dd21-985c-497d-b421-c2d8a9ec0eeb","908a498c-f7e3-4668-8afd-f179a027b4d9","4945e5c3-033d-467c-a8b3-b1479c1fdf0a","854f4584-28d5-43bd-938e-88d0957c78e3","6a6574f8-d63d-4fed-99c5-38f3df0364ac","5639d091-037c-4284-8260-ade765dbbc90","c9669745-2229-4d95-89a1-8f008e8bebc6","78ebe658-6ba5-4478-a53c-ad468984e7e3","c7f44558-498f-44bd-a8a3-504955dde6b1","d928387b-107b-4f27-b0c5-75301ed7fc55","833556aa-d685-488c-88d0-b136b456ff5f","0bfe1b9e-b115-49f4-9279-7b106f7661af","1465efce-6026-4d50-a952-1aff8c10dea1","f8f308d6-f4c4-4b0f-b7a3-df78d41ce55d","ebd71155-4a59-46a0-bbb2-40687ddbcf9d","29fc49e0-b597-4f2e-9d53-b7dd247adf4b","692194e6-08d3-4e36-a94f-dc403d6226e6","da9db882-26ea-4516-815c-75f2f9ddab59","9a08823e-eec6-4cc0-9ec8-890cb0650aa7","f7327b98-b06a-423a-8b9f-646e5ba2123f","a6c3c98f-9ef9-45de-9d52-4baec7327464","9d18b689-cdc2-4d3f-81da-a690c700caee","6ad26f7b-1828-4d64-a948-3cc6367f6901","3927ece3-9931-46e8-8e7e-91d5e0b5c326","f6ba5dfd-5000-4e15-80b4-7d3456bc676a","0c0d5bfd-8642-460a-aedc-5a8277725196","3dd5dfcc-005c-49b5-9cca-96ccded25899","9faa9c16-825a-40c0-898f-7b9f31c30722","4bdc3c4d-327e-49bf-8792-760253dfed83","ff7b6fa3-510b-4ba1-9caa-9f8b4771a90e","fd036365-88c0-4feb-8482-6b4298cacdcc"],"query2":{"filter":{"operator":"and"},"aggregations":[{"property":"title","aggregator":"count"}]},"space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"},"role":"reader"},"3ac983fd-1048-450d-8fa0-59c0206fdcf7":{"value":{"id":"3ac983fd-1048-450d-8fa0-59c0206fdcf7","version":69,"type":"table","name":"Default View","format":{"table_wrap":true,"table_properties":[{"width":184,"visible":true,"property":"title"},{"width":122,"visible":true,"property":"{iD?"},{"width":100,"visible":true,"property":":H`m"},{"width":100,"visible":true,"property":"C'lP"},{"width":100,"visible":true,"property":"!`\"w"},{"width":100,"visible":true,"property":"|Ay0"},{"width":100,"visible":true,"property":"'2]%"},{"width":353,"visible":true,"property":"98uZ"},{"width":107,"visible":true,"property":"xY$N"}]},"parent_id":"8d450f36-4a4e-4df4-ad68-bcbe4dd14216","parent_table":"block","alive":true,"page_sort":["db4e495a-ff6f-4f0c-8faa-7d10eba3e193","c1946af4-d0bc-4ff3-a0f7-cc46e626c08d","673ad65d-30c0-47ad-ac39-cd4b97602abb","5639d091-037c-4284-8260-ade765dbbc90","78f0b500-97be-4b05-ad6d-630418880655","1674a785-02fd-417a-92d0-be80cb0f9bf6","e17c6d7a-09b0-4a90-ba23-e2a0626caedf","2bdaeeb9-ae13-4c60-9cc3-0f991c5ee13c","c9669745-2229-4d95-89a1-8f008e8bebc6","370c76d5-4af1-4576-aa9f-762468522868","0316b907-039e-49eb-86c0-87e28a94f00b","88d1b6b4-5644-4925-a720-1ef3981d1dae","982e294c-abb2-47aa-8781-34d8bb6fd6ce","c7f44558-498f-44bd-a8a3-504955dde6b1","613b9495-40aa-428c-9225-b89604e2c649","78ebe658-6ba5-4478-a53c-ad468984e7e3","cd4083ce-d48e-4cc6-9282-10ca4ac23d18","d928387b-107b-4f27-b0c5-75301ed7fc55","61b55737-1504-4355-b5fc-95b315b31144","0901ae7d-6f56-4b7f-b06b-b1e8a47c06b8","833556aa-d685-488c-88d0-b136b456ff5f","430c6dea-ad2d-4bf2-8df7-7223b5c4c895","0bfe1b9e-b115-49f4-9279-7b106f7661af","2fe5092a-d91f-4267-a6d8-d778752afe94","1465efce-6026-4d50-a952-1aff8c10dea1","0043694e-a62e-4b39-ae6c-1ce34fc37c12","680e8aba-94e7-4721-952d-011a44a20ebe","f8f308d6-f4c4-4b0f-b7a3-df78d41ce55d","7467a602-0c23-4cb3-8746-b5a8826a6ea3","ebd71155-4a59-46a0-bbb2-40687ddbcf9d","aaa3fed9-31f3-4bc4-a883-8d8b536a5eb6","e669c579-1cdc-4871-ae43-7acf520de159","29fc49e0-b597-4f2e-9d53-b7dd247adf4b","acb94887-ef64-41ef-896a-db7780b36618","3acb3b56-ac33-47c3-ad78-3ce1c091b508","692194e6-08d3-4e36-a94f-dc403d6226e6","47475663-99fc-4dab-b212-96bbc212202b","2b0c6869-2cd5-4664-9269-8730ebbc1fa6","da9db882-26ea-4516-815c-75f2f9ddab59","97932cef-8ad5-49c4-97a5-6b31aebabc41","9a08823e-eec6-4cc0-9ec8-890cb0650aa7","df79258b-daf0-44a0-a305-daa85b9df638","f7327b98-b06a-423a-8b9f-646e5ba2123f","86b27c51-785b-4889-8a59-5dd93e50551e","abbd116b-f5dc-4465-9576-e572710b404a","bb725109-7e94-4b6c-823f-934ccfdc282b","b4d09ad2-310a-44de-a37d-c4eed7c263bb","2657996c-ab87-48e8-bf4a-d26f5261e9f3","37adfd13-1ab2-4c7f-bacd-109adf03f27a","cc256eee-e5dd-4476-8b06-a26087f21be6","376ac4af-be41-45cc-b13c-b5ad952dd3c0","0fe97326-eab8-46de-8a08-f16141bd1036","a6c3c98f-9ef9-45de-9d52-4baec7327464","652406ab-d410-41e4-afa4-97957b070d0e","9d18b689-cdc2-4d3f-81da-a690c700caee","df2f83f3-a8af-4dc1-b9a5-bf5ead728813","6ad26f7b-1828-4d64-a948-3cc6367f6901","ad4f769a-255d-49ff-b941-14d86af0f4a6","45c5fb70-8b7e-4374-927d-3300ac13ed90","f6ba5dfd-5000-4e15-80b4-7d3456bc676a","3927ece3-9931-46e8-8e7e-91d5e0b5c326","7545e035-a53c-4c9c-97ce-e21bfc1b45e3","317e58ab-6296-480b-8569-fb2f67664dcc","e13fa1b4-a9c4-489e-ad43-c779a461a682","9c97b23b-ba50-4367-a0df-327ebebace2f","f2303f94-9c04-4bc0-8d32-b7ca7f877c31","995f78b7-75ab-4cad-93ee-80ccd8666201","141f2c80-8fe5-413a-871d-4d28c711dae2","467c5c5b-0c17-4786-98ab-17431b17ce57","cc1c9ca9-4862-45ac-be96-f47c79316ece","eb61d5b1-6fac-4ca0-b8e4-98e018e03d43","656fee35-338e-4ac4-b972-1c0ae1f7222f","7fa6a4b7-adc9-485c-98b6-d099f4ae91ee","ec66bddd-07fb-461f-8783-c5df9e6fee4c","ffc6ce71-b0a2-4dc4-be2b-d39ed808573a","e025cb59-01b2-420f-bee9-dc0bf0d19a77","f8e8cc1f-4e4a-45dc-a725-03bf79e9d396","5fc62d28-e56c-4d1e-93bf-4857808aba20","4b2962ee-5b97-42f7-bb41-1def99ae8481","63995a7e-2d11-46cf-beee-a7db6f1006fc","2ee3d83c-ba87-4aba-a4d0-d2d5891273ef","d37849c8-88a6-4f2c-8a83-9c1312064aed","36b53de5-3687-46ae-a944-f75942cababe","d08ea88f-1788-47b0-b69b-1290fc7afa09","dff20d14-f0e1-4eed-9d91-9052258cb31a","fd746083-2206-4767-b8d5-c257f9e10d0d","5a3164a1-4dc4-425f-9f3c-07a8a36aa67a","365316d3-9988-4b94-80c8-50066cedecea","0106fe46-2438-4231-a4da-9e83e1a1eaa8","4720340b-be09-4402-9a90-0dae03b30764","42d3fe81-7c32-4aab-9dd9-67a9867f84b9","a4cca5e5-ef7f-4383-b3f1-27de8dff5e2b","30aa64f3-3b9d-42a9-b7f3-bb528e3481df","16e71ee5-577d-4c3f-acc6-f5269f18747f","959d6e59-5d78-4666-9e67-3e620b88e25d"],"query2":{"sort":[{"property":"xY$N","direction":"ascending"}],"aggregate":[{"id":"count","type":"title","property":"title","view_type":"table","aggregation_type":"count"},{"id":"2d396d58-6f63-4e94-8493-94cefbb5b510","type":"multi_select","property":"{iD?","view_type":"table","aggregation_type":"unique"}],"aggregations":[{"property":"title","aggregator":"count"},{"property":"{iD?","aggregator":"unique"}]},"space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"},"role":"reader"}},"notion_user":{},"collection_query":{},"signed_urls":{}},"emailHash":"d54f099771ff5f17709b76693f693e2e"},"__N_SSG":true},"page":"/[slug]","query":{"slug":"django-orm-best-practice-II.html"},"buildId":"whNozGoNnKrTnthLemfFf","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>