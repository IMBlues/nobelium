{"pageProps":{"post":{"id":"833556aa-d685-488c-88d0-b136b456ff5f","date":{"start_date":"2020-12-21"},"type":["Post"],"slug":"elk-back-pressure-study","tags":["ELK","tech","back-pressure"],"summary":"ELK 日常学习","title":"ELK 背压浅探","status":["Published"],"createdTime":"Tue Oct 18 2022 02:09:33 GMT+0000 (Coordinated Universal Time)","fullWidth":false,"pageIcon":"🚰","pageCover":"https://images.unsplash.com/photo-1507823690283-48b0929e727b?ixlib=rb-1.2.1&q=85&fm=jpg&crop=entropy&cs=srgb"},"blockMap":{"block":{"833556aa-d685-488c-88d0-b136b456ff5f":{"role":"reader","value":{"id":"833556aa-d685-488c-88d0-b136b456ff5f","version":60,"type":"page","properties":{"NX\\Q":[["‣",[["d",{"type":"date","start_date":"2020-12-21"}]]]],"`gQ~":[["Post"]],"d]hq":[["elk-back-pressure-study"]],"sD^m":[["ELK,tech,back-pressure"]],"wz|S":[["ELK 日常学习"]],"title":[["ELK 背压浅探"]],"26ff3130-393a-45ac-92b5-7490d9b87515":[["post"]],"29e679ed-47a3-46c2-9eb4-9070171591b8":[["Yes"]],"b6d830ff-ce1d-4e76-a484-f0fc3f148c52":[["Yes"]],"f211bdc0-ee00-4186-9a7d-f68c055ec2ee":[["Published"]]},"content":["8798d846-4b3c-44d7-93a7-ed249e70ebb5","c3b84fe2-92ef-4567-a011-e4a794cb8c09","84b4a0e2-272c-4407-999a-1ba764e19d0c","938d0832-7f65-48b4-9f6e-8459ee98c237","99696ace-a535-426d-86f0-dc0b2c34a59f","884fcc9f-3f35-413b-9afd-5f4b358765d7","f896c8ab-01b1-4fb9-a8a0-b4ff1f716c11","2c713185-9b92-4ff2-b9be-965d38889b41","ea934dc1-e198-4035-a3dc-7d6c27875416","81ad2179-798b-4a7a-9fa9-fbde6124699b","7435d0a1-d478-4a11-b96a-106f9a47d445","2b08ff95-5c8b-4029-bcb1-35b56deb3264","b5874966-dbff-452e-b2dd-22f2db136c8f","83fafe82-4fad-430b-8db0-d60f6538fc11","a6499aa2-b826-4427-acf5-5e1ea958ab6f","3a45a873-6e1d-44b7-898f-1e23b2083f3c","6f3ee0b4-349e-42d0-9ceb-4c6714392241","613fb708-9306-4a46-91f0-4f361e847094","1e18db6c-187f-4e58-bb0e-7971e5a81aa3","ad193c28-87bb-48da-be99-18f3a30d8266","35e4639c-fadf-475f-8373-0af170b07cc7","4ca5809a-c906-416b-a825-00c135943090","31649055-17eb-4fb4-9bb0-cb468bb0c41c","74d3a128-b283-41ad-b998-621bc8940dc2","d21ef200-ce59-444c-b423-67e4f3b7c421","57f74c27-9317-4774-aea1-84a6bc0e0544","20d41ef5-7731-45cf-bbd5-4f02b0461afd","f4531d1b-30b9-4997-a05b-f7cb5814eb4a","6a1f2132-6d89-450e-9d56-80790833edd4","2c353ce1-3c44-4356-8be4-18f5683be2fc","dff56d26-d7cd-4feb-9e03-16c301b10124","f7d4d560-3e92-4f2e-b2da-5ccb0961b599","4668827b-3724-4a97-9d66-23fd1933d67a","d0f19a82-3260-4a2e-8f54-363285013d4a","50d9c5c9-a9e7-4f72-9f76-49494d2a3ae4","c9ee15f6-5017-40f4-8e4b-55f09d0b606c","b6a980f1-6e85-470b-b2bf-c36c7c82f741","e6f0b0d8-a9c2-4a05-b620-7355d96dd310","8afd4293-3e34-49ca-9fb1-7e4cd4f74ee7","44f24c7d-42a0-420c-9e80-4cf4f5f027f4","e5a12f86-7208-49b3-87ae-1ef06d4bccbb","00369714-02a8-40e6-bde0-8187e190047b","b06d68e4-f921-4c8b-b8e4-a2fee920a165","c9a68fe8-942c-4853-88f9-1f16964690a8","164ca307-0195-4bb0-a09e-4168144c5e80","4ab16bbc-61aa-4e54-ad3c-4e011d74cd18","358223f7-4406-4112-bc2e-255ed7eb2f1e","765bb150-016d-4f20-ac77-7391e8041795","8ce4ddf0-f1db-4e59-8d2e-835f94a7ae80","355a583d-9bed-4022-9137-a1f4bae61194","1bcfa753-8813-4fb5-a3e1-dc6b3a58755a","1c7d2908-1179-4d09-adc2-9e61e3edffbd","21481ad5-9460-44a2-b932-bb83e3c9488d","005c3b41-e48c-45fb-a881-df37c0353ba5","70f3ee05-d058-454d-b591-98c10fd198b8","9af04e3d-b6ec-400c-8379-dcaea38f843b","b8b293ad-c9e6-4fe9-9da5-0199a43bedea","1cca7d80-cf58-4ae2-b89c-fb3aca663546","895c6d9e-6a3d-4ffe-929b-1a37add2fbb9","739534e1-4f40-452c-909a-be58d3422608","16c936bf-c217-486f-891b-ee0aaa375374","a81ea779-8093-4769-82c8-f05185fe4b85","21ef9494-df51-4152-b52f-486cd68777e1","ad11feea-fbf1-45a0-9844-4ef432f01494","1a1344b8-d914-4b3c-a0de-7c764dffef0b","248356ab-d3c2-4f4b-a3e1-bd3683252b68","b06cb45c-956f-49f1-840d-234af04c1b2a","fb704922-aab1-49cd-ac76-db120e30a261","33dc5f31-8046-4f3f-80e9-26bd014e23db","fda2bc41-ec24-4bd5-a08c-5d6edd68ec68","c830e74a-7d00-433a-a791-58b3edd58077","8485530a-5c3d-4903-8653-bf82f95aefcd","fdc2c35c-f196-4bea-bbd9-3ec66666adb9","3d9cc186-cbe5-4222-8620-1254217bfaf1","6471ba6a-7f57-4138-9b10-1d5fc6672b30","1679aaf0-ea8f-445c-9a14-b2a783092ed9","42c20421-614c-48d6-9841-ef95d4caa7a6","27a68b39-55a3-4359-ad5c-9c191f8415c4","0e677c77-3f10-4d8e-8bd2-1a85360568ca","6afed87a-a3b1-4b76-a546-5e74eaa637d8","d8fd3995-291d-4845-a1c9-0883cd0276c7","f7438c7a-c65c-4e65-8435-79f8c128bc35","72983806-fc0f-4464-8eff-6bc24d96f878","5355a1c2-7432-41e3-b203-ff1f92fe7c11","56d67c92-c748-43dc-aa29-222ac19ad06a","dcbfc532-2c58-498c-abe3-78b8b97012dd","951e9e1f-6889-4152-a22d-c92895ee97a8","87d4993f-59f8-49d7-80d9-6c1ef3cf9f13","bb923353-3696-4147-9201-18efd23355f2","ad4d757b-bd69-4dcb-851a-364e8390ce6f","fff4d1ff-ff64-4d94-ae73-dbaee3e6790d","12f7328f-b950-4fcb-831a-c7325dce2f30","c975d56a-f36e-42e1-bc8a-d5a3999c4d71","ea30ced9-e530-4c88-80ae-d60492725613","7e46d3b4-0dd5-4b56-9011-243b02e9d8ac","d5f1eb2f-4913-4d5b-9f42-c000fdfad4b1","2920b3a2-f825-4d2b-b075-3cc340203857","70f6a068-90d2-48f3-ab51-a21e8ddf4e37"],"format":{"page_icon":"🚰","page_cover":"https://images.unsplash.com/photo-1507823690283-48b0929e727b?ixlib=rb-1.2.1&q=85&fm=jpg&crop=entropy&cs=srgb","page_full_width":false,"page_small_text":false,"copied_from_pointer":{"id":"61b55737-1504-4355-b5fc-95b315b31144","table":"block","spaceId":"b0a64676-90b9-4734-9c63-2d704ee573b6"},"page_cover_position":0.5808},"created_time":1666058973596,"last_edited_time":1666084740000,"parent_id":"e34bec60-9b02-4ad8-aaf8-83369409cc9f","parent_table":"collection","alive":true,"copied_from":"61b55737-1504-4355-b5fc-95b315b31144","created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"a6089909-2d0d-43ef-af93-5e041712e826":{"role":"reader","value":{"id":"a6089909-2d0d-43ef-af93-5e041712e826","version":110,"type":"collection_view_page","view_ids":["065b98d2-d3b4-4dab-8b96-4eb118a3f311"],"collection_id":"e34bec60-9b02-4ad8-aaf8-83369409cc9f","format":{"block_locked":false,"block_locked_by":"2c0e0b01-f59e-4e03-b7b6-7d706eecada3","collection_pointer":{"id":"e34bec60-9b02-4ad8-aaf8-83369409cc9f","table":"collection","spaceId":"b0a64676-90b9-4734-9c63-2d704ee573b6"},"copied_from_pointer":{"id":"adc3552c-fc73-442a-b504-8d4b1eb0079a","table":"block","spaceId":"ac4cb96d-c8f8-4040-9bb2-868d9fc7f526"}},"permissions":[{"role":"editor","type":"user_permission","user_id":"f594524b-0941-4aea-99a2-9b9304033287"},{"role":"reader","type":"public_permission","added_timestamp":1666006306008}],"created_time":1665993658476,"last_edited_time":1666059762118,"parent_id":"b0a64676-90b9-4734-9c63-2d704ee573b6","parent_table":"space","alive":true,"copied_from":"adc3552c-fc73-442a-b504-8d4b1eb0079a","created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"8798d846-4b3c-44d7-93a7-ed249e70ebb5":{"role":"reader","value":{"id":"8798d846-4b3c-44d7-93a7-ed249e70ebb5","version":1,"type":"table_of_contents","format":{"block_color":"gray","copied_from_pointer":{"id":"193af6fe-1289-4ddd-91b3-e37f140aa36f","table":"block","spaceId":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"created_time":1666058973591,"last_edited_time":1666058973591,"parent_id":"833556aa-d685-488c-88d0-b136b456ff5f","parent_table":"block","alive":true,"copied_from":"193af6fe-1289-4ddd-91b3-e37f140aa36f","created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"c3b84fe2-92ef-4567-a011-e4a794cb8c09":{"role":"reader","value":{"id":"c3b84fe2-92ef-4567-a011-e4a794cb8c09","version":1,"type":"header","properties":{"title":[["起因"]]},"format":{"copied_from_pointer":{"id":"3c5698a8-bcf4-43e5-b80f-c4ec65840a52","table":"block","spaceId":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"created_time":1666058973592,"last_edited_time":1666058973592,"parent_id":"833556aa-d685-488c-88d0-b136b456ff5f","parent_table":"block","alive":true,"copied_from":"3c5698a8-bcf4-43e5-b80f-c4ec65840a52","created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"84b4a0e2-272c-4407-999a-1ba764e19d0c":{"role":"reader","value":{"id":"84b4a0e2-272c-4407-999a-1ba764e19d0c","version":1,"type":"text","properties":{"title":[["我们在日常使用 ELK 链路的时候，经常会碰到一个问题，由于链路涉及的组件较多，一旦当其中某些组件出现问题，就会出现“事件风暴”，如果没有做好相关的告警或者资源管控，很可能会使链路发生崩溃。"]]},"format":{"copied_from_pointer":{"id":"97e24ff4-b442-4155-a34e-3489fe3e640d","table":"block","spaceId":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"created_time":1666058973594,"last_edited_time":1666058973594,"parent_id":"833556aa-d685-488c-88d0-b136b456ff5f","parent_table":"block","alive":true,"copied_from":"97e24ff4-b442-4155-a34e-3489fe3e640d","created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"938d0832-7f65-48b4-9f6e-8459ee98c237":{"role":"reader","value":{"id":"938d0832-7f65-48b4-9f6e-8459ee98c237","version":1,"type":"text","properties":{"title":[["在官方文档中，我们可以看到一个相关的描述："]]},"format":{"copied_from_pointer":{"id":"e590799c-4111-42eb-8987-7d334d994bb3","table":"block","spaceId":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"created_time":1666058973595,"last_edited_time":1666058973595,"parent_id":"833556aa-d685-488c-88d0-b136b456ff5f","parent_table":"block","alive":true,"copied_from":"e590799c-4111-42eb-8987-7d334d994bb3","created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"99696ace-a535-426d-86f0-dc0b2c34a59f":{"role":"reader","value":{"id":"99696ace-a535-426d-86f0-dc0b2c34a59f","version":1,"type":"image","properties":{"source":[["https://s3-us-west-2.amazonaws.com/secure.notion-static.com/4eb13a21-7d35-4156-989b-94c9de0dd81a/Untitled.png"]],"caption":[["真的有这么丝滑吗，我不信（鲁豫脸"]]},"format":{"block_width":576,"display_source":"https://s3-us-west-2.amazonaws.com/secure.notion-static.com/4eb13a21-7d35-4156-989b-94c9de0dd81a/Untitled.png","block_full_width":false,"block_page_width":false,"block_aspect_ratio":0.9429175475687104,"copied_from_pointer":{"id":"90ddfb1c-3b00-4506-a01a-6b37d8c8d50f","table":"block","spaceId":"b0a64676-90b9-4734-9c63-2d704ee573b6"},"block_preserve_scale":true},"created_time":1666058973594,"last_edited_time":1666058973594,"parent_id":"833556aa-d685-488c-88d0-b136b456ff5f","parent_table":"block","alive":true,"copied_from":"90ddfb1c-3b00-4506-a01a-6b37d8c8d50f","file_ids":["4eb13a21-7d35-4156-989b-94c9de0dd81a"],"created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"884fcc9f-3f35-413b-9afd-5f4b358765d7":{"role":"reader","value":{"id":"884fcc9f-3f35-413b-9afd-5f4b358765d7","version":1,"type":"text","properties":{"title":[["然而，在我们实践过程中并没有图中描绘得如此理想，很多情况下，在后端 ES 写入出现问题时，前端输入（如 filebeat）并不会减慢采集速率，导致中间的缓存队列（Redis）存储爆满，在没有做好资源隔离时，引发其他问题。"]]},"format":{"copied_from_pointer":{"id":"63707bac-f8fa-4165-b771-89232e71a256","table":"block","spaceId":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"created_time":1666058973593,"last_edited_time":1666058973593,"parent_id":"833556aa-d685-488c-88d0-b136b456ff5f","parent_table":"block","alive":true,"copied_from":"63707bac-f8fa-4165-b771-89232e71a256","created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"f896c8ab-01b1-4fb9-a8a0-b4ff1f716c11":{"role":"reader","value":{"id":"f896c8ab-01b1-4fb9-a8a0-b4ff1f716c11","version":1,"type":"text","format":{"copied_from_pointer":{"id":"57380636-f8e6-4a26-8073-f13f2a38f166","table":"block","spaceId":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"created_time":1666058973593,"last_edited_time":1666058973593,"parent_id":"833556aa-d685-488c-88d0-b136b456ff5f","parent_table":"block","alive":true,"copied_from":"57380636-f8e6-4a26-8073-f13f2a38f166","created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"2c713185-9b92-4ff2-b9be-965d38889b41":{"role":"reader","value":{"id":"2c713185-9b92-4ff2-b9be-965d38889b41","version":1,"type":"text","properties":{"title":[["所以我们就来仔细研究一下 ELK 背压原理，看看如何才能调试出一条伸缩自如、百折不挠的 ELK 链路。"]]},"format":{"copied_from_pointer":{"id":"b2bb6c41-b35a-4469-9ce4-839ec77e0fc9","table":"block","spaceId":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"created_time":1666058973594,"last_edited_time":1666058973594,"parent_id":"833556aa-d685-488c-88d0-b136b456ff5f","parent_table":"block","alive":true,"copied_from":"b2bb6c41-b35a-4469-9ce4-839ec77e0fc9","created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"ea934dc1-e198-4035-a3dc-7d6c27875416":{"role":"reader","value":{"id":"ea934dc1-e198-4035-a3dc-7d6c27875416","version":1,"type":"header","properties":{"title":[["什么时候触发背压"]]},"format":{"copied_from_pointer":{"id":"ad3128a2-ca46-4f52-93e5-63cf4592433d","table":"block","spaceId":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"created_time":1666058973594,"last_edited_time":1666058973594,"parent_id":"833556aa-d685-488c-88d0-b136b456ff5f","parent_table":"block","alive":true,"copied_from":"ad3128a2-ca46-4f52-93e5-63cf4592433d","created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"81ad2179-798b-4a7a-9fa9-fbde6124699b":{"role":"reader","value":{"id":"81ad2179-798b-4a7a-9fa9-fbde6124699b","version":1,"type":"text","properties":{"title":[["Logstash 内部会有一个 buffer 区域缓存一定量的事件，这个队列可以存储在内存或磁盘。一旦当这个队列缓存跑满，Logstash 会反向给事件输入端（Input）施加 \"back pressure\"（不返回 ACK），限制流量流入。"]]},"format":{"copied_from_pointer":{"id":"fe4dd2f2-2934-48df-943d-fa647983d338","table":"block","spaceId":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"created_time":1666058973595,"last_edited_time":1666058973595,"parent_id":"833556aa-d685-488c-88d0-b136b456ff5f","parent_table":"block","alive":true,"copied_from":"fe4dd2f2-2934-48df-943d-fa647983d338","created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"7435d0a1-d478-4a11-b96a-106f9a47d445":{"role":"reader","value":{"id":"7435d0a1-d478-4a11-b96a-106f9a47d445","version":1,"type":"code","properties":{"title":[["# 缓存落盘\nqueue.type: persisted\nqueue.max_bytes: 8gb"]],"language":[["YAML"]]},"format":{"code_wrap":true,"copied_from_pointer":{"id":"ab61e6ab-66af-4346-a2ea-71bf4ab65555","table":"block","spaceId":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"created_time":1666058973594,"last_edited_time":1666058973594,"parent_id":"833556aa-d685-488c-88d0-b136b456ff5f","parent_table":"block","alive":true,"copied_from":"ab61e6ab-66af-4346-a2ea-71bf4ab65555","created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"2b08ff95-5c8b-4029-bcb1-35b56deb3264":{"role":"reader","value":{"id":"2b08ff95-5c8b-4029-bcb1-35b56deb3264","version":1,"type":"text","properties":{"title":[["类似我们给这个队列配置 8gb 的缓存，当事件队列里全都是 "],["unACKed",[["c"]]],[" 事件，并且缓存达到了 8gb，Logstash 就不再接受任何事件推送，直到将队列内的事件被消费重新恢复。"]]},"format":{"copied_from_pointer":{"id":"b219719d-c67e-49cb-b317-12f891af2e9b","table":"block","spaceId":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"created_time":1666058973594,"last_edited_time":1666058973594,"parent_id":"833556aa-d685-488c-88d0-b136b456ff5f","parent_table":"block","alive":true,"copied_from":"b219719d-c67e-49cb-b317-12f891af2e9b","created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"b5874966-dbff-452e-b2dd-22f2db136c8f":{"role":"reader","value":{"id":"b5874966-dbff-452e-b2dd-22f2db136c8f","version":1,"type":"text","properties":{"title":[["对于 Input 端而言，官方提供的组件也都实现了类似逻辑，例如 Filebeat，当没有收到 output  ACK 事件数量积累到 "],["最大限制（默认 4096）",[["a","https://www.elastic.co/guide/en/beats/filebeat/current/configuring-internal-queue.html#_events"]]],[" 时，会停止读取文件，直到组件内部缓存队列能够被消费，所以理论上，只要能够通过 TCP 互相连接的组件，ELK 提供的组件应该都是可以实现背压能力的。"]]},"format":{"copied_from_pointer":{"id":"fea915bb-284d-42ae-a04f-cecba17d8747","table":"block","spaceId":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"created_time":1666058973595,"last_edited_time":1666058973595,"parent_id":"833556aa-d685-488c-88d0-b136b456ff5f","parent_table":"block","alive":true,"copied_from":"fea915bb-284d-42ae-a04f-cecba17d8747","created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"83fafe82-4fad-430b-8db0-d60f6538fc11":{"role":"reader","value":{"id":"83fafe82-4fad-430b-8db0-d60f6538fc11","version":1,"type":"text","format":{"copied_from_pointer":{"id":"0d501eaa-a37d-4dd5-9723-e6e25ceb1fa9","table":"block","spaceId":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"created_time":1666058973591,"last_edited_time":1666058973591,"parent_id":"833556aa-d685-488c-88d0-b136b456ff5f","parent_table":"block","alive":true,"copied_from":"0d501eaa-a37d-4dd5-9723-e6e25ceb1fa9","created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"a6499aa2-b826-4427-acf5-5e1ea958ab6f":{"role":"reader","value":{"id":"a6499aa2-b826-4427-acf5-5e1ea958ab6f","version":1,"type":"header","properties":{"title":[["ELK 直接传输 vs 外部消息队列"]]},"format":{"copied_from_pointer":{"id":"d78410a5-d9a6-47c3-8551-afb5a47787ca","table":"block","spaceId":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"created_time":1666058973595,"last_edited_time":1666058973595,"parent_id":"833556aa-d685-488c-88d0-b136b456ff5f","parent_table":"block","alive":true,"copied_from":"d78410a5-d9a6-47c3-8551-afb5a47787ca","created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"3a45a873-6e1d-44b7-898f-1e23b2083f3c":{"role":"reader","value":{"id":"3a45a873-6e1d-44b7-898f-1e23b2083f3c","version":1,"type":"text","properties":{"title":[["经典的 ELK 链路中，我们通常为了会扩展 buffer，在 Beats 和 Logstash 之间增加一个中间队列（例如 Kafka、Redis），相比较直接使用 ELK 链路传输，在背压问题上又有哪些优劣呢？"]]},"format":{"copied_from_pointer":{"id":"42e8dc65-8c56-4891-bf25-7567a5bd4337","table":"block","spaceId":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"created_time":1666058973592,"last_edited_time":1666058973592,"parent_id":"833556aa-d685-488c-88d0-b136b456ff5f","parent_table":"block","alive":true,"copied_from":"42e8dc65-8c56-4891-bf25-7567a5bd4337","created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"6f3ee0b4-349e-42d0-9ceb-4c6714392241":{"role":"reader","value":{"id":"6f3ee0b4-349e-42d0-9ceb-4c6714392241","version":1,"type":"text","format":{"copied_from_pointer":{"id":"14c71518-5f53-4262-a767-443d03265363","table":"block","spaceId":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"created_time":1666058973591,"last_edited_time":1666058973591,"parent_id":"833556aa-d685-488c-88d0-b136b456ff5f","parent_table":"block","alive":true,"copied_from":"14c71518-5f53-4262-a767-443d03265363","created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"613fb708-9306-4a46-91f0-4f361e847094":{"role":"reader","value":{"id":"613fb708-9306-4a46-91f0-4f361e847094","version":1,"type":"text","properties":{"title":[["首先是是否都能触发背压？"]]},"format":{"copied_from_pointer":{"id":"422a638a-8745-43da-b190-d2adb2d4d792","table":"block","spaceId":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"created_time":1666058973592,"last_edited_time":1666058973592,"parent_id":"833556aa-d685-488c-88d0-b136b456ff5f","parent_table":"block","alive":true,"copied_from":"422a638a-8745-43da-b190-d2adb2d4d792","created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"1e18db6c-187f-4e58-bb0e-7971e5a81aa3":{"role":"reader","value":{"id":"1e18db6c-187f-4e58-bb0e-7971e5a81aa3","version":1,"type":"text","properties":{"title":[["在上文中提到的，我们使用 Redis 是无法正常触发背压的，理论上说不通。于是经过一番搜索，发现filebeat 需要使用 "],[">=6.4",[["c"]]],["的版本，而我们正好用的是 "],["6.3",[["c"]]],["😂 ⇒ "],["问题传送门",[["a","https://discuss.elastic.co/t/redis-input-plugin-back-pressure-issue/150826"]]],["，从问题的描述上来看，只要升级到了 "],["6.4",[["c"]]],[" 背压问题就能解决，但没有调查就没有发言权，索性做一个简单的背压测试。"]]},"format":{"copied_from_pointer":{"id":"98c9e303-8d9d-4221-99a6-0c352d655406","table":"block","spaceId":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"created_time":1666058973594,"last_edited_time":1666058973594,"parent_id":"833556aa-d685-488c-88d0-b136b456ff5f","parent_table":"block","alive":true,"copied_from":"98c9e303-8d9d-4221-99a6-0c352d655406","created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"ad193c28-87bb-48da-be99-18f3a30d8266":{"role":"reader","value":{"id":"ad193c28-87bb-48da-be99-18f3a30d8266","version":1,"type":"text","format":{"copied_from_pointer":{"id":"e26e7a5d-d6c3-4a50-9ddb-b8e03278e675","table":"block","spaceId":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"created_time":1666058973595,"last_edited_time":1666058973595,"parent_id":"833556aa-d685-488c-88d0-b136b456ff5f","parent_table":"block","alive":true,"copied_from":"e26e7a5d-d6c3-4a50-9ddb-b8e03278e675","created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"35e4639c-fadf-475f-8373-0af170b07cc7":{"role":"reader","value":{"id":"35e4639c-fadf-475f-8373-0af170b07cc7","version":1,"type":"sub_header","properties":{"title":[["0. 准备测试环境"]]},"format":{"copied_from_pointer":{"id":"3048ba52-1127-498e-a110-d1973dca4b8d","table":"block","spaceId":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"created_time":1666058973592,"last_edited_time":1666058973592,"parent_id":"833556aa-d685-488c-88d0-b136b456ff5f","parent_table":"block","alive":true,"copied_from":"3048ba52-1127-498e-a110-d1973dca4b8d","created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"4ca5809a-c906-416b-a825-00c135943090":{"role":"reader","value":{"id":"4ca5809a-c906-416b-a825-00c135943090","version":1,"type":"text","properties":{"title":[["准备一个装好 Helm 的 Kubernetes 集群，然后依次安装所需组件："]]},"format":{"copied_from_pointer":{"id":"1f7d94db-443d-4f47-9519-44aaed484c14","table":"block","spaceId":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"created_time":1666058973591,"last_edited_time":1666058973591,"parent_id":"833556aa-d685-488c-88d0-b136b456ff5f","parent_table":"block","alive":true,"copied_from":"1f7d94db-443d-4f47-9519-44aaed484c14","created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"31649055-17eb-4fb4-9bb0-cb468bb0c41c":{"role":"reader","value":{"id":"31649055-17eb-4fb4-9bb0-cb468bb0c41c","version":1,"type":"code","properties":{"title":[["# 建议拷贝 values.yaml 作为 values，方便修改\nhelm install dev-filebeat --version 7.10.1 elastic/filebeat --values=filebeat.yaml\nhelm install dev-logstash --version 7.10.1 elastic/logstash --values=logstash.yaml\nhelm install dev-redis bitnami/redis --values=redis.yaml"]],"language":[["Bash"]]},"format":{"code_wrap":true,"copied_from_pointer":{"id":"5c413075-5978-4585-8f8e-b1afcba83860","table":"block","spaceId":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"created_time":1666058973593,"last_edited_time":1666058973593,"parent_id":"833556aa-d685-488c-88d0-b136b456ff5f","parent_table":"block","alive":true,"copied_from":"5c413075-5978-4585-8f8e-b1afcba83860","created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"74d3a128-b283-41ad-b998-621bc8940dc2":{"role":"reader","value":{"id":"74d3a128-b283-41ad-b998-621bc8940dc2","version":1,"type":"text","properties":{"title":[["通过 "],["values",[["c"]]],[" 配置将三者串联起来，Logstash 可以先配置 "],["output.stdout",[["c"]]],[" 直接打印，快速确认链路通常。"]]},"format":{"copied_from_pointer":{"id":"28a48878-e50e-43b9-b764-4cca9fddfdec","table":"block","spaceId":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"created_time":1666058973592,"last_edited_time":1666058973592,"parent_id":"833556aa-d685-488c-88d0-b136b456ff5f","parent_table":"block","alive":true,"copied_from":"28a48878-e50e-43b9-b764-4cca9fddfdec","created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"d21ef200-ce59-444c-b423-67e4f3b7c421":{"role":"reader","value":{"id":"d21ef200-ce59-444c-b423-67e4f3b7c421","version":1,"type":"text","properties":{"title":[["准备一个可以不断触发日志的 "],["pod",[["c"]]],[" "]]},"format":{"copied_from_pointer":{"id":"a632da89-46f9-4f32-9641-d7e18fe275b0","table":"block","spaceId":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"created_time":1666058973594,"last_edited_time":1666058973594,"parent_id":"833556aa-d685-488c-88d0-b136b456ff5f","parent_table":"block","alive":true,"copied_from":"a632da89-46f9-4f32-9641-d7e18fe275b0","created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"57f74c27-9317-4774-aea1-84a6bc0e0544":{"role":"reader","value":{"id":"57f74c27-9317-4774-aea1-84a6bc0e0544","version":1,"type":"code","properties":{"title":[["kind: Pod\napiVersion: v1\nmetadata:\n  name: whatever-dummy-pod\nspec:\n  containers:\n    - name: whatever-dummy-pod\n      image: python:3.6.10-stretch\n      command: [\"/bin/bash\", \"-ec\", \"while :; do echo '.'; sleep 0.1 ; done\"]\n  restartPolicy: Never"]],"language":[["YAML"]]},"format":{"code_wrap":true,"copied_from_pointer":{"id":"6912db9d-21ac-4b9a-9700-a2cb31c23667","table":"block","spaceId":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"created_time":1666058973593,"last_edited_time":1666058973593,"parent_id":"833556aa-d685-488c-88d0-b136b456ff5f","parent_table":"block","alive":true,"copied_from":"6912db9d-21ac-4b9a-9700-a2cb31c23667","created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"20d41ef5-7731-45cf-bbd5-4f02b0461afd":{"role":"reader","value":{"id":"20d41ef5-7731-45cf-bbd5-4f02b0461afd","version":1,"type":"text","format":{"copied_from_pointer":{"id":"93e19039-eefa-4cd8-8411-6914b5dc3bc4","table":"block","spaceId":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"created_time":1666058973594,"last_edited_time":1666058973594,"parent_id":"833556aa-d685-488c-88d0-b136b456ff5f","parent_table":"block","alive":true,"copied_from":"93e19039-eefa-4cd8-8411-6914b5dc3bc4","created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"f4531d1b-30b9-4997-a05b-f7cb5814eb4a":{"role":"reader","value":{"id":"f4531d1b-30b9-4997-a05b-f7cb5814eb4a","version":1,"type":"sub_header","properties":{"title":[["1. 外部消息队列"]]},"format":{"copied_from_pointer":{"id":"bbfc51f8-caa7-4e40-9d19-5c4c53b3e276","table":"block","spaceId":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"created_time":1666058973595,"last_edited_time":1666058973595,"parent_id":"833556aa-d685-488c-88d0-b136b456ff5f","parent_table":"block","alive":true,"copied_from":"bbfc51f8-caa7-4e40-9d19-5c4c53b3e276","created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"6a1f2132-6d89-450e-9d56-80790833edd4":{"role":"reader","value":{"id":"6a1f2132-6d89-450e-9d56-80790833edd4","version":1,"type":"text","properties":{"title":[["外部消息队列组件较多，一般来说瓶颈可能会出在最后的 ElastcSearch 上，这种情况下，前端的 filebeat 是无法感知的，只要外部消息队列一直可用，filebeat 是不会触发背压。所以我们主要测试 "],["当外部消息队列也不可用 ",[["b"],["h","pink"]]],["的情况。"]]},"format":{"copied_from_pointer":{"id":"b0a050e3-eada-4c83-a0ea-ab4e794860b6","table":"block","spaceId":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"created_time":1666058973594,"last_edited_time":1666058973594,"parent_id":"833556aa-d685-488c-88d0-b136b456ff5f","parent_table":"block","alive":true,"copied_from":"b0a050e3-eada-4c83-a0ea-ab4e794860b6","created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"2c353ce1-3c44-4356-8be4-18f5683be2fc":{"role":"reader","value":{"id":"2c353ce1-3c44-4356-8be4-18f5683be2fc","version":1,"type":"text","format":{"copied_from_pointer":{"id":"59e29095-cb1f-4687-b41a-04f6e13fe326","table":"block","spaceId":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"created_time":1666058973593,"last_edited_time":1666058973593,"parent_id":"833556aa-d685-488c-88d0-b136b456ff5f","parent_table":"block","alive":true,"copied_from":"59e29095-cb1f-4687-b41a-04f6e13fe326","created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"dff56d26-d7cd-4feb-9e03-16c301b10124":{"role":"reader","value":{"id":"dff56d26-d7cd-4feb-9e03-16c301b10124","version":1,"type":"text","properties":{"title":[["正常采集，filebeat 采集日志："]]},"format":{"copied_from_pointer":{"id":"b90126ba-be11-479b-9ed0-0f5ab42d4645","table":"block","spaceId":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"created_time":1666058973595,"last_edited_time":1666058973595,"parent_id":"833556aa-d685-488c-88d0-b136b456ff5f","parent_table":"block","alive":true,"copied_from":"b90126ba-be11-479b-9ed0-0f5ab42d4645","created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"f7d4d560-3e92-4f2e-b2da-5ccb0961b599":{"role":"reader","value":{"id":"f7d4d560-3e92-4f2e-b2da-5ccb0961b599","version":1,"type":"code","properties":{"title":[["2020-12-17T08:15:51.663Z\tINFO\t[monitoring]\tlog/log.go:144\n# 截取出有用的字段\n----\n\n# 可以看到一共发布了 30 消息，都已经得到 ACK 了\n\"pipeline\":{\"clients\":1,\"events\":{\"active\":1,\"published\":30,\"total\":30},\"queue\":{\"acked\":30}}}\n----"]],"language":[["JSON"]]},"format":{"code_wrap":true,"copied_from_pointer":{"id":"5a08b95c-36cf-4edb-98e3-f6b79f8b8149","table":"block","spaceId":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"created_time":1666058973593,"last_edited_time":1666058973593,"parent_id":"833556aa-d685-488c-88d0-b136b456ff5f","parent_table":"block","alive":true,"copied_from":"5a08b95c-36cf-4edb-98e3-f6b79f8b8149","created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"4668827b-3724-4a97-9d66-23fd1933d67a":{"role":"reader","value":{"id":"4668827b-3724-4a97-9d66-23fd1933d67a","version":1,"type":"text","format":{"copied_from_pointer":{"id":"cb3fc818-57d8-4b53-a577-db616fa8818d","table":"block","spaceId":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"created_time":1666058973595,"last_edited_time":1666058973595,"parent_id":"833556aa-d685-488c-88d0-b136b456ff5f","parent_table":"block","alive":true,"copied_from":"cb3fc818-57d8-4b53-a577-db616fa8818d","created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"d0f19a82-3260-4a2e-8f54-363285013d4a":{"role":"reader","value":{"id":"d0f19a82-3260-4a2e-8f54-363285013d4a","version":1,"type":"text","properties":{"title":[["关闭 Redis ，立即观察："]]},"format":{"copied_from_pointer":{"id":"c12a5c5e-aeea-4724-95f8-36be7f8fd39d","table":"block","spaceId":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"created_time":1666058973595,"last_edited_time":1666058973595,"parent_id":"833556aa-d685-488c-88d0-b136b456ff5f","parent_table":"block","alive":true,"copied_from":"c12a5c5e-aeea-4724-95f8-36be7f8fd39d","created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"50d9c5c9-a9e7-4f72-9f76-49494d2a3ae4":{"role":"reader","value":{"id":"50d9c5c9-a9e7-4f72-9f76-49494d2a3ae4","version":1,"type":"code","properties":{"title":[["2020-12-17T08:17:44.272Z\tERROR\t[redis]\tredis/client.go:239\tFailed to RPUSH to redis list with: EOF\n2020-12-17T08:17:44.272Z\tINFO\t[publisher]\tpipeline/retry.go:219\tretryer: send unwait signal to consumer\n2020-12-17T08:17:44.272Z\tINFO\t[publisher]\tpipeline/retry.go:223\t  done\n2020-12-17T08:17:46.074Z\tERROR\t[publisher_pipeline_output]\tpipeline/output.go:180\tfailed to publish events: EOF\n2020-12-17T08:17:46.074Z\tINFO\t[publisher_pipeline_output]\tpipeline/output.go:143\tConnecting to redis(tcp://dev-redis-master:6379)\n2020-12-17T08:17:46.074Z\tINFO\t[publisher]\tpipeline/retry.go:219\tretryer: send unwait signal to consumer\n2020-12-17T08:17:46.074Z\tINFO\t[publisher]\tpipeline/retry.go:223\t  done\n2020-12-17T08:17:50.276Z\tERROR\t[publisher_pipeline_output]\tpipeline/output.go:154\tFailed to connect to redis(tcp://dev-redis-master:6379): dial tcp 10.111.75.89:6379: connect: connection refused\n2020-12-17T08:17:50.277Z\tINFO\t[publisher_pipeline_output]\tpipeline/output.go:145\tAttempting to reconnect to redis(tcp://dev-redis-master:6379) with 1 reconnect attempt(s)\n2020-12-17T08:17:50.277Z\tINFO\t[publisher]\tpipeline/retry.go:219\tretryer: send unwait signal to consumer\n2020-12-17T08:17:50.277Z\tINFO\t[publisher]\tpipeline/retry.go:223\t  done\n2020-12-17T08:17:51.663Z\tINFO\t[monitoring]\tlog/log.go:144\t\n\n\n----\n\"pipeline\":{\"clients\":1,\"events\":{\"active\":9,\"published\":30,\"retry\":2,\"total\":30}, \"queue\":{\"acked\":22}}}\n----"]],"language":[["JSON"]]},"format":{"code_wrap":true,"copied_from_pointer":{"id":"1e064d39-b1e6-4b5f-8ece-22c3d13ab076","table":"block","spaceId":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"created_time":1666058973591,"last_edited_time":1666058973591,"parent_id":"833556aa-d685-488c-88d0-b136b456ff5f","parent_table":"block","alive":true,"copied_from":"1e064d39-b1e6-4b5f-8ece-22c3d13ab076","created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"c9ee15f6-5017-40f4-8e4b-55f09d0b606c":{"role":"reader","value":{"id":"c9ee15f6-5017-40f4-8e4b-55f09d0b606c","version":1,"type":"text","properties":{"title":[["此时，采集并没有停止，队列事件数量上升了，但还没有塞满。"]]},"format":{"copied_from_pointer":{"id":"1597add4-1086-4a9a-8117-0682206a7972","table":"block","spaceId":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"created_time":1666058973591,"last_edited_time":1666058973591,"parent_id":"833556aa-d685-488c-88d0-b136b456ff5f","parent_table":"block","alive":true,"copied_from":"1597add4-1086-4a9a-8117-0682206a7972","created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"b6a980f1-6e85-470b-b2bf-c36c7c82f741":{"role":"reader","value":{"id":"b6a980f1-6e85-470b-b2bf-c36c7c82f741","version":1,"type":"text","properties":{"title":[["静待一段时间再观察："]]},"format":{"copied_from_pointer":{"id":"254396b1-136e-4976-a684-100e3567f069","table":"block","spaceId":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"created_time":1666058973592,"last_edited_time":1666058973592,"parent_id":"833556aa-d685-488c-88d0-b136b456ff5f","parent_table":"block","alive":true,"copied_from":"254396b1-136e-4976-a684-100e3567f069","created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"e6f0b0d8-a9c2-4a05-b620-7355d96dd310":{"role":"reader","value":{"id":"e6f0b0d8-a9c2-4a05-b620-7355d96dd310","version":1,"type":"code","properties":{"title":[["\"pipeline\":{\"clients\":1,\"events\":{\"active\":4117,\"retry\":1}}}\n\"harvester\":{\"open_files\":1,\"running\":1}}"]],"language":[["JSON"]]},"format":{"code_wrap":true,"copied_from_pointer":{"id":"280649b9-2ff0-494c-bcd2-1d84ff5f54d3","table":"block","spaceId":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"created_time":1666058973592,"last_edited_time":1666058973592,"parent_id":"833556aa-d685-488c-88d0-b136b456ff5f","parent_table":"block","alive":true,"copied_from":"280649b9-2ff0-494c-bcd2-1d84ff5f54d3","created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"8afd4293-3e34-49ca-9fb1-7e4cd4f74ee7":{"role":"reader","value":{"id":"8afd4293-3e34-49ca-9fb1-7e4cd4f74ee7","version":1,"type":"text","properties":{"title":[["可以到看到，"],["unACKed",[["c"]]],["的数量超过了默认的 4096，数量停在了 "],["4117",[["c"]]],[" 上（"],["为什么是 4117？",[["i"]]],["），没有新的事件推送了，可以认为背压已经生效。（但是要注意，此时"],["文件句柄并不会释放",[["b"]]],["，需要 "],["通过 clost_timeout 来保证机器文件系统健康",[["a","https://www.elastic.co/guide/en/beats/filebeat/current/filebeat-input-log.html#filebeat-input-log-close-timeout"]]],["）"]]},"format":{"copied_from_pointer":{"id":"96793116-d49b-448b-a756-4e9dfef5bee0","table":"block","spaceId":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"created_time":1666058973594,"last_edited_time":1666058973594,"parent_id":"833556aa-d685-488c-88d0-b136b456ff5f","parent_table":"block","alive":true,"copied_from":"96793116-d49b-448b-a756-4e9dfef5bee0","created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"44f24c7d-42a0-420c-9e80-4cf4f5f027f4":{"role":"reader","value":{"id":"44f24c7d-42a0-420c-9e80-4cf4f5f027f4","version":1,"type":"text","properties":{"title":[["再次打开 Redis"]]},"format":{"copied_from_pointer":{"id":"fa527510-cd79-4e5f-a63f-793a69582da4","table":"block","spaceId":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"created_time":1666058973595,"last_edited_time":1666058973595,"parent_id":"833556aa-d685-488c-88d0-b136b456ff5f","parent_table":"block","alive":true,"copied_from":"fa527510-cd79-4e5f-a63f-793a69582da4","created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"e5a12f86-7208-49b3-87ae-1ef06d4bccbb":{"role":"reader","value":{"id":"e5a12f86-7208-49b3-87ae-1ef06d4bccbb","version":1,"type":"code","properties":{"title":[["# redis 重新连上\n2020-12-17T08:43:23.335Z\tINFO\t[publisher_pipeline_output]\tpipeline/output.go:151\tConnection to redis(tcp://dev-redis-master:6379) established\n\n----\n\"output\":{\"events\":{\"acked\":10207,\"active\":0,\"batches\":33,\"total\":10207},\"read\":{\"bytes\":4240},\"write\":{\"bytes\":15941956}},\"pipeline\":{\"clients\":1,\"events\":{\"active\":10,\"published\":6101,\"retry\":3,\"total\":6100},\"queue\":{\"acked\":10207}}}"]],"language":[["JSON"]]},"format":{"code_wrap":true,"copied_from_pointer":{"id":"bed90694-7fcc-4147-b8c2-b5c14d05e64f","table":"block","spaceId":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"created_time":1666058973595,"last_edited_time":1666058973595,"parent_id":"833556aa-d685-488c-88d0-b136b456ff5f","parent_table":"block","alive":true,"copied_from":"bed90694-7fcc-4147-b8c2-b5c14d05e64f","created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"00369714-02a8-40e6-bde0-8187e190047b":{"role":"reader","value":{"id":"00369714-02a8-40e6-bde0-8187e190047b","version":1,"type":"text","properties":{"title":[["unACKed",[["c"]]],[" 的事件迅速被消费，背压消失， filebeat 采集恢复正常。"]]},"format":{"copied_from_pointer":{"id":"ed8d6b8e-f747-4740-a903-71223784f02a","table":"block","spaceId":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"created_time":1666058973595,"last_edited_time":1666058973595,"parent_id":"833556aa-d685-488c-88d0-b136b456ff5f","parent_table":"block","alive":true,"copied_from":"ed8d6b8e-f747-4740-a903-71223784f02a","created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"b06d68e4-f921-4c8b-b8e4-a2fee920a165":{"role":"reader","value":{"id":"b06d68e4-f921-4c8b-b8e4-a2fee920a165","version":1,"type":"text","format":{"copied_from_pointer":{"id":"6dfd6f38-c9a9-4a74-8e79-6681947f34f9","table":"block","spaceId":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"created_time":1666058973593,"last_edited_time":1666058973593,"parent_id":"833556aa-d685-488c-88d0-b136b456ff5f","parent_table":"block","alive":true,"copied_from":"6dfd6f38-c9a9-4a74-8e79-6681947f34f9","created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"c9a68fe8-942c-4853-88f9-1f16964690a8":{"role":"reader","value":{"id":"c9a68fe8-942c-4853-88f9-1f16964690a8","version":1,"type":"sub_header","properties":{"title":[["2. 直接传输"]]},"format":{"copied_from_pointer":{"id":"a9240c31-aba5-4a06-bbd5-36dfc6bd06db","table":"block","spaceId":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"created_time":1666058973594,"last_edited_time":1666058973594,"parent_id":"833556aa-d685-488c-88d0-b136b456ff5f","parent_table":"block","alive":true,"copied_from":"a9240c31-aba5-4a06-bbd5-36dfc6bd06db","created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"164ca307-0195-4bb0-a09e-4168144c5e80":{"role":"reader","value":{"id":"164ca307-0195-4bb0-a09e-4168144c5e80","version":1,"type":"text","properties":{"title":[["通过配置，我们将 Redis 挪到 Logstash 后端，再把 filebeat 日志直接怼到 Logstash。需要测试的是，当最后端的 output （例如 ES，我们这里偷懒用了 Redis）挂掉，观察Logstash → FIlebeat 整体的背压情况。"]]},"format":{"copied_from_pointer":{"id":"9bf3a62e-e507-4fbe-8766-e3b98e0b221d","table":"block","spaceId":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"created_time":1666058973594,"last_edited_time":1666058973594,"parent_id":"833556aa-d685-488c-88d0-b136b456ff5f","parent_table":"block","alive":true,"copied_from":"9bf3a62e-e507-4fbe-8766-e3b98e0b221d","created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"4ab16bbc-61aa-4e54-ad3c-4e011d74cd18":{"role":"reader","value":{"id":"4ab16bbc-61aa-4e54-ad3c-4e011d74cd18","version":1,"type":"text","format":{"copied_from_pointer":{"id":"d7f4d1bf-e7ff-4047-bbe3-dc2e0758b02f","table":"block","spaceId":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"created_time":1666058973595,"last_edited_time":1666058973595,"parent_id":"833556aa-d685-488c-88d0-b136b456ff5f","parent_table":"block","alive":true,"copied_from":"d7f4d1bf-e7ff-4047-bbe3-dc2e0758b02f","created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"358223f7-4406-4112-bc2e-255ed7eb2f1e":{"role":"reader","value":{"id":"358223f7-4406-4112-bc2e-255ed7eb2f1e","version":1,"type":"text","properties":{"title":[["当链路通畅，采集正常后，我们尝试关掉 Redis，然后立即观测 Logstash 日志"]]},"format":{"copied_from_pointer":{"id":"1dcc8b2d-0f3c-4465-93fb-b8b5e7255468","table":"block","spaceId":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"created_time":1666058973591,"last_edited_time":1666058973591,"parent_id":"833556aa-d685-488c-88d0-b136b456ff5f","parent_table":"block","alive":true,"copied_from":"1dcc8b2d-0f3c-4465-93fb-b8b5e7255468","created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"765bb150-016d-4f20-ac77-7391e8041795":{"role":"reader","value":{"id":"765bb150-016d-4f20-ac77-7391e8041795","version":1,"type":"code","properties":{"title":[["[2020-12-17T10:03:30,095][WARN ][logstash.outputs.redis   ][main][22ee6501492f55ca3f6485661fbbafb6131941aad2d5c08d163a871e724cfb81] Failed to send event to Redis {:event=>#<LogStash::Event:0x1a2ed42b>, :identity=>(中间省略一万字) `block in start_workers'\"]}"]],"language":[["JSON"]]},"format":{"code_wrap":true,"copied_from_pointer":{"id":"4ac53369-7345-4dac-bb01-9d01bb5c35c2","table":"block","spaceId":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"created_time":1666058973592,"last_edited_time":1666058973592,"parent_id":"833556aa-d685-488c-88d0-b136b456ff5f","parent_table":"block","alive":true,"copied_from":"4ac53369-7345-4dac-bb01-9d01bb5c35c2","created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"8ce4ddf0-f1db-4e59-8d2e-835f94a7ae80":{"role":"reader","value":{"id":"8ce4ddf0-f1db-4e59-8d2e-835f94a7ae80","version":1,"type":"text","properties":{"title":[["这时候我们会发现，Filebeat 的事件队列已经开始堆积了（这里如此敏感，是因为我们 Logstash 只设置了内存队列，空间有限，如果使用了较大的磁盘存储，可能需要积攒非常久），类似 Redis 方案，当队列堆积到 "],["4117",[["c"]]],[" 时就不再有新事件采集了。"]]},"format":{"copied_from_pointer":{"id":"8c444dd5-8385-461f-b9d8-951f1dc79593","table":"block","spaceId":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"created_time":1666058973593,"last_edited_time":1666058973593,"parent_id":"833556aa-d685-488c-88d0-b136b456ff5f","parent_table":"block","alive":true,"copied_from":"8c444dd5-8385-461f-b9d8-951f1dc79593","created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"355a583d-9bed-4022-9137-a1f4bae61194":{"role":"reader","value":{"id":"355a583d-9bed-4022-9137-a1f4bae61194","version":1,"type":"text","properties":{"title":[["重新打开 Redis 就绪后，"],["数秒内",[["b"]]],[" Filebeat 迅速恢复采集，整条链路的感知还是比较灵敏的。"]]},"format":{"copied_from_pointer":{"id":"f643ce5f-2c8b-408d-a80c-c564cb359504","table":"block","spaceId":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"created_time":1666058973595,"last_edited_time":1666058973595,"parent_id":"833556aa-d685-488c-88d0-b136b456ff5f","parent_table":"block","alive":true,"copied_from":"f643ce5f-2c8b-408d-a80c-c564cb359504","created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"1bcfa753-8813-4fb5-a3e1-dc6b3a58755a":{"role":"reader","value":{"id":"1bcfa753-8813-4fb5-a3e1-dc6b3a58755a","version":1,"type":"text","format":{"copied_from_pointer":{"id":"83f2160e-14a5-42d6-84a6-47401502bc19","table":"block","spaceId":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"created_time":1666058973593,"last_edited_time":1666058973593,"parent_id":"833556aa-d685-488c-88d0-b136b456ff5f","parent_table":"block","alive":true,"copied_from":"83f2160e-14a5-42d6-84a6-47401502bc19","created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"1c7d2908-1179-4d09-adc2-9e61e3edffbd":{"role":"reader","value":{"id":"1c7d2908-1179-4d09-adc2-9e61e3edffbd","version":1,"type":"header","properties":{"title":[["如何观测背压事件？"]]},"format":{"copied_from_pointer":{"id":"b2939710-d95e-4473-80ee-ee95ac317c8d","table":"block","spaceId":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"created_time":1666058973594,"last_edited_time":1666058973594,"parent_id":"833556aa-d685-488c-88d0-b136b456ff5f","parent_table":"block","alive":true,"copied_from":"b2939710-d95e-4473-80ee-ee95ac317c8d","created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"21481ad5-9460-44a2-b932-bb83e3c9488d":{"role":"reader","value":{"id":"21481ad5-9460-44a2-b932-bb83e3c9488d","version":1,"type":"text","format":{"copied_from_pointer":{"id":"7e64cb35-e9f1-4693-a50e-862c9724cc6e","table":"block","spaceId":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"created_time":1666058973593,"last_edited_time":1666058973593,"parent_id":"833556aa-d685-488c-88d0-b136b456ff5f","parent_table":"block","alive":true,"copied_from":"7e64cb35-e9f1-4693-a50e-862c9724cc6e","created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"005c3b41-e48c-45fb-a881-df37c0353ba5":{"role":"reader","value":{"id":"005c3b41-e48c-45fb-a881-df37c0353ba5","version":1,"type":"text","properties":{"title":[["一般来说，背压产生的原因通常是链路中有组件发生了异常（例如 ES 状态变红），导致数据流断裂，这是需要维护者介入的重要事件，所以如何能够被及时准确地观测到，是衡量方案的重要指标。"]]},"format":{"copied_from_pointer":{"id":"7fc11a8a-15e7-43b2-bb39-6a83a7676aea","table":"block","spaceId":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"created_time":1666058973593,"last_edited_time":1666058973593,"parent_id":"833556aa-d685-488c-88d0-b136b456ff5f","parent_table":"block","alive":true,"copied_from":"7fc11a8a-15e7-43b2-bb39-6a83a7676aea","created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"70f3ee05-d058-454d-b591-98c10fd198b8":{"role":"reader","value":{"id":"70f3ee05-d058-454d-b591-98c10fd198b8","version":1,"type":"text","properties":{"title":[["由于我们的使用场景里，ElasticSearch 是托管给其他团队维护的，暂时没有异常告警，所以只能在链路监控上做文章。"]]},"format":{"copied_from_pointer":{"id":"a883c7cb-56fe-4ff3-a774-21e94bd411eb","table":"block","spaceId":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"created_time":1666058973594,"last_edited_time":1666058973594,"parent_id":"833556aa-d685-488c-88d0-b136b456ff5f","parent_table":"block","alive":true,"copied_from":"a883c7cb-56fe-4ff3-a774-21e94bd411eb","created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"9af04e3d-b6ec-400c-8379-dcaea38f843b":{"role":"reader","value":{"id":"9af04e3d-b6ec-400c-8379-dcaea38f843b","version":1,"type":"text","format":{"copied_from_pointer":{"id":"bc489fe5-5fa0-4d13-a745-82b9d3c5c6cf","table":"block","spaceId":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"created_time":1666058973595,"last_edited_time":1666058973595,"parent_id":"833556aa-d685-488c-88d0-b136b456ff5f","parent_table":"block","alive":true,"copied_from":"bc489fe5-5fa0-4d13-a745-82b9d3c5c6cf","created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"b8b293ad-c9e6-4fe9-9da5-0199a43bedea":{"role":"reader","value":{"id":"b8b293ad-c9e6-4fe9-9da5-0199a43bedea","version":1,"type":"sub_header","properties":{"title":[["外部消息队列"]]},"format":{"copied_from_pointer":{"id":"039371b6-2917-4cc3-9afd-b322f5cd8024","table":"block","spaceId":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"created_time":1666058973590,"last_edited_time":1666058973590,"parent_id":"833556aa-d685-488c-88d0-b136b456ff5f","parent_table":"block","alive":true,"copied_from":"039371b6-2917-4cc3-9afd-b322f5cd8024","created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"1cca7d80-cf58-4ae2-b89c-fb3aca663546":{"role":"reader","value":{"id":"1cca7d80-cf58-4ae2-b89c-fb3aca663546","version":1,"type":"text","properties":{"title":[["以 Redis 为例，我们可以比较轻松地监控其队列长度、所消耗的资源量来判断其状态，是比较容易观测的。"]]},"format":{"copied_from_pointer":{"id":"1f00a81c-0caf-4014-9dea-7700cbace90f","table":"block","spaceId":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"created_time":1666058973591,"last_edited_time":1666058973591,"parent_id":"833556aa-d685-488c-88d0-b136b456ff5f","parent_table":"block","alive":true,"copied_from":"1f00a81c-0caf-4014-9dea-7700cbace90f","created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"895c6d9e-6a3d-4ffe-929b-1a37add2fbb9":{"role":"reader","value":{"id":"895c6d9e-6a3d-4ffe-929b-1a37add2fbb9","version":1,"type":"text","format":{"copied_from_pointer":{"id":"59188c8e-2cd6-4625-aad6-28a9d4e53414","table":"block","spaceId":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"created_time":1666058973593,"last_edited_time":1666058973593,"parent_id":"833556aa-d685-488c-88d0-b136b456ff5f","parent_table":"block","alive":true,"copied_from":"59188c8e-2cd6-4625-aad6-28a9d4e53414","created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"739534e1-4f40-452c-909a-be58d3422608":{"role":"reader","value":{"id":"739534e1-4f40-452c-909a-be58d3422608","version":1,"type":"sub_header","properties":{"title":[["直接传输"]]},"format":{"copied_from_pointer":{"id":"b946f472-ece6-415d-b638-b4bf01439581","table":"block","spaceId":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"created_time":1666058973595,"last_edited_time":1666058973595,"parent_id":"833556aa-d685-488c-88d0-b136b456ff5f","parent_table":"block","alive":true,"copied_from":"b946f472-ece6-415d-b638-b4bf01439581","created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"16c936bf-c217-486f-891b-ee0aaa375374":{"role":"reader","value":{"id":"16c936bf-c217-486f-891b-ee0aaa375374","version":1,"type":"text","properties":{"title":[["在一番简单 Google 之后，发现了悲剧的事实——翻遍了 ES 的论坛和 Github issue，没有找到明确的背压事件标志："]]},"format":{"copied_from_pointer":{"id":"6efc7c2f-c67f-497c-9ec3-58589b41f1c6","table":"block","spaceId":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"created_time":1666058973593,"last_edited_time":1666058973593,"parent_id":"833556aa-d685-488c-88d0-b136b456ff5f","parent_table":"block","alive":true,"copied_from":"6efc7c2f-c67f-497c-9ec3-58589b41f1c6","created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"a81ea779-8093-4769-82c8-f05185fe4b85":{"role":"reader","value":{"id":"a81ea779-8093-4769-82c8-f05185fe4b85","version":1,"type":"bulleted_list","properties":{"title":[["2016 年有人因为 CPU  吃满而发生背压，发现很难观测",[["a","https://discuss.elastic.co/t/where-do-incoming-events-go-when-logstash-is-cpu-bound/65197"]]]]},"format":{"copied_from_pointer":{"id":"062eff56-1a55-4e96-bc77-ff9c7f4311f9","table":"block","spaceId":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"created_time":1666058973590,"last_edited_time":1666058973590,"parent_id":"833556aa-d685-488c-88d0-b136b456ff5f","parent_table":"block","alive":true,"copied_from":"062eff56-1a55-4e96-bc77-ff9c7f4311f9","created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"21ef9494-df51-4152-b52f-486cd68777e1":{"role":"reader","value":{"id":"21ef9494-df51-4152-b52f-486cd68777e1","version":1,"type":"bulleted_list","properties":{"title":[["同年，在 Github 中也有人创建了"],[" 相关 issue ",[["a","https://github.com/elastic/logstash/issues/5317"]]],["，然而到现在也无人回应"]]},"format":{"copied_from_pointer":{"id":"2f08def3-6846-4975-8f32-7c1601703916","table":"block","spaceId":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"created_time":1666058973592,"last_edited_time":1666058973592,"parent_id":"833556aa-d685-488c-88d0-b136b456ff5f","parent_table":"block","alive":true,"copied_from":"2f08def3-6846-4975-8f32-7c1601703916","created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"ad11feea-fbf1-45a0-9844-4ef432f01494":{"role":"reader","value":{"id":"ad11feea-fbf1-45a0-9844-4ef432f01494","version":1,"type":"bulleted_list","properties":{"title":[["2018年，"],["Logstash 如何检测背压事件的问题",[["a","https://discuss.elastic.co/t/how-can-i-identify-back-pressure-in-logstash/157581"]]],[" 也无人回应"]]},"format":{"copied_from_pointer":{"id":"500245bb-6ff0-405c-8459-28a4330340b3","table":"block","spaceId":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"created_time":1666058973593,"last_edited_time":1666058973593,"parent_id":"833556aa-d685-488c-88d0-b136b456ff5f","parent_table":"block","alive":true,"copied_from":"500245bb-6ff0-405c-8459-28a4330340b3","created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"1a1344b8-d914-4b3c-a0de-7c764dffef0b":{"role":"reader","value":{"id":"1a1344b8-d914-4b3c-a0de-7c764dffef0b","version":1,"type":"text","format":{"copied_from_pointer":{"id":"fa3435e2-195b-408d-8a1d-9364d16f5f21","table":"block","spaceId":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"created_time":1666058973595,"last_edited_time":1666058973595,"parent_id":"833556aa-d685-488c-88d0-b136b456ff5f","parent_table":"block","alive":true,"copied_from":"fa3435e2-195b-408d-8a1d-9364d16f5f21","created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"248356ab-d3c2-4f4b-a3e1-bd3683252b68":{"role":"reader","value":{"id":"248356ab-d3c2-4f4b-a3e1-bd3683252b68","version":1,"type":"text","properties":{"title":[["加上官方文档的语焉不详，看来并没有显式的日志可以轻松地 "],["直接监测 ",[["b"]]],["到。"]]},"format":{"copied_from_pointer":{"id":"0e13715e-9094-4b86-8d4d-7dc25792b2b1","table":"block","spaceId":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"created_time":1666058973591,"last_edited_time":1666058973591,"parent_id":"833556aa-d685-488c-88d0-b136b456ff5f","parent_table":"block","alive":true,"copied_from":"0e13715e-9094-4b86-8d4d-7dc25792b2b1","created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"b06cb45c-956f-49f1-840d-234af04c1b2a":{"role":"reader","value":{"id":"b06cb45c-956f-49f1-840d-234af04c1b2a","version":1,"type":"text","properties":{"title":[["但对直接传输方案的偏爱（少一个组件，少点维护成本），经过进一步研究，采用了一个间接观测方法 —— 将 Logstash 的 metrics 转换成 Prometheus 格式（借助 "],["logstash_exporter",[["a","https://github.com/BonnierNews/logstash_exporter"]]],["），再根据事件发送和接收的速率判断。"]]},"format":{"copied_from_pointer":{"id":"0d6e0be1-55d2-4c68-8d15-b020dd1df4b5","table":"block","spaceId":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"created_time":1666058973591,"last_edited_time":1666058973591,"parent_id":"833556aa-d685-488c-88d0-b136b456ff5f","parent_table":"block","alive":true,"copied_from":"0d6e0be1-55d2-4c68-8d15-b020dd1df4b5","created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"fb704922-aab1-49cd-ac76-db120e30a261":{"role":"reader","value":{"id":"fb704922-aab1-49cd-ac76-db120e30a261","version":1,"type":"text","format":{"copied_from_pointer":{"id":"96c00347-3007-48a2-9619-f8314b1675b9","table":"block","spaceId":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"created_time":1666058973594,"last_edited_time":1666058973594,"parent_id":"833556aa-d685-488c-88d0-b136b456ff5f","parent_table":"block","alive":true,"copied_from":"96c00347-3007-48a2-9619-f8314b1675b9","created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"33dc5f31-8046-4f3f-80e9-26bd014e23db":{"role":"reader","value":{"id":"33dc5f31-8046-4f3f-80e9-26bd014e23db","version":1,"type":"image","properties":{"source":[["https://s3-us-west-2.amazonaws.com/secure.notion-static.com/8c6b79f9-1bc5-42bf-9b2f-7b596b41580d/Untitled.png"]],"caption":[["当一切正常"]]},"format":{"block_width":580,"block_height":104,"display_source":"https://s3-us-west-2.amazonaws.com/secure.notion-static.com/8c6b79f9-1bc5-42bf-9b2f-7b596b41580d/Untitled.png","block_full_width":false,"block_page_width":false,"block_aspect_ratio":0.1793103448275862,"copied_from_pointer":{"id":"fa0d8c6e-4e9c-420c-94a8-34f6fe71f368","table":"block","spaceId":"b0a64676-90b9-4734-9c63-2d704ee573b6"},"block_preserve_scale":true},"created_time":1666058973595,"last_edited_time":1666058973595,"parent_id":"833556aa-d685-488c-88d0-b136b456ff5f","parent_table":"block","alive":true,"copied_from":"fa0d8c6e-4e9c-420c-94a8-34f6fe71f368","file_ids":["8c6b79f9-1bc5-42bf-9b2f-7b596b41580d"],"created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"fda2bc41-ec24-4bd5-a08c-5d6edd68ec68":{"role":"reader","value":{"id":"fda2bc41-ec24-4bd5-a08c-5d6edd68ec68","version":1,"type":"text","format":{"copied_from_pointer":{"id":"bd7f1539-fa24-427e-8064-b7e81bbd0498","table":"block","spaceId":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"created_time":1666058973595,"last_edited_time":1666058973595,"parent_id":"833556aa-d685-488c-88d0-b136b456ff5f","parent_table":"block","alive":true,"copied_from":"bd7f1539-fa24-427e-8064-b7e81bbd0498","created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"c830e74a-7d00-433a-a791-58b3edd58077":{"role":"reader","value":{"id":"c830e74a-7d00-433a-a791-58b3edd58077","version":1,"type":"image","properties":{"source":[["https://s3-us-west-2.amazonaws.com/secure.notion-static.com/4890bfad-11a8-443b-a13d-6ec34ff7781e/Untitled.png"]],"caption":[["当后端发生异常，out_total 增速会立即小于 in_total"]]},"format":{"block_width":573,"block_height":103,"display_source":"https://s3-us-west-2.amazonaws.com/secure.notion-static.com/4890bfad-11a8-443b-a13d-6ec34ff7781e/Untitled.png","block_full_width":false,"block_page_width":false,"block_aspect_ratio":0.17975567190226877,"copied_from_pointer":{"id":"1813f288-066d-4b27-907c-c68b13a5e728","table":"block","spaceId":"b0a64676-90b9-4734-9c63-2d704ee573b6"},"block_preserve_scale":true},"created_time":1666058973591,"last_edited_time":1666058973591,"parent_id":"833556aa-d685-488c-88d0-b136b456ff5f","parent_table":"block","alive":true,"copied_from":"1813f288-066d-4b27-907c-c68b13a5e728","file_ids":["4890bfad-11a8-443b-a13d-6ec34ff7781e"],"created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"8485530a-5c3d-4903-8653-bf82f95aefcd":{"role":"reader","value":{"id":"8485530a-5c3d-4903-8653-bf82f95aefcd","version":1,"type":"text","properties":{"title":[["可以比较清晰的看到，Events 的接收和发送都处在一个比较相近的速率，如果在 filter 不出错的情况下，事件发送的速率大大小于事件的接收，就基本说明了后端存在问题，背压应该很快就要被触发了。"]]},"format":{"copied_from_pointer":{"id":"dc272ef9-4cc6-44ae-81c5-70fd27bb6133","table":"block","spaceId":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"created_time":1666058973595,"last_edited_time":1666058973595,"parent_id":"833556aa-d685-488c-88d0-b136b456ff5f","parent_table":"block","alive":true,"copied_from":"dc272ef9-4cc6-44ae-81c5-70fd27bb6133","created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"fdc2c35c-f196-4bea-bbd9-3ec66666adb9":{"role":"reader","value":{"id":"fdc2c35c-f196-4bea-bbd9-3ec66666adb9","version":1,"type":"text","format":{"copied_from_pointer":{"id":"4a734deb-4bf0-4e5c-92d1-b38774776e7b","table":"block","spaceId":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"created_time":1666058973592,"last_edited_time":1666058973592,"parent_id":"833556aa-d685-488c-88d0-b136b456ff5f","parent_table":"block","alive":true,"copied_from":"4a734deb-4bf0-4e5c-92d1-b38774776e7b","created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"3d9cc186-cbe5-4222-8620-1254217bfaf1":{"role":"reader","value":{"id":"3d9cc186-cbe5-4222-8620-1254217bfaf1","version":1,"type":"image","properties":{"source":[["https://s3-us-west-2.amazonaws.com/secure.notion-static.com/0d2051de-49e7-46da-a9e3-7d21743689b8/Untitled.png"]],"caption":[["背压发生，不再有新的事件推送进来"]]},"format":{"block_width":579,"block_height":105,"display_source":"https://s3-us-west-2.amazonaws.com/secure.notion-static.com/0d2051de-49e7-46da-a9e3-7d21743689b8/Untitled.png","block_full_width":false,"block_page_width":false,"block_aspect_ratio":0.18134715025906736,"copied_from_pointer":{"id":"2f046dac-5e8e-4005-93b4-4f8c44fec5d9","table":"block","spaceId":"b0a64676-90b9-4734-9c63-2d704ee573b6"},"block_preserve_scale":true},"created_time":1666058973592,"last_edited_time":1666058973592,"parent_id":"833556aa-d685-488c-88d0-b136b456ff5f","parent_table":"block","alive":true,"copied_from":"2f046dac-5e8e-4005-93b4-4f8c44fec5d9","file_ids":["0d2051de-49e7-46da-a9e3-7d21743689b8"],"created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"6471ba6a-7f57-4138-9b10-1d5fc6672b30":{"role":"reader","value":{"id":"6471ba6a-7f57-4138-9b10-1d5fc6672b30","version":1,"type":"text","properties":{"title":[["当背压触发， "],["logstash_node_pipeline_events_in_total",[["c"]]],["  和 "],["logstash_node_pipeline_events_out_total",[["c"]]],[" 二者的增速都降为了 0。"]]},"format":{"copied_from_pointer":{"id":"c9220a7a-65ad-4ca5-a678-234643062817","table":"block","spaceId":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"created_time":1666058973595,"last_edited_time":1666058973595,"parent_id":"833556aa-d685-488c-88d0-b136b456ff5f","parent_table":"block","alive":true,"copied_from":"c9220a7a-65ad-4ca5-a678-234643062817","created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"1679aaf0-ea8f-445c-9a14-b2a783092ed9":{"role":"reader","value":{"id":"1679aaf0-ea8f-445c-9a14-b2a783092ed9","version":1,"type":"text","properties":{"title":[["所以，解决方法就非常简单了，在 Prometheus 配置类似告警语句即可："]]},"format":{"copied_from_pointer":{"id":"4ef1888b-2327-40e2-86f4-ce6495a5eaad","table":"block","spaceId":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"created_time":1666058973592,"last_edited_time":1666058973592,"parent_id":"833556aa-d685-488c-88d0-b136b456ff5f","parent_table":"block","alive":true,"copied_from":"4ef1888b-2327-40e2-86f4-ce6495a5eaad","created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"42c20421-614c-48d6-9841-ef95d4caa7a6":{"role":"reader","value":{"id":"42c20421-614c-48d6-9841-ef95d4caa7a6","version":1,"type":"code","properties":{"title":[["# 近十分钟 Logstash 无输入\nceil(increase(logstash_node_pipeline_events_in_total{pipeline=\"main\"}[10m])) <= 1\n\n# 近十分钟 Logstash 无输出\nceil(increase(logstash_node_pipeline_events_out_total{pipeline=\"main\"}[10m])) <= 1\n\n# 近十分钟 Logstash 输出输入速度差异过大\nincrease(logstash_node_pipeline_events_out_total{pipeline=\"main\"}[10m]) / increase(logstash_node_pipeline_events_in_total{pipeline=\"main\"}[10m]) < 0.5"]],"language":[["Bash"]]},"format":{"code_wrap":true,"copied_from_pointer":{"id":"75c904cd-9159-4116-84c3-f917cb39d972","table":"block","spaceId":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"created_time":1666058973593,"last_edited_time":1666058973593,"parent_id":"833556aa-d685-488c-88d0-b136b456ff5f","parent_table":"block","alive":true,"copied_from":"75c904cd-9159-4116-84c3-f917cb39d972","created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"27a68b39-55a3-4359-ad5c-9c191f8415c4":{"role":"reader","value":{"id":"27a68b39-55a3-4359-ad5c-9c191f8415c4","version":1,"type":"text","properties":{"title":[["再配置上简单的图表，就能清晰的看到 Logstash 的采集速率"]]},"format":{"copied_from_pointer":{"id":"e983038d-3726-4a47-85f1-e7f0cd741cdd","table":"block","spaceId":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"created_time":1666058973595,"last_edited_time":1666058973595,"parent_id":"833556aa-d685-488c-88d0-b136b456ff5f","parent_table":"block","alive":true,"copied_from":"e983038d-3726-4a47-85f1-e7f0cd741cdd","created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"0e677c77-3f10-4d8e-8bd2-1a85360568ca":{"role":"reader","value":{"id":"0e677c77-3f10-4d8e-8bd2-1a85360568ca","version":1,"type":"image","properties":{"source":[["https://s3-us-west-2.amazonaws.com/secure.notion-static.com/eaefc5aa-c27e-4150-837a-00fb0568b160/Untitled.png"]]},"format":{"block_width":1635,"display_source":"https://s3-us-west-2.amazonaws.com/secure.notion-static.com/eaefc5aa-c27e-4150-837a-00fb0568b160/Untitled.png","block_full_width":false,"block_page_width":true,"block_aspect_ratio":0.20550458715596331,"copied_from_pointer":{"id":"7b730a72-0947-4654-ad79-66c6d11111db","table":"block","spaceId":"b0a64676-90b9-4734-9c63-2d704ee573b6"},"block_preserve_scale":true},"created_time":1666058973593,"last_edited_time":1666058973593,"parent_id":"833556aa-d685-488c-88d0-b136b456ff5f","parent_table":"block","alive":true,"copied_from":"7b730a72-0947-4654-ad79-66c6d11111db","file_ids":["eaefc5aa-c27e-4150-837a-00fb0568b160"],"created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"6afed87a-a3b1-4b76-a546-5e74eaa637d8":{"role":"reader","value":{"id":"6afed87a-a3b1-4b76-a546-5e74eaa637d8","version":1,"type":"header","properties":{"title":[["结论"]]},"format":{"copied_from_pointer":{"id":"93c9d946-c1ff-4fe3-88a8-708b1fdf291e","table":"block","spaceId":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"created_time":1666058973594,"last_edited_time":1666058973594,"parent_id":"833556aa-d685-488c-88d0-b136b456ff5f","parent_table":"block","alive":true,"copied_from":"93c9d946-c1ff-4fe3-88a8-708b1fdf291e","created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"d8fd3995-291d-4845-a1c9-0883cd0276c7":{"role":"reader","value":{"id":"d8fd3995-291d-4845-a1c9-0883cd0276c7","version":1,"type":"text","format":{"copied_from_pointer":{"id":"d58c4d0c-021f-44d4-911b-99b6e0c6a9ef","table":"block","spaceId":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"created_time":1666058973595,"last_edited_time":1666058973595,"parent_id":"833556aa-d685-488c-88d0-b136b456ff5f","parent_table":"block","alive":true,"copied_from":"d58c4d0c-021f-44d4-911b-99b6e0c6a9ef","created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"f7438c7a-c65c-4e65-8435-79f8c128bc35":{"role":"reader","value":{"id":"f7438c7a-c65c-4e65-8435-79f8c128bc35","version":1,"type":"text","properties":{"title":[["总结一下上面提到的两种方案，在背压问题上的优劣："]]},"format":{"copied_from_pointer":{"id":"dbe313c9-e317-493b-b79c-2aea4fde60e9","table":"block","spaceId":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"created_time":1666058973595,"last_edited_time":1666058973595,"parent_id":"833556aa-d685-488c-88d0-b136b456ff5f","parent_table":"block","alive":true,"copied_from":"dbe313c9-e317-493b-b79c-2aea4fde60e9","created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"72983806-fc0f-4464-8eff-6bc24d96f878":{"role":"reader","value":{"id":"72983806-fc0f-4464-8eff-6bc24d96f878","version":1,"type":"bulleted_list","properties":{"title":[["外部消息队列在观测上更优，有比较多的方案可以更直观地判断链路健康状态"]]},"format":{"copied_from_pointer":{"id":"a5a06281-736d-4811-a6dd-0a6badef28c1","table":"block","spaceId":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"created_time":1666058973594,"last_edited_time":1666058973594,"parent_id":"833556aa-d685-488c-88d0-b136b456ff5f","parent_table":"block","alive":true,"copied_from":"a5a06281-736d-4811-a6dd-0a6badef28c1","created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"5355a1c2-7432-41e3-b203-ff1f92fe7c11":{"role":"reader","value":{"id":"5355a1c2-7432-41e3-b203-ff1f92fe7c11","version":1,"type":"bulleted_list","properties":{"title":[["当背压发生，外部消息队列会将更多内容采集到链路中，而不是暂时让他们呆在硬盘，如果故障处理的速度较慢，那么链路的数据可靠性就非常重要了，一旦链路数据丢失（例如 Redis 未能及时落地，内存事件丢失），日志会有更多丢失"]]},"format":{"copied_from_pointer":{"id":"45a4d726-fdcb-4a48-88b7-a2a22a070efd","table":"block","spaceId":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"created_time":1666058973592,"last_edited_time":1666058973592,"parent_id":"833556aa-d685-488c-88d0-b136b456ff5f","parent_table":"block","alive":true,"copied_from":"45a4d726-fdcb-4a48-88b7-a2a22a070efd","created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"56d67c92-c748-43dc-aa29-222ac19ad06a":{"role":"reader","value":{"id":"56d67c92-c748-43dc-aa29-222ac19ad06a","version":1,"type":"bulleted_list","properties":{"title":[["直接传输方案在组件维护、问题排查上更容易"]]},"format":{"copied_from_pointer":{"id":"73558069-e4be-4d0a-a71f-2a0d3e85ef9d","table":"block","spaceId":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"created_time":1666058973593,"last_edited_time":1666058973593,"parent_id":"833556aa-d685-488c-88d0-b136b456ff5f","parent_table":"block","alive":true,"copied_from":"73558069-e4be-4d0a-a71f-2a0d3e85ef9d","created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"dcbfc532-2c58-498c-abe3-78b8b97012dd":{"role":"reader","value":{"id":"dcbfc532-2c58-498c-abe3-78b8b97012dd","version":1,"type":"bulleted_list","properties":{"title":[["外部消息队列方案要更关注组件版本，对旧系统不那么友好"]]},"format":{"copied_from_pointer":{"id":"c5a56b42-609d-4cd1-9ae2-203854aa982a","table":"block","spaceId":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"created_time":1666058973595,"last_edited_time":1666058973595,"parent_id":"833556aa-d685-488c-88d0-b136b456ff5f","parent_table":"block","alive":true,"copied_from":"c5a56b42-609d-4cd1-9ae2-203854aa982a","created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"951e9e1f-6889-4152-a22d-c92895ee97a8":{"role":"reader","value":{"id":"951e9e1f-6889-4152-a22d-c92895ee97a8","version":1,"type":"text","format":{"copied_from_pointer":{"id":"89268b5b-1c58-4ab0-9d54-bf5a27ba3095","table":"block","spaceId":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"created_time":1666058973593,"last_edited_time":1666058973593,"parent_id":"833556aa-d685-488c-88d0-b136b456ff5f","parent_table":"block","alive":true,"copied_from":"89268b5b-1c58-4ab0-9d54-bf5a27ba3095","created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"87d4993f-59f8-49d7-80d9-6c1ef3cf9f13":{"role":"reader","value":{"id":"87d4993f-59f8-49d7-80d9-6c1ef3cf9f13","version":1,"type":"text","properties":{"title":[["具体选择那种方式采集日志，需要根据实际情况抉择。"]]},"format":{"copied_from_pointer":{"id":"56a297a2-b9db-49d4-8df9-652b4b4478a0","table":"block","spaceId":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"created_time":1666058973593,"last_edited_time":1666058973593,"parent_id":"833556aa-d685-488c-88d0-b136b456ff5f","parent_table":"block","alive":true,"copied_from":"56a297a2-b9db-49d4-8df9-652b4b4478a0","created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"bb923353-3696-4147-9201-18efd23355f2":{"role":"reader","value":{"id":"bb923353-3696-4147-9201-18efd23355f2","version":1,"type":"text","format":{"copied_from_pointer":{"id":"8010e4fb-b6fb-4bbd-9aed-9d8b8fb4a7b6","table":"block","spaceId":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"created_time":1666058973593,"last_edited_time":1666058973593,"parent_id":"833556aa-d685-488c-88d0-b136b456ff5f","parent_table":"block","alive":true,"copied_from":"8010e4fb-b6fb-4bbd-9aed-9d8b8fb4a7b6","created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"ad4d757b-bd69-4dcb-851a-364e8390ce6f":{"role":"reader","value":{"id":"ad4d757b-bd69-4dcb-851a-364e8390ce6f","version":1,"type":"text","format":{"copied_from_pointer":{"id":"0a1c9be3-22cf-472a-890d-c39c47678980","table":"block","spaceId":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"created_time":1666058973590,"last_edited_time":1666058973590,"parent_id":"833556aa-d685-488c-88d0-b136b456ff5f","parent_table":"block","alive":true,"copied_from":"0a1c9be3-22cf-472a-890d-c39c47678980","created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"fff4d1ff-ff64-4d94-ae73-dbaee3e6790d":{"role":"reader","value":{"id":"fff4d1ff-ff64-4d94-ae73-dbaee3e6790d","version":1,"type":"divider","format":{"copied_from_pointer":{"id":"97008f96-a114-4ba8-9373-86050416a3e9","table":"block","spaceId":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"created_time":1666058973594,"last_edited_time":1666058973594,"parent_id":"833556aa-d685-488c-88d0-b136b456ff5f","parent_table":"block","alive":true,"copied_from":"97008f96-a114-4ba8-9373-86050416a3e9","created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"12f7328f-b950-4fcb-831a-c7325dce2f30":{"role":"reader","value":{"id":"12f7328f-b950-4fcb-831a-c7325dce2f30","version":1,"type":"text","properties":{"title":[["参考："]]},"format":{"copied_from_pointer":{"id":"810d34c2-282c-4980-8b9c-75e76299586a","table":"block","spaceId":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"created_time":1666058973593,"last_edited_time":1666058973593,"parent_id":"833556aa-d685-488c-88d0-b136b456ff5f","parent_table":"block","alive":true,"copied_from":"810d34c2-282c-4980-8b9c-75e76299586a","created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"c975d56a-f36e-42e1-bc8a-d5a3999c4d71":{"role":"reader","value":{"id":"c975d56a-f36e-42e1-bc8a-d5a3999c4d71","version":1,"type":"bulleted_list","properties":{"title":[["https://discuss.elastic.co/t/where-do-incoming-events-go-when-logstash-is-cpu-bound/65197",[["a","https://discuss.elastic.co/t/where-do-incoming-events-go-when-logstash-is-cpu-bound/65197"]]]]},"format":{"copied_from_pointer":{"id":"f4e2eda5-c9bf-4688-b6a4-1d9f91d05f3f","table":"block","spaceId":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"created_time":1666058973595,"last_edited_time":1666058973595,"parent_id":"833556aa-d685-488c-88d0-b136b456ff5f","parent_table":"block","alive":true,"copied_from":"f4e2eda5-c9bf-4688-b6a4-1d9f91d05f3f","created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"ea30ced9-e530-4c88-80ae-d60492725613":{"role":"reader","value":{"id":"ea30ced9-e530-4c88-80ae-d60492725613","version":1,"type":"bulleted_list","properties":{"title":[["https://www.elastic.co/guide/en/logstash/current/persistent-queues.html",[["a","https://www.elastic.co/guide/en/logstash/current/persistent-queues.html"]]]]},"format":{"copied_from_pointer":{"id":"0745db91-84a5-4031-90e0-1c316557dd24","table":"block","spaceId":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"created_time":1666058973590,"last_edited_time":1666058973590,"parent_id":"833556aa-d685-488c-88d0-b136b456ff5f","parent_table":"block","alive":true,"copied_from":"0745db91-84a5-4031-90e0-1c316557dd24","created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"7e46d3b4-0dd5-4b56-9011-243b02e9d8ac":{"role":"reader","value":{"id":"7e46d3b4-0dd5-4b56-9011-243b02e9d8ac","version":1,"type":"bulleted_list","properties":{"title":[["https://discuss.elastic.co/t/redis-input-plugin-back-pressure-issue/150826",[["a","https://discuss.elastic.co/t/redis-input-plugin-back-pressure-issue/150826"]]]]},"format":{"copied_from_pointer":{"id":"4254e1c5-24d1-47e8-a73c-8d06a76beda6","table":"block","spaceId":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"created_time":1666058973592,"last_edited_time":1666058973592,"parent_id":"833556aa-d685-488c-88d0-b136b456ff5f","parent_table":"block","alive":true,"copied_from":"4254e1c5-24d1-47e8-a73c-8d06a76beda6","created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"d5f1eb2f-4913-4d5b-9f42-c000fdfad4b1":{"role":"reader","value":{"id":"d5f1eb2f-4913-4d5b-9f42-c000fdfad4b1","version":1,"type":"bulleted_list","properties":{"title":[["https://github.com/elastic/beats/issues/7743",[["a","https://github.com/elastic/beats/issues/7743"]]]]},"format":{"copied_from_pointer":{"id":"08380912-4084-4c20-9cf5-cdbed79e7af6","table":"block","spaceId":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"created_time":1666058973590,"last_edited_time":1666058973590,"parent_id":"833556aa-d685-488c-88d0-b136b456ff5f","parent_table":"block","alive":true,"copied_from":"08380912-4084-4c20-9cf5-cdbed79e7af6","created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"2920b3a2-f825-4d2b-b075-3cc340203857":{"role":"reader","value":{"id":"2920b3a2-f825-4d2b-b075-3cc340203857","version":1,"type":"bulleted_list","properties":{"title":[["https://discuss.elastic.co/t/filebeat-harvester-open-file-count-increasing-when-logstash-output-to-elasticsearch-fails/249892",[["a","https://discuss.elastic.co/t/filebeat-harvester-open-file-count-increasing-when-logstash-output-to-elasticsearch-fails/249892"]]]]},"format":{"copied_from_pointer":{"id":"0aeee519-941f-4ca7-a076-d733c89a87f6","table":"block","spaceId":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"created_time":1666058973591,"last_edited_time":1666058973591,"parent_id":"833556aa-d685-488c-88d0-b136b456ff5f","parent_table":"block","alive":true,"copied_from":"0aeee519-941f-4ca7-a076-d733c89a87f6","created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"70f6a068-90d2-48f3-ab51-a21e8ddf4e37":{"role":"reader","value":{"id":"70f6a068-90d2-48f3-ab51-a21e8ddf4e37","version":1,"type":"text","format":{"copied_from_pointer":{"id":"6e47c9ab-f688-47e1-b984-52b4260dcdb9","table":"block","spaceId":"b0a64676-90b9-4734-9c63-2d704ee573b6"}},"created_time":1666058973593,"last_edited_time":1666058973593,"parent_id":"833556aa-d685-488c-88d0-b136b456ff5f","parent_table":"block","alive":true,"copied_from":"6e47c9ab-f688-47e1-b984-52b4260dcdb9","created_by_table":"notion_user","created_by_id":"f594524b-0941-4aea-99a2-9b9304033287","last_edited_by_table":"notion_user","last_edited_by_id":"f594524b-0941-4aea-99a2-9b9304033287","space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"}}},"collection":{"e34bec60-9b02-4ad8-aaf8-83369409cc9f":{"role":"reader","value":{"id":"e34bec60-9b02-4ad8-aaf8-83369409cc9f","version":92,"name":[["布鲁斯鱼的妙想天开 "]],"schema":{"NX\\Q":{"name":"date","type":"date"},"`gQ~":{"name":"type","type":"select","options":[{"id":"5aff2f95-fd1e-489b-8840-bf10bc9519cb","color":"purple","value":"Post"},{"id":"374d2bc6-a144-4832-8ca4-474aaae0ea1f","color":"orange","value":"Page"}]},"d]hq":{"name":"slug","type":"text"},"sD^m":{"name":"tags","type":"multi_select","options":[{"id":"790180f1-0c2e-4730-a1ef-c5463df34680","color":"brown","value":"python"},{"id":"5d668f5e-7204-4c7e-b57e-5558bd27efaf","color":"gray","value":"pep"},{"id":"9081ab60-29ee-4a5b-9989-f50cf36ecb9b","color":"orange","value":"tech"},{"id":"c0225229-afab-45e4-b69b-b71029b39835","color":"red","value":"django"},{"id":"90084124-d1d5-49fb-86e7-4b133c051d81","color":"default","value":"orm"},{"id":"10ace7d0-10e6-4617-970e-acf2d9348d0f","color":"yellow","value":"best-practice"},{"id":"1b9671ca-93e5-402d-a73e-f9aca38e4358","color":"pink","value":"web"},{"id":"c7015bc7-2283-4b3d-8d19-3075724a10df","color":"blue","value":"blog"},{"id":"22d9ce60-f854-4122-b0fc-4f4c3a41979e","color":"green","value":"guide"},{"id":"6e99d746-1829-43e3-a828-214a1ae79b4a","color":"purple","value":"ELK"},{"id":"45ebe27a-5445-4cc3-91c9-ec1f1296dcf4","color":"brown","value":"pytest"},{"id":"9f679b83-f407-4130-b5b7-f969329300bf","color":"brown","value":"unittest"},{"id":"e30656d1-1ff2-434c-a2cb-8b3c75c9d1a1","color":"gray","value":"fun"},{"id":"5146a8a4-5647-4ce0-8a7b-1a6320adee06","color":"blue","value":"back-pressure"},{"id":"36828c03-3b80-417d-82a3-b1066ad5ca60","color":"green","value":"Dependency injection"},{"id":"9602332d-afbb-41e8-baed-bd0dd39a5e21","color":"brown","value":"k8s"},{"id":"82cd2499-ddd4-43ad-9298-fba21fe29cfa","color":"brown","value":"helm"},{"id":"f0a44444-e52d-4db2-9262-aa29d7ded8e3","color":"blue","value":"celery"},{"id":"a87e284b-1c48-422e-9811-eba8a167f97a","color":"red","value":"amqp"},{"id":"dc50dbb3-8e3a-4747-95d8-c9098e70e088","color":"default","value":"tcp"},{"id":"90b243e4-95f4-459e-b5b7-42f09020978b","color":"gray","value":"graphql"},{"id":"00f0130d-3a96-4e5a-8b5e-77e14e0a3ff7","color":"purple","value":"logstash"},{"id":"a921b879-fcef-4ace-8c96-7a6e11fe2358","color":"orange","value":"konajdk"},{"id":"b8e6dc68-925c-4d32-84d9-580d1a34c3a6","color":"orange","value":"regex"},{"id":"fc66930c-fa10-44b1-b553-5f6acc796321","color":"gray","value":"nfa"},{"id":"f9255cb2-7e85-4bce-8042-472643ff3b58","color":"orange","value":"dfa"},{"id":"e00a51c2-af1c-4bfd-a118-e83e73f3e1a3","color":"purple","value":"security"},{"id":"45105ec0-49be-430b-aead-ef83cfbc8b02","color":"pink","value":"reading"},{"id":"4c3a21fd-3ba5-44a2-8c5e-ef6e9100c32c","color":"brown","value":"software-engineering"},{"id":"4cd1d179-3466-4d7e-baf2-99a4c0250a78","color":"blue","value":"google"},{"id":"22973bbb-4038-4f9b-a30c-c0ab6506d65d","color":"gray","value":"note"},{"id":"1ca18016-ff4e-41e0-af37-6ea457fc4bd8","color":"orange","value":"go"}]},"wz|S":{"name":"summary","type":"text"},"title":{"name":"title","type":"title"},"f211bdc0-ee00-4186-9a7d-f68c055ec2ee":{"name":"status","type":"select","options":[{"id":"22460321-fea2-4c7c-b352-a674760780ac","color":"orange","value":"Idea"},{"id":"41d5f5c6-b53c-42bc-8e0f-fc9402048480","color":"yellow","value":"Draft"},{"id":"c7390b31-9fab-4e21-94ee-7e67ea077a97","color":"blue","value":"Revise"},{"id":"7abc61d4-b405-480d-b699-12588755fa65","color":"red","value":"Published"}]}},"icon":"🗯️","format":{"copied_from_pointer":{"id":"6a42b751-ff40-4f34-aa6a-1830a3344cb7","table":"collection","spaceId":"ac4cb96d-c8f8-4040-9bb2-868d9fc7f526"},"collection_page_properties":[{"visible":false,"property":"NX\\Q"},{"visible":false,"property":"d]hq"},{"visible":false,"property":"f211bdc0-ee00-4186-9a7d-f68c055ec2ee"},{"visible":false,"property":"sD^m"},{"visible":false,"property":"wz|S"},{"visible":false,"property":"`gQ~"}]},"parent_id":"a6089909-2d0d-43ef-af93-5e041712e826","parent_table":"block","alive":true,"file_ids":["6cf3dc36-2f98-4f0e-9679-1bdbb1485129","5520bd92-e709-4c0d-ad58-06923f23f7e9","624d393a-62e3-4464-a1bf-1c79ecd4fbda","d52f6766-3e32-4c3d-8529-46e1f214360f"],"copied_from":"6a42b751-ff40-4f34-aa6a-1830a3344cb7","migrated":true,"space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6","deleted_schema":{"0d330ccb-d222-4440-a0de-6cccfe926a33":{"name":"url","type":"text"},"26ff3130-393a-45ac-92b5-7490d9b87515":{"name":"template","type":"select","options":[{"id":"V*ea","color":"purple","value":"post"}]},"29e679ed-47a3-46c2-9eb4-9070171591b8":{"name":"inList","type":"checkbox"},"2af12d30-97f0-4310-b38c-02e6a554245f":{"name":"publish","type":"checkbox"},"2bf55746-6864-4bb6-b585-77b81f140da1":{"name":"inList","type":"checkbox"},"487aab80-eb42-4dd6-a386-d58672ff59fa":{"name":"description","type":"text"},"53819e0d-5bc6-40de-a8bc-498fdf840fbc":{"name":"description","type":"text"},"67c34d44-b9f2-42c1-b35c-4a534c03bdd9":{"name":"inList","type":"checkbox"},"69fb2cd3-221c-476b-86c2-ab74f4490cc9":{"name":"template","type":"select","options":[{"id":"V*ea","color":"purple","value":"post"}]},"ab0a009c-1080-47c3-aecc-b26dc703a4e0":{"name":"url","type":"text"},"ad8f0878-e947-4188-8970-1ca14665f6e3":{"name":"inMenu","type":"checkbox"},"b2c6f9d4-31e2-4230-b57e-4bdb21a3d635":{"name":"template","type":"select","options":[{"id":"V*ea","color":"purple","value":"post"}]},"b387319f-5770-457e-8453-1d2f2708f9f1":{"name":"url","type":"text"},"b6d830ff-ce1d-4e76-a484-f0fc3f148c52":{"name":"publish","type":"checkbox"},"c0b15f23-eddd-4316-95d1-a92a4edbc710":{"name":"publish","type":"checkbox"},"e3660c02-9d93-463b-9495-addeeabd3e80":{"name":"description","type":"text"}}}}},"collection_view":{"065b98d2-d3b4-4dab-8b96-4eb118a3f311":{"role":"reader","value":{"id":"065b98d2-d3b4-4dab-8b96-4eb118a3f311","version":10,"type":"table","name":"Default view","format":{"table_wrap":false,"table_properties":[{"width":371,"visible":true,"property":"title"},{"width":243,"visible":true,"property":"d]hq"},{"width":159,"visible":true,"property":"NX\\Q"},{"width":147,"visible":true,"property":"wz|S"},{"width":356,"visible":true,"property":"sD^m"},{"width":124,"visible":true,"property":"f211bdc0-ee00-4186-9a7d-f68c055ec2ee"},{"width":100,"visible":true,"property":"`gQ~"}]},"parent_id":"a6089909-2d0d-43ef-af93-5e041712e826","parent_table":"block","alive":true,"page_sort":["b1e1d645-db95-42e5-8995-39a80eda6460","e8cd3732-dc1c-43ae-959a-a5a611ec098a","e876558d-e878-47f6-8c95-21be678990a5","5a971ded-d3c5-41be-bef9-ddfff48d43a2","8db8b240-e1c5-4dd7-bf74-72584d7a2ce0","daf94ca4-ec56-47a3-84ed-b1e2479acc4b","d1a2db9b-6820-421e-9b80-017ce7478587","67ea9f83-b9f6-416b-afcb-7c64f7533e6c","45939470-9819-47e8-b12b-999cfefa0aad","c60dc33d-8efb-44be-a863-7a87ad047932","fe4b8d5f-7c49-42c6-a7d5-1cb71c4f7e86","b7233a67-c367-4198-831e-f12089568d1f","4f3bf306-92c4-41b7-a43e-957129a1240a","6a789607-66cf-498e-9b32-eb3fa69a84f4","c9429034-dabd-4a25-8782-97f20c808a60","38c49fe2-37f8-4a7f-a99f-9edb9ddad4c2","474eb638-9f6b-46bf-8004-77668293f199","81d6dfab-69cb-43a0-aa04-e9725f0b67e1","7703d956-84db-46cd-b538-48eae1af68b5","9f937c73-dac9-4ed7-9b01-beefcb321f16","3cf9dcb9-e7db-406c-80ab-c65c11fbf906","5827ab53-e051-455b-b90a-3bdc20158c2c","fa7acd3b-dea9-4fb1-b859-5345f35163c6","696dfc48-62c3-494d-96d0-ec5fa84637e8","79df93cf-9b10-452e-bc62-f39e8cd2d124","9bb8e52d-c459-4528-b1b3-c2378207253a","5da038ef-f419-4a11-aa48-587b3787e040","b4a2c9d4-6a2c-49e6-988d-89a538dfe0f6","c374a479-5cc7-4c54-ba69-6a4d76dc25ad","d470fa67-0e7c-40d8-86ac-9b5a8be88dc8","986be38b-9780-4bb9-bdcd-4e361ddbd888","b7613f56-c2d4-4aae-b967-b7471ade86d0","e357d1fc-7466-4d6a-8d48-71b76ea97cdc","e1735855-4089-4af6-bd4d-0d59f7a76cb4","9b34581a-955a-4229-99d0-8f2a6d0e69ce","b4414811-0599-45cf-b047-fa95eac42d89","c28a8a01-911a-40a2-a607-d3af8cb24017","461d07ae-4b4a-49de-bdcb-341af1153201","3df59023-cb68-4a65-afd1-7f0b8c21cb57","0e3223d1-03df-40fb-90f9-cc8559d776b5","4f45b7d6-cd5b-46ab-b2a6-37ae20bf5f21","fa475a21-5f38-43d4-9a89-67c40b3129ae","97cbc634-fe3a-4b9b-9da6-ac4aaa94772f","8a0d34bc-7e8c-4a68-88a5-5276274f612a","623f8788-a20f-45fd-bb82-08935f59b44d","7ee398f0-450b-47cb-9b53-f5e7736590d2","eae9f077-591e-4841-903b-db395513c834","367d0f2a-0b10-4dbb-b53a-613152f124f9","398e2e28-3997-49bc-a138-0467d4da8531","8aaf4633-e879-44dc-82c8-3c9fb9d3a6f8","1eb5e5f2-8dc9-4ffc-b5e1-09b67be27a83","83465fb9-205b-41fc-83a6-424692ee0a0e","fb1d18d0-6403-4e8a-840e-134553748ff5","4407cb77-3838-4ba5-b474-f15222cd3dba","1880b0f2-e036-42d0-9550-0fb08a962397","d8d60bd6-33f6-458f-a7d6-209ef2fb05a1","29bf65ff-888b-4a76-a8dd-bf54f02c3864","bad1d4ae-fd4a-4671-ae94-dd53d94e0eae","0d59792d-db1c-4ae7-8d7c-4f013be40dcf","337dc259-2805-4b1c-a60f-1b3e6c7badb8","4b1b21a8-c278-4bc6-88f1-1a35d407f4d7","7946aba2-d6d0-45ef-8779-23fa15db8f2d","c18dbce6-9e8c-4f4b-b74a-0994e7c1bc3f","84aa87b7-39e7-493c-87b9-5cae4de95449","1446eadb-8c01-4295-be3a-ecf19361c143","fe8a7d94-e9ba-457d-8f19-10fe53e6ca3c","98a5a0b6-b07b-4065-a73f-2949ad28ac47","099219ec-fb4b-459d-a538-f6c3d54f6ca2","e047becf-e696-42e3-84c9-4f6278c844ae","975051d4-ebbc-4b3f-98cf-1a52e5e4761d","e5d98bee-b2d5-4b45-ab0b-b77da24aebe7","acac2668-1062-4e7a-b095-eda067da8413","179025c4-d8a8-4c47-b621-9fd6a6f3339b","d256e5ed-5eac-43bb-a32e-581774962c23","b843dacf-b655-4b1c-a61c-434b67f18154","56a80c2d-0520-415a-a77a-1db82eff0b3a","9c40a253-b9e8-42cd-8a99-62aaa9789a5e","d3a05020-0948-489a-80ac-fedebc035c58","0ee4f3e9-0451-411f-b903-0c83d30e5b67","769f1163-e45e-4c3b-87a7-3b551895d9be","7e217dcd-e4e5-4bcd-b2de-00fcb5ab7fba","28e3d2f6-abb8-4711-b21e-ce1937e3e546","04d4f00b-9608-4d83-949e-b32313ace34e","41f93fa3-0496-4ea7-8ac3-0a8beaf346da","f0db9e3e-0e99-4465-ae65-6a9a8d8a6468","279e794f-519c-44f5-ab04-422fba916b72","f0b2f8a5-7dfd-48dc-ba1f-419a7fda1fff","e874f269-1938-40be-974b-2e499c1f4590","65265d92-050f-4fb5-b529-a514079cdd83","5fc98358-411a-40d7-a5d0-c4089026ca1f","15fcd77a-6097-4ee9-9835-9d6e85897fd6","6f8b1275-2d88-40e2-b76b-375f3c028b03","33273042-efcc-45bc-8f28-b65a1c2c65ad","c18bd396-be21-4ce2-ab22-32a45c28e37f","ba597bcf-7582-4fd2-8049-6333ef3e4453","4edecef8-106d-489d-be1d-d1b528c4cdc9","b03b3109-e900-4daf-b852-a590324ab747","8cba5326-9daa-4c2c-b763-5476dc8a7a91","9ab4aa63-ce81-415f-bf95-e632006a1aea","e3644bfb-4244-4a82-a7d7-d7cdb65aa1ed","b6a1f5b5-febd-4c26-9e29-520290eb5719","51e53e64-e6dd-4fd6-8062-5d4455f0a1cb","f4ec684b-e5f1-44e9-a8a7-aca27f7ca6f3","177fa228-9099-4dd5-8969-c67f9c78bd0c","d5ab0d7a-0123-473f-84d4-81740defb9b4","548f6d36-c509-4b79-9c4b-59f227c7f550","c0901673-4f5e-4e51-ad87-0217f2d33a0c","0787f8d6-dc99-47c6-946e-2b008814bebc","0ade5216-1103-486a-aff0-a709ff825b02","a2c4dd21-985c-497d-b421-c2d8a9ec0eeb","908a498c-f7e3-4668-8afd-f179a027b4d9","4945e5c3-033d-467c-a8b3-b1479c1fdf0a","854f4584-28d5-43bd-938e-88d0957c78e3","6a6574f8-d63d-4fed-99c5-38f3df0364ac"],"query2":{"filter":{"operator":"and"},"aggregations":[{"property":"title","aggregator":"count"}]},"space_id":"b0a64676-90b9-4734-9c63-2d704ee573b6"}}},"space":{},"notion_user":{},"collection_query":{},"signed_urls":{}},"emailHash":"d54f099771ff5f17709b76693f693e2e"},"__N_SSG":true}